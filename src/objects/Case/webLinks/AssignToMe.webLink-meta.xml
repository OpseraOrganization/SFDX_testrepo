<?xml version="1.0" encoding="UTF-8"?>
<WebLink xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>AssignToMe</fullName>
    <availability>online</availability>
    <displayType>button</displayType>
    <linkType>javascript</linkType>
    <masterLabel>Assign To Me</masterLabel>
    <openType>onClickJavaScript</openType>
    <protected>false</protected>
    <url>{!REQUIRESCRIPT(&quot;/soap/ajax/13.0/connection.js&quot;)} 
var caseid = &quot;{!Case.Id}&quot;; 
var userid = &quot;{!$User.Id}&quot;; 
var CaseToUpdate = new sforce.SObject(&quot;Case&quot;); 
CaseToUpdate.set(&quot;Id&quot;, caseid); 
CaseToUpdate.set(&quot;OwnerId&quot;, userid); 
var Result = sforce.connection.update([CaseToUpdate]);
 

var dpl = &quot;{!Case.Denied_Party_Alert__c}&quot;; 
if(dpl != &apos;&apos;){
window.open(&apos;/apex/Assigntome_Override?id={!Case.Id}&apos;,&apos;1363586444246&apos;,&apos;width=700,height=500,toolbar=0,menubar=0,location=0,status=1,scrollbars=1,resizable=1,left=0,top=0&apos;);
}
else{
    if(Result[0].getBoolean(&quot;success&quot;)){
       function redirect() { parent.frames.location.replace(&quot;/{!Case.Id}&quot;); } 
       redirect(); 
    }
    else{
       alert(&quot;Case owner cannot be changed&quot;); 
    }
}</url>
</WebLink>
