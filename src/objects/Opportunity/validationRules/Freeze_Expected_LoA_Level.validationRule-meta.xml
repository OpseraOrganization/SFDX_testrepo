<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>Freeze_Expected_LoA_Level</fullName>
    <active>true</active>
    <description>Freeze Expected LoA Level after Offer In Progress phase</description>
    <errorConditionFormula>!ISNEW() &amp;&amp;
	ISCHANGED( Expected_LoA_Approval_Level__c ) &amp;&amp;
	NOT( 
	  OR(
		AND( ISPICKVAL(StageName , &quot;Create Offer (Bid)&quot;), ISPICKVAL( Phase_Status__c , &quot;Offer in Progress&quot;)),
		ISPICKVAL(StageName , &quot;Develop Opportunity&quot;),
		ISPICKVAL(StageName , &quot;Identify Opportunity&quot;) 
	  )
	) &amp;&amp;
	$Profile.Name&lt;&gt; $Label.Data_Loader_Profile_Name &amp;&amp;
	$Profile.Name&lt;&gt; $Label.System_Admin_Profile  &amp;&amp;
	( RecordType.DeveloperName == &apos;Direct_Record_Type&apos; ||
	  RecordType.DeveloperName == &apos;Indirect_Record_Type&apos; )</errorConditionFormula>
    <errorDisplayField>Expected_LoA_Approval_Level__c</errorDisplayField>
    <errorMessage>Expected LoA Level cannot be edited after the &quot;Offer in Progress&quot; phase status</errorMessage>
</ValidationRule>
