<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>ATR_BGA_Run_Rate_Stage_Change_Restrict</fullName>
    <active>true</active>
    <errorConditionFormula>AND(NOT(ISNEW()), ISCHANGED(StageName),
not CONTAINS( $Profile.Name, &quot;API&quot; ),
not CONTAINS( $Profile.Name, &quot;System Admin&quot; ),
(OR(RecordType.Name ==&apos;BGA AM&apos;,RecordType.Name ==&apos;BGA AM Short Cycle&apos;,RecordType.Name==&apos;ATR_BGA Run Rate&apos;)),
HasOpportunityLineItem = False,
Win_Only_Opportunity__c = false,
NOT(ISPICKVAL (StageName, &apos;Prospecting&apos;)),
NOT(ISPICKVAL(StageName, &apos;Closed Lost&apos;)),
NOT(ISPICKVAL(StageName, &apos;Closed Cancelled&apos;))
)</errorConditionFormula>
    <errorDisplayField>Products__c</errorDisplayField>
    <errorMessage>Please add an Opportunity Product prior to proceeding past the Prospecting Stage</errorMessage>
</ValidationRule>
