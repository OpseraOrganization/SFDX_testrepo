<?xml version="1.0" encoding="UTF-8"?>
<WebLink xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>Create_GGP</fullName>
    <availability>online</availability>
    <displayType>button</displayType>
    <linkType>javascript</linkType>
    <masterLabel>Create GGP</masterLabel>
    <openType>onClickJavaScript</openType>
    <protected>false</protected>
    <url>{!REQUIRESCRIPT(&quot;/soap/ajax/19.0/connection.js&quot;)} 

var feedId=&apos;{!Feedback__c.Id}&apos;; 
var feed = sforce.connection.query(&quot;Select Id,Overall_Satisfaction_VOCSurvey__c, GGP_Number__c from Feedback__c where Id =&apos;&quot;+ feedId +&quot;&apos;&quot;); 

var feedrecord = feed.getArray(&apos;records&apos;); 
var overall = feedrecord[0].Overall_Satisfaction_VOCSurvey__c; 
var GGP = feedrecord[0].GGP_Number__c; 
var url= [location.protocol+&apos;//&apos;+location.host]+&apos;/apex/GGP_Redirect?feedid=&apos;+feedId; 

//if(overall == &apos;Red - Very Dissatisfied&apos; || overall==&apos;Yellow - Somewhat Dissatisfied&apos;){ 
if(GGP != &apos;&apos; &amp;&amp; GGP != null){ 
alert(&quot;Go Green Plan already exists for the record&quot;); 
}else{ 
window.parent.location.href =url; 
} 
//} 

//else{ 
//alert(&quot;Go Green Plan can be created only if the Overall Calculated Satisfaction is \&quot;Yellow - Somewhat Dissatisfied\&quot; or \&quot;Red - Very Dissatisfied\&quot; &quot;); 
//}</url>
</WebLink>
