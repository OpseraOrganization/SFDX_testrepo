<?xml version="1.0" encoding="UTF-8"?>
<WebLink xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>New</fullName>
    <availability>online</availability>
    <displayType>massActionButton</displayType>
    <linkType>javascript</linkType>
    <masterLabel>New</masterLabel>
    <openType>onClickJavaScript</openType>
    <protected>false</protected>
    <requireRowSelection>true</requireRowSelection>
    <url>{!REQUIRESCRIPT(&quot;/soap/ajax/19.0/connection.js&quot;)}
var CaseNumber=&apos;{!Case.CaseNumber}&apos;;
var URL=&apos;{!$Request.retURL}&apos;;
var CaseRec=&apos;{!Case.Id}&apos;;
var CaseId= URL.substring(1,16);
var CancelURL=&apos;/&apos;+CaseId;
//record type of case
var CaseRecordType =&apos;{!Case.Case_Record_Type__c}&apos;;
//associative array for recordtype
var vrecordtype= new Array();
vrecordtype[&quot;AOG&quot;]=&quot;AOG&quot;;
vrecordtype[&quot;D&amp;S Quotes Orders&quot;]=&quot;D&amp;S Quotes Orders&quot;;
vrecordtype[&quot;General&quot;]=&quot;General&quot;;
vrecordtype[&quot;Invoice Disputes&quot;]=&quot;Invoice-Disputes&quot;;
vrecordtype[&quot;Repair &amp; Overhaul&quot;]=&quot;Repair &amp; Overhaul&quot;;
vrecordtype[&quot;Returns&quot;]=&quot;Returns&quot;;
vrecordtype[&quot;Warranty&quot;]=&quot;Warranty&quot;;
vrecordtype[&quot;Orders&quot;]=&quot;Orders&quot;;
vrecordtype[&quot;Quotes&quot;]=&quot;Quotes&quot;;
vrecordtype[&quot;D&amp;S Clearing House Proposal&quot;]=&quot;DS Clearing House Proposal&quot;; 

//getting case data
var CaseLineItemRecordType = vrecordtype[CaseRecordType];

var result=sforce.connection.query(&quot;Select Id from RecordType where SobjectType = &apos;Case_Line_Item__c&apos; and name =&apos;&quot;+ CaseLineItemRecordType +&quot;&apos;&quot;);
var records1 = result.getArray(&apos;records&apos;);


var rec = records1[0];
var RecordTypeName = rec.Id;
RecordTypeName=RecordTypeName.substring(0,15);

//getting record type
parent.window.location.replace (&apos;/a1T/e?CF00N30000004rcoJ_lkid=&apos;+CaseId+&apos;&amp;CF00N30000004rcoJ=&apos;+CaseNumber+&apos;&amp;RecordType=&apos;+RecordTypeName+&apos;&amp;retURL=/&apos;+CaseRec+&apos;&amp;nooverride=1&apos;);</url>
</WebLink>
