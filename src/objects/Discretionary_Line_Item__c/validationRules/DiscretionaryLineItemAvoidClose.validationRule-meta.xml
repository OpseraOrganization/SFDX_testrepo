<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>DiscretionaryLineItemAvoidClose</fullName>
    <active>true</active>
    <errorConditionFormula>or(
AND(
ISNEW(),
Not(ISPICKVAL(Approval_Status__c , &apos;New&apos;)
)
),
AND(
NOT(ISNEW()),
ISCHANGED( Approval_Status__c ),
Not(ISPICKVAL(PRIORVALUE(Approval_Status__c) , &apos;Open&apos; )),
Not(ISPICKVAL(PRIORVALUE(Approval_Status__c) , &apos;Close&apos; )),
Not(ISPICKVAL(PRIORVALUE(Approval_Status__c) , &apos;Pending Close&apos; )),
ISPICKVAL(Approval_Status__c , &apos;Close&apos;),
$Profile.Name &lt;&gt; &quot;D&amp;S Sales Admin&quot;,
$Profile.Name &lt;&gt; &quot;CRM Admin&quot;,
$Profile.Name &lt;&gt; &quot;System Administrator&quot;, 
left( $Profile.Name , 30) &lt;&gt; &apos;Honeywell System Administrator&apos;
)
)</errorConditionFormula>
    <errorDisplayField>Approval_Status__c</errorDisplayField>
    <errorMessage>Discretionary Line Item Approval Status cannot be changed</errorMessage>
</ValidationRule>
