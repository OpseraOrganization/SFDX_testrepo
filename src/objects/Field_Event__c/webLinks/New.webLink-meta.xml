<?xml version="1.0" encoding="UTF-8"?>
<WebLink xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>New</fullName>
    <availability>online</availability>
    <displayType>massActionButton</displayType>
    <linkType>javascript</linkType>
    <masterLabel>New</masterLabel>
    <openType>onClickJavaScript</openType>
    <protected>false</protected>
    <requireRowSelection>true</requireRowSelection>
    <url>{!REQUIRESCRIPT(&quot;/soap/ajax/19.0/connection.js&quot;)}
var srequest=&apos;{!Service_Request__c.Id}&apos;;

var result=sforce.connection.query(&quot;Select Id,Name,Account_Name__c,Contact_Name__c,Contact_First_Name__c,Contact_Last_Name__c,Aircraft_Type__c,Aircraft_Tail_Number__c,Product_Type__c,Catalog_Product_Group__c,Supported_Product__c,Problem_Description__c from Service_Request__c where Id=&apos;&quot;+ srequest+&quot;&apos;&quot;);

var records1 = result.getArray(&apos;records&apos;);
var AccountName = records1[0].Account_Name__c;
var ContactFName = escape(records1[0].Contact_First_Name__c);
if(ContactFName==null)
{
ContactFName=&apos;&apos;;
}
var ContactLName = escape(records1[0].Contact_Last_Name__c);
if(ContactLName==null)
{
ContactLName=&apos;&apos;;
}
var AirCraftType = records1[0].Aircraft_Type__c;
var TailNumber = escape(records1[0].Aircraft_Tail_Number__c);
if(TailNumber==null)
{
TailNumber=&apos;&apos;;
}
var ProductType = escape(records1[0].Product_Type__c);
var CatalogProductGroup = escape(records1[0].Catalog_Product_Group__c);
var SupportedProduct= escape(records1[0].Supported_Product__c);
var Description = escape(records1[0].Problem_Description__c);
var sno = records1[0].Name;

if(AirCraftType!=null)
{
AirCraftType=AirCraftType.substring(0,15);
var airr=sforce.connection.query(&quot;Select Id,Name from Platform__c where Id =&apos;&quot;+ AirCraftType+&quot;&apos;&quot;);
var records2 = airr.getArray(&apos;records&apos;);
var AirCraftName =escape(records2[0].Name);

}



if(AccountName!=null)
{
AccountName=AccountName.substring(0,15);
var acc=sforce.connection.query(&quot;Select Id,Name from Account where Id =&apos;&quot;+ AccountName+&quot;&apos;&quot;);
var records3 = acc.getArray(&apos;records&apos;);
var AccName =escape(records3[0].Name);

}

if(AirCraftType!=null &amp;&amp;AccountName!=null )
{

parent.window.location.replace (&apos;/a1W/e?CF00N30000004rcze=&apos;+AccName+&apos;&amp;CF00N30000004rczx=&apos;+ContactFName+  &quot; &quot;+ContactLName+&apos;&amp;CF00N30000004rczj=&apos;+AirCraftName+&apos;&amp;00N30000004rczi=&apos;+TailNumber+&apos;&amp;00N30000004rd0S=&apos;+ProductType+&apos;&amp;00N30000004rczp=&apos;+CatalogProductGroup +&apos;&amp;00N30000004rd0i=&apos;+SupportedProduct+&apos;&amp;00NQ0000000jQbBMAU=&apos;+Description+&apos;&amp;CF00N30000004rd0f=&apos;+sno+&apos;&amp;retURL=/&apos;+srequest+&apos;&amp;nooverride=1&apos;);
}
else if(AirCraftType!=null)
{
parent.window.location.replace (&apos;/a1W/e?CF00N30000004rczx=&apos;+ContactFName+  &quot; &quot;+ContactLName+&apos;&amp;CF00N30000004rczj=&apos;+AirCraftName+&apos;&amp;00N30000004rczi=&apos;+TailNumber+&apos;&amp;00N30000004rd0S=&apos;+ProductType+&apos;&amp;00N30000004rczp=&apos;+CatalogProductGroup +&apos;&amp;00N30000004rd0i=&apos;+SupportedProduct+&apos;&amp;00NQ0000000jQbBMAU=&apos;+Description+&apos;&amp;CF00N30000004rd0f=&apos;+sno+&apos;&amp;retURL=/&apos;+srequest+&apos;&amp;nooverride=1&apos;);
}
else if(AccountName!=null)
{
parent.window.location.replace (&apos;/a1W/e?CF00N30000004rcze=&apos;+AccName+&apos;&amp;CF00N30000004rczx=&apos;+ContactFName+  &quot; &quot;+ContactLName+&apos;&amp;00N30000004rczi=&apos;+TailNumber+&apos;&amp;00N30000004rd0S=&apos;+ProductType+&apos;&amp;00N30000004rczp=&apos;+CatalogProductGroup +&apos;&amp;00N30000004rd0i=&apos;+SupportedProduct+&apos;&amp;00NQ0000000jQbBMAU=&apos;+Description+&apos;&amp;CF00N30000004rd0f=&apos;+sno+&apos;&amp;retURL=/&apos;+srequest+&apos;&amp;nooverride=1&apos;);
}
else if(AirCraftType==null &amp;&amp;AccountName==null )
{

parent.window.location.replace (&apos;/a1W/e?CF00N30000004rczx=&apos;+ContactFName+  &quot; &quot;+ContactLName+&apos;&amp;00N30000004rczi=&apos;+TailNumber+&apos;&amp;00N30000004rd0S=&apos;+ProductType+&apos;&amp;00N30000004rczp=&apos;+CatalogProductGroup +&apos;&amp;00N30000004rd0i=&apos;+SupportedProduct+&apos;&amp;00NQ0000000jQbBMAU=&apos;+Description+&apos;&amp;CF00N30000004rd0f=&apos;+sno+&apos;&amp;retURL=/&apos;+srequest+&apos;&amp;nooverride=1&apos;);
}</url>
</WebLink>
