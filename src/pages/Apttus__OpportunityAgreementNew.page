<!-- 
    Apttus Contract Management
    OpportunityAgreementNew
     
    @2009-2014 Apttus Inc. All rights reserved.

 -->
<apex:page standardController="Opportunity" 
		   extensions="Apttus.OpportunityAgreementNewController" >
		   
	<script language="Javascript">
        
        function SubmitOnClick (objSubmitBtn) {
             var isFirefox = typeof InstallTrigger !== 'undefined';
             var isChrome = !!window.chrome && !!window.chrome.webstore;
             
             if(isFirefox == true){
                 objSubmitBtn.className = 'btnDisabled';
             }
             else if(isChrome == true){
                 objSubmitBtn.disabled = true;
                 objSubmitBtn.className = 'btnDisabled';
                 doSubmit();
             }
             else{
                 objSubmitBtn.className = 'btnDisabled';
             }
            return true;
        }
        
    </script>       
	
	<apex:form >
		<!--  required fields -->
		<apex:outputText value="{!Opportunity.Name}" rendered="false"/>
		<apex:outputText value="{!Opportunity.AccountId}" rendered="false"/>
		<apex:outputText value="{!Opportunity.Description}" rendered="false"/>
		<apex:outputText value="{!Opportunity.OwnerId}" rendered="false"/>
		<apex:outputText value="{!Opportunity.Amount}" rendered="false"/>
		<apex:outputText value="{!Opportunity.CloseDate}" rendered="false"/>
		
      	<apex:pageBlock rendered="{!NOT(isInitialized) && NOT(hasErrors)}">
			<apex:pageBlockButtons location="bottom">
				<apex:commandButton value="{!$Label.apttus__continue}" onclick="return SubmitOnClick(this);" action="{!onLoad}" />
				<apex:commandButton value="{!$Label.apttus__cancel}" action="{!doCancel}" immediate="true" />
		    </apex:pageBlockButtons>
		    <apex:pageBlockSection title="{!$Label.apttus__newagreement}" columns="2" collapsible="false">
				<apex:outputField value="{!AgreementSO.Name}"/>
				<apex:outputField value="{!AgreementSO.Apttus__Status_Category__c}"/>
		    </apex:pageBlockSection>
		</apex:pageBlock>
		
		<apex:pageBlock mode="edit" rendered="{!hasErrors}" >
			<apex:pageMessages />
			<apex:pageBlockButtons location="bottom" >
				<apex:commandButton action="{!doCancel}" value="{!$Label.apttus__cancel}" immediate="true"/>
			</apex:pageBlockButtons>
		</apex:pageBlock>
		
		<apex:actionFunction name="doSubmit" action="{!onLoad}" />
		
	</apex:form>
	
</apex:page>