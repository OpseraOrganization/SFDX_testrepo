<apex:page cache="false" expires="10" showHeader="false" controller="SPEX_Inv_Platform_Detail_cls" standardStylesheets="false">
<html lang="en" style="height:100%">
<head>
<meta charset="utf-8" />
<meta name="format-detection" content="telephone=no" />
<title>SPEX Dashboard | Platform Details: {!objSPEXDTO_cls.strPlatform}</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta http-equiv="refresh" content="900" />

<!-- Le styles -->
<link href="{!URLFOR($Resource.db_bootstrap_zip, 'css/bootstrap.css')}" rel="stylesheet" type="text/css" />
<link href="{!URLFOR($Resource.db_bootstrap_zip, 'css/bootstrap-responsive.css')}" rel="stylesheet" type="text/css" />
<style type="text/css">
.graphLabelstackedGraph, .graphValuestackedGraph {
    font-size: 120%;
    font-weight: bold;
    margin-bottom: 15px;
    margin-top: 5px;
}
a.btn.btn-small {
    margin-top: 5px;
}
</style>
    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>-->
    <c:lt_IE9_check />
    <!--[endif]-->
   
    <!-- Header Scripts -->
    <script type="text/javascript" src="{!URLFOR($Resource.db_bootstrap_zip, 'js/jquery.js')}"></script>    
    <script type="text/javascript" src="{!URLFOR($Resource.db_bootstrap_zip, 'js/bootstrap-modal.js')}"></script>
    <script type="text/javascript" src="{!URLFOR($Resource.db_bootstrap_zip, 'js/bootstrap-collapse.js')}"></script>
    <script type="text/javascript" src="{!URLFOR($Resource.db_bootstrap_zip, 'js/jquery.cookie.js')}"></script>    
    <script type="text/javascript" src="{!URLFOR($Resource.db_bootstrap_zip, 'js/SPEX-scripts.js')}"></script>
    <script type="text/javascript" src="{!URLFOR($Resource.db_bootstrap_zip, 'js/jqBarGraph.1.1.min.js')}"></script>
    <script type="text/javascript">       
    stackedByArea = new Array(
        [[{!objSpexStatusDto.intAmerSafePlatforms},{!objSpexStatusDto.intAmerAtRiskPlatforms},{!objSpexStatusDto.intAmerStockOutPlatforms}],'Americas'],
        [[{!objSpexStatusDto.intEmeaSafePlatforms},{!objSpexStatusDto.intEmeaAtRiskPlatforms},{!objSpexStatusDto.intEmeaStockOutPlatforms}],'EMEAI'],
        [[{!objSpexStatusDto.intApacSafePlatforms},{!objSpexStatusDto.intApacAtRiskPlatforms},{!objSpexStatusDto.intApacStockOutPlatforms}],'APAC']
    );
    if($.cookie('device')){
    
        var dragging = false;
        var posY;
        var startingTime;
        
        disableSelection = function(target) {
            //For IE This code will work
            if (typeof target.onselectstart!="undefined")
            target.onselectstart=function(){return false}
            
            //For Firefox This code will work
            else if (typeof target.style.MozUserSelect!="undefined")
            target.style.MozUserSelect="none"
            
            //All other  (ie: Opera) This code will work
            else
            target.onmousedown=function(){return false}
            target.style.cursor = "default"
        }
    
        disableSelection( document.body );
    
        $('body').mousedown(function(event){
          posY = event.pageY;
          dragging = true;
        });
    
        $('body').mouseup(function() {
          dragging = false;
        });
    
        $('body').mousemove(function(event) {
          if(dragging) window.scrollBy(0, (posY>event.pageY?10:-10));/*(posY>event.pageY?10:-10)*/
        });
    
    }
    </script>
    <!--
    <script type="text/javascript" src="http://www.google.com/jsapi"></script>
    <script type="text/javascript">
      google.load('visualization', '1', {packages: ['corechart']});
      
      function drawVisualization() {
        // Create and populate the data table.
        
        var data = google.visualization.arrayToDataTable([
          ['Stock', 'Parts'],
          ['In-Stock', {!objSpexStatusDto.intAmerSafePlatforms}],
          ['At-Risk', {!objSpexStatusDto.intAmerAtRiskPlatforms}],
          ['Stock Out', {!objSpexStatusDto.intAmerStockOutPlatforms}]
        ]);
        
        var data_em = google.visualization.arrayToDataTable([
          ['Stock', 'Parts'],
          ['In-Stock', {!objSpexStatusDto.intEmeaSafePlatforms}],
          ['At-Risk', {!objSpexStatusDto.intEmeaAtRiskPlatforms}],
          ['Stock Out', {!objSpexStatusDto.intEmeaStockOutPlatforms}]
        ]);
        
        var data_ap = google.visualization.arrayToDataTable([
          ['Stock', 'Parts'],
          ['In-Stock', {!objSpexStatusDto.intApacSafePlatforms}],
          ['At-Risk', {!objSpexStatusDto.intApacAtRiskPlatforms}],
          ['Stock Out', {!objSpexStatusDto.intApacStockOutPlatforms}]
        ]);
      
        // Create and draw the visualization.
        //new google.visualization.PieChart(document.getElementById('visualization')).draw(data, {is3D:true, colors:['#19BD00','#F5CC00','#D7250D'],backgroundColor:'none',legend:{position:'none'}});
        new google.visualization.PieChart(document.getElementById('visualization_am')).draw(data, {is3D:true, colors:['#19BD00','#F5CC00','#D7250D'],backgroundColor:'transparent',legend:{position:'none'},title:"Americas",titleTextStyle:{color: 'white'}});
        new google.visualization.PieChart(document.getElementById('visualization_em')).draw(data_em, {is3D:true, colors:['#19BD00','#F5CC00','#D7250D'],backgroundColor:'transparent',legend:{position:'none'},title:"EMEAI",titleTextStyle:{color: 'white'}});
        new google.visualization.PieChart(document.getElementById('visualization_ap')).draw(data_ap, {is3D:true, colors:['#19BD00','#F5CC00','#D7250D'],backgroundColor:'transparent',legend:{position:'none'},title:"APAC",titleTextStyle:{color: 'white'}});

        /* IE Fix */
        $("iframe").each( function(){
            $(this).contents().find("body").css("background-color","transparent")
        });
        /* IE Fix */
      }
      google.setOnLoadCallback(drawVisualization);
    </script>
    -->
    <link href="{!URLFOR($Resource.db_bootstrap_zip, 'css/SPEXdashboard-responsive.css')}" rel="stylesheet" type="text/css" />

</head>

<body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
            
          <div class="container-fluid visible-desktop">
            <div class="row-fluid">
              <div class="span2" style="width:auto">
                <a class="btn btn-large" href="javascript:window.history.back()"><i class="icon icon-chevron-left"></i> Back</a>
              </div>
              <div class="span4">
                <h1 style="font-weight: normal;padding-top: 8px;">SPEX - Platform Info</h1>
              </div>
              <p class="navbar-text pull-right">
                <span class="last_updated pull-left">Last Updated: {!dtRefreshTime}&nbsp;MST</span>
                <a class="btn btn-large pull-right" data-target="#myModal" data-toggle="modal"><i class="icon icon-info-sign"></i> Legend</a>
              </p>
            </div>
          </div>
          
          <div class="container hidden-desktop">      
              <a data-target=".nav-collapse" data-toggle="collapse" class="btn btn-navbar">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </a>
              <a href="#" class="brand">SPEX - Platform Info</a>
              <div class="nav-collapse collapse">
                <ul class="nav">
                  <li><a href="javascript:window.history.back()"><i class="icon-white icon-chevron-left"></i> Back</a></li>
                  <li><a href="SPEX_Dashboard_CriticalParts"><i class="icon-white icon-wrench"></i> Critical Parts</a></li>
                  <li><a href="SPEX_Dashboard_OEM"><i class="icon-white icon-plane"></i> View by OEM</a></li>
                  <li class="nav-header">Last Updated: {!dtRefreshTime}</li>
                  <li><a href="#" data-toggle="modal" data-target="#myModal"><i class="icon-white icon-info-sign"></i> Legend</a></li>
                  <li><a href="../Dashboards"><i class="icon-white icon-home"></i> Home - Intelligence Center</a></li>
                </ul>
              </div><!--/.nav-collapse -->        
          </div>
          
      </div>  
    </div>

  <div class="container-fluid">
    
    <div class="row-fluid">
    
      <div class="span4 affix">
        <div class="thumbnail" style="margin-bottom: 0px;">
          <img src="{!URLFOR($Resource.db_bootstrap_zip, objSPEXDTO_cls.strOEMImgFileName)}" style="margin-bottom:20px;width:70%;max-width:500px;" />
          <img alt="{!objSPEXDTO_cls.strPlatform}" src="{!URLFOR($Resource.db_bootstrap_zip, objSPEXDTO_cls.strImgFileName)}" />
          <div class="caption">
            <h2 style="text-align:center;">
            {!objSPEXDTO_cls.strPlatform}
            </h2>
          </div>
        </div>
        <hr class="hidden-phone" style="margin-top: 0px;"/>
        <div id="stackedGraph"></div>
        <!--
        <div class="thumbnail" id="charter">          
          <h3 style="text-align:center;">SPEX Inventory Health:</h3>
          <div id="visualization"></div>
          <script type="text/javascript">
          $('#visualization1').width($('#charter').width());           
          $('#visualization1').height($('#charter').width()*.7);
          </script>
        </div>
        -->
      </div>
      
      <div class="span8 affix-side">
        <!--
        <div class="span4" id="visualization_am"></div>
        <div class="span4" id="visualization_em"></div>
        <div class="span4" id="visualization_ap"></div>
          <script type="text/javascript">
          $('#visualization_am').height($('#visualization_am').width()*.7);
          $('#visualization_em').height($('#visualization_em').width()*.7);
          $('#visualization_ap').height($('#visualization_ap').width()*.7);
          </script>
        -->
        <table class="table table-striped">
          <thead>
          <tr>
            <th style="width:70%;text-align:center">Stock Out</th>
            <th style="width:10%;text-align:center">Amer<span class="hidden-phone">icas</span></th>
            <th style="width:10%;text-align:center">EMEAI</th>
            <th style="width:10%;text-align:center">APAC</th>
          </tr>
          </thead>
          <tbody>
              <apex:OutputText rendered="{!lstStockOutSpexDto==null || lstStockOutSpexDto.empty}">
                  <tr><td colspan = '4' style="background-image: none; padding-bottom: 5%;padding-top: 5%;text-align: center;"><h3>All current orders for this platform can be fulfilled</h3></td></tr>
              </apex:outputText>
              <apex:repeat value="{!lstStockOutSpexDto}" var="queryResultsRow">              
                  <tr>
                    <td width="100px">{!queryResultsRow.strPartNo}<apex:OutputText value=": " rendered="{!queryResultsRow.strPartDesc!=null}" />    
                        <span class="part">{!queryResultsRow.strPartDesc}</span>                    
                        <apex:OutputText value="" rendered="{!queryResultsRow.bolAOGPart}" >
                        <a href="AOG_Case?CASE={!queryResultsRow.strCaseId}" data-toggle="modal" data-target="#aogModal" class="btn btn-small">                        
                            <i class="icon-search"></i> View AOG
                        </a>  
                        </apex:OutputText>                                           
                    </td>
                    <td style="text-align:center"><span class='{!queryResultsRow.strAmerStatus}'>&nbsp;</span></td>
                    <td style="text-align:center"><span class='{!queryResultsRow.strEmeaStatus}'>&nbsp;</span></td>
                    <td style="text-align:center"><span class='{!queryResultsRow.strApacStatus}'>&nbsp;</span></td>
                  </tr>
              </apex:repeat>
          </tbody>
        </table>
        
        <table class="table table-striped">
          <thead>
          <tr>
            <th style="width:70%;text-align:center">At-Risk parts</th>
            <th style="width:10%;text-align:center">Amer<span class="hidden-phone">icas</span></th>
            <th style="width:10%;text-align:center">EMEAI</th>
            <th style="width:10%;text-align:center">APAC</th>
          </tr>
          </thead>
          <tbody>
          <apex:OutputText rendered="{!lstAtRiskSpexDto==null || lstAtRiskSpexDto.empty}">
          <tr><td colspan = '4' style="background-image: none; padding-bottom: 5%;padding-top: 5%;text-align: center;"><h3>Currently there are no parts at risk for this platform</h3></td></tr>
          </apex:outputText>
              <apex:repeat value="{!lstAtRiskSpexDto}" var="queryResultsRow">
                  <tr>
                    <td>{!queryResultsRow.strPartNo}
                        <apex:OutputText value=": " rendered="{!queryResultsRow.strPartDesc!=null}" />
                        <span class="part">{!queryResultsRow.strPartDesc}</span>
                        <apex:OutputText value="" rendered="{!queryResultsRow.bolAOGPart}" >                        
                        <a href="AOG_Case?CASE={!queryResultsRow.strCaseId}" data-toggle="modal" data-target="#aogModal" class="btn btn-small">
                        <!--<apex:OutputText value="" rendered="true" >
                        <a href="AOG_Case?CASE=500Q0000003ZkExIAK">-->
                            <i class="icon-search"></i> View AOG
                        </a>  
                        </apex:OutputText>  
                    </td>
                    <td style="text-align:center"><span class='{!queryResultsRow.strAmerStatus}'>&nbsp;</span></td>
                    <td style="text-align:center"><span class='{!queryResultsRow.strEmeaStatus}'>&nbsp;</span></td>
                    <td style="text-align:center"><span class='{!queryResultsRow.strApacStatus}'>&nbsp;</span></td>
                  </tr>
              </apex:repeat>
          </tbody>
        </table>
        
      </div>
          
    </div>

  </div> <!-- /container -->
  
    <div id="myModal" class="modal hide">
        <div class="modal-header">
            <h3>SPEX Legend</h3>
            <h4>What do these colors mean?</h4>
        </div>
        <div class="modal-body">
            <div style="padding:5px;" class="row-fluid"><div class="span3"><span class="val red">&nbsp;</span></div> Out of Stock; Order(s) for this platform pending.</div>
            <div style="padding:5px;" class="row-fluid"><div class="span3"><span class="val yellow">&nbsp;</span></div> Out of Stock; No Order(s) for this platform.</div>
            <div style="padding:5px;" class="row-fluid"><div class="span3"><span class="val grey">&nbsp;</span></div> Part not planned for regional stocking and regional inventory&nbsp;>=&nbsp;regional demand.</div>
            <div style="padding:5px;" class="row-fluid"><div class="span3"><span class="val green">&nbsp;</span></div> Stock Available.</div>
            <div style="padding:5px;" class="row-fluid"><div class="span3"><a class="btn btn-small" style="cursor:default"><i class="icon-search"></i> View AOG</a></div> Click for AOG details.</div>
        </div>
        <div class="modal-footer">
            <a class="btn btn-large btn-danger" data-dismiss="modal" href="#">Close</a>
        </div>
    </div>

    <div id="aogModal" class="modal hide">
        <div class="modal-body">
        </div>
    </div>
<!-- Le javascript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script type="text/javascript">
    $("#stackedGraph").jqBarGraph({
        data: stackedByArea,
        barSpace: 20,
        colors: ['#19BD00','#F5CC00','#D7250D'],
        legends: ['In Stock','At Risk','Stock Out'],
        legend: false,
        postfix: " parts",
        title: "<h2 style='margin-bottom:10px'>SPEX Inventory Health</h2>",
        showValues: false,
        width: $("#stackedGraph").width()*.9,
        height: ($('#stackedGraph').width()*.8)
    });
    $('#aogModal').on('show', function () {
        if( $(".affix").css('position')== 'static' && !$("link[href='{!URLFOR($Resource.db_bootstrap_zip, 'css/dashboard-responsive-IE8.css')}']").length )$("#aogModal").css('top',$(window).scrollTop()+'px');
        $('#aogModal').html("<div class='modal_loader'></div>");
    });
</script>
<script type="text/javascript" src="{!URLFOR($Resource.db_bootstrap_zip, 'js/bootstrap-tooltip.js')}"></script>
<script type="text/javascript">
    $('.stckdBr').tooltip({placement:'right'});
</script>
</body>
</html>
<apex:insert name="footer">
        <c:honeywellFooter />
</apex:insert>

</apex:page>