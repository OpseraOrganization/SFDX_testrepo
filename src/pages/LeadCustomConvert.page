<apex:page standardController="Lead" extensions="CustomConvertController"  id="CCLeadPage">
 <apex:form id="CCLeadForm">
 <apex:sectionHeader title="Convert Lead" subtitle="{!Lead.Name}"/>
 <apex:pageBlock mode="Edit" id="ccLeadPB">
 <apex:actionFunction name="updateLead" action="{!save}" reRender="CCLeadForm"/>
 <apex:pageblockButtons >
     <apex:commandButton value="Convert" rendered="{!lead.Opportunity_Name__c == null}" action="{!saveLead}" rerender="ccLeadPB"/><!-- Opporutunity rec read mode-->
     <apex:commandButton value="Convert" rendered="{!lead.Opportunity_Name__c != null}" action="{!saveLeadWithOpportunity}" oncomplete="window.open('/{!lead.id}','_self'); return false;" rerender="ccLeadPB"/><!-- Lead rec update-->
     <apex:commandButton value="Cancel" action="/{!lead.id}"/>
 </apex:pageblockButtons>
 <apex:pageBlockSection columns="1" title="Convert Lead" id="ccLeadPBS">
     <apex:outputField value="{!lead.ownerid}" label="Record Owner"/>
     <apex:outputField value="{!lead.Account__c}" label="Account Name"/>
     <apex:outputField value="{!lead.Contact__c}" label="Contact Name"/>
     <apex:inputField id="oppNameInput" value="{!lead.New_Opportunity__c}" label="New Opportunity" rendered="{!lead.Opportunity_Name__c == null}" required="true"/>
     <apex:outputField value="{!lead.Opportunity_Name__c}" label="Opportunity Name" rendered="{!lead.Opportunity_Name__c != null}"/>
</apex:pageBlockSection>
 </apex:pageBlock>
 </apex:form> 
 
</apex:page>