<apex:page >
<!--<apex:page controller="SSCommunityCases_Cntrl" sidebar="false" showHeader="false" standardStylesheets="false" title="Cases" cache="false" docType="html-5.0" applyHtmlTag="false">
-->
    <!--<html class="no-js" lang="en">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Technical Community</title>    
    <link href="{!URLFOR($Resource.TSSCommunity_New,'css/hon-dls.min.css')}" rel="stylesheet" />
    <link href="{!URLFOR($Resource.TSSCommunity_New,'css/hon-dls_aero.min.css')}" rel="stylesheet" />
    <link href="{!URLFOR($Resource.TSSCommunity_New,'css/hon-dls_aero_tkc.min.css')}" rel="stylesheet" />
    <link href="{!URLFOR($Resource.TSSCommunity_New,'css/star-rating.css')}" rel="stylesheet" />
    <style>
    .icon-speech-bubble 
    {
    color:#fff;
    }
    .maindivback
    {
        background-image: url({!$Resource.TSSBackgroundImage});
    }
    .rating-loading{width:25px;height:25px;font-size:0;color:#fff;border:none}.loading{border-radius:50%;width:80px;height:80px;border:.35rem solid rgba(255,255,255,.2);border-top-color:#fff;animation:spin 1s infinite linear;position:absolute;top:50%;left:50%;margin:-40px auto auto -40px}
   .containerstyle
   {
    background-image:url({!$Resource.TSSBackgroundImage});
    height: 627px;
    }
    .well {
    width: 100%;
   }
   </style>
</head>
<body>
<div class="wrapper ">
    <!-- Header Component --
    <c:DLS_Header />
    <!-- / Header Section --
    <div class="container">
    <!--TCS- Added to provide feedback and comment on article--
     <apex:form style="position:relative;">
     <div class="row" style = "margin-top: 20px;">
     <div id="Qst">
     Did this Article help resolve your issue?
     </div>
     <div id="thumbs"> 
     <label>
       
       <apex:selectRadio value="{!rateIds1}" id="Yes" style="visibility: hidden; position: absolute;">
       <apex:selectOptions value="{!items1}" />
      <!-- <apex:actionsupport event="onclick" action="{!updateArticleValues}"  rerender="counter3,counter4" status="actStatusId">--
       <div class="imgfocus">
       <img src="{!URLFOR($Resource.Like_Before)}" width="25" height="25" class="image" id="imagechange" onclick="changeImage1();showComment('Yes');"/></div>  
       <!--<apex:param name="select"  value="Yes" />-->
     <!-- </apex:actionsupport>--
       </apex:selectRadio>
       
       </label>     
      
       <label>
       <apex:selectRadio value="{!rateIds2}" id="No" style="visibility: hidden; position: absolute;">
       <apex:selectOptions value="{!items2}"/>
      <!-- <apex:actionsupport event="onclick" action="{!updateArticleValues}"  rerender="counter3,counter4" status="actStatusId">--
       <img src="{!URLFOR($Resource.Dislike_Before)}" width="25" height="25" class="image" id="imagechangeD" onclick="changeImage2();showComment('No');"/>
      <!-- <apex:param name="select"  value="No" />-->
       <!--</apex:actionsupport>--
       </apex:selectRadio>
       </label>  
       </div>
     
     
     
     <!--<div id="box" style="display: none;">--<div id="box">Please let us know how we can improve</div>
     
     </div>
     

     <div id="box1">
     <apex:inputTextarea value="{!mytext}" style="width: 304px; height: 52px;"  id="commentBox"/><div id="thanks" style="float:right;vertical-align: middle;line-height: 50px;display:none;color:red;">*Thank you for your Feedback</div><div id="thanksCom" style="float:right;vertical-align: middle;line-height: 50px;display:none;color:red;">*Please provide comment</div>
     </div>
     <div id="box2" style= "display: none;">
   
     <apex:commandLink value="SUBMIT" action="{!updateArticleValues}" style="padding: 0px 0px;font-size: 12px;margin-bottom:20px;" onclick="return validationAlert();">
     <apex:param name="select1"  value="No" assignTo="{!istrue}"/>
     </apex:commandLink>
     </div> 
     
     <div id="box3" style= "display: none;"   >
     <apex:commandLink value="SUBMIT" action="{!updateArticleValues}" style="padding: 0px 0px;font-size: 12px;margin-bottom:20px;" onclick="thanksAlert();">
     <apex:param name="select2"  value="Yes" assignTo="{!istrue}"/>
     </apex:commandLink>
     </div>      
     <!--TCS- change ended for faeedback and comment--   
     </apex:form>            
        <!-- Tab panes --
        <div class="tab-content">                     
                                        
                <div id="Knowledgesummarydetails">              
                </div>           
            <div id="CaseViewDetails"></div>
        </div>
    </div>
    <span id="j_id0:j_id11" style="margin-bottom: 51px;"/>
    <!-- /.container --

</div> 
    <script type="text/javascript">
        if (!window._laq) {
            window._laq = []; 
        }
        window._laq.push(function(){
            liveagent.showWhenOnline('57313000000PWtm', document.getElementById('liveagent_button_online_57313000000PWtm'));
            liveagent.showWhenOffline('57313000000PWtm', document.getElementById('liveagent_button_offline_57313000000PWtm'));
            liveagent.setChatWindowHeight(380);
            liveagent.setChatWindowWidth(600);
        });
    </script>
    <script type='text/javascript' src='https://c.la4-c1cs-chi.salesforceliveagent.com/content/g/js/37.0/deployment.js'></script>
    <script type='text/javascript'>
    liveagent.init('https://d.la4-c1cs-chi.salesforceliveagent.com/chat', '57213000000PWeY', '00D560000008mxZ');
    </script>
   <script type="text/javascript" src="{!URLFOR($Resource.TSSCommunity_New,'js/hon-dls.min.js')}"></script>
   <script type="text/javascript" src="{!URLFOR($Resource.TSSCommunity_New,'js/hon-dlsnew.min.js')}"></script>
    <script type="text/javascript" src="{!URLFOR($Resource.TSSCommunity_New,'js/hon-dls-bootstro.lib.min.js')}"></script>
    <script type="text/javascript" src="{!URLFOR($Resource.TSSCommunity_New,'js/star-rating.js')}"></script>
    <script type="text/javascript">
    $(document).ready(function() 
    {   
    
    window.$Label = window.$Label || {};    
            $Label.TSSTechSolutionId = '{!JSENCODE($Label.TSSTechSolutionId)}';         
            $Label.TSSTechVideosId = '{!JSENCODE($Label.TSSTechVideosId)}';         
            $Label.TSSCASMessageId = '{!JSENCODE($Label.TSSCASMessageId)}';         
            $Label.TSSKACMessageId = '{!JSENCODE($Label.TSSKACMessageId)}';         
            console.log('label '+$Label.TSSTechSolutionId);   
        var id= '{!cka}' ;
        //alert('articleid--'+id);
        if(id.substring(0,2) =='ka'){
        getKnowledgedetailConfirm(id);
        }
        if(id.substring(0,2) =='kA')
        {
        //alert('articleid'+id);
        getKnowledgedetailConfirm(id);
        }
        if(id.substring(0,3) =='500'){
        SearchCasedetails(id);
        }
        
        
    });   
    </script>
    <script>
    Visualforce.remoting.timeout = 120000;      
    $(document).ready(function()    
    {    
        $(".rating-gly").click( function(){
            console.log('::::::clicked:::::');
        });
        SSCommunityCases_Cntrl.getUserIsEmloyee(function(result, event)
        {
            //alert('--' +result);
            if(event.status){
                if(result != null){
                    if(result == false)
                    {                       
                        $('#non_emp_allcases').hide();
                        $('#non_emp_allSr').hide();
                    }
                    else
                    {
                        
                    }
                }
            }
        });   
        SSCommunityCases_Cntrl.aircraftValues(function(result, event)
        {
            //alert('--' +result);
            var aircaftvalues='';
            if(event.status){
                if(result != null){
                    $.each(result, function(index,value){
                       aircaftvalues+='<li><a href="#">'+value+'</a></li>';   
                        
                    });
                    //$('#mycasesAircraftValues').html(aircaftvalues); 
                    
                }
            }
        });   
        SSCommunityCases_Cntrl.productTypeValues(function(result, event)
        {
            //alert('--' +result);
            var productTypeValues='';
            if(event.status){
                if(result != null){
                    $.each(result, function(index,value){
                       productTypeValues+='<li><a href="#">'+value+'</a></li>';   
                        
                    });
                }
            }
        });  
       
        $('#CaseDetailDiv').hide(); 
        $('#CaseDetailSearchDiv').hide();
        $('#Knowledgedetaildiv').hide();
        $('#CaseDetailspanel').hide();
        $('#CaseSRDetailspanel').hide();
        $('#idFromDate').datepicker({ 
            dateFormat: 'mm/dd/yy',            
            buttonImage: '{!URLFOR($Resource.TSSCommunityRes,'images/calendar-pick.gif')}',
            buttonImageOnly: true,
            changeMonth: true,
            changeYear: true,
            showOn: 'both'           
        }).datepicker("setDate", "0");       
        $('#idToDate').datepicker({ 
            dateFormat: 'mm/dd/yy',          
            buttonImage: '{!URLFOR($Resource.TSSCommunityRes,'images/calendar-pick.gif')}',
            buttonImageOnly: true,
            changeMonth: true,
            changeYear: true,
            showOn: 'both'
            
        }).datepicker("setDate", "0");
        
        SearchClicked = false;        
        CookieCheck();
        if(NewLoad == true) {
            $('#idExportWarning').modal({
                show:true,
                closeOnEscape: true
            });
        }   
    });
    
    var tableData;
    function exportToExcel(filter)
    {
        generateReport();
        //alert('export to excel'+filter);
    }
    
    function searchResultsFiltering(filtervalues)
    {    
        if(filtervalues == 'category_all')
        {
            //alert('inside thec all if block');
            $('#category_solutions').prop('checked', false);
                $('#category_yourcases').prop('checked', false);
                $('#category_yourcompany').prop('checked', false);
                $('#category_videos').prop('checked', false);
                $('#category_cas').prop('checked', false);
                $('#category_servreq').prop('checked', false);
        }
        ResultsIndex = 0;
        MainSearchFunction();
     }
    
    function MainSearchFunction() {  
        var inputcheck = $('#SearchTextId').val();
        // alert('inside the mainsearchfunction'+inputcheck); 
       if(inputcheck != '') { 
            if((inputcheck.length <= 3 && inputcheck.indexOf("*") != -1) || inputcheck.length < 3) {  
                $("a[href='#tab_searchres']").show().tab('show');              
                $('#RenderSolutionsTab1').show();
                $('#RenderSolutionsTab1').html('Search term must be longer than two alphabets.');
            }
            else {         
                caseSearch();
            }
            }
    }
    
   
   function exportRedirect(){
        var SearchPlatform ='';
        var exportUrl='/SSCommunity/apex/SSCommunitySolExcelReport?param1=';
        var searchtype1= $('#SearchTypeId').val();
        if(searchtype1=='CAS_Maintenance_Message_Article__kav')
       {
        SearchPlatform= $('#SearchPlatform').val();
        if(SearchPlatform == 'ALL')
            SearchPlatform='';
       }
        searchtype1=searchtype1+':'+SearchPlatform;
        
        exportUrl =exportUrl+searchtype1+'&&param2=';
        
        var searchString = $('#SearchTextId').val();
        exportUrl  =exportUrl  +searchString ;
        window.open(exportUrl , '_blank');   
    }
    
    // Declaring variables for caseSearch
    var CasesIndex = 0;
    var SolutionsIndex = 0;
    var ResultsIndex = 0;
    
    // Declaring Arrays for caseSearch
    var ResultsArray = [];
    var SolutionsArray = [];
    var CasesArray = [];
    var SOSLResult; 
    var contactid='';
    var accountid='';
    var SortVar = 'lastUpdated';
    var aircraftType= 'All';
    var productType='All';
    function caseSearch() {
     $('body').loading();
       var SearchPlatform ='';
       
        CasesIndex = 0;
        SolutionsIndex = 0;
        //$('#SearchSort').show();
        $('#SearchSort').removeClass('hidden');
        $('#LandingSort').hide();
        
         ResultsArray = [];      
         SolutionsArray = [];
         CasesArray = [];
         srArray = [];
         var d = new Date();
         thisdatetime = d.getTime();         
         var searchString = $('#SearchTextId').val();
         var flag=0;
        var filterList = [];
        if($('#category_solutions').prop("checked"))
            {
                filterList.push('Technical_Solutions__kav');
                flag=1;
            }
        if($('#category_yourcases').prop("checked"))
            {filterList.push('My Cases');flag=1;}
        if($('#category_yourcompany').prop("checked"))
            {filterList.push('Company Cases');flag=1;}
        if($('#category_videos').prop("checked"))
            {filterList.push('Technical_Videos__kav');flag=1;}
        if($('#category_cas').prop("checked"))
            {filterList.push('CAS_Maintenance_Message_Article__kav');flag=1;}
        if($('#category_techpubs').prop("checked"))
           { filterList.push('Tech Pubs');flag=1;}
        if($('#category_servreq').prop("checked"))
            {filterList.push('Service Request');flag=1;}
        if(flag<=0)
        {$('#category_all').prop('checked', true);
           // alert('we are at if block');
           }
        else
        {
        $('#category_all').prop('checked', false);
        }
        
         SSCommunityCases_Cntrl.caseSearch(searchString,SortVar,aircraftType,productType, function(result, event){
            if(event.status) {
                $.each(result.results, function(index,value){
                ResultsArray.push(value);
                });
                                    
                    contactid = result.conId;
                    accountid = result.accid; 
                    DisplayAllResults(ResultsArray,contactid,accountid,0,size,'RenderSolutionsTab1'); 
                    SolutionsArray=[];
                    $('#KnowledgeSearchDiv').removeClass('hidden');
                    $('body').loading();
            }
            else {
                alert('Looks like something went wrong !! Please try again or contact your administrator.');
            }
            
            });
            
     }
     
     
     // Add Comments FromDetail page
     function AddComment(caseid) {   
        //alert('calling addcomment function');
         var myComments= document.getElementById('MyComment').value; 
         //alert('myComments'+myComments);
         if(myComments != '') {     
             $('.tss-loader').modal({
                 show:true,
                 closeOnEscape: true
             });
                    
             Visualforce.remoting.Manager.invokeAction(
                 '{!$RemoteAction.SSCommunityCases_Cntrl.AddComments}',
                 caseid,myComments,
                 function(result, event) {
                 if(event.type == 'exception') {
                     $('.tss-loader').modal("hide");
                     alert('Looks like somethiong went wrong. Please try again or contact your system Administrator');
                 } 
                 else {
                     $('.tss-loader').modal("hide");
                     //SearchCasedetails(caseid);
                 }
             });
         }
         else {
             $('#CommentValidation').modal({
                show:true,
                closeOnEscape: true
            });
         }   
     }

    
    var KnowledgeArticleId = '';
    var IndividualuserRating;
    function GetKnowledgedetails(KAId) { 
   // alert('GetKnowledgedetails'+KAId);
        $('#idSolutionsWarning').modal({
                show:true,
                closeOnEscape: true
            });
        var ButtonVar = '<div class="col-xs-6 col-sm-6 col-md-6 col-lg-6" style="padding-right:5px"><button type="button" style="width: 100%;margin-top: 10px;" class="btn red-casecreate-btn casecreate-new" data-dismiss="modal" onclick = "getKnowledgedetailConfirm(\''+ KAId +'\')">Accept</button></div>'
                          +'<div class="col-xs-6 col-sm-6 col-md-6 col-lg-6" style="padding-left:5px"><button type="button" style="width: 100%;" class="btn gray-btn casecreate-cancel" data-dismiss="modal">Decline</button></div>';
        $('#SolutionWarningButton').html(ButtonVar);
    }
    
    function getKnowledgedetailConfirm(KAId) {
        //alert('getKnowledgedetailConfirm--'+KAId);
        $('#searchResults').hide();  
        $('#CaseViewDetails').hide();
        $('#SRViewDetails').hide();
        var knowledgeSummary='';
        SSCommunityCases_Cntrl.GetKnowledgedetails(KAId,function(result, event){
            //alert('Article status----'+event.status);
            //alert('Article status111'+event.status = false);
            //alert('Article result-----'+result);
            //alert('Article result1----'+result==null);
            //alert('Article result2----'+result=='null');
            //var KAId1=''; 
            //alert('Article size'+result.length);
            var resstatus=event.status;
            //alert('resstatus-----'+resstatus);
            //alert('resstatus111-----'+resstatus=='false');
            //if(result.length>0)
            //{
            if(event.status){
                var KAId1=result.Id;
                //alert('KAId1---389-'+KAId1);             
                SSCommunityCases_Cntrl.getArticleOnClick(KAId,function(result1, event){
                    var model='N/A';
                    var honeywellPartNumber='N/A';
                     var versionnumber='N/A';
                    var Lastpublishdate ='N/A';
                    var pln = 'N/A';
                    var ldin = 'N/A';
                    //alert('ress-----'+result1.Model_Name__c);
                    if(result1.Model_Name__c != '' && result1.Model_Name__c != null) {
                        model=result1.Model_Name__c;
                        }
                        if(result1.VersionNumber!= '' && result1.VersionNumber!= null) {
                        versionnumber=result1.VersionNumber;
                        }
                      if(result1.LastPublishedDate!= '' && result1.LastPublishedDate!= null) {
                         Lastpublishdate =result1.LastPublishedDate;
                          
                        
                         var Lastpublishdate1  = new Date(Lastpublishdate).toUTCString();
                        
                         var c = Lastpublishdate1.toLocaleString();
                         var str = c.substring(4, c.length - 12);
                        
                         
                         
                       
                         Lastpublishdate  =  str ;
                         //Lastpublishdate1.getMonth() +'/'+ Lastpublishdate1.getDay() + '/'+Lastpublishdate1.getFullYear();
                           //alert('Lastpublishdate  -----'+Lastpublishdate  );
                          }
                    if(result1.Honeywell_Part_Number__c != '' && result1.Honeywell_Part_Number__c != null){
                        honeywellPartNumber=result1.Honeywell_Part_Number__c;
                        }
                    if((result1.Id).substr(0,4)==$Label.TSSKACMessageId){
                        if(result1.PN__c == null)
                        {
                            honeywellPartNumber='';
                        }
                        else
                        {
                           honeywellPartNumber=result1.PN__c;
                        }
                        if(result1.AC_Type__c == null)
                        {
                            model='';
                        }
                        else
                        { 
                           model=result1.AC_Type__r.Model_Name_without_Hypen__c;                           
                        } 
                        }
                     if(result1.Platform_Name__c != '' && result1.Platform_Name__c != null){
                        pln=result1.Platform_Name__c;
                        }
                     if(result1.LDI_Number__c != '' && result1.LDI_Number__c != null){
                        ldin=result1.LDI_Number__c;
                        }
                     var convert = function(convert){
                       return $("<span />", { html: convert }).text();
                        };
                    if(result1.Id.substring(0,4) == $Label.TSSTechSolutionId )
                    {
                    articleContent= result1.Article_Details_del__c;
                    }
                    if ((result1.Id).substr(0,4)==$Label.TSSTechVideosId || (result1.Id).substr(0,4)==$Label.TSSCASMessageId) {
                    articleContent= result1.Solution_Details__c;
                    }
                    
                    var kcsmessage='';
                    
                    kcsmessage='<li class="btn btn-secondary btn-block" data-toggle="tooltip" data-placement="left" title="Honeywell provides the Technical Knowledge Center (TKC) portal website as a service to our Aerospace customers.All information contained within the TKC portal website is intended to further assist operators in maintaining Honeywell Aerospace equipment. The Original Equipment Manufacturers (OEM) maintenance instructions and documentation shall take precedence in all cases over information contained within this site.Honeywell is not responsible for, and expressly disclaims all liability for, damages of any kind arising out of use, reference to, or reliance on any information contained within this site. While the information contained within the site is periodically updated, no guarantee is given that the information provided in this web site is correct, complete, and up-to-date."><a href="#" data-toggle="modal" data-target="#chatModal"><i class="icon icon-speech-bubble"></i>Disclaimer</a></li>'; 
                      var convert = function(convert){
                       return $("<span />", { html: convert }).text();
                    };
                    //alert('kcsmessage after---'+kcsmessage);
                    if((result1.Id).substr(0,4)==$Label.TSSKACMessageId){
                    var kcsqp;
                    if(result1.Question_Problem__c == null)
                   {
                      kcsqp='';
                   }
                   else
                   { 
                      kcsqp=result1.Question_Problem__c;                           
                   }
                   var kcsas;
                   if(result1.Answer_Solution__c == null)
                   {
                      kcsas='';
                   }
                   else
                   { 
                      kcsas=result1.Answer_Solution__c; 
                      var kcsas1 = kcsas, re = new RegExp(kcsas, "g");
                      console.log("Kcsas1", kcsas); 
                      kcsas = kcsas1.replace(/\/SSCommunity/g, "https://hon-aero--c.documentforce.com"); 
                      console.log("Kcsas2", kcsas);    
                                            
                   }
                   
                   var kcsrl;
                   if(result1.Related_Links__c == null)
                   {
                      kcsrl='';
                   }
                   else
                   { 
                      kcsrl=result1.Related_Links__c;                           
                   }
                   var kcssp;
                    if(result1.Supported_Products__c == null)
                    {
                        kcssp='';
                    }
                    else
                    {
                       kcssp=result1.Supported_Products__r.Name;
                    } 
                    var kcsswv;
                    if(result1.SW_Version__c == null)
                    {
                        kcsswv='';
                    }
                    else
                    {
                       kcsswv=result1.SW_Version__c;
                    }
                    
                    var kcspf;
                    
                    if(result1.Phase_of_Flight__c == null)
                    {
                        kcspf='';
                    }
                    else
                    {
                       kcspf=result1.Phase_of_Flight__c;
                    }
                    var kcsfm;
                    if(result1.Fault_Messages__c == null)
                    {
                        kcsfm='';
                    }
                    else
                    {
                       kcsfm=result1.Fault_Messages__c;
                    }
                    var kcsfde;
                    if(result1.FDE_Event__c == null)
                    {
                        kcsfde='';
                    }
                    else
                    {
                       kcsfde=result1.FDE_Event__c;
                    }  
                   
                        //alert('inside kcs');
                        articleContent= '<h4><small>Problem</small></h4>'+convert(kcsqp)+'<br><br><h4><small>Solution</small></h4>'+convert(kcsas)+'<br><br> <h4><small>Related Links</small></h4>'+convert(kcsrl)+'<br><br>';
                         articleContent+='</h4><h4><small>Attachments</small></h4><a href="{!$Label.Org_Base_URL}/servlet/fileField?entityId='+result1.Id+'&field=File_1__Name__s" target="_blank">'+((result1.File_1__Name__s != undefined && result1.File_1__Name__s != '' && result1.File_1__Name__s != null) ? result1.File_1__Name__s : '')+'</a><br>';
                        articleContent+='<a href="{!$Label.Org_Base_URL}/servlet/fileField?entityId='+result1.Id+'&field=File_2__Name__s" target="_blank">'+((result1.File_2__Name__s != undefined && result1.File_2__Name__s != '' && result1.File_2__Name__s != null) ? result1.File_2__Name__s : '')+'</a><br>';
                        articleContent+='<a href="{!$Label.Org_Base_URL}/servlet/fileField?entityId='+result1.Id+'&field=File_3__Name__s" target="_blank">'+((result1.File_3__Name__s != undefined && result1.File_3__Name__s != '' && result1.File_3__Name__s != null) ? result1.File_3__Name__s : '')+'</a><br>';
                        articleContent+='<a href="{!$Label.Org_Base_URL}/servlet/fileField?entityId='+result1.Id+'&field=File_4__Name__s" target="_blank">'+((result1.File_4__Name__s != undefined && result1.File_4__Name__s != '' && result1.File_4__Name__s != null) ? result1.File_4__Name__s : '')+'</a><br>';
                        articleContent+='<a href="{!$Label.Org_Base_URL}/servlet/fileField?entityId='+result1.Id+'&field=File_5__Name__s" target="_blank">'+((result1.File_5__Name__s != undefined && result1.File_5__Name__s != '' && result1.File_5__Name__s != null) ? result1.File_5__Name__s : '')+'</a>';
                   }
                   
                    
                                 
                    knowledgeSummary='<div class="row" style="margin-top:20px"><div class="col-md-12"><div class="well solution"><div class="col-md-3"><h4><small>Model Name'+
                    '</small>';
                    if(model == 'N/A'){
                    knowledgeSummary+=pln;
                    }else{
                    knowledgeSummary+=model;
                    }
                   
                    if((result1.Id).substr(0,4)==$Label.TSSKACMessageId){
                    knowledgeSummary+='</h4><h4><small>Supported Product</small>'+kcssp;
                    }
                    knowledgeSummary+='</h4><h4><small>Hon Part Number</small> ';
                    if(honeywellPartNumber == 'N/A'){
                    knowledgeSummary+=ldin;
                    }else{
                    knowledgeSummary+=honeywellPartNumber;
                    }
                    if((result1.Id).substr(0,4)==$Label.TSSKACMessageId){
                    knowledgeSummary+='</h4><h4><small>SW Version</small>'+kcsswv;
                    
                    knowledgeSummary+='</h4><h4><small>Phase of Flight</small>'+kcspf;
                    
                    knowledgeSummary+='</h4><h4><small>Fault Message</small>'+kcsfm;
                    
                    knowledgeSummary+='</h4><h4><small>FDE/Event</small>'+kcsfde;
                    
                    }
                    
                    knowledgeSummary+='</h4><h4><small>Publish Date</small>'+ Lastpublishdate + '<time datetime="1914-12-20">';
                    knowledgeSummary+='</h4><h4><small>Version Number</small>'+versionnumber;
                    
                    //knowledgeSummary+='</h4></div><div class="col-md-9"><h3>'+result1.Title+'</h3><div class="table-responsive" id="knowledgeAtricleContent"></div></div></div></div></div>';
                    
                    var resultsummary='';
                    if(result.Summary == null)
                    {
                        resultsummary='';
                    }
                    else
                    {
                       resultsummary=result.Summary;
                    }
                    //alert(resultsummary);
                    knowledgeSummary+='</h4><h4 id="rating-wrapper"><small><!--Rate this Article--</small></h4><a href="https://honeywellaerocommunities.force.com/SSCommunity/TSSExporttoPDF?kid='+KAId+'" target="_blank" class="btn btn-secondary btn-block">Export to PDF <i class="icon icon-external-link pull-right"></i></a>'+kcsmessage+'</div><div class="col-md-9"><h3>'+result.Title+'</h3><hr/><p>'
                    if((result1.Id).substr(0,4)==$Label.TSSKACMessageId){
                    
                    }else{
                    knowledgeSummary+=resultsummary;
                    }
                    knowledgeSummary+='</p><div class="table-responsive" id="knowledgeAtricleContent"></div></div></div></div></div>';
                    
                    $('#Knowledgesummarydetails').show(); 
                    $('#Knowledgesummarydetails').html(knowledgeSummary); 
                    if(articleContent != ''){
                    if((result1.Id).substr(0,4)==$Label.TSSKACMessageId){
                    $('#knowledgeAtricleContent').html(articleContent);
                    }else
                    {
                    //alert(articleContent);
                    $('#knowledgeAtricleContent').html(convert(articleContent));
                    }
                    }
                     // FetchArticleRating(KAId);
                    //FetchUserArticleRating(KAId);

                });
            }
            /*}
            else
            {
                knowledgeSummary+='</h4></div><div class="col-md-9"><h3>This Article is not published in Force.com</h3><hr/></div></div></div></div>';
                $('#Knowledgesummarydetails').show(); 
                $('#Knowledgesummarydetails').html(knowledgeSummary);
            }*/
        });
    
    }
    function ArticleDisplayRemote(ArtId){
            console.log('inside artical display demo');
              var articleId = ArtId;
              console.log('**1 articleId' +articleId);
             // var clickedArt='';
              var articleContent = '';
              Visualforce.remoting.Manager.invokeAction(
                   "{!$RemoteAction.SSCommunityCases_Cntrl.getArticleOnClick}",
                   articleId,
                   function(result, event){
                       if(event.status){
                           var r = result;
                           console.log('**2 Inside call' + result);
                          
                           // Technical Videos (Article Type)
                           if((r.Id).substr(0,4)=='ka31'){
                               articleContent= r.Solution_Details__c;
                               var convert = function(convert){
                                   return $("<span />", { html: convert }).text();
                               }; 
                               $('#Knowledgesummarydiv').html(convert(articleContent));  
                               if(r.Model_Name__c != '' && r.Model_Name__c != null) {
                                   var modelnameVar = '<span style="font-weight: bold">Model Name: </span><span>'+r.Model_Name__c+'</span>';
                                   $('#knowledgeModeldiv').html(modelnameVar);
                               } 
                               else {
                                   $('#knowledgeModeldiv').html(' ');
                               }
                               if(r.Aircraft_Type__c != '' && r.Aircraft_Type__c != null) {
                                   var AircraftTypeVar = '<span style="font-weight: bold">Aircraft type: </span><span>'+r.Aircraft_Type__c+'</span>';
                                   $('#knowledgeAircraftdiv').html(AircraftTypeVar);
                               } 
                               else {
                                   $('#knowledgeAircraftdiv').html(' ');
                               }
                               if(r.Honeywell_Part_Number__c != '' && r.Honeywell_Part_Number__c != null) {
                                   var PartNumberVar = '<span style="font-weight: bold">Honeywell Part Number: </span><span>'+r.Honeywell_Part_Number__c+'</span>';
                                   $('#knowledgePartNodiv').html(PartNumberVar);
                               } 
                               else {
                                   $('#knowledgePartNodiv').html(' ');
                               }
                               if(r.ATA_Chapter__c != '' && r.ATA_Chapter__c != null) {
                                   var ATAChapterVar = '<span style="font-weight: bold">ATA Chapter: </span><span>'+r.ATA_Chapter__c+'</span>';
                                   $('#knowledgeATAChapterdiv').html(ATAChapterVar);
                               } 
                               else {
                                   $('#knowledgeATAChapterdiv').html(' ');
                               }                 
                           }
                           
                           // Technical Solution (Article Type)                                   
                           else if((r.Id).substr(0,4)=='ka21'){
                               articleContent= r.Article_Details_del__c;
                               var convert = function(convert){
                                   return $("<span />", { html: convert }).text();
                               };
                                             
                               $('#Knowledgesummarydiv').html(convert(articleContent)); 
                               if(r.Model_Name__c != '' && r.Model_Name__c != null) {
                                   var modelnameVar = '<span style="font-weight: bold">Model Name: </span><span>'+r.Model_Name__c+'</span>';
                                   $('#knowledgeModeldiv').html(modelnameVar);
                               } 
                               else {
                                   $('#knowledgeModeldiv').html(' ');
                               }
                               if(r.Aircraft_Type__c != '' && r.Aircraft_Type__c != null) {
                                   var AircraftTypeVar = '<span style="font-weight: bold">Aircraft type: </span><span>'+r.Aircraft_Type__c+'</span>';
                                   $('#knowledgeAircraftdiv').html(AircraftTypeVar);
                               } 
                               else {
                                   $('#knowledgeAircraftdiv').html(' ');
                               }
                               if(r.Honeywell_Part_Number__c != '' && r.Honeywell_Part_Number__c != null) {
                                   var PartNumberVar = '<span style="font-weight: bold">Honeywell Part Number: </span><span>'+r.Honeywell_Part_Number__c+'</span>';
                                   $('#knowledgePartNodiv').html(PartNumberVar);
                               } 
                               if(r.ATA_Chapter__c != '' && r.ATA_Chapter__c != null) {
                                   var ATAChapterVar = '<span style="font-weight: bold">ATA Chapter: </span><span>'+r.ATA_Chapter__c+'</span>';
                                   $('#knowledgeATAChapterdiv').html(ATAChapterVar);
                               }
                               else {
                                   $('#knowledgeATAChapterdiv').html(' ');
                               }  
                                console.log('**3 just above CAS end of technicle solution' );
                           }
                           
                           // CAS/Maintenance Message Article (Article Type)                                   
                           else if((r.Id).substr(0,4)=='ka51'){
                               console.log('*** 4 inside CAS');
                               $('#Searchpanelinput1').addClass('hidden');
                               articleContent= r.Solution_Details__c;
                               var convert = function(convert){
                                   return $("<span />", { html: convert }).text();
                               };
                                             
                               $('#Knowledgesummarydiv').html(convert(articleContent)); 
                               var Line1='';
                               if(r.ArticleNumber != '' && r.ArticleNumber != null) {
                                   Line1= Line1+'<span style="font-weight: bold">Article Number: </span><span>'+r.ArticleNumber+'</span>';                          
                               } 
                               if(r.Solution_Title1__c!= '' && r.Solution_Title1__c != null) {
                                 Line1= Line1+'<span style="font-weight: bold"> Solution Title: </span><span>'+r.Solution_Title1__c+'</span>';
                               }
                               if(r.Solution_Number__c != '' && r.Solution_Number__c != null) {
                                    Line1= Line1+'<span style="font-weight: bold"> Solution Number: </span><span>'+r.Solution_Number__c+'</span>';
                                }
                               if(Line1!=''){
                                    $('#knowledgeModeldiv').html(Line1);
                               } 
                               else {
                                   $('#knowledgeModeldiv').html(' ');
                               }
                               var Line2='';
                               if(r.Type_of_Message__c != '' && r.Type_of_Message__c != null) {
                                    Line2= Line2+'<span style="font-weight: bold">Type of Message: </span><span>'+r.Type_of_Message__c+'</span>';
                               }
                               if(r.CAS_Message_Happens_only_at_Power_Up__c != '' && r.CAS_Message_Happens_only_at_Power_Up__c != null) {
                                    Line2= Line2+'<span style="font-weight: bold"> CAS Message Happens only at Power Up: </span><span>'+r.CAS_Message_Happens_only_at_Power_Up__c+'</span>';
                               }
                               if(r.Orphan_CAS_Maintenance_Message__c != '' && r.Orphan_CAS_Maintenance_Message__c != null) {
                                    Line2= Line2+'<span style="font-weight: bold"> Orphan CAS Maintenance Message: </span><span>'+r.Orphan_CAS_Maintenance_Message__c+'</span>';
                               }
                               Line2=Line2+'<br/><br/>';
                               if(r.Determined_a_Nuisance_Message__c != '' && r.Determined_a_Nuisance_Message__c != null) {
                                    Line2= Line2+'<span style="font-weight: bold"> Determined a Nuisance Message: </span><span>'+r.Determined_a_Nuisance_Message__c+'</span>';
                               }
                               if(r.Platform_Name__c != '' && r.Platform_Name__c != null) {
                                    Line2= Line2+'<span style="font-weight: bold"> Platform Name: </span><span>'+r.Platform_Name__c+'</span>';
                               }
                               if(r.Top_Level_Software__c != '' && r.Top_Level_Software__c != null) {
                                    Line2= Line2+'<span style="font-weight: bold"> Top Level Software: </span><span>'+r.Top_Level_Software__c+'</span>';
                               }
                               if(r.SW_Load__c != '' && r.SW_Load__c != null) {
                                    Line2= Line2+'<span style="font-weight: bold"> SW Load: </span><span>'+r.SW_Load__c+'</span>';
                               }
                               Line2=Line2+'<br/><br/>';
                               if(r.CAS_Message_or_FDE_Name__c != '' && r.CAS_Message_or_FDE_Name__c != null) {
                                    Line2= Line2+'<span style="font-weight: bold"> CAS Message or FDE Name: </span><span>'+r.CAS_Message_or_FDE_Name__c+'</span>';
                                    Line2=Line2+'<br/><br/>';
                               }
                               if(r.Level__c != '' && r.Level__c != null) {
                                    Line2= Line2+'<span style="font-weight: bold"> Level: </span><span>'+r.Level__c+'</span>';
                                }
                                if(r.ArticleType != '' && r.ArticleType != null) {
                                    Line2= Line2+'<span style="font-weight: bold"> Article type: </span><span>'+r.ArticleType+'</span>';
                                }
                               if(r.Maintenance_Message_or_Fault_Name__c != '' && r.Maintenance_Message_or_Fault_Name__c != null) {
                                    Line2= Line2+'<span style="font-weight: bold"> Maintenance Message or Fault Name: </span><span>'+r.Maintenance_Message_or_Fault_Name__c+'</span>';
                                }
                               if(r.Maintenance_Message_Code__c != '' && r.Maintenance_Message_Code__c != null) {
                                    Line2= Line2+'<span style="font-weight: bold"> Maintenance Message Code: </span><span>'+r.Maintenance_Message_Code__c+'</span>';
                               }   
                               if(r.UrlName != '' && r.UrlName != null) {
                                    Line2= Line2+'<span style="font-weight: bold"> Url Name: </span><span>'+r.UrlName+'</span>';
                               }
                               if(r.ArchivedDate!= '' && r.ArchivedDate!= null) {
                                   var ADate = normalizeDateExtended(r.ArchivedDate);
                                   console.log('**ADate ' +ADate );
                                   console.log('**ArchivedDate ' +r.ArchivedDate);

                                   
                                   var month = ADate [0];
                                   var date = ADate [1];
                                   var year = ADate [2];
                                   var hours = ADate [3];
                                   var minutes = ADate [4];

                                    
                                    Line2= Line2+'<span style="font-weight: bold"> Archived Date : </span><span>'+month+' /'+date+'/' +year +'</span>';
                               }

                               if(r.CreatedDate!= '' && r.CreatedDate!= null) {
                                   var CDate = normalizeDateExtended(r.CreatedDate);
                                   console.log('**CDate ' +CDate );
                                   console.log('**CreatedDate ' +r.CreatedDate);

                                   
                                   var month = CDate [0];
                                   var date = CDate [1];
                                   var year = CDate [2];
                                   var hours = CDate [3];
                                   var minutes = CDate [4];

                                    
                                    Line2= Line2+'<span style="font-weight: bold"> Created Date : </span><span>'+month+' /'+date+'/' +year +'</span>';
                               }

                               if(Line2!=''){
                                    $('#knowledgeAircraftdiv').html(Line2);
                               }
                               else {
                                   $('#knowledgeAircraftdiv').html(' ');
                               }
                               if(r.Maintenance_Message_Details__c != '' && r.Maintenance_Message_Details__c != null) {
                                   var MaintenanceMessageDetails = '<span style="font-weight: bold">Maintenance Message Details: </span><span>'+r.Maintenance_Message_Details__c+'</span>';
                                   $('#knowledgePartNodiv').html(MaintenanceMessageDetails);
                               } 
                               var ATAChapterVar = '';
                              
                               if(r.OSFD_Symptom_Actionable_Usable_by_LM__c != '' && r.OSFD_Symptom_Actionable_Usable_by_LM__c != null) {
                                    ATAChapterVar = ATAChapterVar+'<span style="font-weight: bold"> OSFD Symptom Actionable Usable by LM: </span><span>'+r.OSFD_Symptom_Actionable_Usable_by_LM__c+'</span>';                                   
                               }                               
                               if(r.OEM_Name__c != '' && r.OEM_Name__c != null) {
                                    ATAChapterVar = ATAChapterVar+'<span style="font-weight: bold"> OEM Name: </span><span>'+r.OEM_Name__c+'</span>';                                   
                               }
                               var ATAChapterVar = ATAChapterVar +'<br/><br/>';
                               if(r.LDI_Number__c != '' && r.LDI_Number__c != null) {
                                    ATAChapterVar = ATAChapterVar+'<span style="font-weight: bold"> LDI Number: </span><span>'+r.LDI_Number__c+'</span>';                                   
                               }
                               if(r.Type__c != '' && r.Type__c != null) {
                                    ATAChapterVar = ATAChapterVar+'<span style="font-weight: bold"> Type: </span><span>'+r.Type__c+'</span>';                                   
                               }
                               if(r.FIP_actionable_Usable_by_a_line_mechanic__c != '' && r.FIP_actionable_Usable_by_a_line_mechanic__c != null) {
                                    ATAChapterVar = ATAChapterVar+'<span style="font-weight: bold"> FIP actionable Usable by a line mechanic: </span><span>'+r.FIP_actionable_Usable_by_a_line_mechanic__c+'</span>';                                   
                               }
                               ATAChapterVar =ATAChapterVar +'<br/><br/>';
                               if(r.FAQ__c!= '' && r.FAQ__c!= null) {
                                    ATAChapterVar = ATAChapterVar+'<span style="font-weight: bold"> FAQ: </span><span>'+r.FAQ__c+'</span>';                                   
                               }
                               if(ATAChapterVar!=''){
                               $('#knowledgeATAChapterdiv').html(ATAChapterVar);
                               }
                               else {
                                   $('#knowledgeATAChapterdiv').html(' ');
                               }               
                           }
                           // Live Agent Article, Test (Article Type) 
                           else{
                           
                           } 
                       }else if(result == "NULL"){
                            alert("No Match Found");
                        }
                        else if(event.type==='exception'){
                            alert(event.message);
                        }                     
                    },{escape: true}
                );        
          }   
    
    // Rate Article Method
    function RateArticle(KnowledgeArticleId,rating) {    
        console.log('star-clicked');
        $('.tss-loader').modal({
            show:true,
            closeOnEscape: true
        });
        var RateValue = rating;
        var className_1 = $('#1').attr('class');
        var className_2 = $('#2').attr('class');
        var className_3 = $('#3').attr('class');
        var className_4 = $('#4').attr('class');
        var className_5 = $('#5').attr('class');
        //if((className_1 == 'rate' && className_2 == 'rate' && className_3 == 'rate' && className_4 == 'rate' && className_5 == 'rate') || (Clicked == true)) {
            SSCommunityCases_Cntrl.RateArticleMethod(KnowledgeArticleId,RateValue,function(result, event)    {
                var allRecords = '';
                if(event.type == 'exception') {
                    alert('You have already voted for this article. This vote will not be counted anymore');
                    $('.tss-loader').modal("hide");
                }
                else {
                    alert('Thank you for your Votes');
                    Clicked = false;
                    $('.tss-loader').modal("hide");
                }                
            });
       // }
    }
        
    // Fetch Average Article Rating Method
    function FetchArticleRating(KAId) {  
         console.log('inside fetch artical rating'+KAId);
        $('.tss-loader').modal({
            show:true,
            closeOnEscape: true
        });
        var AverageRatingVar = '';  
            SSCommunityCases_Cntrl.ArticleVoteStat(KAId,function(result, event){
                    if(event.type == 'exception') {
                        $('.tss-loader').modal("hide");
                        alert('Rating could not be fetched this time');
                    }
                    else {
                        console.log('::::FetchArticleRating:::'+result);
                        var rating = result;
                        var num = parseFloat(rating);
                        rating = num.toFixed(1)
                        AVGRating = rating;
                        AverageRatingVar += '(Average Rating <span>'+rating+' </span>)';
                        $('#AverageRating').html(AverageRatingVar);
                        $('.tss-loader').modal("hide");
                    }
                
            });
        }
    
    // Fetch Current users Article Rating Method
    function FetchUserArticleRating(KAId) {  
        console.log('inside fetch article'+KAId);
        $('.tss-loader').modal({
            show:true,
            closeOnEscape: true
         }); 
        var AverageRatingVar = '';  
            SSCommunityCases_Cntrl.RateArticleRetrieveMethod(KAId,function(result, event){
                    if(event.type == 'exception') {
                        alert('Error');
                    }
                    else {
                        console.log('::::FetchUserArticleRating:::'+result);
                        // Test Drive
                        if(result == '1'){
                            $(".rating-stars").css("width","20%");
                        }else if(result == '2'){
                            $(".rating-stars").css("width","40%");
                        }else if(result == '3'){
                            $(".rating-stars").css("width","60%");
                            $(".my-rating").val("3");
                        }else if(result == '4'){
                            $(".rating-stars").css("width","80%");
                        }else if(result == '5'){
                            $(".rating-stars").css("width","100%");
                        }else{
                            $(".rating-stars").css("width","0%");
                        }
                        IndividualuserRating = result;
                        var IsIE8 = false;
                        if(IsIE8 == true) {
                            $('#1, #2, #3, #4, #5').removeClass('rated').addClass('rate');
                            $('#rateSolution').removeClass('hidden');
                            if( result == '1'){
                                $('#1').removeClass('rate').addClass('rated'); 
                                active = false;    
                            }
                            else if(result == '2'){
                                $('#1, #2').removeClass('rate').addClass('rated'); 
                                active = false;
                            }
                            else if(result == '3'){
                                $('#1, #2, #3').removeClass('rate').addClass('rated'); 
                                active = false;
                            }
                            else if(result == '4'){
                                $('#1, #2, #3, #4').removeClass('rate').addClass('rated'); 
                                active = false;
                            }
                            else if(result == '5'){
                                $('#1, #2, #3, #4, #5').removeClass('rate').addClass('rated'); 
                                active = false;
                            }
                            else if(result == '0') {
                                active = true;
                            }
                        }
                        else {
                            // Test Start
                            
                            
                            
                            if(IndividualuserRating == 0) {
                             console.log('else if alert');
                                RateTxt = '<small>Rate this Article</small> <input id="star-solution" value="'+IndividualuserRating+'" type="number" class="rating rating-fresh" min="0" max="5" step="1" data-size="sm" data-symbol="&#xe096;"/>'
                                $('#rating-wrapper').html(RateTxt);
                                // Rating Stars start
                                $(".rating-fresh").rating('refresh',{ showClear: false, showCaption: false });        
                                $(".filled-stars").on('click', function() {
                                    var valArr = $(this).attr('style').split(' ')[1].match(/[0-9]/g),
                                        startWidth;
                                       console.log('valArr '+valArr );
                                    if(valArr.length == 2) {
                                        startWidth = valArr[0].concat(valArr[1]);
                                    } else {
                                        startWidth = 100;
                                    }  
                                    console.log('startWidth '+startWidth );                                 
                                    if(startWidth == 20)
                                    {
                                      ratevalue = 1;
                                    }
                                    else if(startWidth == 40)
                                    {
                                      ratevalue = 2;
                                    }
                                    else if(startWidth == 60)
                                    {
                                      ratevalue = 3;
                                    }
                                    else if(startWidth == 80)
                                    {
                                      ratevalue = 4;
                                    }
                                    else if(startWidth == 100)
                                    {
                                      ratevalue = 5;
                                    }    
                                    RateArticle(KAId,ratevalue);
                                    RateTxt = '<small>Rate this Article</small><input id="star-solution" value="'+ratevalue+'" type="number" class="rating rating-fresh" min="0" max="5" step="1" data-size="sm" data-symbol="&#xe096;"/>'
                                    $('#rating-wrapper').html(RateTxt);          
                                    $(".rating-fresh").rating('refresh',{disabled: true, showCaption: false, showClear: false }); 
                                });
                                
                                // Rating Stars end
                                
                            }
                            else {      
                                console.log('second else alert');                     
                                RateTxt = '<small>Rate this Article</small><input id="star-solution" value="'+IndividualuserRating+'" type="number" class="rating" min="0" max="5" step="1" data-size="sm" data-symbol="&#xe096;"/>';
                                $('#rating-wrapper').html(RateTxt);                
                                $("#star-solution").rating('refresh',{disabled: true, showCaption: false, showClear: false });
                            }
                            // test End
                        }
                        
                        $('.tss-loader').modal("hide");
                    }
                $('.tss-loader').modal("hide");
            });
            $('.tss-loader').modal("hide");
        }
        
    // Autopopulate feature for Account Name
    function Showtabs()
    {  // alert('clicked');
          //$('#Knowledgesummarydetails').hide();
           $('#RenderSolutionsTab1').show();
              $('#searchResults').show();
          $('#Knowledgesummarydetails').hide();
          $('#searchResults').show();  
        $('#CaseViewDetails').hide();
        $('#SRViewDetails').hide();
        $('#RenderMyCases').show();
        $('#RenderCompanyCases').show();
        $('#RenderAllCases').show();
        $('#RenderCompanySRs').show();
        $('#RenderAllSRs').show();
        caseLandingSearch('Date Created','All','All');
    }

    
    
    function normalizeDateExtended(mydate) {
        mydate = new Date(mydate);
        data = new Date(mydate -  mydate.getTimezoneOffset() * 60000);
        var d = mydate.getDate();
        var month = mydate.getMonth()+1;
        var y = mydate.getFullYear();
        var m = '';
        var h = mydate.getHours();
        var min = mydate.getMinutes();
        switch (month) {
            case 1:
                m = 'Jan';
                break;
            case 2:
                m = 'Feb';
                break;
            case 3:
                m = 'Mar';
                break;
            case 4:
                m = 'Apr';
                break;
            case 5:
                m = 'May';
                break;
            case 6:
                m = 'Jun';
                break;
            case 7:
                m = 'Jul';
                break;
            case 8:
                m = 'Aug';
                break;
            case 9:
                m = 'Sep';
                break;
            case 10:
                m = 'Oct';
                break;
            case 11:
                m = 'Nov';
                break;
            case 12:
                m = 'Dec';
                break;    
            
        }
        return [m,d,y,h,min];
    }   
    //Solution Rating ends----------------------------------------------------------------------
    var active;
    var Clicked;
    $('.rating-active div').click(function(){   
        if(active == true){
            
            var numberRating = $(this).attr('id');
            if( numberRating == '1'){
                $('#1').removeClass('rate').addClass('rated');  
            }else if(numberRating == '2'){
                $('#1, #2').removeClass('rate').addClass('rated'); 
            }else if(numberRating == '3'){
                $('#1, #2, #3').removeClass('rate').addClass('rated'); 
            }else if(numberRating == '4'){
                $('#1, #2, #3, #4').removeClass('rate').addClass('rated'); 
            }else if(numberRating == '5'){
                $('#1, #2, #3, #4, #5').removeClass('rate').addClass('rated'); 
            }
            Clicked = true;
            active = false;
            RateArticle(KnowledgeArticleId,numberRating);
        }
        $('.tss-loader').modal("hide");
        //alert('clicked');
    });   
    $('.rating-active div').mouseover(function(){
        if(active == true){            
            var numberRating = $(this).attr('id');
            if( numberRating == '1'){
                $('#1').removeClass('rate').addClass('rated');    
            }else if(numberRating == '2'){
                $('#1, #2').removeClass('rate').addClass('rated'); 
            }else if(numberRating == '3'){
                $('#1, #2, #3').removeClass('rate').addClass('rated'); 
            }else if(numberRating == '4'){
                $('#1, #2, #3, #4').removeClass('rate').addClass('rated'); 
            }else if(numberRating == '5'){
                $('#1, #2, #3, #4, #5').removeClass('rate').addClass('rated'); 
            }
        }
    });   
    $('.rating-active div').mouseout(function(){
        if(active == true){        
            var numberRating = $(this).attr('id');
            if( numberRating == '1'){
                $('#1').removeClass('rated').addClass('rate');    
            }else if(numberRating == '2'){
                $('#1, #2').removeClass('rated').addClass('rate'); 
            }else if(numberRating == '3'){
                $('#1, #2, #3').removeClass('rated').addClass('rate'); 
            }else if(numberRating == '4'){
                $('#1, #2, #3, #4').removeClass('rated').addClass('rate'); 
            }else if(numberRating == '5'){
                $('#1, #2, #3, #4, #5').removeClass('rated').addClass('rate'); 
            }
        }
    });
    //Solution Rating ends----------------------------------------------------------------------             
    // Method Cleanup Starts   
var min = 0;
var size = 5;//Pagination size
var Dmin = 0;
var Dsize = 10;//Pagination size
var Allrecordnext;
var Allrecorddraft;
var MyrecIndex = 0;
var MyRecCount = 0;
var Allrecordsvar;
var MyCasesIndex = 0;
var CompanyCasesIndex = 0;
var AllCasesIndex = 0;
var CompanySRsIndex = 0;
var AllSRsIndex = 0;
// Declaring Arrays 
var MyrecordsArray = [];
var AllrecordsArray = [];
//var SRrecordsArray = [];

function caseLandingSearch(sortOption,airCraftType,productType) {
       // alert('calling caselanding search');
        MyrecordsArray = [];
        CompanyrecordsArray = [];
        AllrecordsArray = [];
        CompanySRrecordsArray = [];
        AllSRrecordsArray = [];
        $('body').loading();
         var d = new Date();
         thisdatetime = d.getTime();         
         var allRecords = '';
         var companyRecords = '';
         var MyRecords = '';
         var SortVar = 'Date Created'; 
         //alert('SortVar'+SortVar);
         //var CurrentUser = '{!$User.Id}';  
         var CurrentUser = '    ';      
         SSCommunityCases_Cntrl.CaseLandingSearch(sortOption,airCraftType,productType, function(result, event) 
         {
            //alert(event.status);  
            MyCasesIndex = 0;
            CompanyCasesIndex = 0;
            AllCasesIndex = 0;
            CompanySRsIndex = 0;
            AllSRsIndex = 0;
            if(event.status) 
            {                        
                var MyCount = 0;
                var AllCount = 0;
                var CompanyCount = 0;
                var CaseSearchCount = 0;
                var KnowledgesearchCount = 0;
                if(result.ConID != '') {
                    CurrentUser = result.ConID;
                }
                
                Allrecordsvar = result;                            
                //AllrecordsArray = result.Casesm;
                 $.each(result.Casesm, function(index,value){                   
                    if( value.IsClosed != true ) 
                    {
                    
                        AllrecordsArray.push(value);                         
                    }
                });
                console.log('**SearchQ**'+result.SearchQ);
                $.each(result.Casesm, function(index,value){                    
                    if(value.ContactId == CurrentUser) {
                        MyrecordsArray.push(value);                         
                    }
                });
                
                $.each(result.Casesm, function(index,value){                   
                    if(value.AccountId != '' && value.AccountId == result.AccID ) 
                    {
                    
                        CompanyrecordsArray.push(value);                         
                    }
                });
                 //alert(value.Account_Name__c +':'+aid); 
                $.each(result.SR, function(index,value){ 
                //alert(value.Account_Name__c +':'+aid); 
                if(value.Account_Name__c == result.AccID) 
                    {
                    CompanySRrecordsArray.push(value);
                    }
                 }); 
                // alert('CompanySRrecordsArray'+CompanySRrecordsArray.length);
                 $.each(result.SR, function(index,value)
                 { 
                    AllSRrecordsArray.push(value);
                 }); 
                
                //alert('MyrecordsArray'+MyrecordsArray.length);
                console.log('**MyrecordsArray.length**'+MyrecordsArray.length);
                if(MyrecordsArray.length >0) 
                {                    
                    //alert('RenderMyCasesSize'+MyrecordsArray.length);
                    $('#RenderMyCasesSize').show();
                    $('#RenderMyCases').show();
                    $('#RenderMyCasesPageNum').show();
                    DisplayRec(MyrecordsArray,MyCasesIndex,size,'RenderMyCases');
                    Paginate(MyrecordsArray,MyCasesIndex,'RenderMyCasesSize','RenderMyCasesPageNum','MY CASES');
                }
                else {
                    $('#RenderMyCases').hide();
                    $('#RenderMyCasesSize').show();
                     $('#RenderMyCasesSize').html('No Records Found');
                     $('#RenderMyCasesPageNum').hide();
                }
                //alert('All cases'+AllrecordsArray.length);
                if(AllrecordsArray.length >0) {
                    $('#RenderAllCasesSize').show();
                    $('#RenderAllCases').show();
                    $('#RenderAllCasesPageNum').show();
                    DisplayRec(AllrecordsArray,AllCasesIndex,size,'RenderAllCases');
                    Paginate(AllrecordsArray,AllCasesIndex,'RenderAllCasesSize','RenderAllCasesPageNum','ALL CASES');
                } 
                else {
                    $('#RenderAllCases').hide();
                    $('#RenderAllCasesSize').show();
                    $('#RenderAllCasesSize').html('No Records Found');
                    $('#RenderAllCasesPageNum').hide();
                }
                
                if(CompanyrecordsArray.length >0) {
                    $('#RenderCompanyCasesSize').show();
                    $('#RenderCompanyCasesPageNum').show();
                    $('#RenderCompanyCases').show();
                    DisplayRec(CompanyrecordsArray,CompanyCasesIndex,size,'RenderCompanyCases');
                    Paginate(CompanyrecordsArray,CompanyCasesIndex,'RenderCompanyCasesSize','RenderCompanyCasesPageNum','COMPANY CASES');
                } 
                else {
                    $('#RenderCompanyCases').hide();
                    $('#RenderCompanyCasesSize').show();
                    $('#RenderCompanyCasesSize').html('No Records Found');
                    $('#RenderCompanyCasesPageNum').hide();
                }
                //alert('SRrecordsArray1 ##'+SRrecordsArray.length);
                if(CompanySRrecordsArray.length >0) {
                    $('#RenderCompanySRsSize').show();
                    $('#RenderCompanySRs').show();
                    $('#RenderCompanySRsPageNum').show();
                    DisplaySRRec(CompanySRrecordsArray,CompanySRsIndex,size,'RenderCompanySRs');
                    Paginate(CompanySRrecordsArray,CompanySRsIndex,'RenderCompanySRsSize','RenderCompanySRsPageNum','COMPANY SERVICE REQUESTS');
                } 
                else {
                    $('#RenderCompanySRs').hide();
                    $('#RenderCompanySRsSize').show();
                    $('#RenderCompanySRsSize').html('No Records Found');
                    $('#RenderCompanySRsPageNum').hide();
                }
                if(AllSRrecordsArray.length >0) {
                    $('#RenderAllSRsSize').show();
                    $('#RenderAllSRs').show();
                    $('#RenderAllSRsPageNum').show();
                    DisplaySRRec(AllSRrecordsArray,AllSRsIndex,size,'RenderAllSRs');
                    Paginate(AllSRrecordsArray,AllSRsIndex,'RenderAllSRsSize','RenderAllSRsPageNum','ALL SERVICE REQUESTS'); 
                } 
                else {
                    $('#RenderAllSRs').hide();
                    $('#RenderAllSRsSize').show();
                    $('#RenderAllSRsSize').html('No Records Found');
                    $('#RenderAllSRsPageNum').hide();
                }
                    
            }else {
                //alert('No records found with entered search text!');
                alert('Looks like something went wrong. This might be due to slow network or Delayed/No response from server. Please try again after some time. If problem persists, please drop a mail to: debbie.redondo@honeywell.com for assistance.');
            }   
                
            
         });
        $('body').loading();    
     }

     // Common Pagination method satrts
     function Paginate(records, rIndex, hDivid,fDivid, sobject, count){
            var totalpages =1;
            oindex = rIndex+size;
            console.log('text5 '+rIndex);
            console.log('text '+count+' '+sobject);
            console.log('text3 '+count <5 );
            if(sobject == 'Results' && (count <5 || oindex > count )){
            oindex = count;
            console.log('text1 '+totalpages);
            }else if(records.length <5 || oindex > records.length){
            oindex = records.length;
            }
            if(sobject == 'Results'){
            totalpages = Math.ceil(count/size);
            }else{
            totalpages = Math.ceil(records.length/size);
            }
            pindex = rIndex+1;
            Currentpage = 1;
            if(rIndex != 0){
            Currentpage = (rIndex/size)+1;
            }
            console.log('text2 '+totalpages);
        pagenumstring='<div class="col-md-12 text-center"><ul class="pagination">';
        pagenumstring='<div class="col-md-12 text-center"><ul class="pagination">';
        if(totalpages > 1 && Currentpage != 1){
        pagenumstring+='<li><a href="#" onclick="';
        if(sobject == 'MY CASES'){
        pagenumstring+='casesPrevious(\'idPrevious\'';
        }
        if(sobject == 'COMPANY CASES'){
        pagenumstring+='casesPrevious(\'idCmpnyPrevious\'';
        }
        if(sobject == 'ALL CASES'){
        pagenumstring+='casesPrevious(\'idAllPrevious\'';
        }
        if(sobject == 'COMPANY SERVICE REQUESTS'){
        pagenumstring+='casesPrevious(\'idSRPrevious\'';
        }
        if(sobject == 'ALL SERVICE REQUESTS'){
        pagenumstring+='casesPrevious(\'idAllSRPrevious\'';
        }
        if(sobject == 'Results'){
        pagenumstring+='casesPrevious(\'resultsPrevious\'';
        }
        pagenumstring+=')">&lt;</a></li>';
        }
        pagenumstring+='<li><a><div >SHOWING PAGE '+Currentpage+' OF '+totalpages+'</div></a></li>';
        if(totalpages > 1 && Currentpage != totalpages){
        pagenumstring+='<li><a href="#" onclick="';
        if(sobject == 'MY CASES'){
        pagenumstring+='casesNext(\'idNext\'';
        }
        if(sobject == 'COMPANY CASES'){
        pagenumstring+='casesNext(\'idCmpnyNext\'';
        }
        if(sobject == 'ALL CASES'){
        pagenumstring+='casesNext(\'idAllNext\'';
        }
        if(sobject == 'COMPANY SERVICE REQUESTS'){
        pagenumstring+='casesNext(\'idSRNext\'';
        }
        if(sobject == 'ALL SERVICE REQUESTS'){
        pagenumstring+='casesNext(\'idAllSRNext\'';
        }
        if(sobject == 'Results'){
        pagenumstring+='casesNext(\'resultsNext\'';
        }
        pagenumstring+=')">&gt;</a></li>';
        }
        pagenumstring+='</ul></div>';
        if(sobject == 'Results'){
        $('#'+hDivid).html('SHOWING '+pindex+' TO '+oindex+' OF '+count+' RESULTS FOR <span class="search-query">'+' '+$('#SearchTextId').val()+'</span>');
        }else{   
        $('#'+hDivid).html('SHOWING '+pindex+' TO '+oindex+' OF '+records.length+' '+sobject);
        }
        //$('#'+fDivid).html('SHOWING PAGE '+Currentpage+' OF '+totalpages);
        $('#'+fDivid).html(pagenumstring);
     }
     // Common Pagination method end
     
     // Get My Records Next method Starts
     function casesNext(nextId){  
         if(nextId == 'idNext'){
            MyCasesIndex = MyCasesIndex + size;
            DisplayRec(MyrecordsArray,MyCasesIndex,size,'RenderMyCases');
            Paginate(MyrecordsArray,MyCasesIndex,'RenderMyCasesSize','RenderMyCasesPageNum','MY CASES');    
         }
         if(nextId == 'idCmpnyNext'){
            CompanyCasesIndex = CompanyCasesIndex + size;
             DisplayRec(CompanyrecordsArray,CompanyCasesIndex,size,'RenderCompanyCases');
             Paginate(CompanyrecordsArray,CompanyCasesIndex,'RenderCompanyCasesSize','RenderCompanyCasesPageNum','COMPANY CASES');   
         }
         
         if(nextId == 'idAllNext'){
             AllCasesIndex = AllCasesIndex + size;
             DisplayRec(AllrecordsArray,AllCasesIndex,size,'RenderAllCases');
             Paginate(AllrecordsArray,AllCasesIndex,'RenderAllCasesSize','RenderAllCasesPageNum','ALL CASES');  
         }
         if(nextId == 'idSRNext'){
             CompanySRsIndex = CompanySRsIndex + size;
             DisplaySRRec(CompanySRrecordsArray,CompanySRsIndex,size,'RenderCompanySRs');
             Paginate(CompanySRrecordsArray,CompanySRsIndex,'RenderCompanySRsSize','RenderCompanySRsPageNum','COMPANY SERVICE REQUESTS');     
         }
         if(nextId == 'idAllSRNext'){
             AllSRsIndex = AllSRsIndex + size;
             DisplaySRRec(AllSRrecordsArray,AllSRsIndex,size,'RenderAllSRs');
             Paginate(AllSRrecordsArray,AllSRsIndex,'RenderAllSRsSize','RenderAllSRsPageNum','ALL SERVICE REQUESTS');     
         }
         if(nextId == 'resultsNext'){
            console.log('ResultsIndex'+ ' '+ResultsIndex);
             ResultsIndex = ResultsIndex + size;
             DisplayAllResults(ResultsArray,contactid,accountid,ResultsIndex,size,'RenderSolutionsTab1'); 
              
         }
     }
     // Get My Records Next method ends
     
     // Get My Records Previous method starts
     function casesPrevious(previousId) {          
         
         if(previousId == 'idPrevious'){
             
             MyCasesIndex = MyCasesIndex - size;
             DisplayRec(MyrecordsArray,MyCasesIndex,size,'RenderMyCases');
             Paginate(MyrecordsArray,MyCasesIndex,'RenderMyCasesSize','RenderMyCasesPageNum','MY CASES');
         }
         if(previousId == 'idCmpnyPrevious'){
             CompanyCasesIndex = CompanyCasesIndex - size;
             DisplayRec(CompanyrecordsArray,CompanyCasesIndex,size,'RenderCompanyCases');
             Paginate(CompanyrecordsArray,CompanyCasesIndex,'RenderCompanyCasesSize','RenderCompanyCasesPageNum','COMPANY CASES');
         }
         if(previousId == 'idAllPrevious'){
             AllCasesIndex = AllCasesIndex - size;
             DisplayRec(AllrecordsArray,AllCasesIndex,size,'RenderAllCases');
             Paginate(AllrecordsArray,AllCasesIndex,'RenderAllCasesSize','RenderAllCasesPageNum','ALL CASES');
         }
          if(previousId == 'idSRPrevious'){
             CompanySRsIndex = CompanySRsIndex - size;
             DisplaySRRec(CompanySRrecordsArray,CompanySRsIndex,size,'RenderCompanySRs');
             Paginate(CompanySRrecordsArray,CompanySRsIndex,'RenderCompanySRsSize','RenderCompanySRsPageNum','COMPANY SERVICE REQUESTS');
         }
          if(previousId == 'idAllSRPrevious'){
             AllSRsIndex = AllSRsIndex - size;
             DisplaySRRec(AllSRrecordsArray,AllSRsIndex,size,'RenderAllSRs');
             Paginate(AllSRrecordsArray,AllSRsIndex,'RenderAllSRsSize','RenderAllSRsPageNum','ALL SERVICE REQUESTS');
         }
          if(previousId == 'resultsPrevious'){
             ResultsIndex = ResultsIndex - size;
             DisplayAllResults(ResultsArray,contactid,accountid,ResultsIndex,size,'RenderSolutionsTab1'); 
         }
     }
     
     // Get My Records Previous method ends
     
     
     // Case Details Start
         var SearchClicked;
         function SearchCasedetails(caseId) {

         console.log(caseId);
        
         var detailvar = '';
         $('#CaseViewDetails').show();
         $('#searchResults').hide();
         $('#RenderSolutionsTab1').hide();
         $('#RenderMyCases').hide();
         $('#RenderCompanyCases').hide();
         $('#RenderAllCases').hide();
         $('#RenderCompanySRs').hide();
         $('#RenderAllSRs').hide();
         $('#RenderMyCasesPageNum').hide();
         $('#RenderCompanyCasesPageNum').hide();
         $('#RenderAllCasesPageNum').hide();
         $('#RenderCompanySRsPageNum').hide();
         $('#RenderAllSRsPageNum').hide();
         $('#searchResultsPagination').hide();
          $('#CaseViewDetails').empty();
         SSCommunityCases_Cntrl.CaseDetails(caseId,function(result, event){
            
             if(event.status) {
                    var createdBy;
                    var subject;
                    var des;
                    var CthisDate = normalizeDateExtended(result.CreatedDate);
                        var Cmonth = CthisDate[0];
                        var Cdate = CthisDate[1];
                        var Cyear = CthisDate[2];
                        var Chours = CthisDate[3];
                        var Cminutes = CthisDate[4];
                        var Createddatevar = Cdate+'/'+Cmonth+'/'+Cyear;
                    var LthisDate = normalizeDateExtended(result.LastModifiedDate);
                        var Lmonth = LthisDate[0];
                        var Ldate = LthisDate[1];
                        var Lyear = LthisDate[2];
                        var Lhours = LthisDate[3];
                        var Lminutes = LthisDate[4];
                        var Lmodifieddatevar = Ldate+'/'+Lmonth+'/'+Lyear;
                    if(result.Contact_Name__c != '') {
                       createdBy=result.Contact_Name__c;
                    }   
                    if(result.Subject != null) {
                        subject=result.Subject;
                    } 
                    if(result.Description != null) {
                        des=result.Description.substring(0,300);
                    }else{
                    des='N/A';
                    }
                    var actype= '';  
                    if(result.Aircraft_Type__r != null)
                    if( result.Aircraft_Type__r.Name == null )
                    {                        
                    actype ='N/A';
                    }
                    else
                    {
                    actype = result.Aircraft_Type__r.Name;
                    }
                    var ata= '';                   
                    if( result.ATA_Chapter__c == null )
                    {                        
                    ata ='N/A';
                    }
                    else
                    {
                    ata = result.ATA_Chapter__c;
                    }
                    var pt= '';
                    if(result.Supported_Products__r != null)
                    if(result.Supported_Products__c == null){
                    pt ='N/A';
                    }else{
                    if( result.Supported_Products__r.Product_Type__c == null )
                    {                        
                    pt ='N/A';
                    }
                    else
                    {
                    pt = result.Supported_Products__r.Product_Type__c;
                    }
                    }
                    var ppn= '';
                    if( result.Product_Part_Number__c == null )
                    {                        
                    ppn ='N/A';
                    }
                    else
                    {
                    ppn = result.Product_Part_Number__c;
                    }
                 if(result.IsClosed){  
                finalstring='<div class="row" style="margin-top:20px"><div class="col-md-12"><div class="well case case-closed"><div class="col-md-3"><h3 class="case-status">Closed</h3><h4><small>CASE#</small> '+result.CaseNumber+'</h4><hr/><h5><span class="badge"><i class="icon icon-circled-user-male"></i></span></h5><h4><small>Case Owner</small> '+createdBy+'</h4><hr/><h4><small>Created On</small> '+Createddatevar+'</h4><h4><small>Last Modified</small> '+Lmodifieddatevar+'</h4><hr/><h4><small>A/C Type</small> '+actype+'</h4><h4><small>Product Type</small> '+pt+'</h4><h4><small>P/N</small> '+ppn+'</h4><h4><small>ATA Chapter</small> '+ata+'</h4></div><div class="col-md-9"><h3>'+subject+'</h3><hr/><pre>'+des+'</pre>';
                }else if(result.Status == 'On Hold'){
                finalstring='<div class="row" style="margin-top:20px"><div class="col-md-12"><div class="well case case-onhold"><div class="col-md-3"><h3 class="case-status">'+result.Status+'</h3><h4><small>CASE#</small> '+result.CaseNumber+'</h4><hr/><h5><span class="badge"><i class="icon icon-circled-user-male"></i></span></h5><h4><small>Case Owner</small> '+createdBy+'</h4><hr/><h4><small>Created On</small> '+Createddatevar+'</h4><h4><small>Last Modified</small> '+Lmodifieddatevar+'</h4><hr/><h4><small>A/C Type</small> '+actype+'</h4><h4><small>Product Type</small> '+pt+'</h4><h4><small>P/N</small> '+ppn+'</h4><h4><small>ATA Chapter</small> '+ata+'</h4></div><div class="col-md-9"><h3>'+subject+'</h3><hr/><pre>'+des+'</pre>';
                }else {
                finalstring='<div class="row" style="margin-top:20px"><div class="col-md-12"><div class="well case case-open"><div class="col-md-3"><h3 class="case-status">'+result.Status+'</h3><h4><small>CASE#</small> '+result.CaseNumber+'</h4><hr/><h5><span class="badge"><i class="icon icon-circled-user-male"></i></span></h5><h4><small>Case Owner</small> '+createdBy+'</h4><hr/><h4><small>Created On</small> '+Createddatevar+'</h4><h4><small>Last Modified</small> '+Lmodifieddatevar+'</h4><hr/><h4><small>A/C Type</small> '+actype+'</h4><h4><small>Product Type</small> '+pt+'</h4><h4><small>P/N</small> '+ppn+'</h4><h4><small>ATA Chapter</small> '+ata+'</h4></div><div class="col-md-9"><h3>'+subject+'</h3><hr/><pre>'+des+'</pre>';
                }
                /*if(result.Attachments != null){
                        var listAttachments = '';
                        $.each(result.Attachments, function(index, value){
                
                            finalstring +='<span class="glyphicon glyphicon-paperclip"></span>'
                                            + '<a href="https://c.cs15.content.force.com/servlet/servlet.FileDownload?file='+value.Id+'" target="_blank" class="cases-link">'
                                            + value.Name+'</a><br/>';                                    
                        });
                        $('#attachmentsDiv').html(listAttachments);
                    }*/
                finalstring+='</div></div><div class="well col-md-12"><h3>Case Comments</h3><hr/><div class="case-comments-list">';
                
                if(result.CaseComments != null) 
                {
                    $.each(result.CaseComments, function(index, value)
                    {
                        var thisDate = normalizeDateExtended(value.CreatedDate);
                        var month = thisDate[0];
                        var date = thisDate[1];
                        var year = thisDate[2];
                        var hours = thisDate[3];
                        var minutes = thisDate[4];
                        finalstring+='<div class="case-comment col-md-12"><div class="col-md-1"><h5><span class="badge"><i class="icon icon-circled-user-male"></i></span></h5></div><div class="col-md-11"><h4>'+value.CreatedBy.Name+'<span class="pull-right small"><i class="icon icon-clock"></i> '+month+' '+date+','+year+' '+hours+':'+minutes+'</span></h4><p>'+value.CommentBody+'</p></div></div>';
                    
                    });
                }
                //finalstring+='<form class="new_comment"><div class="case-comment input-box col-md-12"><div class="col-md-1"><h5><span class="badge online"><i class="icon icon-circled-user-male"></i></span></h5></div><div class="col-md-11"><div class="col-xs-10 col-md-11 input-group input-action"><input type="text" name="new_comment_input" id="MyComment" class="form-control" placeholder="Enter a comment" autocomplete="off"><span class="input-group-btn"><button class="btn btn-search" type="submit"><a onclick="AddComment(\''+result.Id+'\')"><i class="icon-speech-bubble"></i></a> </button></span></div></div></div></form></div></div></div></div>';

                $('#CaseViewDetails').html(finalstring);
            }
         
         }); 
             
         }
         
         // SRDetails Start
         
         function SearchSRdetails(SRId) {

         var detailvar = '';
         $('#SRViewDetails').show();
         $('#searchResults').hide();
         $('#RenderSolutionsTab1').hide();
         $('#RenderMyCases').hide();
         $('#RenderCompanyCases').hide();
         $('#RenderAllCases').hide();
         $('#RenderCompanySRs').hide();
         $('#RenderAllSRs').hide();
         $('#RenderMyCasesPageNum').hide();
         $('#RenderCompanyCasesPageNum').hide();
         $('#RenderAllCasesPageNum').hide();
         $('#RenderCompanySRsPageNum').hide();
         $('#RenderAllSRsPageNum').hide();
         $('#searchResultsPagination').hide();
          $('#SRViewDetails').empty();
         SSCommunityCases_Cntrl.SRDetails(SRId,function(result, event){
          if(event.status) {
                    var SRDetailsString = ''
                    var sub = 'N/A'                            
                    if(result.Subject__c!= null) {
                        sub =result.Subject__c ;
                    } 
                    var srstatus ='';
                    var srstatuscheck = '';
                    if(result.Status__c == 'Closed') {
                        srstatus = 'Closed';
                        srstatuscheck = 'sr-closed';
                    }else{
                    srstatus = 'Open';
                    srstatuscheck = 'sr-open';
                    }
                    var accname ='N/A';
                    if(result.Account_Name__c != null){
                    accname =result.Account_Name__r.Name;
                    }
                    var Duedatevar = 'N/A';
                    if(result.Customer_Due_Date__c != null){
                    var DthisDate = normalizeDateExtended(result.Customer_Due_Date__c);
                        var Dmonth = DthisDate[0];
                        var Ddate = DthisDate[1];
                        var Dyear = DthisDate[2];
                        var Duedatevar = Ddate+'/'+Dmonth+'/'+Dyear;
                     }
                    var ltudatevar = 'N/A';
                    if(result.Last_Technical_Update__c != null){
                    var LthisDate = normalizeDateExtended(result.Last_Technical_Update__c);
                        var Lmonth = LthisDate[0];
                        var Ldate = LthisDate[1];
                        var Lyear = LthisDate[2];
                        var ltudatevar = Ldate+'/'+Lmonth+'/'+Lyear;
                     }
                    var ET = 'N/A';
                    if(result.Escalation_Tier__c != null){
                    ET  = result.Escalation_Tier__c;
                    }
                    var CL = 'N/A';
                    if(result.Complexity_Level__c != null){
                    CL =result.Complexity_Level__c;
                    }
                    var atr ='N/A';
                    if(result.Atr__c != null){
                    atr = result.Atr__c;
                    }
                    var fr = 'N/A';
                    if(result.Function_Responsible__c != null){
                    fr =result.Function_Responsible__c;
                    }
                    var res ='N/A';
                    if(result.Status_Resolution__c != null){
                    res = result.Status_Resolution__c;
                    }
                    var pd ='N/A';
                    if(result.Problem_Description__c != null){
                    pd =result.Problem_Description__c;
                    }
                    SRDetailsString ='<div class="row" style="margin-top:20px"><div class="col-md-12">'+
                    '<div class="well case '+srstatuscheck+'"><div class="col-md-3">'+
                    '<h3 class="case-status">'+srstatus+'</h3><h4><small>SR#</small>'+result.Name+'</h4>'+
                    '<hr><h5><span class="badge "><i class="icon icon-circled-user-male"></i>'+
                    '</span></h5><h4><small>Account</small>'+accname+'</h4>'+
                    '<h4><small>Owner</small>'+result.OwnerName__c+'</h4><hr><h4><small>Due Date</small>'+Duedatevar+'</h4>'+
                    '<h4><small>Escalation</small>'+ET+'</h4><hr>'+
                    '<h4><small>Complexity Level</small>'+CL+'</h4>'+
                    '<h4><small>Attribute</small>'+atr+'</h4>'+
                    '<h4><small>Responsible Party</small>'+fr+'</h4>'+
                    '<a href="#" class="btn btn-secondary btn-block">Export to PDF <i class="icon icon-external-link pull-right"></i></a>'+
                    '</div><div class="col-md-9"><h3>CASE RESOLUTION<small>'+ltudatevar+'</small></h3><hr>'+
                    '<pre>'+res+'</pre>'+
                    '<h3>'+sub+'</h3><hr>'+
                    '<pre>'+pd+'</pre>'+
                    '</div></div></div></div>';
                    $('#SRViewDetails').html(SRDetailsString);
                    }     
                
                });
          }          
  
    // DisplayRec Starts        
    function DisplayRec(Records,Iindex,offset, DivId) {   
        var CaseRecords = '';
        $.each(Records, function(index,value) 
        {   
            if(index>= Iindex && index < Iindex+offset) 
            {               
                var thisCreatedDate = normalizeDateExtended(value.CreatedDate);
                var Createdmonth = thisCreatedDate[0];
                var Createddate = thisCreatedDate[1];
                var Createdyear = thisCreatedDate[2];
                var Createdhours = thisCreatedDate[3];
                var Createdminutes = thisCreatedDate[4];                                               
                var thisDate = normalizeDateExtended(value.LastModifiedDate);
                var month = thisDate[0];
                var date = thisDate[1];
                var year = thisDate[2];
                var hours = thisDate[3];
                var minutes = thisDate[4];
                var CommentCount= 0;                    
                var caseOwnerN= '';                   
                if(value.OwnerName__c == null)
                {                        
                    caseOwnerN ='Waiting for assignment';
                }
                else
                {
                    caseOwnerN = value.OwnerName__c;
                }
                var actype= '';                   
                if( value.Aircraft_Type__c == null )
                {                        
                    actype ='N/A';
                }
                else
                {
                    actype = value.Aircraft_Type__r.Name;
                }
                var product= ''; 
                if( value.Supported_Products__c== null ){
                product ='N/A';
                }
                else
                {
                    product = value.Supported_Products__r.Name;
                }
                var subject= '';                   
                if( value.Subject == null )
                {                        
                    subject ='N/A';
                }
                else
                {
                    subject = value.Subject;
                }
                var description= '';                   
                if( value.Description == null )
                {                        
                    description ='N/A';
                }
                else
                {
                    description = value.Description.substring(0,300);
                }
                var UserLastLogin = Allrecordsvar.UserLoginstr; 
                
                var CommBody = '';                                
                var newrecord; 
                var TotalCommentCount = 0;
                
                if(value.CaseComments != null && value.CaseComments != '') 
                {
                    var creator = '';
                    var Completedate1 = '';
                    var commentvar = '';
                    var CommCount = 0;
                    newrecord = '';
                    var IsGrey;
                    var IsWhite;
                    var IsRed;
                    TotalCommentCount = value.CaseComments.length;
                    $.each(value.CaseComments, function(key, val) 
                    {
                        if(val.CommentBody != null)  
                        { 
                           /* if(val.CommentBody.indexOf("From:") == 0 && convertToHtml(val.CommentBody.substr(0, 120).indexOf("@honeywell.com") != -1)) {                                      
                                TotalCommentCount--;    
                            }*/
                        }                      
                    });                 
                    $.each(value.CaseComments, function(key, val) 
                    {    
                        $.each(Allrecordsvar.Ownermapping, function(index, value) 
                        {
                            if (index == val.Id) 
                            {
                                if (value == 'true') 
                                {
                                    IsGrey = 'gray-background';
                                   IsWhite = 'white-background';
                                   IsRed = 'red';
                                }
                                else 
                                {
                                   IsGrey = '';
                                   IsWhite = '';
                                   IsRed = '';
                                }
                            } 
                        });                                                       
                        var CommentthisDate = normalizeDateExtended(val.CreatedDate);
                        var Commentmonth = CommentthisDate[0];
                        var Commentdate = CommentthisDate[1];
                        var Commentyear = CommentthisDate[2];
                        var Commenthours = CommentthisDate[3];
                        var Commentminutes = CommentthisDate[4];                                            
                                               
                        if(val.CommentBody != null)  
                        { 
                            if(val.CommentBody.indexOf("From:") == 0 && val.CommentBody.substr(0, 120).indexOf("@honeywell.com") != -1) 
                            {                               
                            }
                            else 
                            {                         
                                var CommentCompleteDate = Commentmonth+' '+Commentdate+','+Commentyear+' '+Commenthours+':'+Commentminutes;                                  
                                /*CommBody +='<div class="row cases-each-comment '+IsGrey+'">'
                                                + '<div class="col-xs-2 col-sm-1 col-md-1 col-lg-1 cases-comment-user '+IsWhite+'">' 
                                                    + '<img src="{!URLFOR($Resource.TSSCommunityRes,'images/commentuser-indicator.png')}" />'
                                                + '</div>'
                                                + '<div class="col-xs-10 col-sm-11 col-md-11 col-lg-11 cases-comments '+IsRed+'">'
                                                    + '<div>' 
                                                    + val.CreatedBy.Name                                          
                                                    + '</div>'
                                                    + '<div>'
                                                        +CommentCompleteDate
                                                    + '</div>'
                                                    + '<div class="hidden-xs">'
                                                        +val.CommentBody
                                                    + '</div>'
                                                + '</div>'
                                                + '<div class="col-xs-12 hidden-sm hidden-md hidden-lg">'
                                                    +val.CommentBody
                                                + '</div>'
                                            + '</div>'; */
                                    CommBody +='<div class="col-md-1"><span class="badge"><i class="icon icon-circled-user-male"></i></span></div><div class="col-md-11"><h4>'
                                             +val.CreatedBy.Name+'<span class="pull-right small"><i class="icon icon-clock"></i>'
                                             +CommentCompleteDate+'</span></h4><p>'+val.CommentBody+'</p></div>';                                           
                                 CommCount++;
                            }
                        }
                        if(CommCount >= 3) 
                        {
                            return false;
                        }               
                    });
                                                       
                }                          
                                               
                // Add a comment section ends                            
                var StatusCheck = ''; 
                var StatusVar = '';
                var loadOldervar = '';
                var MobStatusCheck = '';
                var Descriptionvar = '';                
                    if(value.IsClosed )
                    {
                        StatusVar = 'CLOSED'; 
                        CaseRecords += '<div class="well case case-closed"><div class="col-md-3"><h4 class="case-status">'+
                        StatusVar+'</h4><h4>'+MobStatusCheck+value.CaseNumber+'</h4><hr/><h4><small>Created On</small> '+
                        Createddate+'/'+Createdmonth+'/'+Createdyear+'</h4><h4><small>Last Modified</small>'+date+
                        '/'+month+'/'+year+'</h4><hr/><h4><small>A/C Type</small>'+actype+
                        '</h4><h4><small>Product</small>'+product+'</h4></div><div class="col-md-9">'+
                        '<div onclick="SearchCasedetails(\''+ value.Id +'\')"><a class="h3" href="#">'+subject+'</a></div><p>'+
                        description+'<p><div class="case-comments-list"> <div id="case_13012663_comments"  role="tabpanel">'+
                        '<div class="case-comment col-md-12">'+CommBody+'</div></div><form class="new_comment case-comment col-xs-12" method="POST">'+
                        '<div class="col-xs-2 col-md-1"><span class="badge online"><i class="icon icon-circled-user-male"></i></span></div>'+
                        '<div class="col-xs-10 col-md-11 input-group input-action" style="margin-top: 10px;><div class="col-xs-10 col-md-11 input-group input-action">'+
                        '<input type="text" id="MyComment" name="new_comment_input" class="form-control" placeholder="Enter a comment" autocomplete="off" />'+
                        '<span class="input-group-btn"><button class="btn btn-search" type="submit"><a onclick="AddComment(\''+value.Id+'\')">'+
                        '<i class="icon-speech-bubble"></i></a></button></span></div></div></form></div></div></div>';
                    }
                    else if(value.Status == 'On Hold')
                    {
                        StatusVar = 'ON HOLD'; 
                        CaseRecords += '<div class="well case case-onhold"><div class="col-md-3"><h4 class="case-status">'+
                        StatusVar+'</h4><h4>'+MobStatusCheck+value.CaseNumber+'</h4><hr/><h4><small>Created On</small> '+
                        Createddate+'/'+Createdmonth+'/'+Createdyear+'</h4><h4><small>Last Modified</small>'+date+
                        '/'+month+'/'+year+'</h4><hr/><h4><small>A/C Type</small>'+actype+
                        '</h4><h4><small>Product</small>'+product+'</h4></div><div class="col-md-9">'+
                        '<div onclick="SearchCasedetails(\''+ value.Id +'\')"><a class="h3" href="#">'+subject+'</a></div><p>'+
                        description+'<p><div class="case-comments-list"> <div id="case_13012663_comments"  role="tabpanel">'+
                        '<div class="case-comment col-md-12">'+CommBody+'</div></div><form class="new_comment case-comment col-xs-12" method="POST">'+
                        '<div class="col-xs-2 col-md-1"><span class="badge online"><i class="icon icon-circled-user-male"></i></span></div>'+
                        '<div class="col-xs-10 col-md-11 input-group input-action" style="margin-top: 10px;><div class="col-xs-10 col-md-11 input-group input-action">'+
                        '<input type="text" id="MyComment" name="new_comment_input" class="form-control" placeholder="Enter a comment" autocomplete="off" />'+
                        '<span class="input-group-btn"><button class="btn btn-search" type="submit"><a onclick="AddComment(\''+value.Id+'\')">'+
                        '<i class="icon-speech-bubble"></i></a></button></span></div></div></form></div></div></div>';
                    
                    }
                    else 
                    {   StatusVar = 'OPEN'; 
                        CaseRecords += '<div class="well case case-open"><div class="col-md-3"><h4 class="case-status">'+
                        StatusVar+'</h4><h4>'+MobStatusCheck+value.CaseNumber+'</h4><hr/><h4><small>Created On</small> '+
                        Createddate+'/'+Createdmonth+'/'+Createdyear+'</h4><h4><small>Last Modified</small>'+date+
                        '/'+month+'/'+year+'</h4><hr/><h4><small>A/C Type</small>'+actype+
                        '</h4><h4><small>Product</small>'+product+'</h4></div><div class="col-md-9">'+
                        '<div onclick="SearchCasedetails(\''+ value.Id +'\')"><a class="h3" href="?kid='+KAId+'">'+subject+'</a></div><p>'+
                        description+'<p><div class="case-comments-list"> <div id="case_13012663_comments"  role="tabpanel">'+
                        '<div class="case-comment col-md-12">'+CommBody+'</div></div><form class="new_comment case-comment col-xs-12" method="POST">'+
                        '<div class="col-xs-2 col-md-1"><span class="badge online"><i class="icon icon-circled-user-male"></i></span></div>'+
                        '<div class="col-xs-10 col-md-11 input-group input-action" style="margin-top: 10px;><div class="col-xs-10 col-md-11 input-group input-action">'+
                        '<input type="text" id="MyComment" name="new_comment_input" class="form-control" placeholder="Enter a comment" autocomplete="off" />'+
                        '<span class="input-group-btn"><button class="btn btn-search" type="submit"><a onclick="AddComment(\''+value.Id+'\')">'+
                        '<i class="icon-speech-bubble"></i></a></button></span></div></div></form></div></div></div>';
                    }
                if(TotalCommentCount > 3)
                {
                    loadOldervar = '<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 cases-comments-loadmore">'
                                 + '<a href="#" onclick="SearchCasedetails(\''+ value.Id +'\')">Load Older Comments..</a>'
                                 + '</div>';
                }
                else 
                {
                    loadOldervar = '';
                }
                $('#'+DivId).html(CaseRecords);
                    
            }
        });

    }  
         
    function DisplaySRRec(Records,Iindex,offset, DivId) {    
        var CaseRecords = '';  
        $.each(Records, function(index,value) { 
            if(index>= Iindex && index < Iindex+offset) {   
                    //var newrecord = '';
                    var caseOwnerN= '';
                    //console.log('**'+value.OwnerName__c);
                    if(value.OwnerName__c == null)
                    {                        
                         caseOwnerN ='Waiting for assignment';
                    }
                    else{
                          caseOwnerN = value.OwnerName__c;
                    }
                                            
                    var StatusCheck = ''; 
                    var StatusVar = '';
                    //StatusVar = value.Status__c;
                    if(value.Status__c == 'Closed')
                    {                        
                         StatusVar ='Closed';
                         var StatusCheck = 'sr-closed';
                    }
                    else{
                          StatusVar= 'Open';
                          var StatusCheck = 'sr-open';
                    }
                    if(value.Case_Number__c != null){
                    CaseRecords += '<div class="well sr '+StatusCheck+'"><div class="col-md-3"><h4 class="case-status">'+StatusVar+
                    '</h4><h4>'+value.Name+'</h4><h5><span class="badge"><i class="icon icon-circled-user-male"></i>'+
                    '</span></h5><h4><small>By</small> '+caseOwnerN+'</h4></div><div class="col-md-9">'+
                    '<h3>'+value.Subject__c+'</h3><p>'
                    +'<div onclick="SearchCasedetails(\''+ value.Case_Number__r.Id+'\')">Related to <a href="#">'+value.Case_Number__r.CaseNumber+'</a></div>'
                    +'</p></div></div>';
                    }else{
                    CaseRecords += '<div class="well sr '+StatusCheck+'"><div class="col-md-3"><h4 class="case-status">'+StatusVar+
                    '</h4><h4>'+value.Name+'</h4><h5><span class="badge"><i class="icon icon-circled-user-male"></i>'+
                    '</span></h5><h4><small>By</small> '+caseOwnerN+'</h4></div><div class="col-md-9">'+
                    '<div onclick="SearchSRdetails(\''+ value.Id +'\')"><a class="h3" href="#">'+
                    value.Subject__c+'</a></div><p>'+'</p></div></div>';
                    }                           
                    $('#'+DivId).html(CaseRecords);
            }
        });
    }   
        
    // DisplaySRRec Ends 
    
    
    // Cases Solutions SOSL Main Function Starts
        function DisplayAllResults(Records,contactid,accountid,Iindex,offset,DivId) { 
        console.log('id '+Records.length);
        if(DivId == 'RenderSolutionsTab1') 
        {   
            var CaseSearchCount = 0;
            var cmpcasesearchCount = 0;
            var solsearchCount = 0;
            var vidsearchCount = 0;
            var cassearchCount = 0;
            var srsearchCount = 0;
            var allArticles='';
            var visibilityall=0;
            if($('#category_all').prop("checked")){
            visibilityall=1;
            }
             $('#RenderSolutionsTab1').show();
             $('#RenderSolutionsTab1').empty();
              $('#searchResults').show();
              $('#CaseViewDetails').hide();
              $('#SRViewDetails').hide();
             var i=0;
             if(Records.length>0){
            $.each(Records, function(index,value) {
            console.log('testtt '+Iindex+ ' '+i)
            if(i < Iindex+offset){
            if(value.Id.substring(0,3) == 'ka4' || value.Id.substring(0,3) == 'ka2' || value.Id.substring(0,3) == 'ka3'){
           
                var pn;
                if( value.Honeywell_Part_Number__c  == null )
                {                        
                    pn ='N/A';
                }else
                {
                    pn =value.Honeywell_Part_Number__c;
                }
                var mn;
                if( value.Model_Name__c  == null )
                {                        
                    mn ='N/A';
                }else
                {
                    mn =value.Model_Name__c;
                }
                var pln;
                if( value.Platform_Name__c  == null )
                {                        
                    pln ='N/A';
                }else
                {
                    pln =value.Platform_Name__c;
                }
                var ldin;
                if( value.LDI_Number__c  == null )
                {                        
                    ldin ='N/A';
                }else
                {
                    ldin =value.LDI_Number__c;
                }
                if(value.Id.substring(0,3) == 'ka2' && ($('#category_solutions').prop("checked") || visibilityall>0))
                {
                if(i >=Iindex){
                allArticles+='<div class="well solution"><div class="col-md-3"><h4><small>Model Name</small>'+mn+'</h4><h4><small>Hon Part Number</small>'+pn+'</h4><h3><i class="icon icon-star blue"></i><i class="icon icon-star blue"></i><i class="icon icon-star blue"></i><i class="icon icon-star"></i><i class="icon icon-star"></i></h3></div><div class="col-md-9"><h4><small>Solution</small></h4><a class="h3" href="#" onclick="getKnowledgedetailConfirm(\''+ value.Id +'\')">'+value.Title+'</a><p>'+value.Summary+'</p></div></div>';    
                }
                i++;
                }
                
                if(value.Id.substring(0,3) == 'ka3' &&( $('#category_videos').prop("checked")|| visibilityall>0))
                {
                if(i >=Iindex){   
                allArticles+='<div class="well video"><div class="col-md-3"><h4><small>Model Name</small> '+mn+'</h4><h4><small>Hon Part Number</small>'+pn+'</h4><h4><small>Aircraft Type</small> </h4><h4><small>ATA Chapter</small></h4><h3><i class="icon icon-star blue"></i><i class="icon icon-star blue"></i><i class="icon icon-star blue"></i><i class="icon icon-star blue"></i><i class="icon icon-star"></i></h3></div><div class="col-md-9"><h4><small>Video</small></h4><a class="h3" href="#" onclick="getKnowledgedetailConfirm(\''+ value.Id +'\')">'+value.Title+'</a><p>'+value.Summary+'</p></div></div>';   
                }
                i++;
                }
                
                if(value.Id.substring(0,3) == 'ka4' && ($('#category_cas').prop("checked") || visibilityall>0))
                {
                if(i >=Iindex){   
                allArticles+='<div class="well solution"><div class="col-md-3"><h4><small>Model Name</small>'+pln+'</h4><h4><small>Hon Part Number</small>'+ldin+'</h4><h3><i class="icon icon-star blue"></i><i class="icon icon-star blue"></i><i class="icon icon-star blue"></i><i class="icon icon-star"></i><i class="icon icon-star"></i></h3></div><div class="col-md-9"><h4><small>CAS Messages</small></h4><a class="h3" href="#" onclick="getKnowledgedetailConfirm(\''+ value.Id +'\')">'+value.Title+'</a><p>'+value.Summary+'</p></div></div>';
                }
                i++;
                }
            }
           if(value.Id.substring(0,3) == 500) {
            var actype= '';                   
                if( value.Aircraft_Type__c == null )
                {                        
                    actype ='N/A';
                }
                else
                {
                    actype = value.Aircraft_Type__r.Name;
                }
                var product= ''; 
                if( value.Supported_Products__c== null ){
                product ='N/A';
                }
                else
                {
                    product = value.Supported_Products__r.Name;
                }
                var subject= '';                   
                if( value.Subject == null )
                {                        
                    subject ='N/A';
                }
                else
                {
                    subject = value.Subject;
                }
                var description= '';                   
                if( value.Description == null )
                {                        
                    description ='N/A';
                }
                else
                {
                    description = value.Description.substring(0, 300);
                }
                if(value.ContactId != '' && value.ContactId == contactid){
                    if(value.IsClosed && ($('#category_yourcases').prop("checked") || visibilityall>0)){
                    if(i >=Iindex){
                    allArticles+='<div class="well case case-closed"><div class="col-md-3"><h4 class="case-status">Closed</h4><h4>CASE-'+value.CaseNumber+'</h4><hr/><h4><small>A/C Type</small>'+actype+' </h4><h4><small>Product</small>'+product+' </h4></div><div class="col-md-9"><h4><small>Case</small></h4><a class="h3" onclick="SearchCasedetails(\''+ value.Id +'\')">'+subject+'</a><p><span class="search-query">'+description+'</span> </p></div></div>'; 
                    }
                    i++;
                    }else if(value.Status == 'On Hold'  && ($('#category_yourcases').prop("checked") || visibilityall>0)){
                    if(i >=Iindex){
                    allArticles+=' <div class="well case case-onhold"><div class="col-md-3"><h4 class="case-status">'+value.Status+'</h4><h4>'+value.CaseNumber+'</h4><hr/><h4><small>A/C Type</small>'+actype+' </h4><h4><small>Product</small>'+product+' </h4></div><div class="col-md-9"><h4><small>Case</small></h4><a class="h3" onclick="SearchCasedetails(\''+ value.Id +'\')">'+subject+'</a><p><span class="search-query">'+description+'</span></p></div></div>';
                    }
                    i++;
                    } else if(($('#category_yourcases').prop("checked") || visibilityall>0)){
                    if(i >=Iindex){
                    allArticles+=' <div class="well case case-open"><div class="col-md-3"><h4 class="case-status">'+value.Status+'</h4><h4>'+value.CaseNumber+'</h4><hr/><h4><small>A/C Type</small>'+actype+' </h4><h4><small>Product</small>'+product+' </h4></div><div class="col-md-9"><h4><small>Case</small></h4><a class="h3" onclick="SearchCasedetails(\''+ value.Id +'\')">'+subject+'</a><p><span class="search-query">'+description+'</span></p></div></div>';
                    }
                    i++;
                    }
                }else if(value.AccountId != '' && value.AccountId == accountid )  {
                    if(value.IsClosed && ($('#category_yourcompany').prop("checked") || visibilityall>0)){
                    if(i >=Iindex){
                    allArticles+='<div class="well case case-closed"><div class="col-md-3"><h4 class="case-status">Closed</h4><h4>CASE-'+value.CaseNumber+'</h4><hr/><h4><small>A/C Type</small>'+actype+' </h4><h4><small>Product</small>'+product+' </h4></div><div class="col-md-9"><h4><small>Case</small></h4><a class="h3" onclick="SearchCasedetails(\''+ value.Id +'\')">'+subject+'</a><p><span class="search-query">'+description+'</span> </p></div></div>'; 
                    }
                    i++;
                    }else if(value.Status == 'On Hold'  && ($('#category_yourcompany').prop("checked") || visibilityall>0)){
                    if(i >=Iindex){
                    allArticles+=' <div class="well case case-onhold"><div class="col-md-3"><h4 class="case-status">'+value.Status+'</h4><h4>'+value.CaseNumber+'</h4><hr/><h4><small>A/C Type</small>'+actype+' </h4><h4><small>Product</small>'+product+' </h4></div><div class="col-md-9"><h4><small>Case</small></h4><a class="h3" onclick="SearchCasedetails(\''+ value.Id +'\')">'+subject+'</a><p><span class="search-query">'+description+'</span></p></div></div>';
                    }
                    i++;
                    } else if(($('#category_yourcompany').prop("checked") || visibilityall>0)){
                    if(i >=Iindex){
                    allArticles+=' <div class="well case case-open"><div class="col-md-3"><h4 class="case-status">'+value.Status+'</h4><h4>'+value.CaseNumber+'</h4><hr/><h4><small>A/C Type</small>'+actype+' </h4><h4><small>Product</small>'+product+' </h4></div><div class="col-md-9"><h4><small>Case</small></h4><a class="h3" onclick="SearchCasedetails(\''+ value.Id +'\')">'+subject+'</a><p><span class="search-query">'+description+'</span></p></div></div>';
                    }
                    i++;
                    }
                }
            }
            if(value.Id.substring(0,3) == 'a1V') {
                if(($('#category_servreq').prop("checked") || visibilityall>0))
                {   var caseOwnerN= '';
                    //console.log('**'+value.OwnerName__c);
                    if(value.OwnerName__c == null)
                    {                        
                         caseOwnerN ='Waiting for assignment';
                    }
                    else{
                          caseOwnerN = value.OwnerName__c;
                    }
                                            
                    var srStatusCheck = ''; 
                    var StatusVar = '';
                    if(value.Status__c == 'Closed'){
                    StatusVar = value.Status__c;
                    srStatusCheck = 'sr-closed'; 
                    }else{
                    StatusVar = 'Open';
                    srStatusCheck = 'sr-open';
                    }
                    if(value.Case_Number__c != null){
                    if(i >=Iindex){
                    allArticles += '<div class="well sr '+srStatusCheck+'"><div class="col-md-3"><h4 class="case-status">'+StatusVar+
                    '</h4><h4>'+value.Name+'</h4><h5><span class="badge"><i class="icon icon-circled-user-male"></i>'+
                    '</span></h5><h4><small>By</small> '+caseOwnerN+'</h4></div><div class="col-md-9">'+
                    '<h3>'+value.Subject__c+'</h3><p>'
                    +'<div onclick="SearchCasedetails(\''+ value.Case_Number__r.Id+'\')">Related to <a href="#">'+value.Case_Number__r.CaseNumber+'</a></div>'
                    +'</p></div></div>';
                    }
                    i++;
                    }else{
                    if(i >=Iindex){
                    allArticles += '<div class="well sr '+srStatusCheck+'"><div class="col-md-3"><h4 class="case-status">'+StatusVar+
                    '</h4><h4>'+value.Name+'</h4><h5><span class="badge"><i class="icon icon-circled-user-male"></i>'+
                    '</span></h5><h4><small>By</small> '+caseOwnerN+'</h4></div><div class="col-md-9">'+
                    '<div onclick="SearchSRdetails(\''+ value.Id +'\')"><a class="h3" href="#">'+
                    value.Subject__c+'</a></div><p>'+'</p></div></div>';
                    }
                    i++;
                    }
                }
             }
             }

            if(value.Id.substring(0,3) == 'ka4'){
            value.Id.substring(0,3)
            cassearchCount++;
            }
            else if(value.Id.substring(0,3) == 'ka2'){
            solsearchCount++;
            }
            else if(value.Id.substring(0,3) == 'ka3'){
            vidsearchCount++;
            }
            else if(value.Id.substring(0,3) == 500){
            if(value.ContactId != '' && value.ContactId == contactid){
            CaseSearchCount++;
            }
            else if(value.AccountId != '' && value.AccountId == accountid){
            cmpcasesearchCount++;
            }
            }
            else if(value.Id.substring(0,3) == 'a1V'){
            srsearchCount++;
            }
            else {
            console.log('id '+value.Id.substring(0,3));
            }
         });
            if(solsearchCount>=0){
            $('#solutionsSize').html('<span class="blue">('+solsearchCount+')</span>');}
            if(vidsearchCount>=0){
            $('#videosSize').html('<span class="blue">('+vidsearchCount+')</span>');}
            if(CaseSearchCount>=0){
            $('#casesSize').html('<span class="blue">('+CaseSearchCount+')</span>');}
            if(cmpcasesearchCount>=0){
            $('#companySize').html('<span class="blue">('+cmpcasesearchCount+')</span>');}
            if(cassearchCount>=0){
            $('#messagesSize').html('<span class="blue">('+cassearchCount+')</span>');}
            if(srsearchCount>=0){
            $('#servicesSize').html('<span class="blue">('+srsearchCount+')</span>');}
            
          
            var searchString = $('#SearchTextId').val();
            var min;
            var max;
            var ln =0;
            var sizeDisply='';
            if($('#category_all').prop('checked'))
            {
                ln+=Records.length;
            }
            if($('#category_solutions').prop("checked"))
            {
                ln+=solsearchCount;
            }
            if($('#category_yourcases').prop("checked"))
            {
                ln+=CaseSearchCount;
            }
            if($('#category_yourcompany').prop("checked"))
            {
                ln+=cmpcasesearchCount;
            }
            if($('#category_videos').prop("checked"))
            {
                ln+=vidsearchCount;
            }
            if($('#category_cas').prop("checked"))
            {
                ln+=cassearchCount;
            }
            if($('#category_servreq').prop("checked"))
            {
                ln+=srsearchCount;
            }
            Paginate(Records,Iindex,'RendersearchResultsSize','RendersearchResultsPageNum','Results',ln);
            
            $("a[href='#tab_searchres']").show().tab('show');
            $('#RenderSolutionsTab1').show();
             if(allArticles.length >0)
             {
             $('#RenderSolutionsTab1').html(allArticles);
             }
             else
             {
             $('#RendersearchResultsSize').html('No Records Found');
             }
        }
        }
        }     
           
     // Get My Records Previous method ends      
    // Cases Solutions SOSL Main Function ends    
    // Search Tech Pubs Start
        function TechPubsSearch() 
        {
            var strQuery = $('#SearchTextId').val();
            window.open('https://aerospace2.honeywell.com/wps/myportal/tech-pubs?gtoSearchValue='+strQuery); 
        }
    // Search Tech Pubs end   
    // Cookie Check Starts
    var NewLoad;
    function CookieCheck(){
        var CheckListName="KK";
        var CheckListValue="UserName"; //as many time this changes or does not exists in the cookie, the alert as NEW will be displayed
        checkCookie(CheckListValue);      
        function setCookie(CheckListValue, CheckListName, exdays) {
            var expires = "";
            document.cookie = CheckListValue + "=" + CheckListName + "; " + expires;
        }
        function getCookie(CheckListValue) {
            var name = CheckListValue + "=";
            var ca = document.cookie.split(';');
            for(var i=0; i<ca.length; i++) {
                var c = ca[i];
                while (c.charAt(0)==' ') c = c.substring(1);
                if (c.indexOf(name) != -1) 
                    return c.substring(name.length, c.length);
            }
            return "";
        }
        function checkCookie() {
            var user = getCookie(CheckListValue);
            if (user != "") {
                NewLoad = false;
            } else {
                NewLoad = true;
                user = CheckListName;
                if (user != "" && user != null) {
                    setCookie(CheckListValue, user, 365);
                }
            }
        }
    }
    // Cookie Check ends
    function OpenHelpPopup() {
       window.showModalDialog("/SSCommunity/TSSCommunityFAQ");        
    } 
    var mycaseSortBy='Date Created';
    var mycaseAircraft='all';
    var mycaseProductType='all';
    var cmpnyCaseSortBy='Date Created';
    var cmpnyCaseAircraft='all';
    var cmpnyCaseProductType='all';
    var serReqSortBy='Date Created';
    var serReqAircraft='all';
    var serReqProductType='all';
    $('select').selectpicker();
    $('.sort-by .dropdown-menu li a').on('click', function(e) 
    {
        e.preventDefault();
        var $this = $(this),
            $selectedValue = $this.text().trim();
            $thisParent = $this.parent(),
            $thisSibling = $('.sort-by.open .dropdown-menu li');
        if(!$thisParent.hasClass('active')) {
            $thisSibling.removeClass('active');
            $thisParent.addClass('active');
           mycaseSortBy=$selectedValue;
            caseLandingSearch(mycaseSortBy,mycaseAircraft,mycaseProductType);
            console.log($selectedValue);
        }
    }); 
     $('.sort-byCmpny .dropdown-menu li a').on('click', function(e) 
    {
        e.preventDefault();
        var $this = $(this),
            $selectedValue = $this.text().trim();
            $thisParent = $this.parent(),
            $thisSibling = $('.sort-byCmpny.open .dropdown-menu li');
        if(!$thisParent.hasClass('active')) {
            $thisSibling.removeClass('active');
            $thisParent.addClass('active');
            cmpnyCaseSortBy=$selectedValue;
            caseLandingSearch(cmpnyCaseSortBy,cmpnyCaseAircraft,cmpnyCaseProductType);
            console.log($selectedValue);
        }
    }); 
    $('.sort-bySer .dropdown-menu li a').on('click', function(e) 
    {
        e.preventDefault();
        var $this = $(this),
            $selectedValue = $this.text().trim();
            $thisParent = $this.parent(),
            $thisSibling = $('.sort-bySer.open .dropdown-menu li');
        if(!$thisParent.hasClass('active')) {
            $thisSibling.removeClass('active');
            $thisParent.addClass('active');
           serReqSortBy=$selectedValue;
            caseLandingSearch(serReqSortBy,serReqAircraft,serReqProductType);
            console.log($selectedValue);
        }
    }); 
    $('.sort-byAircrftType .dropdown-menu li a').on('click', function(e) 
    {
            e.preventDefault();
            var $this = $(this),
            $selectedValue = $this.text().trim();
            $thisParent = $this.parent(),
            $thisSibling = $('.sort-byAircrftType.open .dropdown-menu li');
        if(!$thisParent.hasClass('active')) {
            $thisSibling.removeClass('active');
            $thisParent.addClass('active');
            mycaseAircraft=$selectedValue;
            caseLandingSearch(mycaseSortBy,mycaseAircraft,mycaseProductType);
            console.log($selectedValue);
        }
    }); 
        $('.sort-byCmpnyAircrftType .dropdown-menu li a').on('click', function(e) 
    {
        e.preventDefault();
        var $this = $(this),
            $selectedValue = $this.text().trim();
            $thisParent = $this.parent(),
            $thisSibling = $('.sort-byCmpnyAircrftType.open .dropdown-menu li');
        if(!$thisParent.hasClass('active')) {
            $thisSibling.removeClass('active');
            $thisParent.addClass('active');
            cmpnyCaseAircraft=$selectedValue;
            caseLandingSearch(cmpnyCaseSortBy,cmpnyCaseAircraft,cmpnyCaseProductType);
        }
    }); 
        $('.sort-bySerAircrftType .dropdown-menu li a').on('click', function(e) 
    {
        e.preventDefault();
        var $this = $(this),
            $selectedValue = $this.text().trim();
            $thisParent = $this.parent(),
            $thisSibling = $('.sort-bySerAircrftType.open .dropdown-menu li');
        if(!$thisParent.hasClass('active')) {
            $thisSibling.removeClass('active');
            $thisParent.addClass('active');
            var select=$selectedValue;
            serReqAircraft=$selectedValue;
             caseLandingSearch(serReqSortBy,serReqAircraft,serReqProductType);
        }
    }); 
    $('.sort-byProductType .dropdown-menu li a').on('click', function(e) 
    {
            e.preventDefault();
            var $this = $(this),
            $selectedValue = $this.text().trim();
            $thisParent = $this.parent(),
            $thisSibling = $('.sort-byProductType.open .dropdown-menu li');
        if(!$thisParent.hasClass('active')) {
            $thisSibling.removeClass('active');
            $thisParent.addClass('active');
            mycaseProductType=$selectedValue;
            caseLandingSearch(mycaseSortBy,mycaseAircraft,mycaseProductType);
        }
    }); 
    $('.sort-byCmpnyProductType .dropdown-menu li a').on('click', function(e) 
    {
            e.preventDefault();
            var $this = $(this),
            $selectedValue = $this.text().trim();
            $thisParent = $this.parent(),
            $thisSibling = $('.sort-byCmpnyProductType.open .dropdown-menu li');
        if(!$thisParent.hasClass('active')) {
            $thisSibling.removeClass('active');
            $thisParent.addClass('active');
            cmpnyCaseProductType=$selectedValue;
            mycaseProductType=$selectedValue;
            caseLandingSearch(cmpnyCaseSortBy,cmpnyCaseAircraft,cmpnyCaseProductType);
        }
    }); 
    $('.sort-bySerProductType .dropdown-menu li a').on('click', function(e) 
    {
            e.preventDefault();
            var $this = $(this),
            $selectedValue = $this.text().trim();
            $thisParent = $this.parent(),
            $thisSibling = $('.sort-bySerProductType.open .dropdown-menu li');
        if(!$thisParent.hasClass('active')) {
            $thisSibling.removeClass('active');
            $thisParent.addClass('active');
            var select=$selectedValue;
           
            serReqProductType=$selectedValue;
            caseLandingSearch(serReqSortBy,serReqAircraft,serReqProductType);
        }
    }); 
     $('.sort-searchresSortBy .dropdown-menu li a').on('click', function(e) 
    {
            e.preventDefault();
            var $this = $(this),
            $selectedValue = $this.text().trim();
            $thisParent = $this.parent(),
            $thisSibling = $('.sort-searchresSortBy.open .dropdown-menu li');
        if(!$thisParent.hasClass('active')) {
            $thisSibling.removeClass('active');
            $thisParent.addClass('active');
            SortVar=$selectedValue; 
            MainSearchFunction();
        }
    }); 
         $('.sort-searchresSortByArticraft .dropdown-menu li a').on('click', function(e) 
    {
            e.preventDefault();
            var $this = $(this),
            $selectedValue = $this.text().trim();
            $thisParent = $this.parent(),
            $thisSibling = $('.sort-searchresSortByArticraft.open .dropdown-menu li');
        if(!$thisParent.hasClass('active')) {
            $thisSibling.removeClass('active');
            $thisParent.addClass('active');
            var select=$selectedValue;
            aircraftType=$selectedValue;
            FiltersearchResults(aircraftType);
        }
    });
         $('.sort-searchresSortByProducttype .dropdown-menu li a').on('click', function(e) 
    {
            e.preventDefault();
            var $this = $(this),
            $selectedValue = $this.text().trim();
            $thisParent = $this.parent(),
            $thisSibling = $('.sort-searchresSortByProducttype.open .dropdown-menu li');
        if(!$thisParent.hasClass('active')) {
            $thisSibling.removeClass('active');
            $thisParent.addClass('active');
            productType=$selectedValue;           
            FiltersearchResults(productType);
        }
    });
     function setCaseDetails() {
        var case_contact = $('#case_contact').val();
        var atachapter = $('#case_ata').val();
        var partnumber = $('#case_part').val();
         var subject = $('#case_subject').val();
          var description = $('#case_description').val();
          var actid = $('[id$=AircraftTypeId]').val();
          var productid =$('[id$=ProductTypeId]').val();
          var attname =$('[id$=ContentName]').val();
          var contentbody =$('[id$=ContentId]').val();
          var atttype =$('[id$=ContentType]').val();
          if(attname == null || attname == ''){
            attname ='null';
          }
          if(atttype == null || atttype == ''){
            atttype ='null';
          }
        console.log('---2' + atttype);
        console.log('---3' + attname);
            var positionIndex = 0;
            var chunkSize = 950000;
            var fileSize =contentbody.length;
            var attbody ='null';
            console.log('---1' + attbody);
            if(fileSize <= positionIndex + chunkSize) {
            attbody = contentbody.substring(positionIndex);
            } else {
            attbody = 'Customer uploade file is too large. Request customer to share file via email.';
            atttype='application/txt';
            attname ='unable to load.txt';
            }
            
          var inqtype = '';
          if($('#radio_avionics').val()){
          inqtype = 'Electrical';
          }
          if($('#radio_mechanics').val()){
          inqtype = 'Mechanical';
          }
          var casedetails = productid+','+partnumber+','+subject+','+description+','
          +actid+','+atachapter+','+inqtype+','+attname+','+attbody+','+atttype;
            $('[id$=InquiryTypeId]').val(inqtype);
            $('[id$=PartTypeId]').val(partnumber);
            $('[id$=ATAId]').val(atachapter);
            $('[id$=SubjectId]').val(subject);
            $('[id$=DescriptionId]').val(description);
            //attach();
         SSCommunityCases_Cntrl.createCaseRemote(casedetails, function(result, event){
         if(event.status) { 
         console.log('---1' + result);
         $('[id$=CaseNum]').val(result);
         console.log('---2' + $('[id$=CaseNum]').val());
         
             CN = '<div class="modal-dialog"><div class="modal-content"><div class="modal-header">'
                +'<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>'
                +'<h3 class="modal-title">Your Request has been Submitted</h3>'
                +'</div><div class="modal-body"><div class="row">'
                +'<div class="col-md-12">'+
                        '<p>Thank you for your inquiry, your Case number is <a href="details_open.html">'+result+'</a>.</p>'
                       +'<p>A Honeywell Aero Technical Support representative will contact you within 10 hours.</p>'
                    +'</div></div></div>'
            +'<div class="modal-footer"><button type="button" class="btn btn-primary" data-dismiss="modal">Ok</button>'
            +'</div></div></div>';
         $('#CaseNum').html(CN);
         //attach();
         }
         });
         //attach();
                // $('#formModal').show();
                //$('#confirmationModal').show();
     }
     

  function readSingleFile(evt) {
    //Retrieve the first (and only!) File from the FileList object
    var f = evt.target.files[0]; 

    if (f) {
      var r = new FileReader();
      r.onload = function(e) { 
          var contents = window.btoa(unescape(encodeURIComponent(e.target.result)));
          //var contents1 = decodeURIComponent(escape(window.atob(contents)))
       //var contents = unescape(encodeURIComponent(e.target.result)) ;
        $('[id$=ContentId]').val(contents);
        $('[id$=ContentName]').val(f.name);
        $('[id$=ContentType]').val(f.type);
        //console.log('---1' + $('[id$=ContentId]').val());
        console.log('---2' + $('[id$=ContentName]').val());
        console.log('---3' + $('[id$=ContentType]').val());
      }
      r.readAsText(f);
    } else { 
      alert("Failed to load file");
    }
  }

  document.getElementById('exampleInputFile').addEventListener('change', readSingleFile, false);


    function FiltersearchResults()
    {
        $('body').loading(); 
        //alert('entering into filter block');
        var filterList = [];
        SolutionsArray = [];
        CasesArray = [];
        ResultsArray = [];
        srArray = [];
        var searchString = $('#SearchTextId').val();
        var SearchPlatform='';
        //alert('aircraftType'+aircraftType);
        var SortVar = 'lastUpdated';
            SSCommunityCases_Cntrl.caseSearch(searchString,SortVar,aircraftType,productType, function(result, event){
                if(event.status) {   
                $.each(result.results, function(index,value){
                ResultsArray.push(value);  
                }); 
                    contactid = result.conId;
                    accountid = result.accid;
                    if(ResultsArray.length != 0 || true) {                                
                            //DisplayCaseSol(SolutionsArray,SolutionsIndex,size,'RenderSolutionsTab1'); 
                            DisplayAllResults(ResultsArray,contactid,accountid,0,size,'RenderSolutionsTab1'); 
                            SolutionsArray=[];
                            $('#KnowledgeSearchDiv').removeClass('hidden');
                            $('body').loading(); 
                    } 
                }
            });     
    }

function togglefunction(){
//alert('Thank you');


}
    //Change Thumbs Up/Down Image onclick of it    
     function changeImage1() {
    document.getElementById("imagechange").src = "{!URLFOR($Resource.Like)}";
    document.getElementById("imagechangeD").src ="{!URLFOR($Resource.Dislike_Before)}";
    
    
        }
    
    function changeImage2(){
        document.getElementById("imagechangeD").src = "{!URLFOR($Resource.Dislike)}";
        document.getElementById("imagechange").src = "{!URLFOR($Resource.Like_Before)}";
        
        } 
        //TCS- added for feedback on article
        function showComment(str ){
      //alert('str' );
      //alert('rateIds1' +rateIds1);
      //alert('rateIds2' +rateIds2);
    var x = document.getElementById('box');

        if(str == 'No'){
            //$('#box').show();
            //$('#box1').show();
            $('#box2').show();
            $('#box3').hide();
 
        }
        if(str == 'Yes'){
            //$('#box').show();
            //$('#box1').show();
            $('#box2').hide();
            $('#box3').show();
 
        }
        }
        
     function thanksAlert(){
     
     var x = document.getElementById('thanks');
     
     if(x.style.display === 'none'){
            $('#thanks').show();
            
            
        }
     
     }
    
     
     function validationAlert(){
     //alert('Thank you for your feedback');
     var abc= $('textarea[id$=commentBox]').val(); 
     //alert(abc);
     if(abc === ''){
         //alert('Please provide comment for improvement');
         $('#thanksCom').show();
         
         return false;  
          
     }else{
           $('#thanksCom').hide();
           $('#thanks').show();
           //alert('Thank you for your feedback');
           return true;
     
     } 
     }
    
// change ended for feedback on article

</script>




<style>
/*
.testradio,[type=checkbox]:not(.cmn-toggle) {
    position: inherit;
    left: -9999px; 
}

.radiobutton{

border: none;padding-left: 157px;padding-top: -36px;padding-top: -25px;}
    

  

    */
/*TCS:added to align like and dislike button*/
 @media only screen and (min-width: 768px){
    div#thanks.col-md-3{;}
    }
 @media only screen and (max-width: 768px) {
   .col-xs-12{ text-align:center;}
    
   div#thanks.col-xs-12{ text-align:center;top:8px;}
    }
 @media only screen and (min-width: 768px){
    div#thanks.col-md-3{;}
    } 
    
 @media (min-width: 1025px)
.col-md-offset-8 {
    margin-left: 65.07775%;
}
@media only screen and (min-width: 800px){
    #thumbs{
        margin-top:-17px;
        margin-left:524px;
    }
    #Qst{
        margin-left:200px;
    }
    #box{
    margin-top:-32px;
    margin-left:625px
    }

    #box1{
    margin-left:610px;
    }
    #box2{
    margin-left:739px;
    border: 1px solid grey;
    padding: 2px;
    width: 52px;
    background-color: lightgrey;
    }
    #box3{
    margin-left:739px;
    border: 1px solid grey;
    padding: 2px;
    width: 52px;
    background-color: lightgrey;   
    }    
}

@media only screen and (max-width : 765px){
    #thumbs{
       text-align:center;
    }
    #Qst{
        text-align:center;
    }
    #box{
    text-align:center;
    }

    #box1{
    text-align:center;
    }
    #box2{
    text-align:center;
    }
    #box3{
    text-align:center;
    }    
}

@media only screen and (max-width: 770px){
    #Qst{
    margin-top:50px;
    text-align:center;
    }
    #thumbs{
    margin-top:20px;
    text-align:center;
    }
    #box{
    text-align:center;
    }
    #box1{
    text-align:center;
    }
    #box2{
    text-align:center;
    }
    #box3{
    text-align:center;
    }    
    }



.image{
    width: 35px;
    height: 35px;
    margin-top: -17px;
    margin-bottom: -17px;
    line-heigth: 50px;
    border-radius: 50%;
    
    }
    
    .image:hover{
    
    opacity: 0.5;
    

    }
    
   a {
    color: black;
    text-decoration: none;
}
    
    
    
</style>


<c:DLS_Footer />

</body>
</html>-->
</apex:page>