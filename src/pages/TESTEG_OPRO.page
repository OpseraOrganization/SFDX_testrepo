<apex:page standardcontroller="Workflow_details__c" lightningStylesheets="true" extensions="TESTEG_Controller">
<apex:includeScript value="{!$Resource.jqueryminjs}"/>
<style>
.labelclass{text-align: right;
font-size: 91%;
font-weight: bold;
}
.inputtextarea {
width: 250px;
height: 75px;
}
.inputtextarea1 {
width: 250px;
height: 50px;
}
.dummyspace{
-webkit-appearance: textfield;
height: 2px;
}
</style>
<script type="text/javascript">
//getnameandnum();
function getnameandnum(){
                     var opportunityid= $('[id$=idoppname_lkid]').val();
                     if(opportunityid!= null && opportunityid!= ''){
                     Visualforce.remoting.Manager.invokeAction(
                         '{!$RemoteAction.TESTEG_Controller.getnameandnum}',
                         opportunityid,
                         function(result,event){
                         
                         if (event.status) {
                             
                             if($('[id$=idoppname]').val() !=null){
                              
                                if(result[0] != null){
                                  
                                    $('#idName').val(result[0]);
                            
                                }
                                else{ 
                                    $('#idName').val('');
                                }
                                if(result[1] != null)
                                    $('#idownerName').val(result[1]);
                                else
                                    $('#idownerName').val('');
                                    
                               
                               if(result[2] == 'ATR'){
                                  
                                   $('#idATR').attr('checked','checked') ;
                                    
                               }else{
                                    $('#idATR').attr('checked');
                               }
                               if(result[2] == 'BGA'){
                                   $('#idBGA').attr('checked','checked') ;
                                    
                               }else{
                                    $('#idBGA').attr('checked');
                               }
                               
                               var dds = result[2].replace(/amp;/g,"");
                               if(dds == 'D&S'){
                                   $('#idDnS').attr('checked','checked') ;
                                    
                               }else{
                                    $('#idDnS').attr('checked');
                               }
                               if(result[3] == 'Airlines'){
                                   $('#idAir').attr('checked','checked') ;
                                    
                               }else{
                                    $('#idAir').attr('checked');
                               }
                               if(result[3] == 'Airbus'){
                                   $('#idAbus').attr('checked','checked') ;
                                    
                               }else{
                                    $('#idAbus').attr('checked');
                               }
                               if(result[3] == 'HTSI'){
                                   $('#idHTSI').attr('checked','checked') ;
                                    
                               }else{
                                    $('#idHTSI').attr('checked');
                               }
                                if(result[3] == 'Boeing ATR'){
                                   $('#idboeing').attr('checked','checked') ;
                                    
                               }else{
                                    $('#idboeing').attr('checked');
                               }
                                if(result[3] == 'Components Business'){
                                   $('#idcomp').attr('checked','checked') ;
                                    
                               }else{
                                    $('#idcomp').attr('checked');
                               }
                             
                               if ((result[4] == '{!$Label.OE_Complex}') || (result[4] == '{!$Label.OE_Standard}') || (result[4] == '{!$Label.BGA_OE}')) {
                                   $('#idOE').attr('checked','checked') ;
                                    
                               }else{
                                    $('#idOE').attr('checked');
                               }
                              if ((result[4] == '{!$Label.AM_Complex}') || (result[4] == '{!$Label.AM_Standard}')||(result[4] == '{!$Label.AM_Catalog}')) {
                                   $('#idAM').attr('checked','checked') ;
                                    
                               }else{
                                    $('#idAM').attr('checked');
                               }
                              
                              
                                if(result[5] == 'Americas'){
                                   $('#idAmericas').attr('checked','checked') ;
                                    
                               }else{
                                    $('#idAmericas').attr('checked');
                               }
                                if(result[5] == 'Europe/MiddleEast/Africa/India'){
                                   $('#idEMEAI').attr('checked','checked') ;
                                    
                               }else{
                                    $('#idEMEAI').attr('checked');
                               }
                               if(result[5] == 'Asia/Pacific Rim'){
                                   $('#idAPAC').attr('checked','checked') ;
                                    
                               }else{
                                    $('#idAPAC').attr('checked');
                               }                              
                               if(result[6] != null)
                                    $('#idoppNuma').val({!wfd.Opportunity_Number__c});
                                else
                                    $('#idoppNuma').val('');
                                if(result[6] != null)
                                    $('#idNumber').val({!wfd.Opportunity_Number__c});
                                else
                                    $('#idNumber').val('');
                                 
                                //alert(result[7]);
                                if(result[7] != null){
                                   // $('[id$=acctid_lkold]').val(result[7]);
                                   // $('[id$=acctid]').val(result[7]);
                                    //alert('result 7'+result[7]);
                                }
                                else
                                    $('#idAcct').val(''); 
                                    
                                if(result[8] != null){
                                    alert('result-8'+result[8]);
                                    $('[id$=acctid_lkid]').val(result[8]);
                                    
                                }
                                  
                             }
                                 
                                 
                          } else if (event.type === 'exception') {
                                //document.getElementById("responseErrors").innerHTML = event.message + "<br/>\n<pre>" + event.where + "</pre>";
                                //alert(event.message);
                            } else {
                                //document.getElementById("responseErrors").innerHTML = event.message;
                                //alert(event.message);
                            }
                         }, 
                         {escape: true}
                     
                     );
                 
                 }
       }    
       
         $(document).ready(function(){
           //alert($('[id$=idoppname]').val());
           if($('[id$=idoppname]').val() != ''){
               getnameandnum();
           }
           
            $('[id$=at]').val('Draft');
       });
       
       function updateOppValuesToWF(){

           var oppNumber = $('#idoppNuma').val();
           $('[id$=idownerNameVal]').val(oppNumber);

            var oppNumm = $('#idNumber').val();
           $('[id$=idnumm]').val(oppNumm);
           var oppowner = $('#idownerName').val();
           $('[id$=idowner]').val(oppowner);
            var oppnamm= $('#idName').val();
           $('[id$=idnam]').val(oppnamm);


           $('[id$=idatrr]').val($("#idATR").is(':checked'));
           $('[id$=idbgaa]').val($("#idBGA").is(':checked'));
           $('[id$=iddnss]').val($("#idDnS").is(':checked'));
            $('[id$=iddnss]').val($("#idDnS").is(':checked'));
            $('[id$=idhiss]').val($("#idHIS").is(':checked'));
            $('[id$=idhtsii]').val($("#idHTSI").is(':checked'));
             
            $('[id$=idairlines]').val($("#idAir").is(':checked'));
            $('[id$=idairbus]').val($("#idABus").is(':checked'));
            $('[id$=idboeingg]').val($("#idboeing").is(':checked'));
            $('[id$=idcompp]').val($("#idcomp").is(':checked'));  
            
             $('[id$=idoee]').val($("#idOE").is(':checked'));
            $('[id$=idamm]').val($("#idAM").is(':checked'));  
            
            $('[id$=idamericaa]').val($("#idAmericas").is(':checked')); 
            $('[id$=idapacc]').val($("#idAPAC").is(':checked')); 
            $('[id$=idemeaii]').val($("#idEMEAI").is(':checked'));
            $('[id$=idgloball]').val($('[id*=ao]').is(':checked'));            
            
            var customerId = $('[id$=acctid_lkid]').val();
            //alert(customerId);
            $('[id$=idAccountId]').val(customerId);
            
            passValues();
            
            return true;
       }
       </script> 
<apex:form >
 <apex:pageBlock mode="edit" title="eGreensheet Detail" >
 <apex:pageMessages ></apex:pageMessages>
            <apex:pageBlockButtons >
                <apex:commandButton action="{!cancel}" value="Cancel"/>
                <apex:actionFunction name="passValues" action="{!saveAAS}"/>
                <input type="button" onclick="updateOppValuesToWF();"  value="Save" class="btn" />
                <!--<apex:commandButton onclick="updateOppValuesToWF();"  value="Save"/>-->
                 </apex:pageBlockButtons>

 <apex:pageBlockSection title="Business Unit">
        <apex:panelGrid columns="2">
          <apex:outputLabel styleClass="labelclass" value="Sales Channel"/>
            <apex:inputField value="{!wfd.Sales_Channel__c}"/>
              
         
       </apex:panelGrid>
        <apex:panelGrid columns="2">
        <apex:outputLabel styleClass="labelclass" value="Product SBU" for="SBU"/>
           <apex:inputField value="{!wfd.Product_SBU__c}"/>
      

       
      </apex:panelGrid>
      </apex:pageBlockSection>   
     
        <apex:pageBlockSection title="Information">
         <apex:panelGrid columns="2">
            <!-- <apex:outputLabel styleClass="labelclass" value="eGreensheet Number" for="wnd"/>
      <apex:inputField id="ap1" value="{!Workflow_details__c.Name}"/> -->
      <apex:outputLabel styleClass="labelclass" value="eGreensheet Name" for="wn"/>
     <apex:outputPanel styleClass="requiredInput" layout="block">
     <apex:outputPanel styleClass="requiredBlock" layout="block"/> 
      <apex:inputField id="aq" required="true" value="{!wfd.Wokflow_Name__c}"/></apex:outputPanel>
      <apex:outputLabel styleClass="labelclass" value="Case" for="cas"/>
      <apex:inputField id="caa"  value="{!wfd.Case__c}"/>
         
         
      <apex:outputLabel styleClass="labelclass" value="Opportunity "/>
       <apex:inputField value="{!wfd.Opportunity_Description__c}" id="idoppname" onchange="getnameandnum()" />
       <apex:outputLabel styleClass="labelclass" value="Opportunity Proposal" for="op"/>
      <apex:inputField id="ar" value="{!wfd.Opportunity_Proposal__c}"/>
      <apex:outputText styleClass="dummyspace" value="" />
      <apex:outputText styleClass="dummyspace" value="" />
         <apex:outputLabel styleClass="labelclass" value="Status" for="st"/>
      <apex:inputField id="at" value="{!Workflow_details__c.Status__c}"/> 
      <apex:outputText styleClass="dummyspace" value="" />
          <apex:outputText styleClass="dummyspace" value="" />
        
                    
      <!--<apex:outputLabel styleClass="labelclass" value="Suggested Tier" for="sut"/>
      <apex:outputField id="au" value="{!Workflow_details__c.Suggested_Tier__c}"/> 
     <apex:outputLabel value="" />-->
     
      <apex:outputText styleClass="dummyspace" value="" />
      <apex:outputText styleClass="dummyspace" value="" />
     
        <!-- <apex:outputLabel styleClass="labelclass" value="Approval Level Required" for="alr"/>
      <apex:inputField id="av" value="{!Workflow_details__c.Approval_Level_Required__c}"/>-->
      <apex:outputLabel styleClass="labelclass" value="Approval Level" for="alp"/>
      <apex:inputField id="aw" required="true" value="{!Workflow_details__c.Approval_Level_in_Progress__c}"/>
    
          <apex:outputLabel styleClass="labelclass" value="Opportunity Number" for="sfdc"/>
        <apex:outputPanel styleClass="requiredInput" layout="block">
     <apex:outputPanel styleClass="requiredBlock" layout="block"/> 
         <apex:inputField id="idoppNum" required="true" value="{!wfd.Opportunity_Number__c}"/>
        <input id="idoppNuma" type="hidden"/> 
  </apex:outputPanel>
      <apex:outputLabel styleClass="labelclass" value="Opportunity Lead/Owner"/>
      <input id="idownerName" type="text" />
      <apex:outputLabel styleClass="labelclass" value="Customer Name" for="cn"/>
      <apex:inputField id="acctid" required="true" value="{!wfd.Customer_Name__c}"/> 
     
      <!-- <input id="idAcct" type="text" readonly="readonly" />-->
         <apex:outputLabel styleClass="labelclass" value="Customer Description" for="cd"/>
      <apex:inputField id="az" value="{!Workflow_details__c.Customer_Description__c}"/>
      <apex:outputLabel styleClass="labelclass" value="Contract Manager" for="cm"/>
      <apex:inputField id="ba" value="{!Workflow_details__c.Contract_Manager__c}"/>
      <apex:outputLabel styleClass="labelclass" value="Contract Type" for="ct"/>
      <apex:inputField id="bb" value="{!Workflow_details__c.Contract_Type__c}"/>

       <apex:inputHidden id="idAccountId" value="{!acctid}"/>
      <apex:inputHidden id="idownerNameVal" required="true" value="{!oppNumber}" />
      <apex:inputHidden id="idowner" value="{!oppowner}"/>
      
      </apex:panelGrid>
      <apex:panelGrid columns="2">
       <apex:outputLabel styleClass="labelclass" value="Summary" for="sum"/>
      <apex:inputField styleClass="inputtextarea" id="bc" value="{!Workflow_details__c.Summary__c}"/>
      <apex:outputLabel styleClass="labelclass" value="Sales (K$)" for="sk"/>
      <apex:inputField id="bd" required="true" value="{!Workflow_details__c.Sales_K__c}"/>
         <apex:outputLabel styleClass="labelclass"  value="5 Year Revenue (K$)" for="yr"/>
      <apex:inputField id="be" required="true" value="{!Workflow_details__c.X5_Year_Revenue_K__c}"/>
      <apex:outputLabel styleClass="labelclass" value="Terms and Conditions" for="tnc"/>
       <apex:inputField id="bf"  required="true" value="{!Workflow_details__c.Terms_and_Conditions__c}"/>
         <apex:outputLabel styleClass="labelclass" value="Front End Loss (K$)" for="fel"/>
      <apex:inputField id="bg"  required="true" value="{!Workflow_details__c.Front_End_Loss__c}"/>
      <apex:outputLabel styleClass="labelclass" value="Exposed Cost (K$)" for="ec"/>
      <apex:inputField id="bh" required="true" value="{!Workflow_details__c.Exposed_Cost__c}"/>
         <apex:outputLabel styleClass="labelclass" value="Front End Loss Max/Year (K$)" for="elm"/>
      <apex:inputField id="bi" required="true" value="{!Workflow_details__c.Front_End_Loss_Max_Year__c  }"/>
      <apex:outputLabel styleClass="labelclass"  value="Exposed Cost Max/Year (K$)" for="ecm"/>
      <apex:inputField id="bj" required="true" value="{!Workflow_details__c.Exposed_Cost_Max_Year_K__c}"/>
         <apex:outputLabel styleClass="labelclass" value="Documentum Link" for="doc"/>
      <apex:inputField id="bk" required="true" value="{!Workflow_details__c.Documentum__c}"/>
      <apex:outputLabel styleClass="labelclass" value="Requester’s Comments" for="rc"/>
      <apex:inputField id="bl" styleclass="inputtextarea1"  value="{!Workflow_details__c.Requester_s_Comments__c}"/>
         <apex:outputLabel styleClass="labelclass" value="Owner" for="od"/> 
     <apex:outputlabel id="bm" value="{!$User.FirstName} {!$User.LastName}"/>  
      <!-- <apex:outputLabel styleClass="labelclass" value="Opportunity Number" for="opn"/>
       <input id="idNumber" type="text"/>

     <apex:outputLabel styleClass="labelclass" value="Opportunity Name"/>
       <input id="idName" type="text" /> -->

       
       <apex:inputHidden id="idnam" value="{!oppnamm}"/>
       

      </apex:panelGrid>
      </apex:pageBlockSection>
    </apex:pageBlock>
    </apex:form>
</apex:page>