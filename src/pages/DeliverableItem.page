<apex:page standardController="Deliverable_Item__c" extensions="DeliverableItem_cls" id="pg">
    <apex:include pageName="PopupStyle"/>

    <apex:form id="frm">
        <apex:actionFunction name="doCallsr" action="{!popupCallSr}" id="actfn1" />
         <apex:actionFunction name="doCallggp" action="{!popupCallGgp}" id="actfn2" />
    </apex:form>
    <apex:form id="frm2">
        <apex:sectionHeader subtitle="New Deliverable Item" title="Deliverable Item Edit" help="https://help.salesforce.com/htviewhelpdoc?id=co_edit.htm&siteLang=en_US" id="seched"/>
        <apex:pageBlock title="Deliverable Item Edit" mode="Edit" id="pgblk1">
         <apex:pageMessages ></apex:pageMessages>
            <apex:pageBlockButtons id="pgblkbtn">
                <apex:commandButton value="Save" action="{!doSave}" id="savebtn" />
                <apex:commandButton value="Save&New" action="{!doSaveNew}" id="snbtn"/>
                <apex:commandButton value="Cancel" action="{!doCancel}" id="canbtn"/>
            </apex:pageBlockButtons>
            <apex:pageBlockSection columns="2" title="Information" id="pgblksec">
                <apex:pageBlockSectionItem id="itm1">
                <apex:outputLabel id="optlbl" for="inpt1" value="SR Number" />
                    <apex:outputPanel id="optpnl">
                    <apex:inputText id="inpt1" value="{!srNum}"/>
                    <apex:image styleClass="lookupIcon" title=" ServiceRequest Lookup (New PopupWindow)" onclick="doCallsr();" onmouseover="this.className = 'lookupIconOn"  onmouseout="this.className = 'lookupIconOn" alt="ServiceRequest Lookup (New Window)" url="/s.gif" id="img1"/>
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem id="itm2">
                    <apex:outputLabel id="optlb2" for="inpt2" value="Go Green Plan" />
                    <apex:outputPanel styleClass="requiredInput" layout="block" id="optlbl2"> 
                    <apex:outputPanel styleClass="requiredBlock" layout="block" id="optpnl3"/>
                    <apex:inputText id="inpt2" value="{!ggpvalue}"/>
                    <apex:image styleClass="lookupIcon" title=" GoGreenPlan Lookup (New PopupWindow)" onclick="doCallggp();" onmouseover="this.className = 'lookupIconOn"  onmouseout="this.className = 'lookupIconOn" alt="GoGreenPlan Lookup (New Window)" url="/s.gif" id="img1"/>
                    </apex:outputPanel>         
                   </apex:pageBlockSectionItem>
                   
                <apex:pageBlockSectionItem id="itm7" >
                    <apex:outputLabel for="optlb7" value="Honeywell Site"/>
                    <apex:outputPanel id="srsite" >
                    <apex:outputtext id="inpt3" value="{!hsvalue}" rendered="{!(!showsites)}"/>
                      <apex:outputPanel styleClass="requiredInput" layout="block" id="optlbl7"> 
                      <apex:outputPanel styleClass="requiredBlock" layout="block" id="optpnl7"/>
                     <apex:selectList value="{!hsvalue}" id="optlb7" size="1" rendered="{!showsites}" >
                      <apex:selectOptions value="{!hsItems}"/>
                     </apex:selectList>
                       </apex:outputPanel></apex:outputPanel>
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem id="itm4">
                    <apex:outputLabel for="optlb4" value="Function" />
                    <apex:outputPanel styleClass="requiredInput" layout="block" id="optlbl4"> 
                    <apex:outputPanel styleClass="requiredBlock" layout="block" id="optpnl4"/>
                     <apex:selectList value="{!funpickvalue}" id="optlb4" size="1" >
                      <apex:selectOptions value="{!FunItems}"/>
                     </apex:selectList>
                       </apex:outputPanel> 
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem id="itm10">
                <apex:outputLabel for="optlb5" value="Progress to Go Green"/>
                    <apex:outputPanel styleClass="requiredInput" layout="block" id="optlbl5"> 
                    <apex:outputPanel styleClass="requiredBlock" layout="block" id="optpnl5"/>
                        <apex:selectList value="{!processpickvalue}" id="optlb5" size="1" tabindex="30" >
                      <apex:selectOptions value="{!processItems}"/>
                     </apex:selectList>
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem id="itm11" >
                <apex:outputLabel id="optlbl12" value="Action Owner" for="inpttxtl"/>
                    <apex:outputPanel styleClass="requiredInput" layout="block" id="optlbl6"> 
                    <apex:outputPanel styleClass="requiredBlock" layout="block" id="optpnl6"/>
               <apex:inputText id="inpttxtl" value="{!actowner}" /> 
                   </apex:outputPanel>
                </apex:pageBlockSectionItem>
            </apex:pageBlockSection> 
        </apex:pageBlock>
       <!--ServiceRequest Popup -->
        <apex:outputPanel id="ServiceRequest">
            <apex:outputPanel styleClass="popupBackground" layout="block" rendered="{!displayPopup}" id="optpnl6"/>
            <apex:outputPanel styleClass="custPopup" layout="block" rendered="{!displayPopup}" id="optpnl7">
                <apex:pageBlock id="srpgblk">
                    <div Style= "height:90px; width:100%;padding-left:8px;background-color:#EFF5FB" id="srdiv">
                        <apex:image value="{!$Resource.Search1}" height="45px" width="30px" id="img3" style="padding-left:13px"/>
                        <apex:outputLabel value="Lookup" id="optlbllk" Style="font-size:160%;"/><br/>
                        <apex:outputLabel value="Search" id="optlblser" for="inptxt"/>&nbsp;&nbsp;
                        <apex:inputText id="inptxt" value="{!SrValue}"/>&nbsp;&nbsp;
                        <apex:commandButton value="Go!" action="{!goSr}" reRender="srpgblktb" status="Status2" id="cmdbtnn"/>&nbsp;&nbsp;&nbsp;&nbsp; 
                        <apex:actionStatus id="Status2" >
                            <apex:facet name="start">
                                <apex:image url="/img/loading.gif" styleclass="waitingImage" title="Please Wait..."/> 
                            </apex:facet>
                        </apex:actionStatus>
                    </div>
                        <apex:commandLink value=" Clear Search Results " style="padding-left:20px"  onClick="clearTextSr();" id="cmdlync" reRender="inptxt"/><br/><br/>
                    <div style="overflow: auto; height:280px">
                         <apex:pageBlockTable value="{!srListt}" var="sr" id="srpgblktb" >
                              <apex:column id="col" headerValue="SR Number">
                                <apex:commandLink value="{!sr.Name}" action="{!setSrValue}">
                                <apex:param name="gp" value="{!sr.Name}" assignTo="{!srname}"/>
                                </apex:commandLink>
                            </apex:column>
                                    
                                    <apex:column id="col1" headerValue="Subject" value="{!sr.Subject__c}" />
                                    <apex:column id="col2" headerValue="Status" value="{!sr.Status__c}" />
                                    <apex:column id="col3" headerValue="Customer Due Date" value="{!sr.Customer_Due_Date__c}" />
                                    <apex:column id="col4" headerValue="Problem Description" value="{!sr.Problem_Description__c}" />
                                    <apex:column id="col5" headerValue="Resolution" value="{!sr.Status_Resolution__c}" />
                                    <apex:column id="col6" headerValue="Account Name" value="{!sr.Account_Name__c}" />
                                    <apex:column id="col7" headerValue="Complexity Level" value="{!sr.Complexity_Level__c}" />
                         </apex:pageBlockTable>
                    </div>
                 <center> <apex:commandButton value="cancel" action="{!doClose}" id="closebtn1"/></center>
                </apex:pageBlock>
            </apex:outputPanel>
        </apex:outputPanel>
        <!-- Go Green Plan Popup -->
         <apex:outputPanel id="GoGreenPlan">
            <apex:outputPanel styleClass="popupBackground" layout="block" rendered="{!displayPopup1}" id="optpnl8"/>
            <apex:outputPanel styleClass="custPopup" layout="block" rendered="{!displayPopup1}" id="optpnl9">
                <apex:pageBlock id="ggppgblk">
                     <div Style= "height:90px; width:100%;padding-left:8px;background-color:#EFF5FB" id="thisdiv">
                        <apex:image value="{!$Resource.Search1}" height="45px" width="30px" id="img3" style="padding-left:13px"/>
                        <apex:outputLabel value="Lookup" id="optlbl1" Style="font-size:160%;"/><br/>
                        <apex:outputLabel value="Search" id="optlbl2" for="inptxt"/>&nbsp;&nbsp;
                        <apex:inputText id="inptxt" value="{!textValue}"/>&nbsp;&nbsp;
                        <apex:commandButton value="Go!" action="{!letsGo}" reRender="ggppgblktb" status="Status1" id="cmdbtn"/>&nbsp;&nbsp;&nbsp;&nbsp; 
                        <apex:actionStatus id="Status1" >
                            <apex:facet name="start">
                                <apex:image url="/img/loading.gif" styleclass="waitingImage" title="Please Wait..."/> 
                            </apex:facet>
                        </apex:actionStatus>
                           </div>
                     <apex:pageMessages />
                    <apex:commandLink value=" Clear Search Results " style="padding-left:20px"  onClick="clearText();" reRender="pgblktab" id="cmdlync"/><br/><br/>
                       <div style="overflow: auto; height:280px">
                        <apex:pageBlockTable value="{!ggpList}" var="ggp" id="ggppgblktb">
                            <apex:column id="col" headerValue="GGP Number">
                                <apex:commandLink value="{!ggp.Name}" action="{!setValue}">
                                    <apex:param name="gp" value="{!ggp.Name}" assignTo="{!ggpname}"/>
                                </apex:commandLink>
                            </apex:column>
                            <apex:column id="col1" headerValue="Account" value="{!ggp.Account__c}"/>
                            <apex:column id="col2" headerValue="ProductLine" value="{!ggp.Prod_LN_Prgm_Product_LIne__c}"/>
                        </apex:pageBlockTable><br/><br/>
                        </div>
                    <center> 
                        <apex:commandButton value="cancel" action="{!doClose}" id="closebtn2"/>
                    </center>
                </apex:pageBlock>
            </apex:outputPanel>
        </apex:outputPanel>
         
        <script>
         $(function(){
            $("#CustomerDuedate").datepicker();
        });
        $(function() {
            $( "#closedate" ).datepicker();
        });
        $(function() {
            $( "#initiateddate" ).datepicker();
        });
        $('#linkme').click(function(){
            $('#initiateddate').val( $('#linkme').html());
        });
        $('#linkme2').click(function(){
            $('#closedate').val( $('#linkme2').html());
        });
        $('#linkme1').click(function(){
            $('#CustomerDuedate').val( $('#linkme1').html());
        });
       
        </script>
          <script>
            function clearText(){
               var ggptxt=document.getElementById("pg:frm2:ggppgblk:inptxt").value="";
            }
             function clearTextSr(){
              var ggptxt=document.getElementById("pg:frm2:srpgblk:inptxt").value="";
            }
            function getDateValues(){
                var customerdate =$('#CustomerDuedate').val();
                var initiateddate=$('#initiateddate').val();
                var closedate=$('#closedate').val();
                    goController(customerdate ,initiateddate,closedate);
            }        
            </script> 
            <!--
            <apex:actionFunction name="goController" action="{!doSave}" id="apfnct3">
                <apex:param value="" name="p1" assignTo="{!intiatedate}"/>
                <apex:param value="" name="p2" assignTo="{!closedate}"/>
                <apex:param value="" name="p3" assignTo="{!customerdate}"/>
            </apex:actionFunction> -->
        
    </apex:form>
</apex:page>