<apex:page cache="false" expires="10" controller="GCC_Dashboard_cls" showHeader="false" standardStylesheets="false">
<html lang="en">
<head>
<meta charset="utf-8" />
<title>GCC Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="description" content="GCC Dashboard" />
<meta name="author" content="Honeywell" />

<!-- Le styles -->
<style type="text/css">
    html{ height: 100%; }
</style>
<link href="{!URLFOR($Resource.db_bootstrap_zip, 'css/bootstrap.css')}" rel="stylesheet" type="text/css" />
<link href="{!URLFOR($Resource.db_bootstrap_zip, 'css/bootstrap-responsive.css')}" rel="stylesheet" type="text/css" />

<!-- Header Scripts -->    
<script type="text/javascript" src="{!URLFOR($Resource.db_bootstrap_zip, 'js/jquery.js')}"></script>
<script type="text/javascript" src="{!URLFOR($Resource.db_bootstrap_zip, 'js/jquery.cookie.js')}"></script>
<link href="{!URLFOR($Resource.db_bootstrap_zip, 'css/dashboard-responsive.css')}" rel="stylesheet" type="text/css" />
<link href="{!URLFOR($Resource.db_bootstrap_zip, 'css/GCCdashboard-responsive.css')}" rel="stylesheet" type="text/css" />

<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
<!--[if lt IE 9] -->
<c:lt_IE9_check />
<!--[endif]-->

</head>

  <div class="navbar navbar-fixed-top">      
    <div class="container">      
        <div class="row-fluid">
            <div class="span12" id="flash_placeholder">           
              <div class="non-flash_container">
                <img src="{!URLFOR($Resource.db_bootstrap_zip, 'img/GCC_nonflash_header.png')}" width="100%" />
              </div>             
            </div>
        </div>
    </div>
    
    <div class="navbar-inner">  
      <div class="container">
      
        <a data-target=".nav-collapse" data-toggle="collapse" class="btn btn-navbar">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <!--<a href="#" class="brand">Customers <strong>Helping</strong> Customers</a>-->
          <div class="nav-collapse collapse">
            <ul class="nav">
              <!--<li><a>RAILs CLOSED YTD <span class="ytd_block">{!countclosed}</span></a></li>-->
              <li><a href="http://committees.honeywell.com" target="_blank">GCC Home</a></li>
              <li><a href="{!ToggleUrl}">{!ToggleButton}</a></li>
              <li><a href="mailto:GCC@honeywell.com">Submit New Issue</a></li>
              <li><a href="http://www.myaerospace.com" target="_blank">MyAerospace Portal</a></li>
              <li><a href="#" id="autoscroll" style="padding-top: 6px;">Scroll OFF <i class='icon-stop'></i></a></li>
            </ul>
          </div><!--/.nav-collapse -->
        
      </div>
    </div>    
    <div class="ytd_block"><strong>TOP25</strong> RAILs CLOSED YTD <span>{!countclosed}</span></div>
  </div>  
  
  <div class="container">
  
    <apex:repeat value="{!SRs}" var="cas">
     <div class="row-fluid">   
    
        <div class="case">
        
            <div class="span2 no-leftmargin risk" style="width:auto">
            
                <apex:outputpanel rendered="{!IF((cas.One__c=='Closed'||cas.One__c=='Agenda Follow Up'),true,false)}" layout="none">    
                <div class="gcc_priority Grey">
                 {!left(cas.RAIL_Type__c,1)}{!cas.RAIL_Number__c}
                <small>{!cas.RAIL_Type__c}</small>
                </div>
                </apex:outputpanel>
                
                <apex:outputpanel rendered="{!IF((cas.One__c!='Closed'&& cas.One__c!='Agenda Follow Up'),true,false)}" layout="none"><!-- && cas.Escalated_RAIL__c==True -->
                <div class="gcc_priority Blue">
                 {!left(cas.RAIL_Type__c,1)}{!cas.RAIL_Number__c}
                <small>{!cas.RAIL_Type__c}</small>
                </div>
                </apex:outputpanel>
                
                <!-- <apex:outputpanel rendered="{!IF((cas.One__c!='Closed'&& cas.One__c!='Agenda Follow Up' && cas.Escalated_RAIL__c!=True),true,false)}" layout="none">    
                <div class="gcc_priority Green">
                {!left(cas.RAIL_Type__c,1)}{!cas.RAIL_Number__c}
                <small>{!cas.RAIL_Type__c}</small>
                </div>
                </apex:outputpanel> -->
                
<!-- Progress bars start -->   

                <!-- Completed --> 
                <apex:outputpanel rendered="{!IF((cas.One__c=='Closed'||cas.One__c=='Agenda Follow Up'),true,false)}" layout="none">    
                     <div class="percent_completed Blue" style="background-position: -150px 0;">{!cas.One__c}</div>
                </apex:outputpanel>
                
                
                
                 <!-- Blue
                <apex:outputpanel layout="none" rendered="{!IF((cas.One__c!='Closed'&& cas.One__c!='Agenda Follow Up' && cas.Actual_Completion__c==''),true,false)}" >    
                     <div class="percent_completed Blue" style="background-position: -90px 0;">Completed 0-25%</div>
                </apex:outputpanel>
                
                 <apex:outputpanel layout="none" rendered="{!IF((cas.One__c!='Closed'&& cas.One__c!='Agenda Follow Up' && cas.Actual_Completion__c=='0-25%'),true,false)}" >    
                     <div class="percent_completed Blue" style="background-position: -90px 0;">Completed {!cas.Actual_Completion__c}</div>
                </apex:outputpanel>

                <apex:outputpanel layout="none" rendered="{!IF((cas.One__c!='Closed'&& cas.One__c!='Agenda Follow Up' && cas.Actual_Completion__c=='25-50%'),true,false)}" >    
                     <div class="percent_completed Blue" style="background-position: -60px 0;">Completed {!cas.Actual_Completion__c}</div>
                </apex:outputpanel>

                <apex:outputpanel layout="none" rendered="{!IF((cas.One__c!='Closed' && cas.One__c!='Agenda Follow Up' && cas.Actual_Completion__c=='50-75%'),true,false)}" >    
                     <div class="percent_completed Blue" style="background-position: -30px 0;">Completed {!cas.Actual_Completion__c}</div>
                </apex:outputpanel>
                
                <apex:outputpanel layout="none" rendered="{!IF((cas.One__c!='Closed' && cas.One__c!='Agenda Follow Up' && cas.Actual_Completion__c=='75-100%'),true,false)}" >    
                     <div class="percent_completed Blue" style="background-position: 0px 20;">Completed {!cas.Actual_Completion__c}</div>
                </apex:outputpanel>
                 -->

                             
                                
                 <!-- Green -->
                <apex:outputpanel layout="none" rendered="{!IF((cas.One__c!='Closed' && cas.One__c!='Agenda Follow Up' && cas.Actual_Completion__c==''),true,false)}" >    
                     <div class="percent_completed Green" style="background-position: -90px 0;">Completed 0-25%</div>
                </apex:outputpanel>                
                
                <apex:outputpanel layout="none" rendered="{!IF((cas.One__c!='Closed' && cas.One__c!='Agenda Follow Up' && cas.Actual_Completion__c=='0-25%'),true,false)}" >    
                     <div class="percent_completed Green" style="background-position: -90px 0;">Completed {!cas.Actual_Completion__c}</div>
                </apex:outputpanel>

                <apex:outputpanel layout="none" rendered="{!IF((cas.One__c!='Closed' && cas.One__c!='Agenda Follow Up' && cas.Actual_Completion__c=='25-50%'),true,false)}" >    
                     <div class="percent_completed Green" style="background-position: -60px 0;">Completed {!cas.Actual_Completion__c}</div>
                </apex:outputpanel>

                <apex:outputpanel layout="none" rendered="{!IF((cas.One__c!='Closed' && cas.One__c!='Agenda Follow Up' && cas.Actual_Completion__c=='50-75%'),true,false)}" >    
                     <div class="percent_completed Green" style="background-position: -30px 0;">Completed {!cas.Actual_Completion__c}</div>
                </apex:outputpanel>
                
                <apex:outputpanel layout="none" rendered="{!IF((cas.One__c!='Closed' && cas.One__c!='Agenda Follow Up' && cas.Actual_Completion__c=='75-100%'),true,false)}" >    
                     <div class="percent_completed Green" style="background-position: 0px 20;">Completed {!cas.Actual_Completion__c}</div>
                </apex:outputpanel>
                


<!-- Progress bars end -->    
            </div>
            
               <!-- Status/Closed Actions start -->         
            
           <apex:outputpanel layout="none" rendered="{!IF((cas.One__c!='Closed'&& cas.One__c!='Agenda Follow Up' ),true,false)}" >    
                <div class="span5 no-leftmargin set-topmargin">
                <div class="main">{!cas.RAIL_Description__c}</div>
                <div class="status"><strong>Status: </strong>{!cas.Dashboard_Status__c}</div>
                <div><label>Working Team:</label><apex:outputText value="{!IF(cas.Working_Team_chk__c, 'Yes', 'No')}" /></div>
            </div>
          </apex:outputpanel>
            
          <apex:outputpanel layout="none" rendered="{!IF((cas.One__c=='Closed'||cas.One__c=='Agenda Follow Up'),true,false)}" >    
        <div class="span5 no-leftmargin set-topmargin">
                <div class="main">{!cas.RAIL_Description__c}</div>
                <div class="status"><strong>Closed Actions: </strong>{!cas.Dashboard_Status__c}</div>
                <div><label>Working Team:</label><apex:outputText value="{!IF(cas.Working_Team_chk__c, 'Yes', 'No')}" /></div>
            </div>
          </apex:outputpanel>

    <!-- Status/Closed Actions end -->       
    
      
           <apex:outputpanel layout="none" rendered="{!IF((cas.One__c!='Closed'&& cas.One__c!='Agenda Follow Up' ),true,false)}" >    
                <div class="span2 set-topmargin">
                <div><label>Last Updated: </label>{!Month(Datevalue(cas.Previous_Status_Update__c))}/{!Day(datevalue(cas.Previous_Status_Update__c))}/{!Year(datevalue(cas.Previous_Status_Update__c))}</div>                
                <!--<div class="set-topmargin"><label>Estimated Completion Date: </label>{!Month(Datevalue(cas.HON_Commit_Date__c))}/{!Day(datevalue(cas.HON_Commit_Date__c))}/{!Year(datevalue(cas.HON_Commit_Date__c))}</div> -->
                </div>
          </apex:outputpanel>
            
          <apex:outputpanel layout="none" rendered="{!IF((cas.One__c=='Closed'||cas.One__c=='Agenda Follow Up'),true,false)}" >    
                <div class="span2 set-topmargin">
                <div><label>Completion Date: </label>{!Month(Datevalue(cas.GCC_Date_Closed__c))}/{!Day(datevalue(cas.GCC_Date_Closed__c))}/{!Year(datevalue(cas.GCC_Date_Closed__c))}</div>                
                </div>
          </apex:outputpanel>

            <div class="span3 set-topmargin oems">
                <label>OEMs: </label><!-- {!cas.OEMs_Affected__c}<hr/> -->
                <apex:repeat value="{!OEMsMap[ cas.RAIL_Number__c ]}" var="oem">
                <div class="oem {!oem}"></div>
                </apex:repeat>                
            </div>

            <div class="clearfix"></div> 

        </div>
    
    </div>
    </apex:repeat>

   
    
  </div> <!-- /container -->
<script type="text/javascript" src="{!URLFOR($Resource.db_bootstrap_zip, 'js/bootstrap-collapse.js')}"></script>
<script type="text/javascript">    
    var dragging = false;
    var posY;
    var startingTime;
    
    disableSelection = function(target) {
        //For IE This code will work
        if (typeof target.onselectstart!="undefined")
        target.onselectstart=function(){return false}
        
        //For Firefox This code will work
        else if (typeof target.style.MozUserSelect!="undefined")
        target.style.MozUserSelect="none"
        
        //All other  (ie: Opera) This code will work
        else
        target.onmousedown=function(){return false}
        target.style.cursor = "default"
    }

    $('a [data-toggle]="modal"').click(function(){
        $('#myModal').modal({
            keyboard: true
        });
    });
    $('#myModal').on('show', function () {
        $('#myModal').html("<div class='modal_loader'></div>");
    });

    //$('body').onselectstart = function () { return false; };
    disableSelection( document.body );

    $('body').mousedown(function(event){
      posY = event.pageY;
      dragging = true;
    });

    $('body').mouseup(function() {
      dragging = false;
    });

    $('body').mousemove(function(event) {
      if(dragging) window.scrollBy(0, (posY>event.pageY?10:-10));/*(posY>event.pageY?10:-10)*/
    });
    
</script>
<script type="text/javascript">
    var scrollvalue;
    var interval;
    var delay = (Math.round((1/Math.round(document.body.scrollHeight/document.documentElement.clientHeight))*1000));
    var scroll_amount = 1;

    resizeFlash = function() {        
        obj_div = $("#flash_placeholder");

        if( obj_div.prop('offsetWidth') < 1920){
            obj_div.prop('height',Math.round(obj_div.prop('offsetWidth') * .09));
        }
        else {
            obj_div.prop('height',170);
        }
        document.body.style.paddingTop = (eval(obj_div.prop('height'))+37)+"px";
    }    

    $(window).unload( function(){
        $.cookie('autoscroll', scrollvalue);
    });

    $(window).resize(resizeFlash);

    $(window).ready( function(){
        if($.cookie('autoscroll'))scrollvalue = eval( $.cookie('autoscroll') );
        if( scrollvalue )$('#autoscroll').click();
        resizeFlash();
    });

    $('#autoscroll').toggle(function() {
      doScroll();
      $(this).html("Scroll ON <i class='icon-play'></i>");
    }, function() {
      doStop();
      $(this).html("Scroll OFF <i class='icon-stop'></i>");
    });

    animatedScroll = function() {
        if( (document.documentElement.scrollTop + document.documentElement.clientHeight) >= document.body.scrollHeight) {
            window.location.reload();
            window.scrollTo(0,0);
        } else {
            window.scrollBy(0,scroll_amount);
        }

    };

    doScroll = function() {
        interval = setInterval("animatedScroll()",delay);
        scrollvalue = true;
    };

    doStop = function() {
        clearInterval(interval);
        scrollvalue = false;
    };    
   

</script>

</html>
<apex:insert name="footer">
        <c:honeywellFooter />
</apex:insert>

</apex:page>