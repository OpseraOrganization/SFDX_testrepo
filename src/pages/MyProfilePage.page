<apex:page id="portalUserProfilePage" controller="MyProfilePageController" showHeader="true" sidebar="true" title="{!$Label.site.my_profile_page}">
  <!--<apex:composition template="{!$Site.Template}">--->
    <apex:define name="body">
        <apex:form id="theForm">
            <apex:outputPanel style="padding:50px 50px 50px 50px" id="userDetail" >
            <apex:pageBlock title="{!$Label.site.my_profile}" id="editUserDetail" rendered="{!isEdit}">
                <apex:pageMessages />
                    <apex:pageBlockButtons id="editButtons">
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        <apex:commandButton id="save" value="{!$Label.site.save}" action="{!save}" rerender="userDetail" style="height:20px;width:62px;"/>
                        <apex:commandButton id="cancel" value="{!$Label.site.cancel}" action="{!cancel}" rerender="userDetail" immediate="true" style="height:20px;width:62px;"/>
                    </apex:pageBlockButtons>
                    
                    <apex:pageBlockSection id="editUserSection" columns="1" title="{!$Label.site.user_information}" >              
                        <apex:inputField id="editusername" value="{!user.username}"/>
                        <apex:inputField id="edittimezone" value="{!user.timezonesidkey}"/> 
                        <apex:inputField id="editlocale" value="{!user.localesidkey}"/> 
                        <apex:inputField id="editlanguage" value="{!user.languagelocalekey}"/> 
                        <apex:inputField id="editcommunityNickname" value="{!user.communityNickname}"/>                              
                    </apex:pageBlockSection>
                    
                    <apex:pageBlockSection id="editContactSection" columns="2" title="{!$Label.site.contact_information}">                
                        <apex:inputField id="editfirstName" value="{!user.firstName}"/> 
                        <apex:inputField id="editemail" value="{!opp.Email__c}"/> 
                        <apex:inputField id="editlastName" value="{!opp.Last_Name__c}"/> 
                        <apex:inputField id="editphone" value="{!user.phone}"/> 
                        <apex:inputField id="edittitle" value="{!user.title}" required="true"/> 
                        <apex:inputField id="editextension" value="{!opp.Extension__c}"/> 
                        <apex:pageBlockSectionItem />
                            <apex:inputField id="editfax" value="{!user.fax}"/>
                        <apex:pageBlockSectionItem />
                        <apex:inputField id="editmobile" value="{!user.mobilephone}"/>
                    </apex:pageBlockSection>
               
                    <apex:pageBlockSection id="editAddressInformation" columns="1" title="{!$Label.site.address_information}">
                        <apex:inputField id="editstreet" value="{!user.street}"/> 
                        <apex:inputField id="editcity" value="{!user.city}"/> 
                        <apex:inputField id="editstate" value="{!user.state}"/> 
                        <apex:inputField id="editpostalcode" value="{!user.postalcode}"/> 
                        <apex:inputField id="editcountry" value="{!user.country}"/> 
                    </apex:pageBlockSection>
               
                    <apex:pageBlockSection id="editcitizenshipInformation" columns="1" title="Contact Citizenship Information">
                        <apex:inputField id="editcity" value="{!opp.Birth_city__c}" required="true"/> 
                        <apex:inputField id="editcountry" value="{!opp.Contact_Birth_Country__c}" required="true"/>
                        <apex:inputField id="editcitizenship" value="{!opp.Is_US_Citizen__c}"/>  
                        <apex:inputField id="editpassport" value="{!opp.Passport_Number__c}"/> 
                        <apex:inputField id="editpassportexp" value="{!opp.Passport_Expiry_Date__c}"/> 
                        <apex:inputField id="editvisatype" value="{!opp.Visa_Type__c}"/>
                        <apex:inputField id="editvisano" value="{!opp.Visa_Number__c}"/>
                        <apex:inputField id="editvisaexp" value="{!opp.Visa_Expiry_Date__c}"/>
                    </apex:pageBlockSection>
               
            </apex:pageBlock>         
        
            <apex:pageBlock title="{!$Label.site.my_profile}" id="viewUserDetail" rendered="{!!isEdit}">
            
                    <apex:pageBlockButtons id="detailButtons" location="top">
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        <apex:commandButton id="edit" value="Edit Details" action="{!edit}" rerender="userDetail" style="height:20px;width:70px;"/>
                        <!--<apex:commandButton id="changePassword" value="{!$Label.site.change_password}" action="https://cs15.salesforce.com/_ui/system/security/ChangePassword?retURL=%2F_ui%2Fcore%2Fportal%2FPortalUserMyProfilePage%2Fd&setupid=ChangePassword"/>---->
                    </apex:pageBlockButtons>
                    
                    <apex:pageBlockSection id="viewUserSection" columns="1" title="{!$Label.site.user_information}" collapsible="false">
                        <apex:outputField id="detailusername" value="{!user.username}"/>
                        <apex:outputField id="detailtimezone" value="{!user.timezonesidkey}"/> 
                        <apex:outputField id="detaillocale" value="{!user.localesidkey}"/> 
                        <apex:outputField id="detaillanguage" value="{!user.languagelocalekey}"/> 
                        <apex:outputField id="detailcommunityNickname" value="{!user.communityNickname}"/> 
                    </apex:pageBlockSection>
                    
                    <apex:pageBlockSection id="viewContactSection" columns="2" title="{!$Label.site.contact_information}" collapsible="false">
                        <apex:outputField id="detailemail" value="{!user.username}"/> 
                        <apex:outputField id="detailfirstName" value="{!opp.Email__c}"/> 
                        <apex:outputField id="detaillastName" value="{!user.title}"/> 
                        <apex:outputField id="detailtitle" value="{!user.phone}"/> 
                        <apex:outputField id="detailphone" value="{!user.timezonesidkey}"/>                      
                        <apex:outputField id="detailstreet" value="{!opp.Extension__c}"/> 
                        <apex:outputField id="detailcity" value="{!user.fax}"/> 
                        <apex:outputField id="detailstate" value="{!user.mobilephone}"/>                     
                    </apex:pageBlockSection>
                    
                    <apex:pageBlockSection id="citizenshipinformation" columns="1" title="Citizenship Information" collapsible="false">                         
                        <apex:outputField id="detailcity" value="{!con.Birth_City__c}"/>
                        <apex:outputField id="detailccountry" value="{!con.Contact_Birth_Country__c}"/> 
                        <apex:outputField id="detailcitizenship" value="{!con.Is_US_Citizen__c}"/>
                        <apex:outputField id="detailpassport" value="{!con.Passport_Number__c}"/> 
                        <apex:outputField id="detailpassexp" value="{!con.Passport_Expiry_Date__c}"/>
                        <apex:outputField id="detailvisa" value="{!con.Visa_Type__c}"/>
                        <apex:outputField id="detailvisano" value="{!con.Visa_Number__c}"/>
                        <apex:outputField id="detailvisaexp" value="{!con.Visa_Expiry_Date__c}"/>                                           
                    </apex:pageBlockSection>
                  
            </apex:pageBlock>
               
            </apex:outputPanel>
            
         </apex:form>
         
    </apex:define>
  <!---</apex:composition>---->
</apex:page>