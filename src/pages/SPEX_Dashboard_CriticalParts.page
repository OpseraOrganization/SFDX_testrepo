<apex:page cache="false" expires="10" controller="SPEX_DB_CriticalParts_cls" showHeader="false" standardStylesheets="false">
<html lang="en" style="height:100%">
<head>
<meta charset="utf-8" />
<meta http-equiv="refresh" content="900" />
<title>SPEX Dashboard | Critical Parts</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="format-detection" content="telephone=no" />
<!-- Le styles -->
<link href="{!URLFOR($Resource.db_bootstrap_zip, 'css/bootstrap.css')}" rel="stylesheet" type="text/css" />
<link href="{!URLFOR($Resource.db_bootstrap_zip, 'css/bootstrap-responsive.css')}" rel="stylesheet" type="text/css" />

<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
<!--[if lt IE 9]>-->
<c:lt_IE9_check />
<!--[endif]-->

<!-- Le fav and touch icons -->
<link rel="shortcut icon" href="ico/favicon.png" />
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="ico/apple-touch-icon-144-precomposed.png" />
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="ico/apple-touch-icon-114-precomposed.png" />
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="ico/apple-touch-icon-72-precomposed.png" />
<link rel="apple-touch-icon-precomposed" href="ico/apple-touch-icon-57-precomposed.png" />
  
<!-- Header Scripts -->
    
<link href="{!URLFOR($Resource.db_bootstrap_zip, 'css/SPEXdashboard-responsive.css')}" rel="stylesheet" type="text/css" />

<style type="text/css">
  body{
    margin-top: 140px;
  }
</style>
</head>

<body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">      
          
          <div class="container-fluid visible-desktop">
            <div class="row-fluid">
              <div class="span2" style="width:auto">
                <a class="btn btn-large" href="SPEX_Dashboard"><i class="icon icon-chevron-left"></i>Back</a>
              </div>
              <div class="span4">
                <h1 style="font-weight: normal;padding-top: 8px;">SPEX - Critical Parts</h1>
              </div>
              <p class="navbar-text pull-right">
                <span class="last_updated pull-left">Last Updated: {!dtRefreshTime}&nbsp;MST</span>
                <a class="btn btn-large pull-right" data-target="#myModal" data-toggle="modal"><i class="icon icon-info-sign"></i> Legend</a>
              </p>
            </div>
          </div>
          
          <div class="container hidden-desktop">      
              <a data-target=".nav-collapse" data-toggle="collapse" class="btn btn-navbar">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </a>
              <a href="#" class="brand">SPEX - Critical Parts</a>
              <div class="nav-collapse collapse">
                <ul class="nav">
                  <li><a href="SPEX_Dashboard"><i class="icon-white icon-chevron-left"></i> Back</a></li>
                  <li><a href="SPEX_Dashboard_CriticalParts"><i class="icon-white icon-wrench"></i> Critical Parts</a></li>
                  <li><a href="SPEX_Dashboard_OEM"><i class="icon-white icon-plane"></i> View by OEM</a></li>
                  <li class="nav-header">Last Updated: {!dtRefreshTime}&nbsp;MST</li>
                  <li><a href="#" data-toggle="modal" data-target="#myModal"><i class="icon-white icon-info-sign"></i> Legend</a></li>
                  <li><a href="../Dashboards"><i class="icon-white icon-home"></i> Home - Intelligence Center</a></li>
                </ul>
              </div><!--/.nav-collapse -->        
          </div>          
          
      </div>  
    </div>

  <div class="container-fluid"> 
    
    <div class="row-fluid">

      <div class="span12">
        <table class="table table-striped">
          <thead>
          <tr>
            <th><h1>Part Name</h1></th>
            <th>Amer<span class="hidden-phone">icas</span> <small>(Stock minus Demand)</small></th>
            <th>EMEAI <small>(Stock minus Demand)</small></th>
            <th>APAC <small>(Stock minus Demand)</small></th>
          </tr>
          </thead>
          <tbody>
          <apex:repeat value="{!lstSpexDto}" var="queryResultsRow">
          <tr>
            <td>
                <span>{!queryResultsRow.strABCCode}&nbsp;&nbsp;&nbsp;
                    <apex:OutputText rendered="{!queryResultsRow.strABCCode==null}" >
                    &nbsp;
                    </apex:OutputText>
                </span>
                {!queryResultsRow.strPartNo}<apex:OutputText value=": " rendered="{!queryResultsRow.strPartDesc!=null}" />
                <span class="part">
                {!queryResultsRow.strPartDesc}
                </span>
                <apex:OutputText value="" rendered="{!queryResultsRow.bolAOGPart}" >  
                                              
                        <a href="AOG_Case?CASE={!queryResultsRow.strCaseId}" data-toggle="modal" data-target="#aogModal" class="btn btn-small">
                        <i class="icon-search"></i> View AOG </a>
                        <!--<apex:OutputText value="" rendered="true" >
                        <a href="AOG_Case?CASE=500Q0000003ZkExIAK">
                            <i class="icon-search"></i> View AOG
                        </a>--> 
                 </apex:OutputText>
            </td>
            <td>
            <!--   <span class='{!queryResultsRow.strAmerStatus}'>
                    {!queryResultsRow.intAmerStockOut}
                    <apex:OutputText value="0" rendered="{!queryResultsRow.intAmerStockOut==null}" />
                </span>
            </td>
            <td>
                <span class='{!queryResultsRow.strApacStatus}'>
                    {!queryResultsRow.intApacStockOut}
                    <apex:OutputText value="0" rendered="{!queryResultsRow.intAmerStockOut==null}" />
                </span>
            </td>
            <td>
                <span class='{!queryResultsRow.strEmeaStatus}'>
                    {!queryResultsRow.intEmeaStockOut}
                    <apex:OutputText value="0" rendered="{!queryResultsRow.intEmeaStockOut==null}" />
                </span>  --> 
                <span class='{!queryResultsRow.strAmerStatus}'>
                    {!queryResultsRow.intAmerStock - queryResultsRow.intAmerDemand}
                    <apex:OutputText value="0" rendered="{!queryResultsRow.intAmerStock==null || queryResultsRow.intAmerDemand==null}" />
                </span>
            </td>
            <td>
                <span class='{!queryResultsRow.strEmeaStatus}'>
                     {!queryResultsRow.intEmeaStock - queryResultsRow.intEmeaDemand}
                    <apex:OutputText value="0" rendered="{!queryResultsRow.intAmerStock==null || queryResultsRow.intAmerDemand==null}" />
                </span>
            </td>
            <td>
                <span class='{!queryResultsRow.strApacStatus}'>
                    {!queryResultsRow.intApacStock - queryResultsRow.intApacDemand}
                    <apex:OutputText value="0" rendered="{!queryResultsRow.intAmerStock==null || queryResultsRow.intAmerDemand==null}" />
                </span> 
            </td>
          </tr>
          </apex:repeat>
          </tbody>
        </table>
      </div>      

    </div>
    
  </div> <!-- /container -->
  
    <div id="myModal" class="modal hide">
        <div class="modal-header">
            <h3>SPEX Legend</h3>
            <h4>What do these colors mean?</h4>
        </div>
        <div class="modal-body">
            <div style="padding:5px;" class="row-fluid"><div class="span3">A Part #: </div>High Demand; 10+ parts sold per year.</div>
            <div style="padding:5px;" class="row-fluid"><div class="span3">B Part #: </div>Medium Demand; 2-10 parts sold per year.</div>
            <div style="padding:5px;" class="row-fluid"><div class="span3">C Part #: </div>Low Demand; 1-2 parts sold per year.</div>
            <div style="padding:5px;" class="row-fluid"><div class="span3"><span class="val red">&nbsp;</span></div> Out of Stock; Order(s) for this platform pending.</div>
            <div style="padding:5px;" class="row-fluid"><div class="span3"><span class="val yellow">&nbsp;</span></div> Out of Stock; No Order(s) for this platform.</div>
            <div style="padding:5px;" class="row-fluid"><div class="span3"><span class="val grey">&nbsp;</span></div> Part not planned for regional stocking and regional inventory&nbsp;>=&nbsp;regional demand.</div>
            <div style="padding:5px;" class="row-fluid"><div class="span3"><span class="val green">&nbsp;</span></div> Stock Available</div>
            <div style="padding:5px;" class="row-fluid"><div class="span3" style="font-size: 23px;"><span class="val red">-2</span></div> How these numbers are calculated:<br/>(total inventory in region)-(outstanding demand).</div>
            <div style="padding:5px;" class="row-fluid"><div class="span3"><a class="btn btn-small" style="cursor:default"><i class="icon-search"></i> View AOG</a></div> Click for AOG details.</div>
        </div>
        <div class="modal-footer">
            <a class="btn btn-large btn-danger" data-dismiss="modal" href="#">Close</a>
        </div>
    </div>
    <!--395641 -->
    <div id="aogModal" class="modal hide">
        <div class="modal-body">
        </div>
    </div>
    
    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script type="text/javascript" src="{!URLFOR($Resource.db_bootstrap_zip, 'js/jquery.js')}"></script>
    <script type="text/javascript" src="{!URLFOR($Resource.db_bootstrap_zip, 'js/bootstrap-collapse.js')}"></script>
    <script type="text/javascript" src="{!URLFOR($Resource.db_bootstrap_zip, 'js/bootstrap-modal.js')}"></script>
    <script type="text/javascript" src="{!URLFOR($Resource.db_bootstrap_zip, 'js/jquery.cookie.js')}"></script>
    <script type="text/javascript" src="{!URLFOR($Resource.db_bootstrap_zip, 'js/SPEX-scripts.js')}"></script>
    
    <!--395641 -->
    <script type="text/javascript">
    $("#stackedGraph").jqBarGraph({
        data: stackedByArea,
        barSpace: 20,
        colors: ['#19BD00','#F5CC00','#D7250D'],
        legends: ['In Stock','At Risk','Stock Out'],
        legend: false,
        postfix: " parts",
        title: "<h2 style='margin-bottom:10px'>SPEX Inventory Health</h2>",
        showValues: false,
        width: $("#stackedGraph").width()*.9,
        height: ($('#stackedGraph').width()*.8)
    });
    $('#aogModal').on('show', function () {
        if( $(".affix").css('position')== 'static' && !$("link[href='{!URLFOR($Resource.db_bootstrap_zip, 'css/dashboard-responsive-IE8.css')}']").length )$("#aogModal").css('top',$(window).scrollTop()+'px');
        $('#aogModal').html("<div class='modal_loader'></div>");
    });
    </script>
    <script type="text/javascript" src="{!URLFOR($Resource.db_bootstrap_zip, 'js/bootstrap-tooltip.js')}"></script>
    <script type="text/javascript">
        $('.stckdBr').tooltip({placement:'right'});
    </script>
<!--395641 -->
</body>
</html>
<apex:insert name="footer">
        <c:honeywellFooter />
</apex:insert>

</apex:page>