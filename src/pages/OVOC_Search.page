<apex:page controller="OVOC_SearchPage_Controller" sidebar="false" showHeader="false" standardStylesheets="false" title="OVOC - Search" cache="false" docType="html-5.0" applyHtmlTag="false">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:v="urn:schemas-microsoft-com:vml">
<head>
    <title>OVOC - Search</title>

    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=0" />
    <meta name="apple-mobile-web-app-title" content="OVOC" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="format-detection" content="telephone=no" />
    
    <!--    Bootstrap CSS -->
    <link href="{!URLFOR($Resource.VOC_Phase2_Test,'css/bootstrap.min.css')}" rel="stylesheet" media="screen"/>
    
     <!--    Bootstrap CSS - Slider    -->
    <link href="{!URLFOR($Resource.VOC_Phase2_Test,'css/slider/bootstrap-slider.css')}" rel="stylesheet" media="screen"/>
    
    <!--    User defined CSS files    --> 
    <link href="{!URLFOR($Resource.VOC_Phase2_Test,'css/common.css')}" rel="stylesheet" media="screen"/>
    <link href="{!URLFOR($Resource.VOC_Phase2_Test,'css/tablet.css')}" rel="stylesheet" media="screen"/>
    <link href="{!URLFOR($Resource.VOC_Phase2_Test,'css/smartphone.css')}" rel="stylesheet" media="screen"/>
    <link rel="stylesheet" href="//code.jquery.com/ui/1.10.4/themes/smoothness/jquery-ui.css" />    
    
    
    <!--   Images for iOS   -->
    <link href="{!URLFOR($Resource.VOC_Phase2_Test,'images/voc_144x144.png')}" rel="apple-touch-icon-precomposed" sizes="144x144" />
    <link href="{!URLFOR($Resource.VOC_Phase2_Test,'images/voc_114x114.png')}" rel="apple-touch-icon-precomposed" sizes="114x114" />
    <link href="{!URLFOR($Resource.VOC_Phase2_Test,'images/voc_72x72.png')}" rel="apple-touch-icon-precomposed" sizes="72x72" />
    <link href="{!URLFOR($Resource.VOC_Phase2_Test,'images/voc_57x57.png')}" rel="apple-touch-icon-precomposed" />   
    
    <!--[if IE 8 ]>    <html class="ie8"> <![endif]-->
    
    <!-- HTML5 shiv and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    

</head>
<style>

.myvoc-calender-day, .myvoc-calender-year {
    width: 45px;
}


@media only screen and (max-width: 767px) {
    
}

<!-- Style for Slider -->
#ex1Slider.slider.slider-horizontal {
    width: 60px !important;
    margin: 0 10px;
    background-image: none;
    background-color: #056D05;
    border-radius: 20px;
    height: 34px;
    
}

#ex1Slider.slider.slider-horizontal .slider-track {
    background-color: transparent;
    background-image: none;
    box-shadow: none;
    width: 46%;
    left: 19%;
}

#ex1Slider .slider-selection {
    background-color: transparent;
    background-image: none;
    box-shadow: none;
}

#ex1Slider.slider.slider-horizontal .slider-handle {
    outline: none;
    opacity: 1;
    background-color: #FFFFFF;
    background-image: none;
//    border:1px solid #000000;
    width: 30px;
    height: 30px;
    margin-top: -10px;
}

#ex1Slider.slider.slider-horizontal .slider-track .slider-selection {
    //background-color: #056D05; //#EE3124;
}

</style>

<script>    // Windows Phone and IE8 support
    
if (navigator.userAgent.match(/IEMobile\/10\.0/)) {
  var msViewportStyle = document.createElement("style");
  msViewportStyle.appendChild(
    document.createTextNode(
      "@-ms-viewport{width:auto!important}"
    )
  );
  document.getElementsByTagName("head")[0].
    appendChild(msViewportStyle);
}

if (navigator.userAgent.match(/IE\/8\.0/)) {
  var msViewportStyle = document.createElement("style");
  msViewportStyle.appendChild(
    document.createTextNode(
      "@-ms-viewport{width:auto!important}"
    )
  );
  document.getElementsByTagName("head")[0].
    appendChild(msViewportStyle);
}


/*if (navigator.appName.match('Microsoft Internet Explorer')) {
  var msViewportStyle = document.createElement("style");
  msViewportStyle.appendChild(
    document.createTextNode(
      "@-ms-viewport{width:auto!important}"
    )
  );
  document.getElementsByTagName("head")[0].
    appendChild(msViewportStyle);
}*/

</script>


<body>
<form>
  
<!--    OVOC - Search Page    -->
<div id="voc-search-page" class="container">
    <!--    Honeywell Header Image    -->
    <div class="row voc-hdr-img" >    
        <div class="col-xs-9 col-sm-10 col-md-10 col-lg-10 voc-hdr-imgcls" id="Honmainimage"></div>
        <div class="col-xs-3 hidden-sm hidden-md hidden-lg right-menu-cls"></div>
        <div class="hidden-xs col-sm-2 col-md-2 col-lg-2">
            <a href="/secur/logout.jsp" class="ovoc-logout"> Logout
<!--                <div class="voc-logout-btn"></div>    -->
            </a>
        </div>
    </div>
    
    <!-- Added header for mobile begins -->
    <div class="row voc-hdr-new">    
        <div class="col-xs-3 hidden-sm hidden-md hidden-lg back-btn-cls" id="Searchresut-back">&lt; <a style="color: #ed3124; text-decoration:none;" id="searchBack_mob" onclick="MobSearchback()">Back</a></div>
        <div class="col-xs-6 col-sm-12 col-md-12 col-lg-12 voc-hdr-sub" id="Search-sub-txt">Search Results</div>
        <div class="col-xs-3 hidden-sm hidden-md hidden-lg right-menu-cls"></div>
    </div>
    <!-- Added header for mobile ends-->
    
    <!--    Main Tabs - START    -->
    <div id="mainblackstrip" class="row home-black-strip">
        <div class="btn-group btn-group-justified">
            <a href="OVOC_Create" id="voc-create" rel="external" class="btn-group btn btn-default">
                <img src="{!URLFOR($Resource.VOC_Phase2_Test,'images/top-menu-create.png')}" alt=""></img>Create
            </a>
            <a href="OVOC_MyVOC" id="voc-myvoc" rel="external" class="btn-group btn btn-default">
                <img src="{!URLFOR($Resource.VOC_Phase2_Test,'images/top-menu-myVoc.png')}" alt=""></img>My VOC
            </a>
            <a href="" id="voc-search" rel="external" class="btn-group btn btn-default active">
                <img src="{!URLFOR($Resource.VOC_Phase2_Test,'images/top-menu-search.png')}" alt=""></img>Search
            </a>
            <a href="OVOC_HelpPage" id="voc-help" class="btn-group btn btn-default">
                <img src="{!URLFOR($Resource.VOC_Phase2_Test,'images/top-menu-help.png')}" alt=""></img>Help
            </a>
        </div>
    </div>
     
    <!--    VOC - Home Image    -->
    <div class="row hidden-xs home-image"></div>
    <!--    VOC - Home Image for IE8   -->
    <div class="row home-image-ie8" style="display:none;">
        <img id="ie8-hm" src="{!URLFOR($Resource.VOC_Phase2_Test,'images/homeimage_desk.png')}" width='auto' height='150px'></img>
    </div>
   
    <!--    My VOC Content    -->
    <div class="row home-container">
    
        <!-- Save Search Section --> 
        <div id="Save_Search_Section">
            <div class="innerdiv ">
                <table>
                    <td>
                        <div align="center">

                            
                        </div>
                    </td>
                </table>
            </div>  
        </div>
        
         <apex:pagemessages />
          
        <!-- Search box -->
        <div class="col-xs-12 col-sm-12 col-md-12 search-searchbox" id="MobMainsearchbox">
            <div class="col-xs-12 col-sm-7 col-md-7 col-lg-7">
                <input id="mainSearch" type="text" class="create-inp-flds search-fld" placeholder="Search VOC Number, Keyword, etc." />
            </div>
            <div class="hidden-xs col-xs-12 col-sm-2 col-md-2 col-lg-2" style="text-align: center;">
                <a href="#" class="btn gray-btn create-btn-draft" style="width:80%; margin-top: 10px;" onclick="ResetKeyword()">Reset</a>
            </div>
            
            <div class="hidden-xs col-sm-3 col-md-3  col-lg-3 ">         
                <button type="button" class="btn red-btn" style="width:100%; margin-top: 10px;" onclick="SearchVoc()">Search</button>
            </div>
        </div>
        <span id="SaveSearchLink" class="tab-pane hidden-xs" style="float:right"><a href="#">Save this search</a></span> 
        <span id="UpadteSearchLink" style="float:right"></span>  <!-- <a href="#">Update search</a> -->
        
        <div class="col-xs-12" id="voc-ovoc-slider" style="padding-bottom: 10px;">
            <span style="font-weight: bold">Metadata Search: </span>ON<input id="ex1" data-slider-id='ex1Slider' type="text" data-slider-min="1" data-slider-max="2" data-slider-step="1" data-slider-value="1"/>OFF
        </div>
        
        <!-- Nav tabs -->
        <ul class="nav nav-tabs myvoc-tabs hidden-xs">
          <li id="SavedsearchTab" class="active"><a href="#search-savedSearch" data-toggle="tab">Saved Searches</a></li>
          <li id="advancedSearch"><a href="#search-advancedSearch" data-toggle="tab">Advanced Search</a></li>
          <li id="recordsTab" class="hidden"><a href="#ThirdTab" data-toggle="tab">Search Results</a></li> 
          <li id="myvoc-detail-control" class="hidden"><a id="myvoc-details-tab" href="#myvoc-details" data-toggle="tab" class="voc-loader-show">Details</a></li>   
          
          
        </ul>
        <!-- Tab panes -->
        
        
        
        <div class="tab-content">
            <!--  Submitted Records  -->
            <div class="tab-pane active hidden-xs" id="search-savedSearch">
            
                <table id="SavedsearchList" class="table table-striped">
                    <tbody >
                    
                    </tbody>  
                </table>
            </div>
            
            <!--  Advanced Search  -->
            <div class="tab-pane" id="search-advancedSearch">
                <div class="panel-group" id="search-accordion">
                
                      <!--  Saved Searches  -->
                  <div class="panel panel-gray hidden-sm hidden-md hidden-lg">
                    <div id="sSavedSearchesID" class="panel-heading col-sm-12 col-md-12 search-createria">
                        <div class="col-xs-10 col-sm-8 col-md-8 col-lg-8">
                            <div class="col-sm-12 col-md-12 search-criteria-head">Saved Searches</div>
                        </div>
                        <div class="col-xs-2 col-sm-4 col-md-4 col-lg-4 collapse-arrow">  </div>
                    </div>
                    <div id="s-savedsearches" class="panel-collapse collapse" style="min-height:50px; height: auto !important;">
                      <div class="panel-body" style="height: 100%;">
                          <div id="MobSavedsearchList" class="row" >
                           <!--   <div class="saved-links col-xs-12">  <a href="#" class="help-link">Search Embraer Related</a></div>
                              <div class="saved-links col-xs-12">  <a href="#" class="help-link">All AZ + Engines</a></div>
                              <div class="saved-links col-xs-12">  <a href="#" class="help-link">Customer is Boeing</a></div>
                              <div class="saved-links col-xs-12">  <a href="#" class="help-link">J Mantia as Hon Lead</a></div>
                              <div class="saved-links col-xs-12">  <a href="#" class="help-link">Gulfstream 350 related</a></div>
                              <div class="saved-links col-xs-12">  <a href="#" class="help-link">All Dassault AC</a></div>
                              <div class="saved-links col-xs-12">  <a href="#" class="help-link">Falcon F7X APU</a></div> -->
                          </div>
                      </div>
                    </div>
                  </div>
                
                  
                   <!--  Report Number  -->
                  <div class="panel panel-gray">
                    <div id="sReportNumberID" class="panel-heading col-sm-12 col-md-12 search-createria">                        
                        <div class="col-xs-10 col-sm-8 col-md-8 col-lg-8">
                            <div class="col-sm-12 col-md-12 search-criteria-head">Record Number</div>
                            <div class="hidden-xs col-sm-12 col-md-12 search-criteria-note">Enter a record number to target your report Report Number</div>
                        </div>
                        <div class="col-xs-2 col-sm-4 col-md-4 col-lg-4 collapse-arrow">  </div>
                    </div>
                    <div id="s-ReportNumber" class="panel-collapse collapse" style="min-height:50px; height: auto !important;">
                      <div class="panel-body" style="height: 100%;">
                        <div class="row" style="margin-top: 5px;">
                             
                              <div class="create-lbls hidden-xs col-sm-2 col-md-2 col-lg-1" style="width: 130px">Record Number </div>
                              <div class="create-inp-rows col-xs-12 col-sm-5 col-md-5 col-lg-5">
                                  <input id="sReportNumber" type="text" class="create-inp-flds" placeholder="VOC or OVOC Number"></input>                                 
                              </div>
                          </div>
                      </div>
                    </div>
                  </div>
                
                  
                  <!--  Current Status  -->
                  <div class="panel panel-white">
                    <div id="sCurrentStatusID" class="panel-heading col-sm-12 col-md-12 search-createria">                        
                        <div class="col-xs-10 col-sm-8 col-md-8 col-lg-8">
                            <div class="col-sm-12 col-md-12 search-criteria-head">Current Status </div>
                            <div class="hidden-xs col-sm-12 col-md-12 search-criteria-note">Select a status to narrow down the results. </div>
                        </div>
                        <div class="col-xs-2 col-sm-4 col-md-4 col-lg-4 collapse-arrow">  </div>
                    </div>
                    <div id="s-CurrentStatus" class="panel-collapse collapse" style="min-height:50px; height: auto !important;">
                      <div class="panel-body" style="height: 100%;">
                        <div class="row" style="margin-top: 5px;">
                              <div class="col-xs-12 hidden-sm hidden-md hidden-lg search-criteria-note">
                                        Select the status you want to target
                              </div>
                              <div class="create-lbls hidden-xs col-sm-2 col-md-2 col-lg-1">Report Status  </div>
                              <div id="" class="create-inp-rows col-xs-12 col-sm-5 col-md-5 col-lg-5">     
                                  <select id="currentstatusList">
                                      <option value="Any">Any</option>
                                      <option value="Draft">Draft</option>
                                      <option value="Completed">Completed</option>
                                  </select>   
                              </div>
                          </div>
                      </div>
                    </div>
                  </div>
                  
                  <!--  Sensitivity Level   -->
                  <div class="panel panel-gray">
                    <div id="sSensitivityLevelID" class="panel-heading col-sm-12 col-md-12 search-createria">                        
                        <div class="col-xs-10 col-sm-8 col-md-8 col-lg-8">
                            <div class="col-sm-12 col-md-12 search-criteria-head">Sensitivity Level    </div>
                            <div class="hidden-xs col-sm-12 col-md-12 search-criteria-note">Select a sensitivity level to narrow down the results.</div>
                        </div>
                        <div class="col-xs-2 col-sm-4 col-md-4 col-lg-4 collapse-arrow">  </div>
                    </div>
                    <div id="s-SensitivityLevel" class="panel-collapse collapse" style="min-height:50px; height: auto !important;">
                      <div class="panel-body" style="height: 100%;">
                        <div class="row" style="margin-top: 5px;">
                              <div class="col-xs-12 hidden-sm hidden-md hidden-lg search-criteria-note">
                                   Sensitivity Level of the records
                              </div>
                              <div class="create-lbls hidden-xs col-sm-2 col-md-2 col-lg-1">Name / Title: </div>
                              <div class="create-inp-rows col-xs-12 col-sm-5 col-md-5 col-lg-5">
                                  <select id="SensitiveLevelList">
                                      <option value="Any">Any</option>
                                      <option value="Sensitive Information">Sensitive Information</option>
                                      <option value="Nonsensitive Information">Nonsensitive Information</option>
                                  </select>  
                              </div>
                          </div>
                      </div>
                    </div>
                  </div>
                  
                    <!--  Date Range Search  -->
                  <div class="panel panel-white">
                    <div id="sDaterangeID" class="panel-heading col-sm-12 col-md-12 search-createria">
                        <div class="col-xs-10 col-sm-8 col-md-8 col-lg-8">
                            <div class="col-sm-12 col-md-12 search-criteria-head">Date Range </div>
                            <div class="hidden-xs col-sm-12 col-md-12 search-criteria-note">Enter a date range to narrow your search</div>
                        </div>
                        <div class="col-xs-2 col-sm-4 col-md-4 col-lg-4 collapse-arrow">  </div>
                    </div>
                    <div id="s-daterange" class="panel-collapse collapse" style="min-height:50px; height: auto !important;">
                      <div class="panel-body" style="height: 100%;">
                          <div class="row" style="margin: 10px 0;">
                              <div class="col-xs-12 hidden-sm hidden-md hidden-lg search-criteria-note">
                                  Enter a date range to narrow your search
                              </div>
                              <div class="create-lbls hidden-xs col-sm-1 col-md-1 col-lg-1">From: </div>
                              <div class="create-inp-rows col-xs-12 col-sm-4 col-md-4 col-lg-4">
                                  <input id="sFromDate" type="text" class="search-inp-flds" placeholder="From date" data-date-format="mm/dd/yy" readonly="readonly"></input>
                                  <input id="sFromDate_mob" class="search-inp-flds" type="date" style="display:none;" placeholder="From date" data-date-format="mm/dd/yy"></input>
                              </div>
                              <div class="create-lbls hidden-xs col-sm-1 col-md-1 col-lg-1">To: </div>
                              <div class="create-inp-rows col-xs-12 col-sm-4 col-md-4 col-lg-4">
                                  <input id="sToDate" type="text" class="search-inp-flds" placeholder="To date" data-date-format="mm/dd/yy" readonly="readonly"></input>
                                  <input id="sToDate_mob" class="search-inp-flds" type="date"  style="display:none;" placeholder="From date" data-date-format="mm/dd/yy"></input>
                              </div>
                          </div>
                      </div>
                    </div>
                  </div>
                  
                   <!--  Customer Name/Title Search  -->
                  <div class="panel panel-gray">
                    <div id="sCustnameID" class="panel-heading col-sm-12 col-md-12 search-createria">                        
                        <div class="col-xs-10 col-sm-8 col-md-8 col-lg-8">
                            <div class="col-sm-12 col-md-12 search-criteria-head">Customer Name/Title</div>
                            <div class="hidden-xs col-sm-12 col-md-12 search-criteria-note">Name, title, role or job description for customers interviewed</div>
                        </div>
                        <div class="col-xs-2 col-sm-4 col-md-4 col-lg-4 collapse-arrow">  </div>
                    </div>
                    <div id="s-custname" class="panel-collapse collapse" style="min-height:50px; height: auto !important;">
                      <div class="panel-body" style="height: 100%;">
                        <div class="row" style="margin: 10px 0;">
                              <div class="col-xs-12 hidden-sm hidden-md hidden-lg search-criteria-note">
                                   Name, title, role or job description for customers interviewed
                              </div>
                              <div class="create-lbls hidden-xs col-sm-2 col-md-2 col-lg-1">Name / Title: </div>
                              <div class="create-inp-rows col-xs-12 col-sm-5 col-md-5 col-lg-5">
                                  <input id="sNameTitle" type="text" class="search-inp-flds" placeholder="Name / Title"></input>
                              </div>
                          </div>
                      </div>
                    </div>
                  </div>
                  
                   <!--  Account Search  -->
                  <div class="panel panel-white">
                    <div id="sAccountID" class="panel-heading col-sm-12 col-md-12 search-createria">
                        <div class="col-xs-10 col-sm-8 col-md-8 col-lg-8">
                            <div class="col-sm-12 col-md-12 search-criteria-head">Account (Customer or OEM)</div>
                            <div class="hidden-xs col-sm-12 col-md-12 search-criteria-note">Typically an OEM such as Boeing or Dassault</div>
                        </div>
                        <div class="col-xs-2 col-sm-4 col-md-4 col-lg-4 collapse-arrow">  </div>
                    </div>
                    <div id="s-account" class="panel-collapse collapse" style="min-height:50px; height: auto !important;">
                      <div class="panel-body" style="height: 100%;">
                        <div class="row" style="margin: 10px 0;">
                              <div class="col-xs-12 hidden-sm hidden-md hidden-lg search-criteria-note">
                                  Typically an OEM such as Boeing or Dassault
                              </div>
                              <div class="create-lbls hidden-xs col-sm-2 col-md-2 col-lg-1">Account: </div>
                              <div class="create-inp-rows col-xs-12 col-sm-5 col-md-5 col-lg-5">
                                  <input id="sAccount" type="text" class="search-inp-flds" placeholder="e.g. Boeing, Dassault"></input>
                              </div>
                          </div>
                      </div>
                    </div>
                  </div>
                  
                   <!--  Honeywell Lead Search  -->
                  <div class="panel panel-gray">
                    <div id="sLeadID" class="panel-heading col-sm-12 col-md-12 search-createria">
                        <div class="col-xs-10 col-sm-8 col-md-8 col-lg-8">
                            <div class="col-sm-12 col-md-12 search-criteria-head">Honeywell Lead</div>
                            <div class="hidden-xs col-sm-12 col-md-12 search-criteria-note">Primary Honeywell contact for a VOC report</div>
                        </div>
                        <div class="col-xs-2 col-sm-4 col-md-4 col-lg-4 collapse-arrow">  </div>
                    </div>
                    <div id="s-lead" class="panel-collapse collapse" style="min-height:50px; height: auto !important;">
                      <div class="panel-body" style="height: 100%;">
                        <div class="row" style="margin: 10px 0;">
                          <div class="col-xs-12 hidden-sm hidden-md hidden-lg search-criteria-note">
                               Primary Honeywell contact for a VOC report
                          </div>
                          <div class="create-lbls hidden-xs col-sm-2 col-md-2 col-lg-1">Lead: </div>
                          <div class="create-inp-rows col-xs-12 col-sm-5 col-md-5 col-lg-5">
                              <input id="sLeads" type="text" class="search-inp-flds" placeholder="Lead Name"></input>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  
                   <!--  Product Line Search  -->
                  <div class="panel panel-white">
                    <div id="sProductID" class="panel-heading col-sm-12 col-md-12 search-createria">
                        <div class="col-xs-10 col-sm-8 col-md-8 col-lg-8">
                            <div class="col-sm-12 col-md-12 search-criteria-head">Product Line</div>
                            <div class="hidden-xs col-sm-12 col-md-12 search-criteria-note">Honeywell Product Line, such as Platform Systems</div>
                        </div>
                        <div class="col-xs-2 col-sm-4 col-md-4 col-lg-4 collapse-arrow">  </div>
                    </div>
                    <div id="s-productline" class="panel-collapse collapse" style="min-height:50px; height: auto !important;">
                      <div class="panel-body" style="height: 100%;">
                        <div class="row" style="margin: 10px 0;">
                          <div class="col-xs-12 hidden-sm hidden-md hidden-lg search-criteria-note">
                                    Honeywell Product Line, such as Platform Systems
                          </div>
                          <div class="col-xs-12 col-sm-8 col-md-8">
                            <div id="ProductFamilyselect" class="create-outline create-multiselect">

                            </div>
                        </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  
                  <!--  Purpose   -->
                  <div class="panel panel-gray">
                    <div id="sPurposeID" class="panel-heading col-sm-12 col-md-12 search-createria">                        
                        <div class="col-xs-10 col-sm-8 col-md-8 col-lg-8">
                            <div class="col-sm-12 col-md-12 search-criteria-head">Purpose     </div>
                            <div class="hidden-xs col-sm-12 col-md-12 search-criteria-note">Purpose of VOC or OVOC Record </div>
                        </div>
                        <div class="col-xs-2 col-sm-4 col-md-4 col-lg-4 collapse-arrow">  </div>
                    </div>
                    <div id="s-Purpose" class="panel-collapse collapse" style="min-height:50px; height: auto !important;">
                      <div class="panel-body" style="height: 100%;">
                        <div class="row" style="margin-top: 5px;">
                              <div class="col-xs-12 hidden-sm hidden-md hidden-lg search-criteria-note">
                                   Purpose(s) of the projects to include.
                              </div>
                              <div class="create-lbls hidden-xs col-sm-2 col-md-2 col-lg-1">Purpose </div>
                              <div id="PurposeSelect" class="create-outline create-multiselect">
                                  <!-- Enter Purpose Here -->
                              </div>
                          </div>
                      </div>
                    </div>
                  </div>
                  
                  
                  <!-- VOC Title  -->
                <div class="panel panel-white">
                    <div id="sVOCTitleId" class="panel-heading col-sm-12 col-md-12 search-createria">                        
                        <div class="col-xs-10 col-sm-8 col-md-8 col-lg-8">
                            <div class="col-sm-12 col-md-12 search-criteria-head">VOC Title/Collection</div>
                            <div class="hidden-xs col-sm-12 col-md-12 search-criteria-note">Title/Collection of the VOC or OVOC Record</div>
                        </div>
                        <div class="col-xs-2 col-sm-4 col-md-4 col-lg-4 collapse-arrow">  </div>
                    </div>
                    <div id="s-VocTitle" class="panel-collapse collapse" style="min-height:50px; height: auto !important;">
                      <div class="panel-body" style="height: 100%;">
                        <div class="row" style="margin-top: 5px;">
                             
                              <div class="create-lbls hidden-xs col-sm-2 col-md-2 col-lg-1" style="width: 130px">VOC Title </div>
                              <div class="create-inp-rows col-xs-12 col-sm-5 col-md-5 col-lg-5">
                              <!--    <apex:inputtext styleclass="search-inp-flds" value="{!voctitle}" html-placeholder="VOC or OVOC Title/Collection" id="voctitlereport"/> -->
                                  <input id="sVOCTitle" type="text" class="search-inp-flds" placeholder="VOC or OVOC Title/Collection"></input>
                              </div>
                          </div>
                      </div>
                    </div>
                </div>
                  
                </div>
                

                <div class="col-sm-3 col-sm-offset-1 col-md-2 col-md-offset-0 hidden-xs" style="margin-bottom:10px">
                    <button class="btn gray-btn create-btn-draft"  type="reset" onclick="resetfields()">Reset</button>
                </div>
            </div>
            
            <!-- Detail page begins -->

            <div class="tab-pane" id="myvoc-details">
                <div class="col-xs-9 col-sm-12 col-md-12">
                    <div class="col-xs-3 col-sm-1 col-md-1 myvoc-calender">
                        <div class="myvoc-calender-month" id="month"></div>
                        <div class="myvoc-calender-day" id="date"></div>
                        <div class="myvoc-calender-year" id="year"></div>
                    </div>
                    <div class="col-xs-9 col-sm-11 col-md-11">
                        <div class="col-xs-12 col-sm-12 col-md-12 myvoc-record-head" id="title"></div>
                        <div class="col-xs-12 col-sm-12 col-md-12 myvoc-rec-sub-hdr" id="submittedBy"></div>
                    </div>
                </div>
                
                <div class="col-xs-3 visible-xs hidden-sm hidden-md hidden-lg" id="detailExportBtn_Mob">
                    <!-- <a class="btn gray-btn export-btn-cls" >Export</a> -->
                </div>

            
                <!--<div class="col-xs-9 col-sm-12 col-md-12">
                    <div class="col-xs-9 col-sm-11 col-md-11">
                        <div class="col-xs-12 col-sm-12 col-md-12 myvoc-record-head" id="title"> </div>
                        <div class="col-xs-12 col-sm-12 col-md-12 myvoc-rec-sub-hdr" id="submittedBy"> </div>
                    </div>
                </div>-->   
                <div class="col-xs-12 col-sm-12 col-md-12 hidden-xs">     
                    <div class="col-xs-12 col-sm-12 col-md-12 detail-header">Hypothesis</div>                
                    <div class="col-xs-12 col-sm-12 col-md-12 detail-desc" id="hypothesis"> </div>               
                    <div class="col-xs-12 col-sm-12 col-md-12 detail-header">Key Takeaways </div>                
                    <div class="col-xs-12 col-sm-12 col-md-12 detail-desc" id="keyTakeaways"> </div>                
                    <div class="col-xs-12 col-sm-12 col-md-12 detail-header">Financial Implications</div>                
                    <div class="col-xs-12 col-sm-12 col-md-12 detail-desc" id="financialImplications"> </div>                
                    <div class="col-xs-12 col-sm-12 col-md-12 detail-header">Key Action Items</div>               
                    <div class="col-xs-12 col-sm-12 col-md-12 detail-desc" id="keyActions"> </div>                
                    <div class="col-xs-12 col-sm-12 col-md-12"> 
                        <hr class="detail-hr"/>
                    </div>               
                    <div class="col-xs-12 col-sm-12 col-md-12 detail-header">Purpose of this VOC</div>                
                    <div class="col-xs-12 col-sm-12 col-md-12 detail-desc-indetail" id="purposeOfVOC"> </div>                
                   <!-- <div class="col-xs-12 col-sm-12 col-md-12 detail-header">Understanding Segment Needs</div> -->
                    <div class="col-xs-12 col-sm-12 col-md-12 detail-header">Customers Interviewed</div>                
                    <div class="col-xs-12 col-sm-12 col-md-12 detail-desc-indetail">
                        <table class="table table-striped">
                            <thead>
                                <tr><th>#</th><th>Name</th> <th>Title</th> <th>Email</th> <th>Company</th></tr>
                            </thead>
                            
                            <tbody id="customers">
                            </tbody>
                        </table>
                    </div>               
                    <div class="col-xs-12 col-sm-12 col-md-12 detail-header">Product Related</div>                
                    <div class="col-xs-12 col-sm-12 col-md-12 detail-desc-indetail">
                        <div id="prodName"></div>
                        <div id="platform"></div>
                        <div id="prodFamily"></div>                
                    </div>                
                    <div class="col-xs-12 col-sm-12 col-md-12">
                        <hr class="detail-hr" />
                    </div>   
                    <div class="col-xs-12 col-sm-12 col-md-12 detail-header">Attachments</div>
                    <div class="col-xs-12 col-sm-12 col-md-12 detail-desc-indetail"><div id="attachmentNameLink" class="hidden"></div></div>
                    <div class="col-xs-12 col-sm-12 col-md-12"><hr class="detail-hr" /></div>
                    <!-- reference Links -->
                    <div class="col-xs-12 col-sm-12 col-md-12 detail-header">Reference Links</div>
                    <div class="col-xs-12 col-sm-12 col-md-12 detail-desc-indetail"><div id="ExternalLinks" class="hidden"></div></div>
                    <div class="col-xs-12 col-sm-12 col-md-12"><hr class="detail-hr" /></div>
                </div>
                    <!--    Mobile view for App details page Start    -->
                
                <div class="panel-group col-xs-12 hidden-sm hidden-md hidden-lg" id="details-accordion" >
                    <!--  Key Takeaways  -->
                  <div class="panel panel-white">
                    <div id="dKeyTakeID" class="panel-heading col-sm-12 col-md-12 search-createria">
                        <div class="col-xs-10 col-sm-8 col-md-8 col-lg-8">
                            <div class="col-sm-12 col-md-12 search-criteria-head">Key Takeaways</div>
                        </div>
                        <div class="col-xs-2 col-sm-4 col-md-4 col-lg-4 collapse-arrow">  </div>
                    </div>
                    <div id="d-keytake" class="panel-collapse collapse" style="min-height:50px; height: auto !important;">
                      <div id="keyTakeaways_mob" class="panel-body" style="height: 100%;">
                          hello world
                      </div>
                    </div>
                  </div>    <!--  Key Takeaways  -->
                  
                   <!--  Hypothesis  -->
                  <div class="panel panel-gray">
                    <div id="dHypothesisID" class="panel-heading col-sm-12 col-md-12 search-createria">                        
                        <div class="col-xs-10 col-sm-8 col-md-8 col-lg-8">
                            <div class="col-sm-12 col-md-12 search-criteria-head">Hypothesis</div>
                            <div class="hidden-xs col-sm-12 col-md-12 search-criteria-note">Name, title, role or job description for customers interviewed</div>
                        </div>
                        <div class="col-xs-2 col-sm-4 col-md-4 col-lg-4 collapse-arrow">  </div>
                    </div>
                    <div id="d-hypothesis" class="panel-collapse collapse" style="min-height:50px; height: auto !important;">
                      <div class="panel-body" style="height: 100%;">
                        <div id="hypothesis_mob" class="row" style="margin: 10px 0;">
                            Hello Ntt
                        </div>
                      </div>
                    </div>
                  </div>    <!--  Hypothesis    -->
                  
                 
                  <!--  Financial Implications  -->
                  <div class="panel panel-gray">
                    <div id="dFinancialID" class="panel-heading col-sm-12 col-md-12 search-createria">                        
                        <div class="col-xs-10 col-sm-8 col-md-8 col-lg-8">
                            <div class="col-sm-12 col-md-12 search-criteria-head">Financial Implications</div>
                        </div>
                        <div class="col-xs-2 col-sm-4 col-md-4 col-lg-4 collapse-arrow">  </div>
                    </div>
                    <div id="d-financial" class="panel-collapse collapse" style="min-height:50px; height: auto !important;">
                      <div class="panel-body" style="height: 100%;">
                        <div id="financialImplications_mob" class="row" style="margin: 10px 0;">
                            Hello Ntt
                        </div>
                      </div>
                    </div>
                  </div>    <!--  Financial Implications    -->
                  
                  <!--  Key Action Items  -->
                  <div class="panel panel-gray">
                    <div id="dKeyactID" class="panel-heading col-sm-12 col-md-12 search-createria">                        
                        <div class="col-xs-10 col-sm-8 col-md-8 col-lg-8">
                            <div class="col-sm-12 col-md-12 search-criteria-head">Key Action Items</div>
                        </div>
                        <div class="col-xs-2 col-sm-4 col-md-4 col-lg-4 collapse-arrow">  </div>
                    </div>
                    <div id="d-keyact" class="panel-collapse collapse" style="min-height:50px; height: auto !important;">
                      <div class="panel-body" style="height: 100%;">
                        <div id="keyActions_mob" class="row" style="margin: 10px 0;">
                            Hello Ntt
                        </div>
                      </div>
                    </div>
                  </div>    <!--  Key Action Items    -->
                  
                  <!--  Additional Details  -->
                  <div class="panel panel-gray">
                    <div id="dAdditionalID" class="panel-heading col-sm-12 col-md-12 search-createria">                        
                        <div class="col-xs-10 col-sm-8 col-md-8 col-lg-8">
                            <div class="col-sm-12 col-md-12 search-criteria-head">Additional Details</div>
                        </div>
                        <div class="col-xs-2 col-sm-4 col-md-4 col-lg-4 collapse-arrow">  </div>
                    </div>
                    <div id="d-additional" class="panel-collapse collapse" style="min-height:50px; height: auto !important;">
                      <div class="panel-body" style="height: 100%;">
                        <div class="row" style="margin: 10px 0;">
                            <div><b>Purpose: </b><span id="purpose_mob"></span></div>
                            <div id=""><b>Honeywell Lead: </b><span id="honLead_mob"></span></div>
                            <div id=""><b>Account:</b><span id="account_mob"></span></div>
                            <!--<div id="oem_mob"><b>OEM:</b></div>-->
                            <div id=""><b>Product Family:</b><span id="prodFamily_mob"></span></div>
                            <div id="sensitive_mob"><b>Sensitive Info?</b> <input id="senInfo_mob" type="checkbox" disabled="disabled"/></div>
                            <div id=""><a href="#attachments_mob" data-toggle="modal">Attachment(s)</a></div>
                            <div id=""><a href="#additionalLinks_mob" data-toggle="modal">Additional Link(s)</a></div>
                        </div>
                      </div>
                    </div>
                  </div>    <!--  Additional Details    -->
                    
                  
                </div> <!--    Mobile view for App details page End    -->
                
            </div>
        
        <!-- Detail Page ends -->
            <!--  Reports  -->
            
            <div id="ThirdTab" class="tab-pane">
                <!-- Added for Mobile begins -->
                <div class="table table-striped hidden-sm hidden-md hidden-lg" id="MobSavesearchbtnDiv">
                    <button id="MobSavesearchbtn" type="button" class="btn gray-btn" style="width:100%; margin-top: 10px;">Save Search</button><br/> 
                </div>
                <div class="table table-striped hidden-sm hidden-md hidden-lg" id="MobSaveSearchbtnUpdate">
                    <!--<button type="button" class="btn gray-btn" style="width:100%; margin-top: 10px;">Save Search</button><br/> -->
                </div>
                <!-- Added for Mobile begins -->
                <div id="SearchedRecordspanel" class="">
                          
                </div>
                
                
                
            
            </div>
        </div>
        
        <!-- Added for Mobile begins -->
        <div class="col-xs-12 hidden-sm hidden-md hidden-lg">
            <button id="Mobsearchbtn" type="button" class="btn red-btn" style="width:100%;" onclick="MobSearchVOC()">Search</button>
        </div>
        <div class="col-xs-12 hidden-sm hidden-md hidden-lg" id="MobResetlink" style="margin-top: 10px;">
            <button class="help-link" style="float:left; background: none; border: none; padding-top:5px" type="reset" onclick="MobResetsearch()">Reset Search Form</button>
        </div>
        <!-- Added for Mobile ends -->
    </div>    
    
    <!--    Footer for Tablet and Desktops    -->
    <div class="row hidden">
        <div class="footer">
            <img src="{!URLFOR($Resource.VOC_Phase2_Test,'images/footer_bg.png')}" style="width: 100%;"></img>
            <ul  class="inline-list">
                <li><a class="ex5 link" href="https://aerospace.honeywell.com" >Honeywell MyAerospace</a></li>        
                <!--<li><span>|</span><a href="https://www51.honeywell.com/aero/portal/Common/Documents/Generic_Terms_Conditions.pdf" target="_system" rel="external" >Terms &amp; Conditions</a></li>
                <li><span>|</span><a href="https://www51.honeywell.com/privacy/" target="_system" rel="external">Privacy Policy</a></li>-->
                
                 <!--- Changes for  DOCUMMENTUM Change Project -->
                
                <li><span>|</span><a href="{!$Setup.Docummentum__c.Docummentum_URL1__c}/aero/portal/Common/Documents/Generic_Terms_Conditions.pdf" target="_system" rel="external" >Terms &amp; Conditions</a></li>
                <li><span>|</span><a href="{!$Setup.Docummentum__c.Docummentum_URL1__c}/privacy/" target="_system" rel="external">Privacy Policy</a></li>
                
                
                <li><span>|</span><a href="https://wingmanservices.bendixking.com/GlobalCustomerCareWeb/contactusform.do" target="_system" rel="external">Website Feedback</a></li>
                <li><span>|</span><a href="http://www.careersathoneywell.com/en/aerospace" target="_system" rel="external">Careers</a></li>
                <li><span>|</span><a href="https://commerce.honeywell.com/webapp/wcs/stores/servlet/HonMultimediaDisplayView?storeId=10651" target="_system" rel="external">Media Center</a></li>
                <li><span>|</span><a href="https://aerospace.honeywell.com" target="_system" rel="external">Sitemap</a></li> 
            </ul>
        </div>
        <div class="voc-copyrights">
            <span>&copy; 2013</span>&nbsp;&nbsp; 
            <a href="http://www.honeywell.com" >Honeywell International Inc.</a>
        </div>
    </div>  

</div>

<!--  Top Right Menu  -->
<div class="right-menu-overlay"></div>
<div class="right-menu" id="sliderpanel">
    <ul class="list-group ">
        <!--<li class="list-group-item">
            <input class="menu-search" placeholder="Search" id="sliderSearchtext"></input>
            <button type="button" style="width:12%; margin-top: 10px;" class="btn btn-default white-btn" onclick="SliderSearchVoc()">Go</button> 
        </li>-->
        <li class="list-group-item menu-item"><a href="OVOC_Create">Create</a></li>
        <li class="list-group-item menu-item"><a href="OVOC_MyVOC">My VOC</a></li>
        <li class="list-group-item menu-item voc-loader-show">Search</li>
        <li class="list-group-item menu-item"><a href="OVOC_HelpPage">Help / VOC Guidelines</a></li>
        <li class="list-group-item menu-item"><a href="/secur/logout.jsp" class="voc-loader-show">Logout</a></li>
    </ul>
</div>

<!--  Loader Icon  -->
<div class="voc-loader">
    <div class="voc-loader-overlay"></div>
    <div class="voc-loader-icon"></div>
</div>
<!-- Save Search Popup begins -->
<div id="SaveSearchPopup" class="modal fade bs-example-modal-sm in" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header popup-header">
                Save Search
            </div>
            <div class="modal-body popup-body">
                Type in a new search name
                <input id="SaveSearchName" type="text" class="create-inp-flds" placeholder="Search Name" />
            </div>
                
        <!--    <div class="modal-body popup-body">
                Or, replace a previous search:
            </div>
            <div class="modal-body popup-body">
                <table id="SavedPopupList">
                    <tbody >
                    </tbody>  
                </table>
            </div> -->
            <div class="modal-footer popup-footer">
                <div class="col-xs-6" style="padding-right:10px">
                    <a id="CancelSaveSeach" class="btn btn-default white-btn create-next-btn" type="button" data-dismiss="modal">
                        Cancel
                    </a>
                </div>
                <div id="update_saveSearch" class="col-xs-6" style="padding-left:10px">
                <!-- Logic written in function SelectedSavedRecord -->
                </div>
                <div class="col-xs-6" style="padding-left:10px">
                    <a class="btn btn-default gray-btn create-next-btn" onclick="SaveThisSearch('');" data-dismiss="modal" type="button">
                        Ok
                    </a> 
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Save Search Popup Ends -->

<!-- Update Search Popup Begins-->
<div id="UpdateSearchPopup" class="modal fade bs-example-modal-sm in" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header popup-header">
                Update Search
            </div>
            <div id="UpdateSearchName" class="modal-body popup-body">
                
            </div>
            <div id="UpdateDelete" class="modal-body popup-body">
               <!-- <button type="button" class="btn create-btn-delete" style="width:100%; height: 45px"><span class="hidden-xs">Delete</span></button> -->
            </div>
            <div class="modal-footer popup-footer">
                <div class="col-xs-6" style="padding-right:10px">
                    <a id="CancelUpdatesearch" class="btn btn-default white-btn create-next-btn" type="button" data-dismiss="modal">
                        Cancel
                    </a>
                </div>
                <div id="update_saveSearch1" class="col-xs-6" style="padding-left:10px">
                <!-- Logic written in function SelectedSavedRecord -->
                </div>
                <div id="updateSearchOkButton" class="col-xs-6" style="padding-left:10px">
                    
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Update Search popup Ends -->
<!-- Export popup begins -->
<div id="Exportpopup" class="modal fade bs-example-modal-sm in" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header popup-header">
                Export
            </div>
            <div class="modal-body popup-body">
                Select any One of the following
            </div> 
            <div id="exportexcel" class="modal-body popup-body">
            
            </div>
            <div id="exportemail" class="modal-body popup-body">  
            
            </div>                
            <div class="modal-footer popup-footer">
                <div class="col-xs-12" style="">
                    <span>
                    <a class="btn btn-default white-btn create-next-btn" style="width:100%" onclick="HideExportPopup()" type="button" data-dismiss="modal">
                        Cancel
                    </a>
                    </span>
                </div>
            </div>
        </div>
    </div> 
</div>
<!-- Export popup ends -->


<!-- Email popup begins -->

<div id="Emailpopup" class="modal fade bs-example-modal-sm in" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header popup-header">
                Send Email to : {!$User.FirstName} {!$User.LastName} ?
            </div>
            <div class="modal-body popup-body">
             {!$User.email}   
            </div>                    
            <div class="modal-footer popup-footer">
                <div id="emailOkbuton" class="col-xs-6" style="padding-right:10px">
                </div>
                <div class="col-xs-6" style="padding-right:10px">
                    <a class="btn btn-default white-btn create-next-btn" onclick="ExportPopupemailhide()" type="button" data-dismiss="modal">
                        Cancel
                    </a>
                </div>
            </div>
        </div>
    </div> 
</div>

<!-- Email popup ends -->

<!-- Thank you popup begins -->
<div id="ThankYouPopup" class="modal fade bs-example-modal-sm in" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header popup-header">
                Email confirmation
            </div>
            <div class="modal-body popup-body">
             Email has been sent to your registered email address.   
            </div>                    
            <div class="modal-footer popup-footer">
                <!--<div class="col-xs-6" style="">
                </div>-->
                <div class="col-xs-12" style="">
                    <a class="btn btn-default white-btn create-next-btn" style="width:100%" onclick="ThankYoupopupHide()" type="button" data-dismiss="modal">
                        Ok
                    </a>
                </div>
            </div>
        </div>
    </div> 
</div>
<!-- Thank you popup ends -->

<!-- No Records Found panel starts-->

<div id="NoRecordsPopup" class="modal fade bs-example-modal-sm in" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header popup-header">
                Alert
            </div>
            <div class="modal-body popup-body">
             Sorry. No records were found with the search criteria provided.   
            </div>                    
            <div class="modal-footer popup-footer">
                <!--<div class="col-xs-6" style="padding-right:10px">
                </div>-->
                <div class="col-xs-12" style="">
                    <a class="btn btn-default white-btn create-next-btn" style="width:100%" onclick="NoRecordsPopuphide()" type="button" data-dismiss="modal">
                        Ok
                    </a>
                </div>
            </div>
        </div>
    </div> 
</div>

<!-- No Records Found panel ends-->

<!-- Please enter a search criteria panel starts-->

<div id="EnterSearchCriteria" class="modal fade bs-example-modal-sm in" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header popup-header">
                Alert
            </div>
            <div class="modal-body popup-body">
             Please enter at least one search criteria    
            </div>                    
            <div class="modal-footer popup-footer">
                <!--<div class="col-xs-6" style="padding-right:10px">
                </div>-->
                <div class="col-xs-12" style="">
                    <a class="btn btn-default white-btn create-next-btn" style="width:100%" onclick="NoCriteriaPopuphide()" type="button" data-dismiss="modal">
                        Ok
                    </a>
                </div>
            </div>
        </div>
    </div> 
</div>

<!-- Please enter a search criteria panel ends -->

<!-- Search criteria exists panel starts-->

<div id="SearchCriteriaExists" class="modal fade bs-example-modal-sm in" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header popup-header">
                Alert
            </div>
            <div class="modal-body popup-body">
             This Search Name already exists. Please enter a different Name.    
            </div>                    
            <div class="modal-footer popup-footer">
                <div class="col-xs-6" style="padding-right:10px">
                </div>
                <div class="col-xs-6" style="padding-right:10px">
                    <a class="btn btn-default white-btn create-next-btn" onclick="CriteriaExistsPopuphide()" type="button" data-dismiss="modal">
                        Ok
                    </a>
                </div>
            </div>
        </div>
    </div> 
</div>

<!-- Search criteria exists panel ends -->
    
<!-- Changes Saved panel for saved search starts-->

<div id="changesSaved" class="modal fade bs-example-modal-sm in" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header popup-header">
                Notification
            </div>
            <div class="modal-body popup-body">
             Search Saved!   
            </div>                    
            <div class="modal-footer popup-footer">
                <!--<div class="col-xs-6" style="padding-right:10px">
                </div>-->
                <div class="col-xs-12" style="">
                    <a class="btn btn-default white-btn create-next-btn" style="width:100%" onclick="ChangesSavedPopuphide()" type="button" data-dismiss="modal">
                        Ok
                    </a>
                </div>
            </div>
        </div>
    </div> 
</div>

<!-- Changes Saved panel for saved search ends-->

<!-- Changes Saved panel for delete search starts-->

<div id="searchdeleted" class="modal fade bs-example-modal-sm in" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header popup-header">
                Notification
            </div>
            <div class="modal-body popup-body">
             Search Deleted!   
            </div>                    
            <div class="modal-footer popup-footer">
                <!--<div class="col-xs-6" style="padding-right:10px">
                </div>-->
                <div class="col-xs-12" style="">
                    <a class="btn btn-default white-btn create-next-btn" style="width:100%" onclick="searchdeletedPopuphide()" type="button" data-dismiss="modal">
                        Ok
                    </a>
                </div>
            </div>
        </div>
    </div> 
</div>

<!-- Changes Saved panel for delete search ends-->

<!-- Error panel starts-->

<div id="errorpanel" class="modal fade bs-example-modal-sm in" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header popup-header">
                Error
            </div>
            <div class="modal-body popup-body">
             Looks like something went wrong! Please try again later. If problem persists, please contact your administrator.   
            </div>                    
            <div class="modal-footer popup-footer">
                <!--<div class="col-xs-6" style="padding-right:10px">
                </div>-->
                <div class="col-xs-12" style="">
                    <a class="btn btn-default white-btn create-next-btn" style="width:100%" onclick="ErrorpanelHide()" type="button" data-dismiss="modal">
                        Ok
                    </a>
                </div>
            </div>
        </div>
    </div> 
</div>

<!-- Error panel ends-->

<!-- Delete confirm popup begins -->  
<div id="deletesearchconfirm" class="modal fade bs-example-modal-sm in" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header popup-header">
                Confirmation  
            </div> 
            <div class="modal-body popup-body">
                Do you really want to DELETE this Saved Search?
            </div>                   
            <div class="modal-footer popup-footer">
                <div id="deleteYesbutton" class="col-xs-6" style="padding-right:10px">
                    
                </div>
                <div class="col-xs-6" style="padding-right:10px">
                    <a class="btn btn-default white-btn create-next-btn" onclick="deletesearchconfirmhide()" type="button" data-dismiss="modal">
                        No
                    </a>
                </div>
            </div>
        </div>
    </div> 
</div>
<!-- Delete confirm popup ends -->

<!-- Mobile functionality begins -->

<!-- Attachment mobile popup starts  -->
<div id="attachments_mob" class="modal fade bs-example-modal-sm in" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header popup-header">
                Attachments
            </div>
            <div class="modal-body popup-body" id="attachmentList_mob">
             
            </div>                    
            <div class="modal-footer popup-footer">
                
                <div class="col-xs-12" style="">
                    <a class="btn btn-default white-btn create-next-btn" style="width:100%"  type="button" data-dismiss="modal">
                        Close
                    </a>
                </div>
            </div>
        </div>
    </div> 
</div>
<!-- Attachment mobile popup ends-->
<!-- Addititional Links mobile popup starts  -->
<div id="additionalLinks_mob" class="modal fade bs-example-modal-sm in" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header popup-header">Additional Link(s)</div>
            <div class="modal-body popup-body" >
                 <div id="additionalAllLinks_mob"></div>
                
            </div>                    
            <div class="modal-footer popup-footer">
                
                <div class="col-xs-12" style="">
                    <a class="btn btn-default white-btn create-next-btn" style="width:100%"  type="button" data-dismiss="modal">
                        Close
                    </a>
                </div>
            </div>
        </div>
    </div> 
</div>
<!-- Addititional Links mobile popup ends-->
<!-- Mobile Update Search Popup begins -->
<div id="MobUpdateSearchPopup" class="modal fade bs-example-modal-sm in" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header popup-header">
                Save Search
            </div>
            <div class="modal-body popup-body">
                Type in a new search name
                <input id="MobUpdateSearchName" type="text" class="create-inp-flds" placeholder="Search Name" />
            </div>
            <div class="modal-footer popup-footer">
                <div class="col-xs-6" style="padding-right:10px">
                    <a id="MobCancelUpdateSearch" class="btn btn-default white-btn create-next-btn" type="button" data-dismiss="modal">
                        Cancel
                    </a>
                </div>
                <div id="update_saveSearch" class="col-xs-6" style="padding-left:10px">
                <!-- Logic written in function SelectedSavedRecord -->
                </div>
                <div id="update_saveSearchNoSelect" class="col-xs-6" style="padding-left:10px">
                  <!--  <a class="btn btn-default gray-btn create-next-btn" onclick="SaveThisSearch(\'' + ssid +'\');" data-dismiss="modal" type="button">
                        Ok
                    </a> -->
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Mobile Update Search Popup Ends -->

<!-- Mobile functionality ends -->

<script src="{!URLFOR($Resource.VOC_Phase2_Test,'js/jquery.min.js')}"></script>
<script src="{!URLFOR($Resource.VOC_Phase2_Test,'js/bootstrap.min.js')}"></script>
<script src="{!URLFOR($Resource.VOC_Phase2_Test,'js/common.js')}"></script>
<script src="https://code.jquery.com/ui/1.10.3/jquery-ui.min.js" />
<script src="{!URLFOR($Resource.VOC_Phase2_Test,'js/slider/bootstrap-slider.js')}"></script>
<script>

function CallNextTimeout() {    // For all Submited NEXT buttons
    $(".voc-loader").show();
    setTimeout(function(){ getNextResults() }, 100);
}

function CallPreviousTimeout() {    // For all Submited PREVIOUS buttons
    $(".voc-loader").show();
    setTimeout(function(){ getPreviousResults() }, 100);
}

// Convert To HTML Starts

var convertToHtml = function(convert){
return $("<span />", { html: convert }).text();
};

// Convert To HTML ends


var SearchType = 'Metadata'; // Variable for Search Type normal or Metadata

$(document).ready(function() { 

    //code for working of - Home Screen shortcut
    if (("standalone" in window.navigator) && window.navigator.standalone) {
    // For iOS Apps
    $('a').on('click', function(e){
          e.preventDefault();
          var new_location = $(this).attr('href');
          if (new_location != undefined && new_location.substr(0, 1) != '#' && $(this).attr('data-method') == undefined){
            window.location = new_location;
          }
        });
    }

    /*  Main Tabs   */
    
    // Create Page
    $("#voc-create").click( function() {    
        $(".voc-loader").show();
    });
    
    // My VOC Page
    $("#voc-myvoc").click( function() { 
        $(".voc-loader").show();    
    });
    
    // Search Page
    $("#voc-search").click( function() { 
//      $(".voc-loader").show();
    });
    
    // Help Page
    $("#voc-help").click( function() {
        $(".voc-loader").show();
    });



    $('#myvoc-detail-control').hide();
    $('#ThankYouPopup').hide();
    $('#Emailpopup').hide();  
    $('#recordsTab').hide();
    $('#SaveSearchLink').hide();
    $('#SaveSearchPopup').hide();
    $('#UpdateSearchPopup').hide();
    $('#update_saveSearch').hide();
    $('#UpadteSearchLink').hide();
    $('#Exportpopup').hide(); 
    $('#NoRecordsPopup').hide();
    $('#EnterSearchCriteria').hide();
    $('#recordsTab').removeClass('hidden');
    $('#myvoc-detail-control').removeClass('hidden');
    $('#SearchCriteriaExists').hide();
    $('#changesSaved').hide();
    $('#errorpanel').hide();
    // Added for Mobile starts//
    $('#MobSavesearchbtn').hide();
    //if ( $( window ).width() < 750 ) 
        $('#myvoc-details').hide();
    
    // Added for Mobile ends//
    populateProductFamily();
    populatePurpose();
    retrieveSavedSearch();
    
    /*  Collapse Blocks  */
    
    //    Date Picker
    $(function () {
        $('#sFromDate').datepicker();
        $('#sToDate').datepicker();
    });
    
    
    var userAgent = navigator.userAgent;
    if (userAgent.match(/IEMobile\/10\.0/)) {
        $("#sFromDate_mob").hide();
        $("#sFromDate").show();
        
        $("#sToDate_mob").hide();
        $("#sToDate").show();
    
    } else if (userAgent.match(/(iPad|iPhone|iPod|Mobile|Android|BlackBerry)/g)) { 
        browser = false;
        $("#sFromDate_mob").show();
        $("#sFromDate").hide();
        
        $("#sToDate_mob").show();
        $("#sToDate").hide();
    }
    else {   
        browser = true;
        $("#sFromDate_mob").hide();
        $("#sFromDate").show();
        
        $("#sToDate_mob").hide();
        $("#sToDate").show();
    }
    
    
    //    Key Takeaways
    $("#dKeyTakeID").click( function() {
        if ( $('#d-keytake').hasClass("in")) {
            $('#d-keytake.collapse').removeClass("in");
            $('#dKeyTakeID').removeClass('panel-red');
        } else {
            $('.collapse').removeClass("in");
            $('#details-accordion .panel .panel-heading').removeClass('panel-red');
            $('#d-keytake.collapse').addClass("in");
            $('#dKeyTakeID').addClass('panel-red');
        }
    });

    //    Hypothesis
    $("#dHypothesisID").click( function() {
        if ( $("#d-hypothesis").hasClass("in")) {
            $('#d-hypothesis.collapse').removeClass("in");
            $('#dHypothesisID').removeClass('panel-red');
        } else {
            $('.collapse').removeClass("in");   
            $('#details-accordion .panel .panel-heading').removeClass('panel-red');
            $('#d-hypothesis.collapse').addClass("in");
            $('#dHypothesisID').addClass('panel-red');
        }
    });
    
    //    Financial Implications
    $("#dFinancialID").click( function() {
        if ( $("#d-financial").hasClass("in")) {
            $('#d-financial.collapse').removeClass("in");
            $('#dFinancialID').removeClass('panel-red');
        } else {
            $('.collapse').removeClass("in");   
            $('#details-accordion .panel .panel-heading').removeClass('panel-red');
            $('#d-financial.collapse').addClass("in");
            $('#dFinancialID').addClass('panel-red');
        }
    });
    
    //    Key Action Items
    $("#dKeyactID").click( function() {
        if ( $("#d-keyact").hasClass("in")) {
            $('#d-keyact.collapse').removeClass("in");
            $('#dKeyactID').removeClass('panel-red');
        } else {
            $('.collapse').removeClass("in");   
            $('#details-accordion .panel .panel-heading').removeClass('panel-red');
            $('#d-keyact.collapse').addClass("in");
            $('#dKeyactID').addClass('panel-red');
        }
    });
    
    
    //    Additional Details
    $("#dAdditionalID").click( function() {
        if ( $("#d-additional").hasClass("in")) {
            $('#d-additional.collapse').removeClass("in");
            $('#dAdditionalID').removeClass('panel-red');
        } else {
            $('.collapse').removeClass("in");   
            $('#details-accordion .panel .panel-heading').removeClass('panel-red');
            $('#d-additional.collapse').addClass("in");
            $('#dAdditionalID').addClass('panel-red');
        }
    });
    
    
    //    Date Range Search
    $("#sSavedSearchesID").click( function() {
        if ( $('#s-savedsearches').hasClass("in")) {
            $('#s-savedsearches.collapse').removeClass("in");
            $('#sSavedSearchesID').removeClass('panel-red');           
        } else {
            $('.collapse').removeClass("in");
            $('#search-accordion .panel .panel-heading').removeClass('panel-red');
            $('#s-savedsearches.collapse').addClass("in");
            $('#sSavedSearchesID').addClass('panel-red');
            //////////Added for Mobile//////////////////////
            retrieveSavedSearch();
            //////////Added for Mobile ends/////////////////
        }
    });
    
    //    Date Range Search
    $("#sDaterangeID").click( function() {
        if ( $('#s-daterange').hasClass("in")) {
            $('#s-daterange.collapse').removeClass("in");
            $('#sDaterangeID').removeClass('panel-red');
        } else {
            $('.collapse').removeClass("in");
            $('#search-accordion .panel .panel-heading').removeClass('panel-red');
            $('#s-daterange.collapse').addClass("in");
            $('#sDaterangeID').addClass('panel-red');
        }
    });

    //    Customer Search
    $("#sCustnameID").click( function() {
        if ( $("#s-custname").hasClass("in")) {
            $('#s-custname.collapse').removeClass("in");
            $('#sCustnameID').removeClass('panel-red');
        } else {
            $('.collapse').removeClass("in");   
            $('#search-accordion .panel .panel-heading').removeClass('panel-red');
            $('#s-custname.collapse').addClass("in");
            $('#sCustnameID').addClass('panel-red');
        }
    });
    
    
    //    Account Search
    $("#sAccountID").click( function() {
        if ( $("#s-account").hasClass("in")) {
            $('#s-account.collapse').removeClass("in");
            $('#sAccountID').removeClass('panel-red');
        } else {
            $('.collapse').removeClass("in");
            $('#search-accordion .panel .panel-heading').removeClass('panel-red');
            $('#s-account.collapse').addClass("in");
            $('#sAccountID').addClass('panel-red');
        }
    });
    
    //    Lead Search
    $("#sLeadID").click( function() {
        if ( $("#s-lead").hasClass("in")) {
            $('#s-lead.collapse').removeClass("in");
            $('#sLeadID').removeClass('panel-red');
        } else {
            $('.collapse').removeClass("in");
            $('#search-accordion .panel .panel-heading').removeClass('panel-red');
            $('#s-lead.collapse').addClass("in");
            $('#sLeadID').addClass('panel-red');
        }
    });
    
    //    Product Line Search
    $("#sProductID").click( function() {
        if ( $("#s-productline").hasClass("in")) {
                $('#s-productline.collapse').removeClass("in");
                $('#sProductID').removeClass('panel-red');
        } else {
            $('.collapse').removeClass("in");   
            $('#search-accordion .panel .panel-heading').removeClass('panel-red');
            $('#s-productline.collapse').addClass("in");
            $('#sProductID').addClass('panel-red');
        }
    }); 
    
       //    Purpose Search
    $("#sPurposeID").click( function() {
        if ( $("#s-Purpose").hasClass("in")) {
                $('#s-Purpose.collapse').removeClass("in");
                $('#sPurposeID').removeClass('panel-red');
        } else {
            $('.collapse').removeClass("in");   
            $('#search-accordion .panel .panel-heading').removeClass('panel-red');
            $('#s-Purpose.collapse').addClass("in");
            $('#sPurposeID').addClass('panel-red');
        }
    });  
       
       //    Current Status Search
    $("#sCurrentStatusID").click( function() {
        if ( $("#s-CurrentStatus").hasClass("in")) {
                $('#s-CurrentStatus.collapse').removeClass("in");
                $('#sCurrentStatusID').removeClass('panel-red');
        } else {
            $('.collapse').removeClass("in");   
            $('#search-accordion .panel .panel-heading').removeClass('panel-red');
            $('#s-CurrentStatus.collapse').addClass("in");
            $('#sCurrentStatusID').addClass('panel-red');
        }
    }); 
    
       //    Sensitive Level Search
    $("#sSensitivityLevelID").click( function() {
        if ( $("#s-SensitivityLevel").hasClass("in")) {
                $('#s-SensitivityLevel.collapse').removeClass("in");
                $('#sSensitivityLevelID').removeClass('panel-red');
        } else {
            $('.collapse').removeClass("in");   
            $('#search-accordion .panel .panel-heading').removeClass('panel-red');
            $('#s-SensitivityLevel.collapse').addClass("in");
            $('#sSensitivityLevelID').addClass('panel-red');
        }
    }); 
    
       //    Report Number Search
    $("#sReportNumberID").click( function() {
        if ( $("#s-ReportNumber").hasClass("in")) {
                $('#s-ReportNumber.collapse').removeClass("in");
                $('#sReportNumberID').removeClass('panel-red');
        } else {
            $('.collapse').removeClass("in");   
            $('#search-accordion .panel .panel-heading').removeClass('panel-red');
            $('#s-ReportNumber.collapse').addClass("in");
            $('#sReportNumberID').addClass('panel-red');
        }
    });  
    
        //    VOC Title/Collection Search
    $("#sVOCTitleId").click( function() {
        if ( $("#s-VocTitle").hasClass("in")) {
            $('#s-VocTitle.collapse').removeClass("in");
            $('#sVOCTitleId').removeClass('panel-red');
        } else {
            $('.collapse').removeClass("in");
            $('#search-accordion .panel .panel-heading').removeClass('panel-red');
            $('#s-VocTitle.collapse').addClass("in");
            $('#sVOCTitleId').addClass('panel-red');
        }
    });
    
        /* Search Slider Start  */
     $('#ex1').slider({ handle : 'round', selection: 'before', tooltip: 'hide' });
    
     $('#ex1').on('slideStop', function() {
        var c_sliderVal = $('#ex1').slider('getValue');
   
        console.log( c_sliderVal );
         if( c_sliderVal == 2 ){
            SearchType = 'Normal';
            $('#ex1Slider').attr('style','background-color: #EE3124');
          } else {
             SearchType = 'Metadata';
             $('#ex1Slider').attr('style','background-color: #056D05');
          }
        
    });
    /* Search Slider End     */
    
});
    
    $('ul.myvoc-tabs li').click(function(){
        //alert('clicked other' + $(this).attr('id'));
        if($(this).attr('id') != 'myvoc-detail-control')
            $('#myvoc-detail-control').hide();
        else{
            $('#myvoc-detail-control').show();
        }
        
    });

    function Save_Search_Panel() {
        el = document.getElementById("Save_Search_Section");
        el.style.visibility = (el.style.visibility == "visible") ? "hidden" : "visible"; 
        document.getElementById('j_id0:j_id5:emailname').value= "";
        document.getElementById('j_id0:j_id5:emailsubject').value= "";
        document.getElementById('j_id0:j_id5:emailbody').value= ""; 
    }
    function ErrorCheck() {
        var cr1 = document.getElementById('j_id0:j_id2:Keyword').value;
        var cr2 = document.getElementById('j_id0:j_id2:StartDate').value;
        var cr3 = document.getElementById('j_id0:j_id2:EndDate').value;
        var cr4 = document.getElementById('j_id0:j_id2:CustomerName').value;
        var cr5 = document.getElementById('j_id0:j_id2:OEMAccount').value;
        var cr6 = document.getElementById('j_id0:j_id2:HoneywellLead').value;
        var cr7 = document.getElementById('j_id0:j_id2:ProductLine').value;
        
        if (cr1 == '' && cr2 == '' && cr3 == '' && cr4 == '' && cr5 == '' && cr6 == '' && cr7 == '') {
                alert('Please Enter a Search Criteria');
                return false;
        }
    }
    
    
        /////////////////////////////Date formating starts//////////////////////////////////
    var min = 0;
    var size = 15;//Pagination size
    var Allrecordnext;
    
    function normalizeDateExtended(mydate){
    mydate = new Date(mydate);
    data = new Date(mydate -  mydate.getTimezoneOffset() * 60000);
    var d = mydate.getDate();
    var month = mydate.getMonth()+1;
    var y = mydate.getFullYear();
    var m = '';
    switch (month) {
        case 1:
            m = 'Jan';
            break;
        case 2:
            m = 'Feb';
            break;
        case 3:
            m = 'Mar';
            break;
        case 4:
            m = 'Apr';
            break;
        case 5:
            m = 'May';
            break;
        case 6:
            m = 'Jun';
            break;
        case 7:
            m = 'Jul';
            break;
        case 8:
            m = 'Aug';
            break;
        case 9:
            m = 'Sep';
            break;
        case 10:
            m = 'Oct';
            break;
        case 11:
            m = 'Nov';
            break;
        case 12:
            m = 'Dec';
            break;    
        
    }
    return [m,d,y];
} 
    
    /////////////////////////////Date formatting ends///////////////////////////////////
    
    /////////////////////////////Search VOC Records Start///////////////////////////////
    
    var saveLink;
    function SearchVoc() {
    
        $(".voc-loader").show();
        
    var i=0;
   //     setTimeout(function(){$(".voc-loader").show()}, 10);

        //Make Search Result Active
       $('ul.myvoc-tabs li').removeClass('active');
       $('#recordsTab').addClass('active');
       $('#SaveSearchLink').show();
       $('#UpdateSearchPopup').hide();
       $('div.tab-pane').removeClass('active');
       $('#ThirdTab').addClass('active');
    
    
        var listsearchrecords = '';
        var searchRec = '';
        var hrefForRecord = '';
        var loggedInUser = '{!$User.FirstName} {!$User.LastName}';
         
        var Searchtext = document.getElementById('mainSearch').value;
        //  var FromDate = document.getElementById('sFromDate').value;  
        //  var ToDate= document.getElementById('sToDate').value;
       
/*        if ( browser == false ) {    
            var FromDate = $('#sFromDate_mob').val();    // Mobile or iPad devices
            var ToDate = $('#sToDate_mob').val();    // Mobile or iPad devices
        } else {    
            var FromDate = $('#sFromDate').val();    // Desktop browsers
            var ToDate = $('#sToDate').val();    // Desktop browsers
        }
*/

        var userAgent = navigator.userAgent; 
        if (userAgent.match(/IEMobile\/10\.0/)) {
            var FromDate = $('#sFromDate').val();    // Desktop browsers
            var ToDate = $('#sToDate').val(); 
            
        } else if (userAgent.match(/(iPad|iPhone|iPod|Mobile|Android|BlackBerry)/g)) { 
            var FromDate = $('#sFromDate_mob').val();    // Mobile or iPad devices
            var ToDate = $('#sToDate_mob').val();    // Mobile or iPad devices
         
        }
        else { 
            var FromDate = $('#sFromDate').val();    // Desktop browsers
            var ToDate = $('#sToDate').val(); 
        }    
        var CustomerNameTitle = document.getElementById('sNameTitle').value;
        var AccountName= document.getElementById('sAccount').value;
        var HonLead = document.getElementById('sLeads').value;
        var ProductFamily = getProductValues();
        var Purpose = getPurposeValues();
        var VOCTitle = document.getElementById('sVOCTitle').value;
        var RecordNumber = document.getElementById('sReportNumber').value; 
        var CurrentStatus = document.getElementById('currentstatusList').value; 
        var SensitiveLevel = document.getElementById('SensitiveLevelList').value;
        if(Searchtext == '' && FromDate == '' && ToDate == '' && CustomerNameTitle == '' && AccountName == '' && HonLead  == '' && ProductFamily == '' && VOCTitle == '' && Purpose == '' && RecordNumber == '' && CurrentStatus == '' && SensitiveLevel == '') {
            $(".voc-loader").hide();
            $('#EnterSearchCriteria').modal({
              show:true,
              closeOnEscape: true
          });
          
     //     setTimeout(function(){$(".voc-loader").hide()}, 10);
        }
        else {
            Visualforce.remoting.Manager.invokeAction(
                '{!$RemoteAction.OVOC_SearchPage_Controller.Search_VOC}',
                Searchtext,FromDate,ToDate,CustomerNameTitle,AccountName,HonLead,ProductFamily,VOCTitle,Purpose,RecordNumber,CurrentStatus,SensitiveLevel,SearchType,
                function(result, event){
                    if(event.type == 'exception') {
                      //  alert(event.message);
   //       setTimeout(function(){$(".voc-loader").hide()}, 10);
                           $(".voc-loader").hide();
                        $('#errorpanel').modal({
                            show:true,
                            closeOnEscape: true
                        }); 
                    } 
                    else {   
                        $('#recordsTab').show();
             //           setTimeout(function(){$(".voc-loader").hide()}, 10);
                                
                        
                        if(result[0] != null){
                        listsearchrecords = result;
                        Allrecordnext = result;
                            $.each(listsearchrecords , function(index, value){
                            hrefForRecord = '/apex/OVOC_Search?id=' + value.Id;
                        var cssClass = '';
                        
                        if(value.Status__c == 'Submitted') {
                            if(value.RecordTypeId == '{!$Label.OVOC_RecType_Id}'){
                                cssClass ='myvoc-ovoc-tag';
                            }else{
                                cssClass ='myvoc-voc-tag';
                            }
                        }
                        else {
                            cssClass ='myvoc-draft-bgcolor';    
                        }
                        var expid = value.Id;
                        var thisdate = normalizeDateExtended(value.CreatedDate);
                        var month = thisdate[0];
                        var date = thisdate[1];
                        var year = thisdate[2];
                        
                        if(i==size){
                            return;
                            $(".voc-loader").hide();
                        }
                        else {
                        searchRec += '<div class="row myvoc-records">'
                        + '<div class="col-xs-9 col-sm-12 col-md-12">'
                        + '<div class="col-xs-3 col-sm-1 col-md-1 myvoc-calender">'
                        + '<div class="myvoc-calender-month">' 
                        + month +'</div>'
                        + '<div class="myvoc-calender-day">'
                        + date + '</div>'
                        + '<div class="myvoc-calender-year">'
                        + year + '</div>' 
                        + '</div>' 
                        + '<div class="col-xs-9 col-sm-11 col-md-11">'
                        + '<div class="col-xs-12 col-sm-12 col-md-12 myvoc-record-head"><a onclick="openNewTabForDetails(\'' + value.Id + '\');" href="#" rel="external">' 
                        + value.VOC_Title__c +'</a></div>'
                        + '<div class="col-xs-12 col-sm-12 col-md-12 myvoc-rec-sub-hdr">'
                        + 'By '+ value.Honeywell_Lead_Formula__c + '</div>'        //value.Created_By_Name__c
                        + '</div>'
                        + '</div>'
                        + '<div class="col-xs-12 col-sm-12 col-md-12 hidden-xs myvoc-rec-desc">'
                        + value.VOC_Hypothesis__c + '</div>'
                        + '<div class="col-xs-3 col-sm-12 col-md-12">' 
                        + '<div class="col-md-1 col-sm-1 col-xs-12 myvoc-submitted-tag '+ cssClass +'">'
                        + value.VOC__c + '</div>'
                        + '<div class="col-md-9 col-sm-9 hidden-xs"><a href="#" class="myvoc-export-link help-link" style="margin-left: 35px;" onclick="DisplayExportPopup(\'' + expid +'\');">Export</a></div>' 
                        + '</div>'
                        + '</div>';
                            i++;
                            min = size;
                            if(min<=0) {
                                $('#idNext').hide(); 
                                $('#idPrevious').hide();
                            }
                            else {
                                $('#idNext').show();    
                            }
                            
                            $(".voc-loader").hide();
                        }
                        });
                        $('#SearchedRecordspanel').html(searchRec);
                        saveLink = true;
                        if(result.length > 15) {
                            buttondisplay = '<div class="col-xs-6 col-sm-6 col-md-6 col-md-offset-0" style="float:right; margin-top: 10px;">'
                                        + '<input type="button"  href="#" id="idNext" style="width:100px; float:right;  margin-bottom:15px" class="btn gray-btn" value="Next" onclick="CallNextTimeout()" style="float:right"/>'
                                        + '</div>';
                            $('#SearchedRecordspanel').append(buttondisplay);
                        }
                        ///////// Added for mobile begins///////////
                        $('#SearchedRecordspanel').show();
                        /////////Added for mobile ends//////////////
               //       setTimeout(function(){$(".voc-loader").hide()}, 10);
                    } 
                    else {
                        $('#recordsTab').hide();
                        $('#ThirdTab').removeClass('active');
                        $('#search-advancedSearch').addClass('active');
                        $('#advancedSearch').addClass('active');
                        $(".voc-loader").hide();
                        $('#NoRecordsPopup').modal({
                            show:true,
                            closeOnEscape: true
                        });
                        // Added for mobile starts
                        $('#search-accordion').show(200);
                        $('#MobMainsearchbox').show();
                        $('#MobSavesearchbtn').hide();
                        $('#Mobsearchbtn').show(); 
                        $('#Honmainimage').show(200);
                        $('#mainblackstrip').show(200);
                        $('.voc-hdr-new').hide(); 
                        $('.voc-hdr-img').show();
                        $('#MobResetlink').show(); 
                        // Added for mobile ends  
                        
             //         setTimeout(function(){$(".voc-loader").hide()}, 10);
                    }
            //        setTimeout(function(){$(".voc-loader").hide()}, 10);
                }       
               });
               
         //     setTimeout(function(){$(".voc-loader").hide()}, 10);
           }
       //   setTimeout(function(){$(".voc-loader").hide()}, 10);
    }
    
    
    function getNextResults(){
        var buttondisplay = '';
        var searchRec = '';
        var hrefForRecord = '';
        // Pagination control
         if(min<=0)
           $('#idPrevious').hide();
        else
           $('#idPrevious').show(); 
        //Display Data
        $('#myvoc-submitted').empty();
        var cssClass = '';
        
        var ovoc_voc_number = '';
        allRecords = '';    
        //alert(Allrecordnext.length);    
        $.each(Allrecordnext, function(index,value) {
        hrefForRecord = '/apex/OVOC_Search?id=' + value.Id;
        ovoc_voc_number = value.VOC__c;
                    hrefForRecord = '#';
                    var expid = value.Id;
                   // console.log(expid);
        var thisDate = normalizeDateExtended(value.CreatedDate);
                var month = thisDate[0];
                var date = thisDate[1];
                var year = thisDate[2];
               // console.log(value.Status__c);
        if(value.Status__c == 'Submitted') {
            if(value.RecordTypeId == '{!$Label.OVOC_RecType_Id}'){
                cssClass ='myvoc-ovoc-tag';
            }else{
                cssClass ='myvoc-voc-tag';
            }
        }
        else {
            cssClass ='myvoc-draft-bgcolor';    
        }
                 if(index >= min && index<min+size){
                     
                    searchRec += '<div class="row myvoc-records">'
                        + '<div class="col-xs-9 col-sm-12 col-md-12">'
                        + '<div class="col-xs-3 col-sm-1 col-md-1 myvoc-calender">'
                        + '<div class="myvoc-calender-month">' 
                        + month +'</div>'
                        + '<div class="myvoc-calender-day">'
                        + date + '</div>'
                        + '<div class="myvoc-calender-year">'
                        + year + '</div>' 
                        + '</div>' 
                        + '<div class="col-xs-9 col-sm-11 col-md-11">'
                        + '<div class="col-xs-12 col-sm-12 col-md-12 myvoc-record-head"><a onclick="openNewTabForDetails(\'' + value.Id + '\');" href="#" rel="external">' 
                        + value.VOC_Title__c +'</a></div>'
                        + '<div class="col-xs-12 col-sm-12 col-md-12 myvoc-rec-sub-hdr">'
                        + 'By '+ value.Honeywell_Lead_Formula__c + '</div>'
                        + '</div>'
                        + '</div>'
                        + '<div class="col-xs-12 col-sm-12 col-md-12 hidden-xs myvoc-rec-desc">'
                        + value.VOC_Hypothesis__c + '</div>'
                        + '<div class="col-xs-3 col-sm-12 col-md-12">' 
                        + '<div class="col-md-1 col-sm-1 col-xs-12 myvoc-submitted-tag '+ cssClass +'">'
                        + value.VOC__c + '</div>'
                        + '<div class="col-md-9 col-sm-9 hidden-xs"><a href="#" class="myvoc-export-link help-link" style="margin-left: 35px;" onclick="DisplayExportPopup(\'' + expid +'\');">Export</a></div>' 
                        + '</div>'
                        + '</div>';   
                          
                    }  
                    $('#SearchedRecordspanel').html(searchRec);  
                                         
       });
       
       $(".voc-loader").hide();
        buttondisplay = '<div class="col-xs-6 col-sm-6 col-md-6 col-md-offset-0" style="margin-top: 10px;">'
                                    + '<input type="button"  href="#" style="width:100px; margin-bottom:15px" id="idPrevious" class="btn gray-btn" value="Previous" onclick="CallPreviousTimeout()"/>'
                                    + '</div>'   
                                    + '<div class="col-xs-6 col-sm-6 col-md-6 col-md-offset-0" style="float:right; margin-top: 10px;">'
                                    + '<input type="button"  href="#" style="width:100px; float:right; margin-bottom:15px" id="idNext" class="btn gray-btn" value="Next" onclick="CallNextTimeout()" style="float:right"/>'
                                    + '</div>';
        $('#SearchedRecordspanel').append(buttondisplay);
       min = min + size;
       if(Allrecordnext.length <= min) {
           $('#idNext').hide();
           }
    }
    
    
    function getPreviousResults(){
        var searchRec = '';
        var hrefForRecord = '';
        var buttondisplay = '';
        // Pagination control
         if(min<=0)
           $('#idPrevious').hide();
        else
           $('#idPrevious').show(); 
        //Display Data
        $('#myvoc-submitted').empty();
        var cssClass = '';
        
        var ovoc_voc_number = '';
        allRecords = '';    
        //alert(Allrecordnext.length);    
        $.each(Allrecordnext, function(index,value) {
        hrefForRecord = '/apex/OVOC_Search?id=' + value.Id;
        ovoc_voc_number = value.VOC__c;
                    hrefForRecord = '#';
                    var expid = value.Id;
                   // console.log(expid);
        var thisDate = normalizeDateExtended(value.CreatedDate);
                var month = thisDate[0];
                var date = thisDate[1];
                var year = thisDate[2];
        if(value.Status__c == 'Submitted') {
            if(value.RecordTypeId == '{!$Label.OVOC_RecType_Id}'){
                cssClass ='myvoc-ovoc-tag';
            }else{
                cssClass ='myvoc-voc-tag';
            }
        }
        else {
            cssClass ='myvoc-draft-bgcolor';    
        }
                    if(index>=min-size-size && index<min-size){ 
                    searchRec += '<div class="row myvoc-records">'
                        + '<div class="col-xs-9 col-sm-12 col-md-12">'
                        + '<div class="col-xs-3 col-sm-1 col-md-1 myvoc-calender">'
                        + '<div class="myvoc-calender-month">' 
                        + month +'</div>'
                        + '<div class="myvoc-calender-day">'
                        + date + '</div>'
                        + '<div class="myvoc-calender-year">'
                        + year + '</div>' 
                        + '</div>' 
                        + '<div class="col-xs-9 col-sm-11 col-md-11">'
                        + '<div class="col-xs-12 col-sm-12 col-md-12 myvoc-record-head"><a onclick="openNewTabForDetails(\'' + value.Id + '\');" href="#" rel="external">' 
                        + value.VOC_Title__c +'</a></div>'
                        + '<div class="col-xs-12 col-sm-12 col-md-12 myvoc-rec-sub-hdr">'
                        + 'By '+ value.Honeywell_Lead_Formula__c + '</div>'
                        + '</div>'
                        + '</div>'
                        + '<div class="col-xs-12 col-sm-12 col-md-12 hidden-xs myvoc-rec-desc">'
                        + value.VOC_Hypothesis__c + '</div>'
                        + '<div class="col-xs-3 col-sm-12 col-md-12">' 
                        + '<div class="col-md-1 col-sm-1 col-xs-12 myvoc-submitted-tag '+ cssClass +'">'
                        + value.VOC__c + '</div>'
                        + '<div class="col-md-9 col-sm-9 hidden-xs"><a href="#" class="myvoc-export-link help-link" style="margin-left: 35px;" onclick="DisplayExportPopup(\'' + expid +'\');">Export</a></div>' 
                        + '</div>'
                        + '</div>';   
                          
                    }  
                    $('#SearchedRecordspanel').html(searchRec);                       
       });
       
       $(".voc-loader").hide();
        buttondisplay = '<div class="col-xs-6 col-sm-6 col-md-6 col-md-offset-0" style="margin-top: 10px;">'
                                    + '<input type="button"  href="#" style="width:100px; margin-bottom:15px" id="idPrevious" class="btn gray-btn" value="Previous" onclick="CallPreviousTimeout()"/>'
                                    + '</div>'   
                                    + '<div class="col-xs-6 col-sm-6 col-md-6 col-md-offset-0" style="float:right; margin-top: 10px;">'
                                    + '<input type="button"  href="#" style="width:100px; float:right; margin-bottom:15px" id="idNext" class="btn gray-btn" value="Next" onclick="CallNextTimeout()" style="float:right"/>'
                                    + '</div>';
        $('#SearchedRecordspanel').append(buttondisplay);
       min = min - size;
      if(min<=size)
           $('#idPrevious').hide();
       if(Allrecordnext.length > size)
           $('#idNext').show();
    }
    
    
    
    function NoRecordsPopuphide() {
        $('#NoRecordsPopup').hide();   
    }     
    
    function NoCriteriaPopuphide() {  
        $('#EnterSearchCriteria').hide(); 
        $('#search-accordion').show();
        // Added for mobile starts
        $('#MobMainsearchbox').show();
        $('#MobSavesearchbtn').hide();
        $('#Mobsearchbtn').show(); 
        $('#Honmainimage').show(200);
        $('#mainblackstrip').show(200);
        $('.voc-hdr-new').hide(); 
        $('.voc-hdr-img').show();
        $('#MobResetlink').show(); 
        // Added for mobile ends          
    }  
    /////////////////////////////Search VOC records End//////////////////////////////////
    
    
    function getProductValues(){
        var product='';
        
       // alert($('#ProductFamilyselect input:checked').length);
        $('#ProductFamilyselect input:checked').each(function(){
            
         //   if($(this).attr('id') != 'otherCheckbox')
                product += $(this).val() + ';';
        });
        return product; //+ $('#otherTextbox').val();
    }
    
   
    
   
//////////////////////// Populate Product Family Start //////////////////////////////////////////   
   
   function populateProductFamily() {
       var listProductFamily = '';
       var productFamily = '';
       OVOC_SearchPage_Controller.getProductLine(function(result, event){
       if(event.type == 'exception') {
            // alert(event.message);
       } 
       else {            
           listProductFamily = result;
           if(listProductFamily != null){
               $.each(listProductFamily , function(index, value){
                   productFamily += '<div class="col-xs-12 col-sm-12 col-md-12"><input type="checkbox" value="' + value +'"><span>' + value + '</span></input></div>';
               });
               $('#ProductFamilyselect').html(productFamily);
           }          
       }
      });
   } 

//////////////////////// Populate Product Family End ////////////////////////////////////////// 

//////////////////////// Populate Purpose Start////////////////////////////////////////////////

    function getPurposeValues(){
        var purpose='';
        $('#PurposeSelect input:checked').each(function(){
                purpose += $(this).val() + ';';
        });
        return purpose;
    }

    function populatePurpose() {
       var listPurpose = '';
       var purpose = '';
       OVOC_SearchPage_Controller.getPurpose(function(result, event){
       if(event.type == 'exception') {
            // alert(event.message);
       } 
       else {            
           listPurpose = result;
           if(listPurpose != null){
               $.each(listPurpose , function(index, value){
                   purpose += '<div class="col-xs-12 col-sm-12 col-md-12"><input type="checkbox" value="' + value +'"><span>' + value + '</span></input></div>';
               });
               $('#PurposeSelect').html(purpose);
           }          
       }
      });
   } 

//////////////////////// Populate Purpose Ends ////////////////////////////////////////////////
  

//////////////////////// Fetch Saved Searches Records start //////////////////////////////////////////

    
    
   // trying to retrieve saved searches via remoting. 
   
   function retrieveSavedSearch() {
   $(".voc-loader").show();
   var listsavedsearch = '';
   var savedRecs = '';
   var Mobsavedrecs = '';
   var savelistpopup = '';
   Visualforce.remoting.Manager.invokeAction(
            '{!$RemoteAction.OVOC_SearchPage_Controller.getsavedSearches}',
            function(result, event){
                if(event.type == 'exception') {
                   // alert(event.message);
                   $(".voc-loader").hide();
                } 
                else {                         
                    if(result[0] != null) {
                    listsavedsearch = result;
                        $.each(listsavedsearch , function(index, value){
                            var ssid = value.Id;
                            savedRecs += '<tr><td ><div class="col-xs-9 col-sm-9 col-md-10 create-customer-name" style="width:50%; padding-left:2px"><a class="help-link" onclick ="displayrec(\'' + ssid +'\');">'+value.Search_Name__c+'</a></div>'
                           +'<div class="col-xs-3 col-sm-6 col-md-6 create-alighn-right">'
                           +'<a name="delete_customer" onclick="DeleteThisSearch(\'' + ssid +'\');" data-toggle="modal" type="button" class="btn create-btn-delete"><span class="hidden-xs">Delete</span></a>'
                           +'</div></td></tr>';
                            $('#SavedsearchList').html(savedRecs);
                            
                          //  Mobsavedrecs += '<div class="saved-links col-xs-12"> <a href="#" onclick="DeleteThisSearch(\'' + ssid +'\')"><div class="delete-btn" style="float:left; margin-right:5px"></div></a> <a href="#" class="help-link" onclick = "Mob_displayrec(\'' + ssid +'\',\'' + value.Search_Name__c + '\');">'+value.Search_Name__c+'</a></div>';
                          //  $('#MobSavedsearchList').html(Mobsavedrecs);
                            
                            Mobsavedrecs += '<div class="row create-customer-row"><div class="col-xs-12" style="width:75%">'
                            +'<a href="#" class="help-link" onclick = "Mob_displayrec(\'' + ssid +'\',\'' + value.Search_Name__c + '\');">'+value.Search_Name__c+'</a></div>'
                            +'<div class="col-xs-3 col-sm-6 col-md-6 create-alighn-right">'
                            +'<a name="delete_customer" onclick="DeleteThisSearch(\'' + ssid +'\');" data-toggle="modal" type="button" class="btn create-btn-delete"><span class="hidden-xs">Delete</span></a>'
                            +'</div></div>';
                            $('#MobSavedsearchList').html(Mobsavedrecs);
                            
                           // $('#SavedsearchMobileList').html(savedRecs);
                            savelistpopup += '<tr><td><input type="radio" class="voc-radio" onclick="SelectedSavedRecord(\'' + ssid +'\');" name="voc_radio_btn" value="'+ value.Search_Name__c +'" >'+value.Search_Name__c+'</input></td></tr>';
                            $('#SavedPopupList').html(savelistpopup);
                        });
                       $(".voc-loader").hide();
                    }   
                    else {
                          savedRecs += '<tr><td>You do not have any Saved Searches </td></tr>';
                          Mobsavedrecs += 'You do not have any Saved Searches';
                          $('#SavedsearchList').html(savedRecs);
                          $('#MobSavedsearchList').html(Mobsavedrecs);
                       // $('#SearchedRecordspanel').hide();
                      //  $('#ThirdTab').hide();
                     //   $('#NoRecordsPopup').modal({
                     //       show:true,
                     //       closeOnEscape: true
                     //   }); 
                     
                     $(".voc-loader").hide();    
                    }    
                 //   $(".voc-loader").hide();   
                }       
           });
    }

 
       function displayrec(ssid) {
           $(".voc-loader").show();
       var i=0;
       //Make Search Result Active
       $('ul.myvoc-tabs li').removeClass('active');
       $('#recordsTab').addClass('active');
       
       $('div.tab-pane').removeClass('active');
       $('#ThirdTab').addClass('active');
       
       var hrefForRecord = '';
       var loggedInUser = '{!$User.FirstName} {!$User.LastName}';
       $('#recordsTab').show(); 
       var listsavedsearch = '';
       var searchRec = '';
       var exportToExcel = '';
       var sendViaMail = '';
       Visualforce.remoting.Manager.invokeAction(
           '{!$RemoteAction.OVOC_SearchPage_Controller.fetchSaveSearch}',
           ssid,
           function(result, event){
           if(event.type == 'exception') {
           // alert(event.message);
           $(".voc-loader").hide();
            $('#errorpanel').modal({
                show:true,
                closeOnEscape: true
            });
       } 
       else {           
               if(result[0] != null){
               Allrecordnext = result;
               listsavedsearch = result;
               $.each(listsavedsearch , function(index, value){
                   var cssClass = '';                  
                   if(value.Status__c == 'Submitted') {
                            if(value.RecordTypeId == '{!$Label.OVOC_RecType_Id}'){
                                
                                cssClass ='myvoc-ovoc-tag';
                            }else{
                                cssClass ='myvoc-voc-tag';
                            }
                        }
                        else {
                            cssClass ='myvoc-draft-bgcolor';    
                        }
                   
                //    if(value.RecordTypeId == '{!$Label.OVOC_RecType_Id}'){
                //        cssClass ='myvoc-ovoc-tag';
                //    }else{
                //        cssClass ='myvoc-voc-tag';
                //    }
                    var thisdate = normalizeDateExtended(value.CreatedDate);
                    var month = thisdate[0];
                    var date = thisdate[1];
                    var year = thisdate[2];
                    hrefForRecord = '/apex/OVOC_Create?id=' + value.Id;
                    var expid = value.Id;
                    if(i==size){
                        return;
                        $(".voc-loader").hide();
                    }
                    else {
                    searchRec += '<div class="row myvoc-records">'
                    + '<div class="col-xs-9 col-sm-12 col-md-12">'
                    + '<div class="col-xs-3 col-sm-1 col-md-1 myvoc-calender">'
                    + '<div class="myvoc-calender-month">' 
                    + month +'</div>'
                    + '<div class="myvoc-calender-day">'
                    + date + '</div>'
                    + '<div class="myvoc-calender-year">'
                    + year + '</div>' 
                    + '</div>' 
                    + '<div class="col-xs-9 col-sm-11 col-md-11">'
                    + '<div class="col-xs-12 col-sm-12 col-md-12 myvoc-record-head"><a onclick="openNewTabForDetails(\'' + value.Id + '\');" rel="external">'
                    + value.VOC_Title__c +'</a></div>'
                    + '<div class="col-xs-12 col-sm-12 col-md-12 myvoc-rec-sub-hdr">'
                    + 'By '+value.Honeywell_Lead_Formula__c + '</div>'
                    + '</div>'
                    + '</div>'
                    + '<div class="col-xs-12 col-sm-12 col-md-12 hidden-xs myvoc-rec-desc">'
                    + value.VOC_Hypothesis__c + '</div>'
                    + '<div class="col-xs-3 col-sm-12 col-md-12">' 
                    + '<div class="col-md-1 col-sm-1 col-xs-12 myvoc-submitted-tag '+ cssClass +'">'
                    + value.VOC__c + '</div>'
                    + '<span class="col-md-9 col-sm-9 hidden-xs"><a href="#" class="myvoc-export-link help-link" style="margin-left: 35px;" onclick="DisplayExportPopup(\'' + expid +'\');">Export</a></span>' 
                    + '</div>'
                    + '</div>';
                    $('#SearchedRecordspanel').html(searchRec);
                    saveLink = false;
                    i++;
                    min = size;
                        if(min<=0) {
                            $('#idNext').hide(); 
                            $('#idPrevious').hide();
                        }
                        else {
                            $('#idNext').show();    
                        }
                        
                        $(".voc-loader").hide();
                    }
                   });
                   if(result.length >= 15) {
                       buttondisplay = '<div class="col-xs-6 col-sm-6 col-md-6 col-md-offset-0" style="float:right; margin-top: 10px;">'
                                        + '<input type="button"  href="#" id="idNext" style="width:100px; float:right; margin-bottom:15px" class="btn gray-btn" value="Next" onclick="CallNextTimeout()" style="float:right"/>'
                                        + '</div>';
                       $('#SearchedRecordspanel').append(buttondisplay);
                   }
                   ///////////Added for mobile begins/////////////////
                    $('#SearchedRecordspanel').show();
                   ///////////Added for mobile ends////////////
                   //$('#SearchedRecordspanel').html(searchRec);
                   //$('#exportexcel').html(exportToExcel);
                   //$('#SaveSearchLink').show();
                 //  if(updatedId == ssid){
                 //      $('#SaveSearchLink').hide();
                 //      $('#UpadteSearchLink').show();
                 //  }else{
                 //      
                 //      $('#SaveSearchLink').show();
                 //      $('#UpadteSearchLink').hide();
                 //  }
               }
               else {
                   $('#recordsTab').hide(); 
                   $(".voc-loader").hide();
                    $('#NoRecordsPopup').modal({
                        show:true,
                        closeOnEscape: true
                    }); 
               }          
           }             
           });
          
       }
       
        function CriteriaExistsPopuphide() {
            $('#SearchCriteriaExists').modal("hide");
            $('#SaveSearchPopup').modal({
                show:true,
                closeOnEscape: true
            });
        }
       
//////////////////////// Fetch Saved Searches Records end //////////////////////////////////////////

//////////////////////// Save search Link functionality starts///////////////////////////////////////////////
     var updatesearch = false;

     $("#recordsTab").click( function() {
         if(saveLink == true) {
          $('#SaveSearchLink').show();
          }
          else {
              
          }
        });
        
      $("#SaveSearchLink").click( function() {
          //savesearchObject();
          document.getElementById("SaveSearchName").value = '';
          retrieveSavedSearch();
          $('#SaveSearchPopup').modal({
              show:true,
              closeOnEscape: true
          });
        });
        
//////////////////////////////////////Save Search for Mobile starts/////////////////////////////////////////////////
    
     $("#MobSavesearchbtn").click( function() {
          //savesearchObject();
          document.getElementById("SaveSearchName").value = '';
          retrieveSavedSearch();
          $('#SaveSearchPopup').modal({
              show:true,
              closeOnEscape: true
          });
        });

//////////////////////////////////////Save Search for Mobile ends////////////////////////////////////////////        
        
      $("#CancelSaveSeach").click( function() {        
          $('#SaveSearchPopup').hide(400);
      });
      
      $("#SavedsearchTab").click( function() {
         // savesearchObject();
          retrieveSavedSearch();
          $('#SaveSearchLink').hide();
          $('#UpdateSearchLink').hide();            
        });
        
        $("#advancedSearch").click( function() {
          $('#SaveSearchLink').hide();
          $('#UpdateSearchLink').hide();            
        });
        
      function SelectedSavedRecord(ssid) {
         // $('#update_saveSearchNoSelect').hide();
          $('#update_saveSearch').show();
          var UpdateSelectedLink = '<a type="button" class="btn btn-default gray-btn create-next-btn" data-dismiss="modal" onclick="SaveThisSearch(\'' + ssid +'\');">Ok</a>';
          $('#update_saveSearch').html(UpdateSelectedLink);
      }
      var returnId = '';
      var updatedId = '';
      
      function SaveThisSearch(ssid) { 
          updatesearch = true;
          var Searchtext = '';
          var FromDate = '';
          var ToDate = '';
          var CustomerNameTitle = '';
          var AccountName = '';
          var HonLead = '';
          var VOCTitle = '';
          var Searchtext = document.getElementById('mainSearch').value;
//          var FromDate = document.getElementById('sFromDate').value;
//          var ToDate = document.getElementById('sToDate').value;

/*         if ( browser == false ) {    
            var FromDate = $('#sFromDate_mob').val();    // Mobile or iPad devices
            var ToDate = $('#sToDate_mob').val();    // Mobile or iPad devices
        } else {    
            var FromDate = $('#sFromDate').val();    // Desktop browsers
            var ToDate = $('#sToDate').val();    // Desktop browsers
        }
*/    
        var userAgent = navigator.userAgent; 
        if (userAgent.match(/IEMobile\/10\.0/)) {
            var FromDate = $('#sFromDate').val();    // Desktop browsers
            var ToDate = $('#sToDate').val();    // Desktop browsers
            
        } else if (userAgent.match(/(iPad|iPhone|iPod|Mobile|Android|BlackBerry)/g)) { 
            
            
           // var FromDate = $('#sFromDate_mob').val();    // Mobile or iPad devices
           // var ToDate = $('#sToDate_mob').val();    // Mobile or iPad devices
            var FromDate = '';
            var fromdatevalidation = $('#sFromDate_mob').val();
            var fromDateOrg = new Date($('#sFromDate_mob').val());
            if(fromdatevalidation != null && fromdatevalidation != '') {
                FromDate = (fromDateOrg.getMonth()+1) + '/' +fromDateOrg.getDate() + '/' + fromDateOrg.getFullYear();
            }
            //alert('Test-->' + FromDateTemp);
            var ToDate = '';
            var todatevalidation = $('#sToDate_mob').val();
            var ToDateOrg = new Date($('#sToDate_mob').val());
            if(todatevalidation != null && todatevalidation != '') {
                ToDate = (ToDateOrg.getMonth()+1) + '/' +ToDateOrg.getDate() + '/' + ToDateOrg.getFullYear();   
            } 
        }
        else { 
            var FromDate = $('#sFromDate').val();    // Desktop browsers
            var ToDate = $('#sToDate').val();    // Desktop browsers
          //  alert($.datepicker.formatDate('mm/dd/yy', new Date($('#sFromDate').val())));
        }

          var CustomerNameTitle = document.getElementById('sNameTitle').value;
          var AccountName = document.getElementById('sAccount').value;
          var HonLead = document.getElementById('sLeads').value;
          var VOCTitle = document.getElementById('sVOCTitle').value;
          var ProductFamily = getProductValues();
          var searchName = document.getElementById("SaveSearchName").value;
          var Purpose = getPurposeValues();
          var RecordNumber = document.getElementById('sReportNumber').value; 
          var CurrentStatus = document.getElementById('currentstatusList').value; 
          var SensitiveLevel = document.getElementById('SensitiveLevelList').value;
          Visualforce.remoting.Manager.invokeAction(
              '{!$RemoteAction.OVOC_SearchPage_Controller.SaveSearch}',
              ssid,searchName,Searchtext,FromDate,ToDate,CustomerNameTitle,AccountName,HonLead,ProductFamily,VOCTitle,Purpose,RecordNumber,CurrentStatus,SensitiveLevel,
              function(result, event){
                  if(event.type == 'exception') {
                     // alert(event.message);
                      $('#errorpanel').modal({
                          show:true,
                          closeOnEscape: true
                      }); 
                  } 
                  else {       
                      returnId = result;
                      if(returnId != null) {    
                      $('#SaveSearchPopup').hide();                     
                     // $('#SaveSearchLink').hide();
                     // alert('Changes Saved!');    
                      var updatesearchlnk = '<a  href="#" onclick="ShowUpdatePopup(\''+ ssid +'\');">Update '+ searchName+'</a>'; 
                      updatedId = ssid;
                   //   $('#UpadteSearchLink').html(updatesearchlnk);
                   //   var updateName = '<input id="updateName" type="text" class="create-inp-flds" placeholder="Search Name" value="'+ searchName +'">';
                   //   $('#UpdateSearchName').html(updateName);
                   //   $('#UpadteSearchLink').show(); 
                        $('#changesSaved').modal({
                            show:true,
                            closeOnEscape: true
                        });  
                   }
                   else {
                       $('#SaveSearchPopup').hide(400);
                        $('#SearchCriteriaExists').modal({
                            show:true,
                            closeOnEscape: true
                        }); 
                   }
                  }             
              });        
      }
////////////////////////Save search Link functionality ends///////////////////////////////////////////////

////////////////////////Update Search Functionality Starts////////////////////////////////////////////////
    function ShowUpdatePopup(ssid) {
  //  alert(ssid);
  //  alert('returnId'+returnId);
        var Okbutton =  '<a  class="btn btn-default gray-btn create-next-btn" type="button" data-dismiss="modal" onclick="UpdateThisSearch(\'' + ssid +'\');">Ok</a>';  
        $('#updateSearchOkButton').html(Okbutton); 
         $('#UpdateSearchPopup').modal({
              show:true,
              closeOnEscape: true
          });
        if(returnId != '' && ssid  == '') {
            var DeletebuttonRetid =  '<button type="button" class="btn create-btn-delete" style="width:100%; height: 45px" data-dismiss="modal" onclick="DeleteThisSearch(\'' + returnId + '\');"><span class="hidden-xs">Delete</span></button>';     
            $('#UpdateDelete').html(DeletebuttonRetid);       
        }
        else {
            var DeletebuttonSSID =  '<button type="button" class="btn create-btn-delete" style="width:100%; height: 45px" data-dismiss="modal" onclick="DeleteThisSearch(\'' + ssid + '\');"><span class="hidden-xs">Delete</span></button>'; 
             $('#UpdateDelete').html(DeletebuttonSSID);   
        }
    }
    
    function UpdateThisSearch(ssid) { 
          updatesearch = true;
          var Searchtext = '';
          var FromDate = '';
          var ToDate = '';
          var CustomerNameTitle = '';
          var AccountName = '';
          var HonLead = '';
          var Searchtext = document.getElementById('mainSearch').value;
//          var FromDate = document.getElementById('sFromDate').value;
//          var ToDate = document.getElementById('sToDate').value;

/*         if ( browser == false ) {     // Mobile or iPad devices
            var FromDate = $('#sFromDate_mob').val();   
            var ToDate = $('#sToDate_mob').val();    
        } else {    // Desktop browsers
            var FromDate = $('#sFromDate').val();    
            var ToDate = $('#sToDate').val();    
        }
*/

        var userAgent = navigator.userAgent; 
        if (userAgent.match(/IEMobile\/10\.0/)) {
            var FromDate = $('#sFromDate').val();    // IE Mobile browsers
            var ToDate = $('#sToDate').val();    // IE Mobile browsers
            
        } else if (userAgent.match(/(iPad|iPhone|iPod|Mobile|Android|BlackBerry)/g)) { 
            var FromDate = $('#sFromDate_mob').val();    // Mobile or iPad devices
            var ToDate = $('#sToDate_mob').val();    // Mobile or iPad devices
         
        }
        else { 
            var FromDate = $('#sFromDate').val();    // Desktop browsers
            var ToDate = $('#sToDate').val();    // Desktop browsers
        }    

          var CustomerNameTitle = document.getElementById('sNameTitle').value;
          var AccountName = document.getElementById('sAccount').value;
          var HonLead = document.getElementById('sLeads').value;
          var ProductFamily = getProductValues();
          var searchName = document.getElementById("updateName").value;
          var retId = returnId;
          Visualforce.remoting.Manager.invokeAction(
              '{!$RemoteAction.OVOC_SearchPage_Controller.UpdateSearch}',
              ssid,searchName,Searchtext,FromDate,ToDate,CustomerNameTitle,AccountName,HonLead,retId,ProductFamily,
              function(result, event){
                  if(event.type == 'exception') {
                    //  alert(event.message);
                  } 
                  else {           
                      $('#UpdateSearchPopup').hide();                     
                      $('#SaveSearchLink').hide();    
                   //   alert('Changes Saved!');    
                      var updatesearchlnk = '<a href="#" onclick="ShowUpdatePopup(\''+ ssid +'\');">Update '+ searchName+'</a>';                       
                      $('#UpadteSearchLink').html(updatesearchlnk);
                    //  $('#UpadteSearchLink').show();   
                  }             
              });        
      }
      function DeleteThisSearch(ssid) {         
          $('#deletesearchconfirm').modal({
            show:true,
            closeOnEscape: true
        });
        var okbutton = '<a class="btn btn-default white-btn create-next-btn" onclick="DeleteSearchfinal(\'' + ssid +'\')" type="button">Yes</a>';
         $('#deleteYesbutton').html(okbutton);
         }
         
      function DeleteSearchfinal(ssid) {   
          Visualforce.remoting.Manager.invokeAction(
              '{!$RemoteAction.OVOC_SearchPage_Controller.DeleteSearch}',
              ssid,
              function(result, event){
                  if(event.type == 'exception') {
                     // alert(event.message);
                      $('#errorpanel').modal({
                        show:true,
                        closeOnEscape: true
                    }); 
                  } 
                  else {  
                      $('#deletesearchconfirm').modal("hide");         
                      $('#UpdateSearchPopup').hide();                     
                      $('#SaveSearchLink').hide();                               
                      $('#UpadteSearchLink').hide();
                      retrieveSavedSearch(); 
                      $('#searchdeleted').modal({
                        show:true,
                        closeOnEscape: true
                    });    
                  }             
              });    
      }
    
        function deletesearchconfirmhide() {
            $('#searchdeleted').modal("hide");     
        }
////////////////////////Update Search Functionality Ends////////////////////////////////////////////////


///////////////////////Export Popup functionality Starts//////////////////////////////////////////////////

    function DisplayExportPopup(expid) {     
        var excelLink = '/apex/VOC_ExportToExcel?id=';
        var popupExportLink = '<a href="#" class="myvoc-export-link help-link" onclick="ExportPopupexcel(\'' + expid +'\');">Export to Excel</a>';
        var popupEmailLink = '<a href="#" class="myvoc-export-link help-link" onclick="ExportPopupemailshow(\'' + expid +'\');"">Send via Email</a>';
        $('#exportexcel').html(popupExportLink);
        $('#exportemail').html(popupEmailLink);       
        $('#Exportpopup').modal({
              show:true,
              closeOnEscape: true
        });
    } 
    
    function HideExportPopup() {
         $('#Exportpopup').hide(); 
       // $('#Exportpopup').modal({
       //     show:false,
       //     closeOnEscape: true
       // });   
    } 
    
    function ExportPopupexcel(expid) {
        window.open('/apex/VOC_ExportToExcel?id='+expid,'_blank',height=20,width=20);        
    } 
    function ExportPopupemailshow(expid) {
        var Okbutton =  '<a class="btn btn-default white-btn create-next-btn" type="button" data-dismiss="modal" onclick="SendMailfunction(\'' + expid +'\');">Ok</a>';
        $('#emailOkbuton').html(Okbutton);
        $('#Emailpopup').modal({
            show:true,
            closeOnEscape: true
        });
       // $('#Emailpopup').show();
       // $('#Exportpopup').hide();  
        $("#Exportpopup").modal("hide"); 
    }
    function ExportPopupemailhide(expid) { 
       // $('#Emailpopup').hide();
        $("#Emailpopup").modal("hide");
        $('#Exportpopup').modal({
            show:true,
            closeOnEscape: true
        });
       // $('#Exportpopup').show();   
    }
    
    function SendMailfunction(expid) {
        var usermail = '{!$User.email}' ;
        Visualforce.remoting.Manager.invokeAction(
              '{!$RemoteAction.OVOC_SearchPage_Controller.sendPdf}',
              expid,usermail,
              function(result, event){
                  if(event.type == 'exception') {
                     // alert(event.message);
                      $('#errorpanel').modal({
                          show:true,
                          closeOnEscape: true
                      });
                  } 
                  else {           
                     // $('#Emailpopup').hide();
                      $("#Emailpopup").modal("hide");
                      $('#ThankYouPopup').modal({
                          show:true,
                          closeOnEscape: true
                      });  
                  //    $('#ThankYouPopup').show();    
                  }             
              });       
    }
    function ThankYoupopupHide() {
   //      $('#ThankYouPopup').modal({
   //                       show:false,
   //                       closeOnEscape: true
   //                   }); 
   //      $('#Emailpopup').modal({
   //                       show:false,
   //                       closeOnEscape: true
   //                   });
   //      $('#Exportpopup').modal({
   //                       show:false,
    //                      closeOnEscape: true
    //                  });
        $("#ThankYouPopup").modal("hide");
        $("#Emailpopup").modal("hide");
        $("#Exportpopup").modal("hide");
    }
                

///////////////////////Export popup functionality ends//////////////////////////////////////////////////// 

///////////////////////Link to record detail begins///////////////////////////////////////////////////////
     
    function openNewTabForDetails(recId){
        $(".voc-loader").show();
    
        $('ul.myvoc-tabs li').removeClass('active');

        $('#myvoc-detail-control').show();
        $('#myvoc-detail-control').addClass('active');
        $('div.tab-pane').removeClass('active');
        $('#myvoc-details').addClass('active');
        $('#searchBack_mob').attr('onclick','backForDetails()');
        
        //$("#details-accordion").show();
        getPouplateForDeatils(recId);    
        $('#myvoc-details').show();
        if ( $( window ).width() < 750 ) {
            
          //  console.log("6");
            $('.myvoc-tabs').hide();
            $('.home-black-strip').hide();
            $('.voc-hdr-img').hide();
            $('#Save_Search_Section').hide();
            $('#MobSavesearchbtnDiv').hide();
            $('#SearchedRecordspanel').hide();
            //alert('--->');
            $('.voc-hdr-new').show();
            $('#summary-sub-txt').text('VOC');
            $('#myvoc-details').show();
            //$("#details-accordion").show();
            
        } else {
          //  console.log("7");
            $('.myvoc-tabs').show();
            $('.home-black-strip').show();
            $('.voc-hdr-img').show();
            
            $('.voc-hdr-new').hide();
     //       $('#myvoc-details').show();
        }
         
    }

    /*function getPouplateForDeatils(recordId) {
        var vocRecord;    
        if(recordId != ''){                   
            draftRecordId = recordId;       
            var vocRecord;
            OVOC_SearchPage_Controller.getMyVOCDetails( recordId, function(result, event){
                if(event.type == 'exception') {
                   // alert(event.message);
                }
                else {
                                 
                    if(result.VOC_Title__c != null)
                        $('#title').html(result.VOC_Title__c);                   
                    if(result.VOC_Hypothesis__c != null)
                        $('#hypothesis').html(result.VOC_Hypothesis__c);                                      
                    if(result.Key_Takeaways1__c != null)
                        $('#keyTakeaways').html(result.Key_Takeaways1__c);        
                    if(result.Financial_Implications__c != null)
                        $('#financialImplications').html(result.Financial_Implications__c);                   
                    if(result.Key_Action_Items__c != null)
                        $('#keyActions').html(convertToHtml(result.Key_Action_Items__c));                   
                    if(result.Purpose_of_this_VOC__c != null)
                        $('#purposeOfVOC').html(result.Purpose_of_this_VOC__c);                   
                    if(result.Product_Name__c!= null)
                        $('#prodName').html(result.Product_Name__c);
                    if(result.Product_Family__c!= null)
                        $('#prodFamily').html(result.Product_Family__c);                   
                    
                   // if(result.Platform__r != null)
                   //     $('#platform').html(result.Platform__r.Name);   
                      if(result.Platform_Formula__c != '')
                          $('#platform').html(result.Platform_Formula__c);                
                    if(result.createdby.Name != null)
                        $('#submittedBy').html('By ' + result.createdby.Name);                    
                    if(result.VOC_Customer_Names__r != null){
                        var listCustomers = '';
                        var i = 1;
                        $.each(result.VOC_Customer_Names__r, function(index, value){
                            listCustomers += '<tr><td>' + i + '</td><td>'
                                            + value.Customer_Name__c + '</td><td>'
                                            + value.Customer_s_Title_Role__c  + '</td><td>'
                                            + value.Primary_Customer_s_Email__c +'</td><td>'
                                            + value.Company_Name__c+ '</td></tr>';
                                    
                            i++;           
                                
                        });
                        $('#customers').html(listCustomers);
                    }
                    
                    if(result.CreatedDate != null){
                        var submittedDate = normalizeDateExtended(result.CreatedDate);
                        $('#date').html(submittedDate[1]);
                        $('#month').html(submittedDate[0]);
                        $('#year').html(submittedDate[2]);
                    
                    }
                        $('#myvoc-details-tab').html(result.VOC__c);
                }
            
            });
        }
    }*/
    
function getPouplateForDeatils(recordId) {
    
    
    
    var vocRecord;
    var Expbtn_mob;
    if(recordId != ''){
                   
        draftRecordId = recordId;
        
        var vocRecord;
        OVOC_SearchPage_Controller.getMyVOCDetails( recordId, function(result, event){
            if(event.type == 'exception') {
              //  alert(event.message);
              $(".voc-loader").hide();
            }else{
              //  console.log(result);
                
                if(result.VOC_Title__c != null){
                    $('#title').html(result.VOC_Title__c);
                    
                }    
                if(result.VOC_Hypothesis__c != null){
                    $('#hypothesis').html(result.VOC_Hypothesis__c);
                    $('#hypothesis_mob').html(result.VOC_Hypothesis__c);
                }else{
                    $('#hypothesis').html('');
                    $('#hypothesis_mob').html('');
                }    
                    
                if(result.Key_Takeaways1__c != null){
                    $('#keyTakeaways').html(result.Key_Takeaways1__c);
                    $('#keyTakeaways_mob').html(result.Key_Takeaways1__c);
                }else{
                    $('#keyTakeaways').html('');
                    $('#keyTakeaways_mob').html('');
                }
                
                if(result.Financial_Implications__c != null){
                    $('#financialImplications').html(result.Financial_Implications__c);
                    $('#financialImplications_mob').html(result.Financial_Implications__c);
                }else{
                    $('#financialImplications').html('');
                    $('#financialImplications_mob').html('');
                }
                    
                if(result.Key_Action_Items__c != null){
                    
                
                  //var ttr = '<apex:outputtext value="'+ result.Key_Action_Items__c +'" escape="false"/>';
                    //$('#keyActions').html();
                    //var str_esc = escape(result.Key_Action_Items__c)
                    //alert(str_esc);
                    //alert(unescape(str_esc));
                    $('#keyActions').html(convertToHtml(result.Key_Action_Items__c));
                    
                    $('#keyActions_mob').html(convertToHtml(result.Key_Action_Items__c));
                }else{
                    $('#keyActions').html('');
                    $('#keyActions_mob').html('');
                }   
                 
                if(result.Purpose_of_this_VOC__c != null){
                    $('#purposeOfVOC').html(result.Purpose_of_this_VOC__c);
                    $('#purpose_mob').html(' '+result.Purpose_of_this_VOC__c);
                }else{
                    $('#purposeOfVOC').html('');
                    $('#purpose_mob').html('');
                }    
                    
                if( result.Product_Name__c != null){
                    $('#prodName').html(result.Product_Name__c);
                }else{
                    $('#prodName').html('');
                }    
                    
                if(result.Product_Family__c != null){
                    $('#prodFamily').html(result.Product_Family__c);
                    $('#prodFamily_mob').html(' '+ result.Product_Family__c);
                }else{
                    $('#prodFamily').html('');
                    $('#prodFamily_mob').html('');
                } 
                 
                if(result.Sensitive__c!= null){
                    if(result.Sensitive__c == true){
                        $('#senInfo_mob').attr('checked',true);
                    }
                }  
                if(result.Honeywell_Lead__c != null){
                    $('#honLead_mob').html(' '+ result.Honeywell_Lead__c);
                }else{
                    $('#honLead_mob').html('');
                } 
              //  if(result.Platform__r != null){
              //      $('#platform').html(result.Platform__r.Name);
              //  }
                if(result.Platform_Formula__c != ''){
                    $('#platform').html(result.Platform_Formula__c);
                }
                else{
                    $('#platform').html('');
                }    
                if(result.Honeywell_Lead_Formula__c != null){
                    $('#submittedBy').html('By ' + result.Honeywell_Lead_Formula__c);
                }    
                if(result.VOC_Customer_Names__r != null){
                    var listCustomers = '';
                    var i = 1;
                    var allAccounts = '';
                    $.each(result.VOC_Customer_Names__r, function(index, value){
                        var vocAccountName = '';
                        if(value.VOC_Account__r != null)
                            vocAccountName = value.VOC_Account__r.Name;       
                            allAccounts += vocAccountName + ',';
                        listCustomers += '<tr><td>' + i + '</td><td>'
                                        + value.Customer_Name__c + '</td><td>'
                                        + value.Customer_s_Title_Role__c  + '</td><td>'
                                        + value.Primary_Customer_s_Email__c +'</td><td>'
                                        + vocAccountName + '</td></tr>';
                                
                        i++;           
                            
                    });
                    $('#customers').html(listCustomers);
                    $('#account_mob').html(' '+ allAccounts);
                }
                
                if(result.CreatedDate != null){
                    
                    var submittedDate = normalizeDateExtended(result.CreatedDate);
                    //alert('date' + submittedDate[1]);
                    $('#date').html(submittedDate[1]);
                    $('#month').html(submittedDate[0]);
                    $('#year').html(submittedDate[2]);
                
                }
                // Extrnal Links display
                 if(result.External_Links__c != null){
                    var Myarray = [];
                    Myarray = result.External_Links__c.split(',');
                    var linklist = ''; 
                    $.each(Myarray, function(index,value) {
                        linklist += '<a class="help-link" target="_blank" style="word-wrap: break-word;" href="' + value + '">' + value + '</a><br/>';
                        $('#ExternalLinks').html(linklist);
                        $('#ExternalLinks').removeClass('hidden');
                    });      
                    $('#additionalAllLinks_mob').html(linklist);     
                }else{
                    $('#ExternalLinks').html('');
                    $('#ExternalLinks').removeClass('hidden');
                    $('#additionalAllLinks_mob').html('');     
                }
                
                
                
                if(result.Attachments != null){
                    var linkForFile ='';
                    $.each(result.Attachments, function(index, value){
                       
                        linkForFile += '<a target="_system" href="/servlet/servlet.FileDownload?file=' + value.Id +'">' + value.Name + '</a><br/>';
                    });
                
                    $('#attachmentNameLink').html(linkForFile);
                    $('#attachmentNameLink').removeClass('hidden');
                    //alert(linkForFile);
                    $('#attachmentList_mob').html(linkForFile);
                }
                
                $('#myvoc-details-tab').html(result.VOC__c);
                $('#Search-sub-txt').html(result.VOC__c);
                
                Expbtn_mob = '<a class="btn gray-btn export-btn-cls" onclick="DisplayExportPopup(\'' + result.Id +'\');">Export</a>';
                $('#detailExportBtn_Mob').html(Expbtn_mob);
                
                $(".voc-loader").hide();
            }
        
        });
    }
    
}

///////////////////////Link to record detail ends/////////////////////////////////////////////////////////
///////////////////////Changes Saved//////////////////////////////////////////////////////////////////////

    function ChangesSavedPopuphide() {
        $('#changesSaved').modal("hide");
    }
    function ErrorpanelHide() {
         $('#errorpanel').modal("hide");
    }

///////////////////////Changes Saved ends/////////////////////////////////////////////////////////////////

////////////////////////////Reset Functionality starts////////////////////////////////////////////////////
    function resetfields() {
        $('#s-daterange.collapse').removeClass("in");
        $('#sDaterangeID').removeClass('panel-red');
        $('#s-custname.collapse').removeClass("in");
        $('#sCustnameID').removeClass('panel-red');
        $('#s-account.collapse').removeClass("in");
        $('#sAccountID').removeClass('panel-red');
        $('#s-lead.collapse').removeClass("in");
        $('#sLeadID').removeClass('panel-red');
        $('#s-productline.collapse').removeClass("in");
        $('#sProductID').removeClass('panel-red');
        $('#s-VocTitle.collapse').removeClass("in");
        $('#sVOCTitleId').removeClass('panel-red');
        $('#s-ReportNumber').removeClass("in");
        $('#sReportNumberID').removeClass('panel-red');
        $('#s-SensitivityLevel').removeClass("in");
        $('#sSensitivityLevelID').removeClass('panel-red');
        $('#s-CurrentStatus').removeClass("in");
        $('#sCurrentStatusID').removeClass('panel-red');
        $('#s-Purpose').removeClass("in");
        $('#sPurposeID').removeClass('panel-red');
        $('#ex1').slider({ 'data-slider-value' : '1'});
        $('#ex1Slider').attr('style','background-color: #056D05');
    }
    function ResetKeyword() {
        document.getElementById('mainSearch').value = '';
    }
////////////////////////////Reset Functionality ends////////////////////////////////////////////////////

     function searchdeletedPopuphide() {
         $('#searchdeleted').modal("hide");
     }

////////////////////////////Mobile functionality begins//////////////////////////////////////////////////
    function backForDetails(){
        $('#myvoc-details').hide();
        $('#ThirdTab').show();
        $('#ThirdTab').show();
        $('#MobSavesearchbtnDiv').show();
        $('#SearchedRecordspanel').show();
        $('#searchBack_mob').attr('onclick','MobSearchback()');
    }

    // Search click hides advanced search panel
    function MobSearchVOC() {
        $('#search-accordion').hide(200);
        $('#MobMainsearchbox').hide(200);     
        $('#myvoc-details').hide(200); 
        $('#Honmainimage').hide();
        $('#mainblackstrip').hide(200);  
        $('#voc-ovoc-slider').hide(200);
        SearchVoc();
        $('#MobSavesearchbtn').show(200);  
        $('#Mobsearchbtn').hide();  
        $('.voc-hdr-new').show(); 
        $('#Search-sub-txt').text('Search Results');
        $('.voc-hdr-img').hide();
        $('#MobResetlink').hide();
        $('#MobSavesearchbtnDiv').show();
        
        $('#searchBack_mob').attr('onclick','MobSearchback()');
    }
    function MobSearchback() {
        $('#MobMainsearchbox').show();
        $('#MobSavesearchbtn').hide();
        $('#Mobsearchbtn').show(); 
        $('#Honmainimage').show(200);
        $('#mainblackstrip').show(200);
        $('#voc-ovoc-slider').show(200);
        $('.voc-hdr-new').hide(); 
        $('.voc-hdr-img').show();  
        $('#SearchedRecordspanel').hide();
        $('#search-accordion').show(200);
        $('#MobResetlink').show();
        $('#myvoc-details').hide();
        retrieveSavedSearch();
        $('#MobSaveSearchbtnUpdate').hide();
    }
    
    function MobResetsearch() {
    
        window.scrollTo(0,0);    // Scroll to top on clicking reset button/link
    
        $('#s-savedsearches.collapse').removeClass("in");
        $('#sSavedSearchesID').removeClass('panel-red');
        $('#s-daterange.collapse').removeClass("in");
        $('#sDaterangeID').removeClass('panel-red');
        $('#s-custname.collapse').removeClass("in");
        $('#sCustnameID').removeClass('panel-red');
        $('#s-account.collapse').removeClass("in");
        $('#sAccountID').removeClass('panel-red');
        $('#s-lead.collapse').removeClass("in");
        $('#sLeadID').removeClass('panel-red');
        $('#s-productline.collapse').removeClass("in");
        $('#sProductID').removeClass('panel-red'); 
        $('#s-VocTitle.collapse').removeClass("in");
        $('#sVOCTitleId').removeClass('panel-red');  
        $('#s-ReportNumber').removeClass("in");
        $('#sReportNumberID').removeClass('panel-red');
        $('#s-SensitivityLevel').removeClass("in");
        $('#sSensitivityLevelID').removeClass('panel-red');
        $('#s-CurrentStatus').removeClass("in");
        $('#sCurrentStatusID').removeClass('panel-red');
        $('#s-Purpose').removeClass("in");
        $('#sPurposeID').removeClass('panel-red');
        $('#ex1').slider({ 'data-slider-value' : '1'});
        $('#ex1Slider').attr('style','background-color: #056D05');
    }
    
    function Mob_displayrec(ssid,valName) {
        $(".voc-loader").hide();
    
        $('#search-accordion').hide(200);
        $('#MobMainsearchbox').hide(200);     
        $('#myvoc-details').hide(200); 
        $('#Honmainimage').hide();
        $('#mainblackstrip').hide(200);  
        displayrec(ssid);
        $('#MobSavesearchbtn').hide(200); 
        var SaveupdateBtnMobile = '<button id="MobsaveUpdateBtn" type="button" class="btn gray-btn" style="width:100%; margin-top: 10px;" onclick="MobUpdateSearchShow(\'' + ssid +'\');">Update Search</button>';
      //  $('#MobSaveSearchbtnUpdate').html(SaveupdateBtnMobile); 
        $('#MobSaveSearchbtnUpdate').show();
        $('#Mobsearchbtn').hide();  
        $('.voc-hdr-new').show(); 
        $('#Search-sub-txt').text(valName);
        $('.voc-hdr-img').hide();
        $('#MobResetlink').hide(); 
        $('#MobSavesearchbtnDiv').hide();    
    }
    
    function MobUpdateSearchShow(ssid) {
        $('#MobUpdateSearchPopup').modal({
            show:true,
            closeOnEscape: true
        });
        var MobUpdateOkbutton =  '<a class="btn btn-default gray-btn create-next-btn" onclick="Mob_SaveThisSearch(\'' + ssid +'\');" data-dismiss="modal" type="button">Ok</a>';
        $('#update_saveSearchNoSelect').html(MobUpdateOkbutton);
        
    }
    
    function Mob_SaveThisSearch(ssid) { 
        //alert('ssid'+ssid);
          var Searchtext = '';
          var FromDate = '';
          var ToDate = '';
          var CustomerNameTitle = '';
          var AccountName = '';
          var HonLead = '';
          var Searchtext = document.getElementById('mainSearch').value;
//          var FromDate = document.getElementById('sFromDate').value;
//          var ToDate = document.getElementById('sToDate').value;

/*            if ( browser == false ) {     // Mobile or iPad devices
                var FromDate = $('#sFromDate_mob').val();   
                var ToDate = $('#sToDate_mob').val();    
            } else {    // Desktop browsers
                var FromDate = $('#sFromDate').val();    
                var ToDate = $('#sToDate').val();    
            }
*/
            var userAgent = navigator.userAgent; 
            if (userAgent.match(/IEMobile\/10\.0/)) {

                var FromDate = $('#sFromDate').val();    // IE Mobile browsers
                var ToDate = $('#sToDate').val();    // IE Mobile browsers
                              //  alert("mob save IE " + FromDate  + " -- " + ToDate );
                
            } else if (userAgent.match(/(iPad|iPhone|iPod|Mobile|Android|BlackBerry)/g)) { 
                  //  alert($.datepicker.formatDate('mm/dd/yy', new Date($('#sFromDate_mob').val())));
                var FromDate = $('#sFromDate_mob').val();    // Mobile or iPad devices
                var ToDate = $('#sToDate_mob').val();    // Mobile or iPad devices
            // alert("mob save others " + FromDate  + " -- " + ToDate );
            }
            else { 
                var FromDate = $('#sFromDate').val();    // Desktop browsers
                var ToDate = $('#sToDate').val();    // Desktop browsers
            }             
           

          var CustomerNameTitle = document.getElementById('sNameTitle').value;
          var AccountName = document.getElementById('sAccount').value;
          var HonLead = document.getElementById('sLeads').value;
          var ProductFamily = getProductValues();
          var searchName = document.getElementById("MobUpdateSearchName").value;
          var retid = '';
         // alert('Mob_UpdatesearchName'+searchName );
          Visualforce.remoting.Manager.invokeAction(
              '{!$RemoteAction.OVOC_SearchPage_Controller.UpdateSearch}',
              ssid,searchName,Searchtext,FromDate,ToDate,CustomerNameTitle,AccountName,HonLead,retid,ProductFamily,
              function(result, event){
                  if(event.type == 'exception') {
                      $('#errorpanel').modal({
                          show:true,
                          closeOnEscape: true
                      }); 
                  } 
                  else {       
                      returnId = result;   
                      $('#MobUpdateSearchPopup').modal("hide");                       
                        $('#changesSaved').modal({
                            show:true,
                            closeOnEscape: true
                        });  

                  }             
              });        
      }
      
      
      // Search for slider
      
      function SliderSearchVoc() {
        var listsearchrecords = '';
        var SlidersearchRec = '';
        var hrefForRecord = '';
        var Searchtext = document.getElementById('sliderSearchtext').value;
        if(Searchtext == '') {
            $('#EnterSearchCriteria').modal({
              show:true,
              closeOnEscape: true
          });
        }
        else {
            Visualforce.remoting.Manager.invokeAction(
                '{!$RemoteAction.OVOC_SearchPage_Controller.SliderSearch_VOC}',
                Searchtext,
                function(result, event){
                    if(event.type == 'exception') {
                      //  alert(event.message);
                        $('#errorpanel').modal({
                            show:true,
                            closeOnEscape: true
                        }); 
                    } 
                    else {   
                        $('#recordsTab').show();
                       // console.log(result[0]);
                        if(result[0] != null){
                        listsearchrecords = result;
                            $.each(listsearchrecords , function(index, value){
                            hrefForRecord = '/apex/OVOC_Search?id=' + value.Id;
                        var cssClass = '';                        
                        if(value.Status__c == 'Submitted') {
                            if(value.RecordTypeId == '{!$Label.OVOC_RecType_Id}'){
                                cssClass ='myvoc-ovoc-tag';
                            }else{
                                cssClass ='myvoc-voc-tag';
                            }
                        }
                        else {
                            cssClass ='myvoc-draft-bgcolor';    
                        }
                        var expid = value.Id;
                        var thisdate = normalizeDateExtended(value.CreatedDate);
                        var month = thisdate[0];
                        var date = thisdate[1];
                        var year = thisdate[2];
                        SlidersearchRec += '<div class="row myvoc-records">'
                        + '<div class="col-xs-9 col-sm-12 col-md-12">'
                        + '<div class="col-xs-3 col-sm-1 col-md-1 myvoc-calender">'
                        + '<div class="myvoc-calender-month">' 
                        + month +'</div>'
                        + '<div class="myvoc-calender-day">'
                        + date + '</div>'
                        + '<div class="myvoc-calender-year">'
                        + year + '</div>' 
                        + '</div>' 
                        + '<div class="col-xs-9 col-sm-11 col-md-11">'
                        + '<div class="col-xs-12 col-sm-12 col-md-12 myvoc-record-head"><a onclick="openNewTabForDetails(\'' + value.Id + '\');" href="#" rel="external">' 
                        + value.VOC_Title__c +'</a></div>'
                        + '<div class="col-xs-12 col-sm-12 col-md-12 myvoc-rec-sub-hdr">'
                        + 'By '+ value.Created_By_Name__c + '</div>'
                        + '</div>'
                        + '</div>'
                        + '<div class="col-xs-12 col-sm-12 col-md-12 hidden-xs myvoc-rec-desc">'
                        + value.VOC_Hypothesis__c + '</div>'
                        + '<div class="col-xs-3 col-sm-12 col-md-12">' 
                        + '<div class="col-md-1 col-sm-1 col-xs-12 myvoc-submitted-tag '+ cssClass +'">'
                        + value.VOC__c + '</div>'
                        + '<div class="col-md-9 col-sm-9 hidden-xs"><a href="#" class="myvoc-export-link help-link" style="margin-left: 35px;">Export</a></div>' 
                        + '</div>'
                        + '</div>';
                        });
                        $('#SearchedRecordspanel').html(SlidersearchRec);
                        $(".right-menu").removeClass("menuDisplay");
                        $(".right-menu").addClass("menuHide");
                        $('#SearchedRecordspanel').show();
                        $('#search-accordion').hide(200);
                        $('#MobMainsearchbox').hide(200);     
                        $('#myvoc-details').hide(200); 
                        $('#Honmainimage').hide();
                        $('#mainblackstrip').hide(200);   
                        $('#Mobsearchbtn').hide();  
                        $('.voc-hdr-new').show(); 
                        $('#Search-sub-txt').text('Search Results');
                        $('.voc-hdr-img').hide();
                        $('#MobResetlink').hide();
                        $('#MobSavesearchbtnDiv').hide();
                         $('#MobSaveSearchbtnUpdate').hide();
                        $(".right-menu-overlay").show();        
                        $('#searchBack_mob').attr('onclick','MobSearchback()');
                        $(".right-menu-cls").click(function() {
                            $(".right-menu").addClass("menuDisplay");
                            $(".right-menu").removeClass("menuHide");
                        });
                    } 
                    else {
                        // Added for mobile starts
                        $('#search-accordion').show(200);
                        $('#MobMainsearchbox').show();
                        $('#MobSavesearchbtn').hide();
                        $('#Mobsearchbtn').show(); 
                        $('#Honmainimage').show(200);
                        $('#mainblackstrip').show(200);
                        $('.voc-hdr-new').hide(); 
                        $('.voc-hdr-img').show();
                        $('#MobResetlink').show(); 
                        // Added for mobile ends  
                    }
                }       
               });
           }
    }
      
      
    
////////////////////////////Mobile functionality ends////////////////////////////////////////////////////
</script>
</form>
</body>
</html>
</apex:page>