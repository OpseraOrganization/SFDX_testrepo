<!-- 
Apttus Contract Management
AgreementNew

@2009-2017 Apttus Inc. All rights reserved.

-->
<apex:page standardController="Apttus__APTS_Agreement__c" 
           extensions="Apttus.AgreementNewController" >
    
    <apex:variable var="isLightning" value="{!$User.UIThemeDisplayed == 'Theme4d' || $User.UIThemeDisplayed == 'Theme4t'}" 
                   rendered="{!$User.UIThemeDisplayed == 'Theme4d' || $User.UIThemeDisplayed == 'Theme4t'}">
        <apex:stylesheet value="{!URLFOR($Resource.Apttus__LightningResource, 'css/agreement-new-styling.css')}" />
        <apex:stylesheet value="{!URLFOR($Resource.Apttus__SLDS080, 'assets/styles/salesforce-lightning-design-system-vf.css')}" />
        <style>
            html body.sfdcBody {
            padding:0 0 0 0;
            }
            .bPageBlock, body #bodyCell .bResource .secondaryPalette, body .secondaryPalette.bPageBlock, body .individualPalette .secondaryPalette.bPageBlock, body .bodyDiv .genericTable, body .genericPageBlockTable, body .bodyDiv .bSubBlock, body .bComponentBlock .bPageBlock, body .bMyDashboard .bPageBlock, body.rlHoverFrame .bPageBlock, body.subjectSelectionPopup div.choicesBox, body.lookupTab .secondaryPalette.bPageBlock, body.popupTab .secondaryPalette.bPageBlock, body.UserTagStatsPage .secondaryPalette.bPageBlock {
            background-color: #f4f6f9;
            }
            .Custom18Tab .tertiaryPalette, .individualPalette .Custom18Block .tertiaryPalette, .layoutEdit .individualPalette .Custom18Block .tertiaryPalette{
            background-color: #f4f6f9;
            }
            .Custom18Tab .secondaryPalette, .individualPalette .Custom18Block .secondaryPalette{
            background-color: transperent;
            border-color: #f4f6f9;
            }
            .bPageBlock {
            border-top: 1px solid lightgray;
            }
            .fieldcontrol{
            
            padding: 1px 1rem 0 .75rem;
            line-height: 1.875rem;
            min-height: 1.875rem;
            }
            
        </style>
    </apex:variable>
    
    <script language="Javascript">
    
    function SubmitOnClick (objSubmitBtn) {
        
        var isFirefox = typeof InstallTrigger !== 'undefined';
        var isChrome = !!window.chrome && !!window.chrome.webstore;
        
        if(isFirefox == true){
            objSubmitBtn.className = 'btnDisabled';
        }
        else if(isChrome == true){
            objSubmitBtn.disabled = true;
            objSubmitBtn.className = 'btnDisabled';
            doSubmit();
        }
            else{
                objSubmitBtn.className = 'btnDisabled';
            }
        return true;
    }
    
    </script>
    
    <apex:form >
        <apex:outputPanel rendered="{!!($User.UIThemeDisplayed == 'Theme4d' || $User.UIThemeDisplayed == 'Theme4t')}">
            <apex:pageBlock rendered="{!NOT(isInitialized) && NOT(hasErrors)}">
                <apex:pageBlockButtons location="bottom">
                    <apex:commandButton value="{!$Label.apttus__continue}" onclick="return SubmitOnClick(this);" action="{!onLoad}" />
                    <apex:commandButton value="{!$Label.apttus__cancel}" action="{!doCancel}" immediate="true" />
                </apex:pageBlockButtons>
                
                <apex:pageBlockSection title="{!$Label.apttus__newagreement}" columns="2" collapsible="false">
                    <apex:outputField value="{!Apttus__APTS_Agreement__c.Name}"/>
                    <apex:outputField value="{!Apttus__APTS_Agreement__c.Apttus__Status_Category__c}"/>
                    
                    <apex:repeat value="{!$ObjectType.Apttus__APTS_Agreement__c.FieldSets.Apttus__AgreementNewFieldSet}" var="fieldMember">
                        <apex:inputField value="{!Apttus__APTS_Agreement__c[fieldMember]}" required="{!fieldMember.Required}" />   
                    </apex:repeat>
                </apex:pageBlockSection>
            </apex:pageBlock>
            
            <apex:pageBlock mode="edit" rendered="{!hasErrors}" >
                <apex:pageMessages />
                <apex:pageBlockButtons location="bottom" >
                    <apex:commandButton action="{!doCancel}" value="{!$Label.apttus__cancel}" immediate="true"/>
                </apex:pageBlockButtons>
            </apex:pageBlock>
            
            
        </apex:outputPanel>
        <apex:outputPanel rendered="{!$User.UIThemeDisplayed == 'Theme4d' || $User.UIThemeDisplayed == 'Theme4t'}">
            <div class="slds" width="95%">
                <div class="" role="banner" >
                    <div class="slds-wrap"> 
                        <apex:outputPanel id="messageLightening">
                            <apex:pageBlock mode="edit" rendered="{!hasErrors}" >
                                <apex:pageMessages />
                            </apex:pageBlock>
                        </apex:outputPanel> 
                    </div>
                    <div class="slds-wrap"> 
                        <div class="slds-page-header" role="banner">
                            <div> 
                                <div class="slds-wrap"></div>
                                <div  class="slds-wrap"> 
                                    <apex:pageBlock rendered="{!NOT(isInitialized) && NOT(hasErrors)}" >
                                        
                                        <apex:repeat value="{!$ObjectType.Apttus__APTS_Agreement__c.FieldSets.Apttus__AgreementNewFieldSet}" var="fieldMember">
                                            <div >
                                                <div class="slds-wrap fieldlabel">
                                                    <span class="data-aura-rendered-by">{!$ObjectType.APTS_Agreement__c.Fields[fieldMember].label} : </span>
                                                </div>
                                                <div class="slds-wrap fieldcontrol">
                                                    <apex:inputField value="{!Apttus__APTS_Agreement__c[fieldMember]}" required="{!fieldMember.Required}" label="" styleclass="fieldcontrol" /> 
                                                </div>
                                            </div>
                                            
                                        </apex:repeat>
                                        
                                    </apex:pageBlock>
                                </div>
                                
                                <div  class="slds-wrap"></div>
                            </div>
                        </div>
                        
                    </div>
                    <div class="slds-wrap"> 
                        <div class="slds-page-header" role="banner">
                            <div class="slds-grid"> 
                                <div class="slds-col"></div>
                                <div class="slds-grid slds-grid_align-end">
                                    <apex:commandButton styleclass="slds-button slds-button--neutral"  value="{!$Label.apttus__cancel}"  action="{!doCancel}" />
                                    &nbsp;
                                    <apex:commandButton styleclass="slds-button slds-button--brand"   value="{!$Label.apttus__continue}" onclick="return SubmitOnClick(this);" action="{!onLoad}"/>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </apex:outputPanel>
        <apex:actionFunction name="doSubmit" action="{!onLoad}" />
    </apex:form>
    
</apex:page>