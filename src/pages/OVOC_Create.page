<apex:page sidebar="false" showHeader="false" standardStylesheets="false" controller="OVOC_Create_Controller" title="OVOC - Create" cache="false" docType="html-5.0" applyHtmlTag="false" >
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:v="urn:schemas-microsoft-com:vml"> 

<head>
    <title>OVOC - Create</title>

    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, minimum-scale=1.0, user-scalable=0" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="format-detection" content="telephone=no" /> 

    
    <!--    Bootstrap CSS -->
    <link href="{!URLFOR($Resource.VOC_Phase2_Test,'css/bootstrap.min.css')}" rel="stylesheet" media="screen"/>
    <!--<link href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet" media="screen" />-->
    <!--    Bootstrap CSS - Switch    -->
    <link href="{!URLFOR($Resource.VOC_Phase2_Test,'css/switch/bootstrap-switch.min.css')}" rel="stylesheet" media="screen"/> 
    <!--    Bootstrap CSS - Slider    -->
    <link href="{!URLFOR($Resource.VOC_Phase2_Test,'css/slider/bootstrap-slider.css')}" rel="stylesheet" media="screen"/>
    
    <!--    User defined CSS files    --> 
    <link href="{!URLFOR($Resource.VOC_Phase2_Test,'css/common.css')}" rel="stylesheet" media="screen"/>
    <link href="{!URLFOR($Resource.VOC_Phase2_Test,'css/tablet.css')}" rel="stylesheet" media="screen"/>
    <link href="{!URLFOR($Resource.VOC_Phase2_Test,'css/smartphone.css')}" rel="stylesheet" media="screen"/>
    <link href="{!URLFOR($Resource.VOC_Phase2_Test,'css/jquery-ui.css')}" rel="stylesheet" media="screen"/>
    <!--<link rel="stylesheet" href="https://code.jquery.com/ui/1.10.4/themes/smoothness/jquery-ui.css" /> -->
    <!--   Images for iOS   
    <link href="{!URLFOR($Resource.VOC_Phase2_Test,'images/voc_144x144.png')}" rel="apple-touch-icon-precomposed" sizes="144x144" />
    <link href="{!URLFOR($Resource.VOC_Phase2_Test,'images/voc_114x114.png')}" rel="apple-touch-icon-precomposed" sizes="114x114" />
    <link href="{!URLFOR($Resource.VOC_Phase2_Test,'images/voc_72x72.png')}" rel="apple-touch-icon-precomposed" sizes="72x72" />
    <link href="{!URLFOR($Resource.VOC_Phase2_Test,'images/voc_57x57.png')}" rel="apple-touch-icon-precomposed" />   
    -->
    <!--[if IE 7 ]>    <html class="ie7"> <![endif]-->    
    <!--[if IE 8 ]>    <html class="ie8"> <![endif]-->
    <!--[if IE 9 ]>    <html class="ie9"> <![endif]-->
    
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]--> 

</head>

<style>

#ex1Slider.slider.slider-horizontal, #ex2Slider.slider.slider-horizontal {
    width: 60px !important;
    margin: 0 10px;
    background-image: none;
    background-color: #EE3124;
    border-radius: 20px;
    height: 34px;
    
}

#ex1Slider.slider.slider-horizontal .slider-track, #ex2Slider.slider.slider-horizontal .slider-track {
    background-color: transparent;
    background-image: none;
    box-shadow: none;
    width: 46%;
    left: 19%;
}

#ex1Slider .slider-selection, #ex2Slider .slider-selection  {
    background-color: transparent;
    background-image: none;
    box-shadow: none;
}

#ex1Slider.slider.slider-horizontal .slider-handle, #ex2Slider.slider.slider-horizontal .slider-handle {
    outline: none;
    opacity: 1;
    background-color: #FFFFFF;
    background-image: none;
//    border:1px solid #000000;
    width: 30px;
    height: 30px;
    margin-top: -10px;
}



@media only screen and (max-width: 767px) {
   
}


</style>


<script>

if (navigator.userAgent.match(/IEMobile\/10\.0/)) {
var msViewportStyle = document.createElement("style");
msViewportStyle.appendChild(
document.createTextNode(
"@-ms-viewport{width:auto!important}"
)
);
document.getElementsByTagName("head")[0].
appendChild(msViewportStyle);
}

if (navigator.userAgent.match(/IE\/8\.0/)) {
var msViewportStyle = document.createElement("style");
msViewportStyle.appendChild(
document.createTextNode(
"@-ms-viewport{width:auto!important}"
)
);
document.getElementsByTagName("head")[0].
appendChild(msViewportStyle);
}


/*if (navigator.appName.match('Microsoft Internet Explorer')) {
var msViewportStyle = document.createElement("style");
msViewportStyle.appendChild(
document.createTextNode(
"@-ms-viewport{width:auto!important}"
)
);
document.getElementsByTagName("head")[0].
appendChild(msViewportStyle);
}*/

</script> 


<body>

<!-- Remote Object Definitons-->
<apex:remoteObjects >
    <apex:remoteObjectModel name="Voice_of_Customer__c" jsShorthand="voc" fields="Id,Name"/>
    <!--<apex:remoteObjectModel name="Voice_of_Customer__Share" jsShorthand="vocShare" fields="Id"/>-->
    <!--<apex:remoteObjectModel name="VOC_Customer_Name__c" jsShorthand="customer" fields="Id,Name,VOC_Record__c"/>-->
</apex:remoteObjects>

<!-- Remote Object Definitons-->
<apex:form id="createForm">

<!--   OVOC -  Create Page    -->
<div id="ovoc-create-page" class="container">
    <!--    Honeywell Header Image    -->
    <div class="row voc-hdr-img">    
        <div class="col-xs-9 col-sm-10 col-md-10 col-lg-10 voc-hdr-imgcls"></div>
        <div class="col-xs-3 hidden-sm hidden-md hidden-lg right-menu-cls"></div>
        <div class="hidden-xs col-sm-2 col-md-2 col-lg-2">
            <a href="/secur/logout.jsp" class="ovoc-logout"> Logout
<!--                <div class="voc-logout-btn"></div>    -->
            </a>
        </div>
    </div>

    <!--    Main Tabs - START    -->
    <div class="row home-black-strip hidden-xs">
        <div class="btn-group btn-group-justified">
            <a id="voc-create" href="" rel="external" class="btn-group btn btn-default active">
                <img src="{!URLFOR($Resource.VOC_Phase2_Test,'images/top-menu-create.png')}" alt=""></img>Create
            </a>
            <a href="" id="voc-myvoc" rel="external" class="btn-group btn btn-default">
                <img src="{!URLFOR($Resource.VOC_Phase2_Test,'images/top-menu-myVoc.png')}" alt=""></img>My VOC
            </a>
            <a href="" id="voc-search" rel="external" class="btn-group btn btn-default">
                <img src="{!URLFOR($Resource.VOC_Phase2_Test,'images/top-menu-search.png')}" alt=""></img>Search
            </a>
            <a href="" id="voc-help" class="btn-group btn btn-default">
                <img src="{!URLFOR($Resource.VOC_Phase2_Test,'images/top-menu-help.png')}" alt=""></img>Help
            </a>
        </div>
    </div>
    
    <!--    VOC - Home Image    -->
    <div class="row hidden-xs home-image"></div>
    
    <!--    VOC - Home Image for IE8   -->
    <div class="row hidden-xs home-image-ie8" style="display: none;">
        <img id="ie8-hm" src="{!URLFOR($Resource.VOC_Phase2_Test,'images/homeimage_desk.png')}" width='auto' height='150px'></img>
    </div>
    
    
    <!--    Success Content    -->
    <div class="row home-container hidden" id="successContnet" >
        <div class="col-xs-12 col-sm-12 col-md-12 detail-header">
            Save Successful !
        </div> 
        <div class="col-xs-12 col-sm-12 col-md-12" id="sharedChatter">
            This <span name="voc-ovoc-name">VOC</span> has been shared with these Chatter Groups:
        </div>
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" style="margin-bottom: 40px;margin-top: 40px;">
            <div class="col-xs-12 col-sm-12 col-md-12 detail-desc-indetail">
                <table style="width:100%">
                    <tbody id="ProdFamilyChatterGroups">
                    </tbody>
                    <tbody id="ChatterGroups">
                    </tbody>
                </table>
            </div>
        </div>
        <div class="row home-container">
            <div class="col-xs-12 col-sm-4 col-md-4" style="padding: 0px 10px 0px 0px;margin-top: 10px;">
                <a class="btn gray-btn" href="OVOC_MyVOC" type="button" data-dismiss="modal" style="float:left; width: 100%;"> Home </a>
            </div>
            <div class="col-xs-12 col-sm-4 col-md-4" style="padding: 0px 10px 0px 0px; margin-top: 10px;">
                <a class="btn gray-btn" href="OVOC_Create" type="button" data-dismiss="modal" style="width: 100%;">Add Another O/VOC</a>
            </div>
        </div>
    </div>

    <!--    Create Content    -->

    <div class="row home-container" id="createContnet">
        <!-- Nav tabs -->
        <ul class="nav nav-tabs create-tabs">
          <li id="create-li-tab1" class="voc-loader-show"><a href="#create-tab1" data-toggle="tab">1</a></li>
          <li id="create-li-tab2" class="voc-loader-show"><a href="#create-tab2" data-toggle="tab">2</a></li>
          <li id="create-li-tab3" class="voc-loader-show"><a href="#create-tab3" data-toggle="tab">3</a></li>
          <li id="create-li-tab4" class="voc-loader-show"><a href="#create-tab4" data-toggle="tab">4</a></li>
          <li id="create-li-tab5" class="voc-loader-show"><a href="#create-tab5" data-toggle="tab">5</a></li>
          <li id="create-li-tab6" class="voc-loader-show"><a href="#create-tab6" data-toggle="tab">6</a></li>
          <li id="create-li-tab7" class="voc-loader-show"><a href="#create-tab7" data-toggle="tab">7</a></li>
          
        </ul>
        
        <!-- Tab panes -->
        <div class="tab-content create-tabcontent">
            
            <!--    Page 1 Content Start  -->
            <div class="tab-pane" id="create-tab1">
            
                <div class="row">
                    <div class="col-xs-12 col-sm-8 col-md-5 ">
                        <div class="col-xs-12 col-sm-8 col-md-8 hidden-xs">
                            <div class="col-xs-12 col-sm-4 col-md-6 create-lbls">Type of Project</div>
                            <div class="col-xs-12 col-sm-6 col-md-4">
                                <div class="col-xs-12 col-sm-12 col-md-12"><input type="radio" class="voc-radio" name="voc_radio_btn" value="VOC" id="create-voc1" checked="checked">VOC</input></div>
                                <div class="col-xs-12 col-sm-12 col-md-12"><input type="radio" class="voc-radio" name="voc_radio_btn" value="OVOC" id="create-ovoc1">OVOC</input></div>
                            </div>
                        </div>
                        
                   <!--     <div class="col-xs-6 hidden-sm hidden-md hidden-lg" id="voc-ovoc-switch">
                            VOC <input id="voc-ovoc-check" type="checkbox" name="my-checkbox" checked="checked"></input> OVOC
                        </div>    -->
                        
                        <div class="col-xs-6 hidden-sm hidden-md hidden-lg" id="voc-ovoc-slider">
                            VOC<input id="ex1" data-slider-id='ex1Slider' type="text" data-slider-min="1" data-slider-max="2" data-slider-step="1" data-slider-value="1">OVOC</input>
                        </div>
                        
                        <div class="col-xs-6 col-sm-4 col-md-4 create-helplinks">
                            <!--    Popover for desktops    -->
                            <a href="" id="create-tab1-pop" data-container="body" data-toggle="popover" data-placement="right" class="help-link hidden-xs">Which to choose?</a>
                            
                            
                            <!--    Small modal for mobile devices    -->
                            <a class="help-link hidden-sm hidden-md hidden-lg" data-toggle="modal" href="#whichToChoose" >Which to choose?</a>
                            
                            <div id="whichToChoose" class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
                                <div class="modal-dialog modal-sm">
                                    <div class="modal-content">
                                        <div class="modal-header popup-header"> VOC or OVOC </div>
                                        <div class="modal-body popup-body">
                                            The primary difference between VOC and Observational VOC (OVOC) is the level of Honeywell input and participation.
                                            <br/><br/>
                                            In <b>VOC</b>, Honeywell employees provide significant input, usually in the form of input questions or prompts.
                                            <br/><br/>
                                            For <b>OVOC</b>, an opportunity to observe customers is arranged and Honeywell employees observe quietly, without prompting, questioning or interrupting customer(s), to observe their natural, real life, real-time interaction with a product or service.
                                        </div>
                                        <div class="modal-footer popup-footer">
                                            <button type="button" class="btn btn-default gray-btn" data-dismiss="modal" style="width: 100%;">Ok</button>
                                        </div>                                  
                                    </div>
                                 </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="row visible-xs visible-sm hidden-md"> </div>
                
                <div class="row all-rows">
                    <div class="col-xs-12 col-sm-2 col-md-2 create-lbls"><span name="voc-ovoc-name">VOC</span> Title</div>
                    <div class="col-xs-12 col-sm-9 col-md-4 create-inp-rows"><input class="create-inp-flds" type="text" placeholder="Name your Project" id="voc_title" autofocus="autofocus" ></input></div>
                
                    <div class="col-xs-12 col-sm-2 col-md-2 create-lbls"><span name="voc-ovoc-name">VOC</span> Date</div>
                    <div class="col-xs-12 col-sm-9 col-md-4 create-inp-rows">
                        <input id="voc_date" readonly="readonly" class="create-inp-flds" type="text"  placeholder="Monday, January 20, 2014"></input>
                        <input id="voc_date_mob" class="create-inp-flds" value="" type="date" style="display: none;"></input>

                    </div>
                </div>
            
            
                <div class="row all-rows">

                    <div class="col-xs-12 col-sm-2 col-md-2 create-lbls">Honeywell Lead</div>
                    <div class="col-xs-12 col-sm-9 col-md-4 create-inp-rows">
                        <input class="create-inp-flds" type="text" placeholder="Key Honeywell contact for this Project" id="hon_lead" onkeypress="getDataForAutoComplete('hon_lead', 'HonleadId', 'hon_lead')" onclick="getDataForAutoComplete('hon_lead', 'HonleadId', 'hon_lead')" onblur="replaceName('hon_lead');"></input>
                        <input class="create-inp-flds" type="hidden" id="HonleadId"></input>
                    </div>

                    <div class="col-xs-8 col-sm-2 col-md-2 create-lbls">
                        <span name="voc-ovoc-name">VOC</span> Collection<br class="hidden-xs"/><span class="create-subtext"> (Optional)</span>
                        <!--    VOC Collection for Desktop    -->
                        <a href="" id="create-voccoll-pop" data-container="body" data-toggle="popover" data-placement="right" style="max-width: 290px;" class="help-link hidden-xs col-md-12 col-sm-12 visible-md visible-sm visible-lg">What is this?</a>
                    </div>
                    <div class="col-xs-4 visible-xs hidden-sm hidden-md hidden-lg create-helplinks" style="float: right;"> 
                        <a href="#vocCollection" data-toggle="modal" class="help-link">What is This?</a>
                    
                        <div id="vocCollection" class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                            <div class="modal-dialog modal-sm">
                                <div class="modal-content">
                                    <div class="modal-header popup-header">
                                        VOC Collection
                                    </div>
                                    <div class="modal-body popup-body">
                                        VOC Collections are sets available to group highly related VOC or OVOC research into a single collection.
                                        <br/><br/>
                                        For example, VOC on Flight Decks at multiple OEMs could be grouped into a "<b>Flight Deck</b>" collection with separately titled individual observations, such as "<b>Flight Decks OEM A</b>" and "<b>Flight Decks OEM B</b>", as individual VOC records within that collection.
                                        
                                    </div>
                                    <div class="modal-footer popup-footer">
                                        <button type="button" class="btn btn-default gray-btn" data-dismiss="modal" style="width: 100%;">Ok</button>
                                        
                                    </div>
                                  
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-xs-12 col-sm-9 col-md-4 create-inp-rows"> <input id="voc_collection" class="create-inp-flds" type="text" placeholder="Enter a new name or select an existing"></input></div>
                    
                </div>
                
                <!-- Page navigation buttons Start-->             
                <div id="create-btns1" class="row create-btns-cls">
                    <div class="col-xs-2 col-sm-2 col-md-2">
                        <a href="" rel="external" class="btn gray-btn create-btn-back voc-loader-show" onclick="" id="create-tab1-back">Back</a>
                    </div>
                    <div class="col-xs-6 col-xs-offset-1 col-sm-3 col-sm-offset-1 col-md-2 col-md-offset-0">
                        <a name="save_for_later" data-toggle="modal"  href="#saveForLater_popup" class="btn gray-btn create-btn-draft" >Save for later</a>
                    </div>
                    <div class="col-xs-2 col-xs-offset-1 col-sm-2 col-sm-offset-4 col-md-2 col-md-offset-6" style="text-align: right;">
                        <a class="btn red-btn create-next-btn voc-loader-show" data-toggle="tab" onclick="if(validateTab1VOCDetails('validate') == true){tickTheTabs();openTab2();}" id="">Next</a>
                    </div> 
                
          <!--          <div class="col-xs-2 col-sm-1 col-md-1">
                        <a href="OVOC_MyVOC" rel="external" class="btn gray-btn create-btn-back voc-loader-show" onclick="backTab1();" id="">Back</a>
                    </div>
                    <div class="col-xs-6 col-xs-offset-1 col-sm-2 col-sm-offset-0 col-md-2 col-md-offset-0">
                        <a name="save_for_later" data-toggle="modal"  href="#saveForLater_popup" class="btn gray-btn create-btn-draft" >Save for later</a>
                            
                    </div>
                    <div class="col-xs-2 col-xs-offset-1 col-sm-1 col-sm-offset-8 col-md-1 col-md-offset-8">
                        <a class="btn red-btn create-next-btn voc-loader-show" data-toggle="tab" onclick="if(validateTab1VOCDetails() == true){tickTheTabs();openTab2();}" id="">Next</a>
                    </div>     -->   
                </div>
                <!-- Page navigation buttons End-->
                
            </div>
         <!--    Page 1 Content End  -->
            
         <!-- Page 2  Content Start-->
            <div class="tab-pane" id="create-tab2-sub1">
                <div class="row all-rows" >
                    <div class="col-xs-12 col-sm-4 col-md-2 create-lbls">Customer Name<br class="hidden-xs"/><span class="create-subtext"> (Participant)</span></div>
                    <div class="col-xs-12 col-sm-8 col-md-4 create-inp-rows"><input class="create-inp-flds" type="text" placeholder="Who did you observe?" id="customer_name"></input></div>
                
                    <div class="col-xs-12 col-sm-4 col-md-2 create-lbls">Company Name</div>
                    <div class="col-xs-12 col-sm-8 col-md-4 create-inp-rows">
                        <input class="create-inp-flds" type="text" placeholder="Customer's Company" id="company_name" onkeypress="getDataForAutoComplete('company_name', 'company_name_Id', 'Account')" onclick="getDataForAutoComplete('company_name', 'company_name_Id', 'Account')"></input>
                        <input class="create-inp-flds" type="hidden" placeholder="Customer's Company" id="company_name_Id" ></input>
                    </div>
                </div>
                
                <div class="row all-rows" >
                    <div class="col-xs-12 col-sm-4 col-md-2 create-lbls">Customer’s Title</div>
                    <div class="col-xs-12 col-sm-8 col-md-4 create-inp-rows"><input class="create-inp-flds" type="text" placeholder="Customer’s job title or role" id="customer_title"></input></div>
                
                    <div class="col-xs-12 col-sm-4 col-md-2 create-lbls"><span class="hidden-sm hidden-md hidden-lg">Primary </span>Customer’s Email</div>    <!--    &#39;    for single quote    -->
                    <div class="col-xs-12 col-sm-8 col-md-4 create-inp-rows"><input class="create-inp-flds" type="text" placeholder="Customer@emailservice.com" id="customer_email"></input></div>
                </div>
                
                <div class="row" >
                    <div class="col-xs-12 col-sm-12 col-md-12">
                        <!--<a href="" id="create-tab2-pop" class="help-link hidden-xs hidden">Need to add more than one customer?</a>-->
                        <!--<a href="#addAnotherCustomerInfo" id="create-tab2-modal" data-toggle="modal" class="help-link hidden-sm hidden-md hidden-lg">Need to add more than one customer?</a>-->        
                            <div id="addAnotherCustomerInfo"  class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                                <div class="modal-dialog modal-sm">
                                    <div class="modal-content">
                                        <div class="modal-header popup-header">
                                            Adding More Customers
                                        </div>
                                        <div class="modal-body popup-body">
                                            <p>
                                                If you need to add more than one customer, you will be prompted after you submit the first one:
                                            </p>
                                            <p style="text-align: center;"><img src="{!URLFOR($Resource.VOC_Phase2_Test,'images/addCustomerInfo.png')}" /></p>
                                            <p>
                                                Click Yes and you will be allowed to enter additional customers as needed.
                                            </p>
                                        </div>
                                        <div class="modal-footer popup-footer">
                                            <button type="button" class="btn btn-default gray-btn" data-dismiss="modal" style="width: 100%;">Ok</button>
                                            
                                        </div>
                                      
                                    </div>
                                </div>
                            </div>
                    </div>
                </div>

                <!-- Page navigation buttons Start-->             
                <div id="create-btns2" class="row create-btns-cls">
                    <div class="col-xs-12 hidden-sm hidden-md hidden-lg">
                        <a name="customerCancel" class="btn gray-btn create-btn-add create-addCustomer-mob hidden" >Cancel</a>
                    </div>
                    <div class="col-xs-2 col-sm-2 col-md-2">
                        <a class="btn gray-btn create-btn-back" onclick="backTab2();" id="">Back</a>
                    </div>
                    
                    <div class="col-xs-6 col-xs-offset-1 col-sm-3 col-sm-offset-1 col-md-2 col-md-offset-0">
                        <a name="save_for_later" data-toggle="modal"  href="#saveForLater_popup" class="btn gray-btn create-btn-draft" >Save for later</a>
                    </div>
                    
                    <div class="hidden-xs col-sm-4 col-sm-offset-0 col-md-3 col-md-offset-3 create-btn-addcust" style="text-align:right;">
                        <a name="customerCancel" class="btn gray-btn create-btn-back hidden" style="margin-right: 25px;">Cancel</a>
                    </div>
                    
                    <div class="col-xs-2 col-xs-offset-1 col-sm-2 col-sm-offset-0 col-md-2 col-md-offset-0" style="text-align:right;">
                        <a class="btn red-btn create-next-btn" data-toggle="tab" onclick="if(validateCustomers('validate', null) == true){tickTheTabs();}" id="next_on_customer">Next</a>
                        
                        <a id="next_on_customer_mob" onclick="if(validateCustomers('validate','mob')== true){tickTheTabs();}" class="hidden btn red-btn create-next-btn hidden-sm hidden-md hidden-lg" data-toggle="modal" href="">Next</a>
                        <!-- Customer creation notification -->
                        <div id="custCreateNotification" class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
                            <div class="modal-dialog modal-sm">
                                <div class="modal-content">
                                    <div class="modal-header popup-header"> Notification Message</div>
                                    <div class="modal-body popup-body">
                                        Do you need to add more customers or participants to this record?
                                        <br/><br/> Please note that you can always add more at a later time.
                                    </div>
                                    <div class="modal-footer popup-footer">
                                        <div class="col-xs-6" style="padding-right:10px">
                                            <a type="button" id="add_no_customer_mob" class="btn btn-default white-btn create-next-btn" data-dismiss="modal">No</a>
                                        </div>
                                        
                                        <div class="col-xs-6" style="padding-left:10px">
                                            <a type="button" class="btn btn-default gray-btn create-next-btn" id="add_customer_mob" data-dismiss="modal">Yes</a>
                                        </div>
                                    </div>
                                  
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Page navigation buttons End-->
                
            </div>
        <!-- Page 2  Content End-->
        
        
        <!-- Page 2 subpage 1  Content Start-->
            <div class="tab-pane" id="create-tab2">
                

                <div class="row" >
                    
                    <div class="col-xs-12 col-sm-12 col-md-12">Summary</div>
                    <div class="col-xs-12 col-sm-12 col-md-12 create-subtext">Please review the customer names you have entered, clicking on the names to edit.  Press Next when your list is complete.</div>
                </div>
            
                <div class="create-customer-outline">
                    <div id="update_customers">
                    </div>
                    <!--<div class="row create-customer-row" style="border-top: none;">
                        <div class="col-xs-9 col-sm-6 col-md-6 create-customer-name">John Doe, CSO</div>
                        <div class="col-xs-3 col-sm-6 col-md-6 create-alighn-right">
                            <button type="button" class="btn create-btn-edit hidden-xs">Edit</button>
                            <button type="button" class="btn create-btn-delete"><span class="hidden-xs">Delete</span></button>
                        </div>

                    </div>
                     <div class="row create-customer-row">
                        <div class="col-xs-9 col-sm-6 col-md-6 create-customer-name">Jack Mantia, FSE</div>
                        <div class="col-xs-3 col-sm-6 col-md-6 create-alighn-right">
                            <button type="button" class="btn create-btn-edit hidden-xs">Edit</button>
                            <button type="button" class="btn create-btn-delete"><span class="hidden-xs">Delete</span></button>
                        </div>

                    </div>
                     <div class="row create-customer-row">
                        <div class="col-xs-9 col-sm-6 col-md-6 create-customer-name">Andy R., FSE</div>
                        <div class="col-xs-3 col-sm-6 col-md-6 create-alighn-right">
                            <button type="button" class="btn create-btn-edit hidden-xs">Edit</button>
                            <button type="button" class="btn create-btn-delete"><span class="hidden-xs">Delete</span></button>
                        </div>

                    </div>-->
                    <!-- Delete confirmation popup -->
                    <div id="delete_customer_popup" class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
                        <div class="modal-dialog modal-sm">
                            <div class="modal-content">
                                <div class="modal-header popup-header">
                                    Notification Message
                                </div>
                                <div class="modal-body popup-body">
                                    Are you sure you want to delete the selected record?
                                    
                                </div>
                                <div class="modal-footer popup-footer">
                                    <div class="col-xs-6" style="padding-right:10px">
                                        <a type="button" class="btn btn-default white-btn create-next-btn" data-dismiss="modal">No</a>
                                    </div>
                                                                
                                    <div class="col-xs-6" style="padding-left:10px" id="delete_yes">
                                        <!--<a type="button" class="btn btn-default gray-btn create-next-btn" data-dismiss="modal" onclick="deleteCustomer();">Yes</a>-->
                                    </div>
                                    
                                </div>
                                                    
                            </div>
                        </div>
                    </div>
                    <!-- Delete confirmation popup end -->
                </div>
                
                <!-- Page navigation buttons Start-->             
                <div id="create-btns2" class="row create-btns-cls" style="margin-top: 10px !important;">
                    <div class="col-xs-12 hidden-sm hidden-md hidden-lg">
                        <a name="add_another_cust" class="btn gray-btn create-btn-add create-addCustomer-mob" >Add Customer</a>
                    </div>
                    <div class="col-xs-2 col-sm-2 col-md-2">
                        <a class="btn gray-btn create-btn-back" onclick="backTab2SubTab1();" id="">Back</a>
                    </div>
                    <div class="col-xs-6 col-xs-offset-1 col-sm-3 col-sm-offset-1 col-md-2 col-md-offset-0">
                        <a name="save_for_later" data-toggle="modal"  href="#saveForLater_popup" class="btn gray-btn create-btn-draft" >Save for later</a>
                    </div>
                    <div class="hidden-xs col-sm-4 col-sm-offset-0 col-md-3 col-md-offset-3 create-btn-addcust">
                        <a name="add_another_cust" class="btn gray-btn create-btn-add" >Add Customer</a>
                    </div>
                    <div class="col-xs-2 col-xs-offset-1 col-sm-2 col-sm-offset-0 col-md-2 col-md-offset-0" style="text-align: right;">
                        <a class="btn red-btn create-next-btn" data-toggle="tab" onclick="tickTheTabs();openTab3();" id="">Next</a>
                    </div>
                </div>
                <!-- Page navigation buttons End-->
                
            </div>
        <!-- Page 2 subpage 1 Content End-->
        
        <!-- Page 3  Content Start-->
            <div class="tab-pane" id="create-tab3">
                <div class="row" >
                    <div class="col-xs-12 col-sm-12 col-md-12">Purpose of this <span name="voc-ovoc-name">VOC</span></div>
                    <div class="col-xs-12 col-sm-12 col-md-12 create-subtext">Select as many as applicable</div>
                </div>
                
                <div class="create-outline">
                    <div class="row" id="purposeOfVOC" >
                        
                        
                        <div class="col-xs-12 col-sm-12 col-md-12" style="border-bottom: none;">
                            <input type="checkbox" id="otherCheckbox">
                                <span id="otherLabel">Other</span><input id="otherTextbox" class="create-inp-flds create-other-inp" type="text" placeholder="Other"></input>
                            </input>
                        </div>
                    </div>
                </div>
                
                <!-- Page navigation buttons Start-->             
               <div id="create-btns3" class="row create-btns-cls">
                    <div class="col-xs-2 col-sm-2 col-md-2">
                        <a class="btn gray-btn create-btn-back" onclick="backTab3();" id="">Back</a>
                    </div>
                    <div class="col-xs-6 col-xs-offset-1 col-sm-3 col-sm-offset-1 col-md-2 col-md-offset-0">
                        <a name="save_for_later" data-toggle="modal"  href="#saveForLater_popup" class="btn gray-btn create-btn-draft" >Save for later</a>
                    </div>
                    <div class="col-xs-2 col-xs-offset-1 col-sm-2 col-sm-offset-4 col-md-2 col-md-offset-6" style="text-align: right;">
                        <a class="btn red-btn create-next-btn" data-toggle="tab" onclick="if(validateTab3Purpose('validate') == true){tickTheTabs();openTab4();}" id="">Next</a>
                    </div>
                </div>    
                
                <!-- Page navigation buttons End-->
                
            
            </div>
        <!-- Page 3  Content End-->
        
        <!-- Page 4  Content Start-->
            <div class="tab-pane" id="create-tab4">
                 <div class="row all-rows" >
                    <div class="col-xs-6 col-sm-6 col-md-4"> <span name="voc-ovoc-name">VOC</span> Hypothesis  </div>
                    <div class="col-xs-6 col-sm-6 col-md-4 create-help-align"> 
                    
                        <a href="" id="voc-hypo-examples" class="help-link hidden-xs">Examples</a> 
                        
                        <!--    Small modal for mobile devices    -->
                        <a class="help-link hidden-sm hidden-md hidden-lg" data-toggle="modal" id="voc-hyposmall-examples" href="#voc-hypoexamples" >Examples</a>
                        
                        <div id="voc-hypoexamples" class="modal fade bs-example-modal-sm hidden-sm hidden-md hidden-lg" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
                            <div class="modal-dialog modal-sm">
                                <div class="modal-content">
                                    <div class="modal-header popup-header" style="font-size: 14px;">VOC Hypothesis Examples</div>
                                    <div class="modal-body popup-body">
                                        <!-- Panel   -->
                                        <div class="pop-accordion panel-group">
                                                
                                          <!--  Understanding the Market  -->
                                          <div id="hypo-pop1s" class="panel panel-white popExDivs">
                                            <div class="pop-understanding panel-heading col-sm-12 col-md-12 search-createria">                        
                                                <div class="col-xs-10 search-criteria-head">Understanding the Market</div>
                                                <div class="col-xs-2 collapse-arrow">  </div>
                                            </div>
                                            <div class="p-understanding panel-collapse collapse" style="min-height:50px; height: auto !important;">
                                                <div class="panel-body" style="height: 100%;">
                                                    <b>Bad: </b>We believe market dynamics could be shifting favorably.<br/>
                                                    <b>Good: </b>We would like to confirm our assumption that Southwest Airlines plans to continue to shift flights to less trafficked airports and assess the implications of that strategy to potential future sales of eTaxi.
                                                </div>
                                            </div>
                                          </div>     <!--  Understanding the Market End  -->
                                          
                                          <!--  Sizing the Market  -->
                                          <div id="hypo-pop2s" class="panel panel-white popExDivs">
                                            <div class="pop-sizing panel-heading col-xs-12 search-createria">                        
                                                <div class="col-xs-10 search-criteria-head">Sizing the Market</div>
                                                <div class="col-xs-2 collapse-arrow">  </div>
                                            </div>
                                            <div class="p-sizing panel-collapse collapse" style="min-height:50px; height: auto !important;">
                                                <div class="panel-body" style="height: 100%;">
                                                    <b>Bad: </b>We believe the size of the APU aftermarket is shrinking.<br/>
                                                    <b>Good: </b>We plan to assess the impact of new aircraft acquisition on American`s fleet composition and our assumption that reduced reliance on older aircraft will reduce the total available market for aftermarket APUs.
                                                </div>
                                            </div>
                                          </div>    <!--  Sizing the Market  End -->
                                          
                                           <!--  Segmenting the Market  -->
                                          <div id="hypo-pop3s" class="panel panel-white popExDivs">
                                            <div class="pop-segmenting panel-heading col-sm-12 col-md-12 search-createria">                        
                                                <div class="col-xs-10 search-criteria-head">Segmenting the Market</div>
                                                <div class="col-xs-2 collapse-arrow">  </div>
                                            </div>
                                            <div class="p-segmenting panel-collapse collapse" style="min-height:50px; height: auto !important;">
                                                <div class="panel-body" style="height: 100%;">
                                                    <b>Bad: </b>Since this customer flies large aircraft, we want their opinions on FANS for transoceanic routes.<br/>
                                                    <b>Good: </b>We would like to investigate our assumed correlation between purchase of long range aircraft and frequent use of these aircraft on transoceanic routes.
                                                </div>
                                            </div>
                                          </div>    <!--  Segmenting the Market  End -->
                                          
                                           <!--  Understanding Segment Needs  -->
                                          <div id="hypo-pop4s" class="panel panel-white popExDivs">
                                            <div class="pop-needs panel-heading col-xs-12 search-createria">                        
                                                <div class="col-xs-10 search-criteria-head">Understanding Segment Needs</div>
                                                <div class="col-xs-2 collapse-arrow">  </div>
                                            </div>
                                            <div class="p-needs panel-collapse collapse" style="min-height:50px; height: auto !important;">
                                                <div class="panel-body" style="height: 100%;">
                                                    <b>Bad: </b>Since this customer flies large aircraft, we want their opinions on a few prestige products that will improve their standing with their ownership and management.<br/>
                                                    <b>Good: </b>We are interested in the perceived value of prestige and social standing within the "Latest &amp; Greatest" segment and if value calculators typically.h avionics upgrades are beneficial for this group.
                                                </div>
                                            </div>
                                          </div>    <!--  Understanding Segment Needs  End -->
                                          
                                           <!--  Quantified Customer Needs  -->
                                          <div id="hypo-pop5s" class="panel panel-white popExDivs">
                                            <div class="pop-quantified panel-heading col-xs-12 search-createria">                        
                                                <div class="col-xs-10 search-criteria-head">Quantified Customer Needs</div>
                                                <div class="col-xs-2 collapse-arrow">  </div>
                                            </div>
                                            <div class="p-quantified panel-collapse collapse" style="min-height:50px; height: auto !important;">
                                                <div class="panel-body" style="height: 100%;">
                                                    <b>Bad: </b>We want to learn how much fuel this customer expects to save by buying and installing our new APU.<br/>
                                                    <b>Good: </b>We would like to determine if the customer uses fuel savings estimates as a purchase criterion for new APUs, and if so, what metrics new hardware upgrades must meet for them to purchase the upgrade.
                                                </div>
                                            </div>
                                          </div>    <!--  Quantified Customer Needs  End -->
                                          
                                           <!--  Concept Testing  -->
                                          <div id="hypo-pop6s" class="panel panel-white popExDivs">
                                            <div class="pop-concept panel-heading col-xs-12 col-md-12 search-createria">                        
                                                <div class="col-xs-10 col-sm-8 col-md-8 col-lg-8 search-criteria-head">Concept Testing</div>
                                                <div class="col-xs-2 col-sm-4 col-md-4 col-lg-4 collapse-arrow">  </div>
                                            </div>
                                            <div class="p-concept panel-collapse collapse" style="min-height:50px; height: auto !important;">
                                                <div class="panel-body" style="height: 100%;">
                                                    <b>Bad: </b>We want to ensure the customer likes the smaller concept.<br/>
                                                    <b>Good: </b>We want to verify that the customer prefers the smaller concept to the medium and large concepts, and if so, to test the customer`s willingness to pay the additional 10% price increase required for development of the product.
                                                </div>
                                            </div>
                                          </div>    <!--  Concept Testing  End    -->
                                          
                                
                                
                                        </div>    <!-- Panel End  -->
                                    </div>
                                    <div class="modal-footer popup-footer">
                                        <button type="button" class="btn btn-default gray-btn modal-close-btn" data-dismiss="modal" style="width: 100%;">Ok</button>
                                    </div>                                  
                                </div>
                             </div>
                        </div>    <!--    Hypo modal END    -->
                        
                    </div>
                </div>
                <div class="row" >
                    <div class="col-xs-12 col-sm-12 col-md-8">
                        <textarea id="voc_hypothesis"  class="create-textarea" placeholder='What is the initial hypothesis you are testing? Note that OVOC hypotheses may be more opaque than VOC hypotheses, and that additional hypotheses may emerge during the actual VOC session. If multiple hypotheses were tested, you are encouraged to add them.'></textarea>
                    </div>
                    
                </div>
                
                <div class="row all-rows" >
                    <div class="col-xs-6 col-sm-6 col-md-4"> Key Takeaways  </div>
                    <div class="col-xs-6 col-sm-6 col-md-4 create-help-align">  
                        
                        <a href="#" id="voc-keytake-examples" class="help-link hidden-xs">Examples</a>
                    
                        <!--    Small modal for mobile devices    -->
                        <a id="voc-keytakesmall-examples" class="help-link hidden-sm hidden-md hidden-lg" data-toggle="modal" href="#voc-keytakeexamples" >Examples</a>
                        
                        <div id="voc-keytakeexamples" class="modal fade bs-example-modal-sm hidden-sm hidden-md hidden-lg" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
                            
                            <div class="modal-dialog modal-sm">
                                <div class="modal-content">
                                    <div class="modal-header popup-header" style="font-size: 14px;">VOC Key Takeaways Examples</div>
                                    <div class="modal-body popup-body">
                                        <!-- Panel   -->
                                        <div class="pop-accordion panel-group">
                                                
                                          <!--  Understanding the Market  -->
                                          <div id="key-pop1s" class="panel panel-white popExDivs">
                                            <div class="pop-understanding panel-heading col-sm-12 col-md-12 search-createria">                        
                                                <div class="col-xs-10 search-criteria-head">Understanding the Market</div>
                                                <div class="col-xs-2 collapse-arrow">  </div>
                                            </div>
                                            <div class="p-understanding panel-collapse collapse" style="min-height:50px; height: auto !important;">
                                                <div class="panel-body" style="height: 100%;">
                                                    <b>Bad: </b>Market dynamics look positive with 75% growth a realistic expectation.<br/>
                                                    <b>Good: </b>Southwest Airlines, an excellent example of the regional mid-price carrier segment, is shifting flights to less trafficked airports through at least 2020, such as through increased use of Dallas Love field in the DFW metroplex.  Assuming this successfully mitigates taxi time as Southwest hopes, this segment will continue to be unattractive for eTaxi for at least the next five years.
                                                </div>
                                            </div>
                                          </div>     <!--  Understanding the Market End  -->
                                          
                                          <!--  Sizing the Market  -->
                                          <div id="key-pop2s" class="panel panel-white popExDivs ">
                                            <div class="pop-sizing panel-heading col-xs-12 search-createria">                        
                                                <div class="col-xs-10 search-criteria-head">Sizing the Market</div>
                                                <div class="col-xs-2 collapse-arrow">  </div>
                                            </div>
                                            <div class="p-sizing panel-collapse collapse" style="min-height:50px; height: auto !important;">
                                                <div class="panel-body" style="height: 100%;">
                                                    <b>Bad: </b>We anticipate a shrinking market for the 331 series APU.<br/>
                                                    <b>Good: </b>American Airlines provided its forward-looking fleet composition data to us during our interviews, which showed that the -400 series aircraft will be reduced from its current 90 aircraft to only 30 by 2018.  This is a 66% reduction in available market size for the 331 series APU at AAL.
                                                </div>
                                            </div>
                                          </div>    <!--  Sizing the Market  End -->
                                          
                                           <!--  Segmenting the Market  -->
                                          <div id="key-pop3s" class="panel panel-white popExDivs">
                                            <div class="pop-segmenting panel-heading col-sm-12 col-md-12 search-createria">                        
                                                <div class="col-xs-10 search-criteria-head">Segmenting the Market</div>
                                                <div class="col-xs-2 collapse-arrow">  </div>
                                            </div>
                                            <div class="p-segmenting panel-collapse collapse" style="min-height:50px; height: auto !important;">
                                                <div class="panel-body" style="height: 100%;">
                                                    <b>Bad: </b>This customer flies large aircraft on transoceanic routes and is aware of FANS.<br/>
                                                    <b>Good: </b>Although all aircraft in Meridian`s fleet are transoceanic-capable, only half of the fleet (3 aircraft) is actually used on transoceanic routes.  We need to either reconsider our assumption that large aircraft fleet customers are interested in FANS upgrades for their entire fleets or refine our segmentation to model customers dedicating specific aircraft to specific routes.
                                                </div>
                                            </div>
                                          </div>    <!--  Segmenting the Market  End -->
                                          
                                           <!--  Understanding Segment Needs  -->
                                          <div id="key-pop4s" class="panel panel-white popExDivs">
                                            <div class="pop-needs panel-heading col-xs-12 search-createria">                        
                                                <div class="col-xs-10 search-criteria-head">Understanding Segment Needs</div>
                                                <div class="col-xs-2 collapse-arrow">  </div>
                                            </div>
                                            <div class="p-needs panel-collapse collapse" style="min-height:50px; height: auto !important;">
                                                <div class="panel-body" style="height: 100%;">
                                                    <b>Bad: </b>This customer flies large aircraft and seems more concerned about the prestige of our products than the pricing.<br/>
                                                    <b>Good: </b>Although Western behaves like other members of the "Latest and Greatest" segment by considering product prestige, they also consider pricing carefully and rely heavily on our avionics value calculators to prioritize upcoming upgrades across their fleet.
                                                </div>
                                            </div>
                                          </div>    <!--  Understanding Segment Needs  End -->
                                          
                                           <!--  Quantified Customer Needs  -->
                                          <div id="key-pop5s" class="panel panel-white popExDivs">
                                            <div class="pop-quantified panel-heading col-xs-12 search-createria">                        
                                                <div class="col-xs-10 search-criteria-head">Quantified Customer Needs</div>
                                                <div class="col-xs-2 collapse-arrow">  </div>
                                            </div>
                                            <div class="p-quantified panel-collapse collapse" style="min-height:50px; height: auto !important;">
                                                <div class="panel-body" style="height: 100%;">
                                                    <b>Bad: </b>Customer believes APU replacement can be a fuel-saver.<br/>
                                                    <b>Good: </b>Customer treats upgrade opportunities providing weight savings identically regardless of the component and shared the value calculator they use for evaluating upgrades.  With fuel at $5/gallon and 300 annual flight hours (their working assumptions), a one pound weight savings equates to approximately $6100 capital expense.  Their value calculator is attached to this VOC record.
                                                </div>
                                            </div>
                                          </div>    <!--  Quantified Customer Needs  End -->
                                          
                                           <!--  Concept Testing  -->
                                          <div id="key-pop6s" class="panel panel-white popExDivs">
                                            <div class="pop-concept panel-heading col-xs-12 col-md-12 search-createria">                        
                                                <div class="col-xs-10 col-sm-8 col-md-8 col-lg-8 search-criteria-head">Concept Testing</div>
                                                <div class="col-xs-2 col-sm-4 col-md-4 col-lg-4 collapse-arrow">  </div>
                                            </div>
                                            <div class="p-concept panel-collapse collapse" style="min-height:50px; height: auto !important;">
                                                <div class="panel-body" style="height: 100%;">
                                                    <b>Bad: </b>The customer responded favorably to the smaller concept.<br/>
                                                    <b>Good: </b>The customer responded favorably to the small concept and seemed uninterested in the larger concept even before potential price points were discussed.  The proposed 10% higher price point for the smaller concept was not an issue for this customer, and even higher pricing may be possible since the smaller concept frees rack space needed for other hardware.  Suggest additional research emphasizing additional rack space and testing price points higher than the 10% worked with this customer
                                                </div>
                                            </div>
                                          </div>    <!--  Concept Testing  End    -->
                                          
                                
                                
                                        </div>    <!-- Panel End  -->
                                    </div>
                                    <div class="modal-footer popup-footer">
                                        <button type="button" class="btn btn-default gray-btn modal-close-btn" data-dismiss="modal" style="width: 100%;">Ok</button>
                                    </div>                                  
                                </div>
                            </div>
                        </div>
                    
                    </div>
                </div>
                
                <div class="row" >
                    <div class="col-xs-12 col-sm-12 col-md-8">
                        <textarea id="key_takeaways" class="create-textarea" placeholder='What did you observe and why is it important?  Record the "whys" and "so-whats" from your research. If multiple topical areas were discussed, please enter key takeaways for all topics.'></textarea>
                    </div>
                    
                </div>
                <div class="row hidden hidden-md hidden-lg" >
                    <div class="col-xs-12 col-sm-12">
                        <div class="create-outline create-attachmnet mob_attach">
                      <!--      <input id="mob-attachment4" type="file"  />    -->
                            <img src="{!URLFOR($Resource.VOC_Phase2_Test,'images/attachment.png')}" />
                            &nbsp;&nbsp;<a href="#" class="help-link">Attach Notes, Photos or Videos</a>
                        </div>    
                    </div>
                    
                </div>
                
                <!-- Page navigation buttons Start-->             
                <div id="create-btns4" class="row create-btns-cls">                    
              
                    <div class="col-xs-2 col-sm-2 col-md-2">
                        <a class="btn gray-btn create-btn-back" onclick="backTab4();" id="">Back</a>
                    </div>
                    <div class="col-xs-6 col-xs-offset-1 col-sm-3 col-sm-offset-1 col-md-2 col-md-offset-0">
                        <a name="save_for_later" data-toggle="modal"  href="#saveForLater_popup" class="btn gray-btn create-btn-draft" >Save for later</a>
                    </div>
                    <div class="col-xs-2 col-xs-offset-1 col-sm-2 col-sm-offset-4 col-md-2 col-md-offset-6" style="text-align: right;">
                        <a class="btn red-btn create-next-btn" data-toggle="tab" onclick="if(validateTab4Hyp('validate') == true){tickTheTabs();openTab5();}" id="">Next</a>
                    </div>
                </div>
                <!-- Page navigation buttons End-->
                
                
            </div>
        <!-- Page 4  Content End-->
        
        <!-- Page 5  Content Start-->
            <div class="tab-pane" id="create-tab5">
                 <div class="row all-rows" >
                    <div class="col-xs-6 col-sm-4 col-md-4">
                        Financial Implications
                    </div>
                    <div class="col-xs-6 col-sm-4 col-md-4 create-help-align">
                    
                        <a href="#" id="voc-financial-examples" class="help-link hidden-xs">Examples</a>
                        
                        <!--    Small modal for mobile devices    -->
                        <a id="voc-financesmall-examples" class="help-link hidden-sm hidden-md hidden-lg" data-toggle="modal" href="#voc-financialexamples" >Examples</a>
                        
                        <div id="voc-financialexamples" class="modal fade bs-example-modal-sm hidden-sm hidden-md hidden-lg" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
                            <div class="modal-dialog modal-sm">
                                <div class="modal-content">
                                    <div class="modal-header popup-header" style="font-size: 14px;">VOC Financial Implications Examples</div>
                                    <div class="modal-body popup-body">
                                        <!-- Panel   -->
                                        <div class="pop-accordion panel-group">
                                                
                                          <!--  Understanding the Market  -->
                                          <div id="fin-pop1s" class="panel panel-white popExDivs">
                                            <div class="pop-understanding panel-heading col-sm-12 col-md-12 search-createria">                        
                                                <div class="col-xs-10 search-criteria-head">Understanding the Market</div>
                                                <div class="col-xs-2 collapse-arrow">  </div>
                                            </div>
                                            <div class="p-understanding panel-collapse collapse" style="min-height:50px; height: auto !important;">
                                                <div class="panel-body" style="height: 100%;">
                                                    <b>Bad: </b>This interview confirms our belief that market dynamics are shifting.<br/>
                                                    <b>Good: </b>Customer interview revealed the airline`s strategy to increased use of less trafficked airports, particularly in metro DFW, where they will redirect 40% of their current DFW flights to Dallas Love Field over the next 3 - 5 years.  This could have positive implications for sale of avionics products, especially navigational hardware, but a potentially negative impact to eTaxi, with further research on that topic required.
                                                </div>
                                            </div>
                                          </div>     <!--  Understanding the Market End  -->
                                          
                                          <!--  Sizing the Market  -->
                                          <div id="fin-pop2s" class="panel panel-white popExDivs">
                                            <div class="pop-sizing panel-heading col-xs-12 search-createria">                        
                                                <div class="col-xs-10 search-criteria-head">Sizing the Market</div>
                                                <div class="col-xs-2 collapse-arrow">  </div>
                                            </div>
                                            <div class="p-sizing panel-collapse collapse" style="min-height:50px; height: auto !important;">
                                                <div class="panel-body" style="height: 100%;">
                                                    <b>Bad: </b>The customer thinks highly of our APU offerings and told us to expect continued robust demand for years to come.<br/>
                                                    <b>Good: </b>Customer interview revealed their intent to continue to purchase new aircraft to drive their fleet composition from its current 18% twin engine fuel efficient to 42% or more by 2018 through replacement of Boeing 747-400s with Boeing 757s.  Allowing for expected route addition and commensurate fleet growth over the next four years, this equates to retirement of approximately 72 747s and purchase of 86 757s.
                                                </div>
                                            </div>
                                          </div>    <!--  Sizing the Market  End -->
                                          
                                           <!--  Segmenting the Market  -->
                                          <div id="fin-pop3s" class="panel panel-white popExDivs">
                                            <div class="pop-segmenting panel-heading col-sm-12 col-md-12 search-createria">                        
                                                <div class="col-xs-10 search-criteria-head">Segmenting the Market</div>
                                                <div class="col-xs-2 collapse-arrow">  </div>
                                            </div>
                                            <div class="p-segmenting panel-collapse collapse" style="min-height:50px; height: auto !important;">
                                                <div class="panel-body" style="height: 100%;">
                                                    <b>Bad: </b>Since this customer has three business aircraft in their fleet, all with ranges of 4000 miles or more, it can be assumed that they are flying transoceanic routes regularly.<br/>
                                                    <b>Good: </b>Focus Groups showed that 20% of the interviewees did value quantifiable benefits but did not share the prestige needs of the "Latest &amp; Greatest" segment.  This is potentially a new segment of Pragmatists, which will be added to the APUs business aircraft segmentation model.
                                                </div>
                                            </div>
                                          </div>    <!--  Segmenting the Market  End -->
                                          
                                           <!--  Understanding Segment Needs  -->
                                          <div id="fin-pop4s" class="panel panel-white popExDivs">
                                            <div class="pop-needs panel-heading col-xs-12 search-createria">                        
                                                <div class="col-xs-10 search-criteria-head">Understanding Segment Needs</div>
                                                <div class="col-xs-2 collapse-arrow">  </div>
                                            </div>
                                            <div class="p-needs panel-collapse collapse" style="min-height:50px; height: auto !important;">
                                                <div class="panel-body" style="height: 100%;">
                                                    <b>Bad: </b>These customers seem to want products that will improve their standing with their ownership and management.<br/>
                                                    <b>Good: </b>Customers repeatedly emphasized their need for dispatch reliability and time to destination without a need for prestige, placing them in the Pragmatists segment.  We need to ensure that quantifiable tools to allow these customers to translate specific financial benefits to their route and fleet usage patterns are included in our marketing materials for this segment.
                                                </div>
                                            </div>
                                          </div>    <!--  Understanding Segment Needs  End -->
                                          
                                           <!--  Quantified Customer Needs  -->
                                          <div id="fin-pop5s" class="panel panel-white popExDivs">
                                            <div class="pop-quantified panel-heading col-xs-12 search-createria">                        
                                                <div class="col-xs-10 search-criteria-head">Quantified Customer Needs</div>
                                                <div class="col-xs-2 collapse-arrow">  </div>
                                            </div>
                                            <div class="p-quantified panel-collapse collapse" style="min-height:50px; height: auto !important;">
                                                <div class="panel-body" style="height: 100%;">
                                                    <b>Bad: </b>Customer indicated that the estimated fuel savings would be sufficient to upgrade most of their fleet in the years to come.<br/>
                                                    <b>Good: </b>The customer indicated a fuel burn cost of $25,000 per flight hour and estimates that each pound saved with lighter equipage reduces this by 0.25% with an assumed $5 per gallon fuel cost.  Since they use their aircraft for approximately 350 flight hours per year, the proposed 2 lbs. weight reduction for the new APU equates to an annual fuel savings of $43,750, or $437K over its estimated 10 year life for this customer.
                                                </div>
                                            </div>
                                          </div>    <!--  Quantified Customer Needs  End -->
                                          
                                           <!--  Concept Testing  -->
                                          <div id="fin-pop6s" class="panel panel-white popExDivs">
                                            <div class="pop-concept panel-heading col-xs-12 col-md-12 search-createria">                        
                                                <div class="col-xs-10 col-sm-8 col-md-8 col-lg-8 search-criteria-head">Concept Testing</div>
                                                <div class="col-xs-2 col-sm-4 col-md-4 col-lg-4 collapse-arrow">  </div>
                                            </div>
                                            <div class="p-concept panel-collapse collapse" style="min-height:50px; height: auto !important;">
                                                <div class="panel-body" style="height: 100%;">
                                                    <b>Bad: </b>The customer clearly preferred the smaller concept to the larger proposal.<br/>
                                                    <b>Good: </b>Although 78% of the customers interviewed preferred the smaller concept, only 10% of these customers maintained that preference when coupled to the $90K price increase required for its development.  Therefore, the concept appeals to less than 10% of the addressable market and is not likely to generate returns sufficient to justify its continued development.
                                                </div>
                                            </div>
                                          </div>    <!--  Concept Testing  End    -->
                                          
                                        </div>    <!-- Panel End  -->
                                    </div>
                                    <div class="modal-footer popup-footer">
                                        <button type="button" class="btn btn-default gray-btn modal-close-btn" data-dismiss="modal" style="width: 100%;">Ok</button>
                                    </div>                                  
                                </div>
                            </div>
                        </div>
                        
                    </div>
                </div>
                <div class="row all-rows" >
                    <div class="col-xs-12 col-sm-12 col-md-8">
                        <textarea id="financial_implications" class="create-textarea" placeholder="Financial implications for the CUSTOMER. How does the CUSTOMER make money, or how are they financially impacted?  What did you learn about the CUSTOMER'S financial situation?"></textarea>
                    </div>
                    
                </div>
                
                <div class="row" >
                    <div class="col-xs-6 col-sm-12 col-md-4">
                        Key Action Items
                    </div>
                    <div class="col-xs-6 col-sm-12 col-md-4 create-help-align">
                    
                        <a href="#" id="voc-keyaction-examples" class="help-link hidden-xs">Examples</a>
                        
                        <!--    Small modal for mobile devices    -->
                        <a id="voc-keyactionsmall-examples" class="help-link hidden-sm hidden-md hidden-lg" data-toggle="modal" href="#voc-keyactionexamples" >Examples</a>
                        
                        <div id="voc-keyactionexamples" class="modal fade bs-example-modal-sm hidden-sm hidden-md hidden-lg" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
                            <div class="modal-dialog modal-sm">
                                <div class="modal-content">
                                    <div class="modal-header popup-header" style="font-size: 14px;">VOC Key Action Items Examples</div>
                                    <div class="modal-body popup-body">
                                        <!-- Panel   -->
                                        <div class="pop-accordion panel-group">
                                                
                                          <!--  Understanding the Market  -->
                                          <div id="act-pop1s" class="panel panel-white popExDivs">
                                            <div class="pop-understanding panel-heading col-sm-12 col-md-12 search-createria">                        
                                                <div class="col-xs-10 search-criteria-head">Understanding the Market</div>
                                                <div class="col-xs-2 collapse-arrow">  </div>
                                            </div>
                                            <div class="p-understanding panel-collapse collapse" style="min-height:50px; height: auto !important;">
                                                <div class="panel-body" style="height: 100%;">
                                                    <b>Bad: </b>We believe market dynamics could be shifting favorably.<br/>
                                                    <b>Good: </b>We would like to confirm our assumption that Southwest Airlines plans to continue to shift flights to less trafficked airports and assess the implications of that strategy to potential future sales of eTaxi.
                                                </div>
                                            </div>
                                          </div>     <!--  Understanding the Market End  -->
                                          
                                          <!--  Sizing the Market  -->
                                          <div id="act-pop2s" class="panel panel-white popExDivs">
                                            <div class="pop-sizing panel-heading col-xs-12 search-createria">                        
                                                <div class="col-xs-10 search-criteria-head">Sizing the Market</div>
                                                <div class="col-xs-2 collapse-arrow">  </div>
                                            </div>
                                            <div class="p-sizing panel-collapse collapse" style="min-height:50px; height: auto !important;">
                                                <div class="panel-body" style="height: 100%;">
                                                    <b>Bad: </b>We anticipate a shrinking market for the 331 series APU.<br/>
                                                    <b>Good: </b>American Airlines provided its forward-looking fleet composition data to us during our interviews, which showed that the -400 series aircraft will be reduced from its current 90 aircraft to only 30 by 2018.  This is a 66% reduction in available market size for the 331 series APU at AAL.
                                                </div>
                                            </div>
                                          </div>    <!--  Sizing the Market  End -->
                                          
                                           <!--  Segmenting the Market  -->
                                          <div id="act-pop3s" class="panel panel-white popExDivs">
                                            <div class="pop-segmenting panel-heading col-sm-12 col-md-12 search-createria">                        
                                                <div class="col-xs-10 search-criteria-head">Segmenting the Market</div>
                                                <div class="col-xs-2 collapse-arrow">  </div>
                                            </div>
                                            <div class="p-segmenting panel-collapse collapse" style="min-height:50px; height: auto !important;">
                                                <div class="panel-body" style="height: 100%;">
                                                    <b>Bad: </b>Since this customer has three business aircraft in their fleet, all with ranges of 4000 miles or more, it can be assumed that they are flying transoceanic routes regularly.<br/>
                                                    <b>Good: </b>Focus Groups showed that 20% of the interviewees did value quantifiable benefits but did not share the prestige needs of the "Latest &amp; Greatest" segment.  This is potentially a new segment of Pragmatists, which will be added to the APUs business aircraft segmentation model.
                                                </div>
                                            </div>
                                          </div>    <!--  Segmenting the Market  End -->
                                          
                                           <!--  Understanding Segment Needs  -->
                                          <div id="act-pop4s" class="panel panel-white popExDivs">
                                            <div class="pop-needs panel-heading col-xs-12 search-createria">                        
                                                <div class="col-xs-10 search-criteria-head">Understanding Segment Needs</div>
                                                <div class="col-xs-2 collapse-arrow">  </div>
                                            </div>
                                            <div class="p-needs panel-collapse collapse" style="min-height:50px; height: auto !important;">
                                                <div class="panel-body" style="height: 100%;">
                                                    <b>Bad: </b>This customer flies large aircraft and seems more concerned about the prestige of our products than the pricing.<br/>
                                                    <b>Good: </b>Although Western behaves like other members of the "Latest and Greatest" segment by considering product prestige, they also consider pricing carefully and rely heavily on our avionics value calculators to prioritize upcoming upgrades across their fleet.
                                                </div>
                                            </div>
                                          </div>    <!--  Understanding Segment Needs  End -->
                                          
                                           <!--  Quantified Customer Needs  -->
                                          <div id="act-pop5s" class="panel panel-white popExDivs">
                                            <div class="pop-quantified panel-heading col-xs-12 search-createria">                        
                                                <div class="col-xs-10 search-criteria-head">Quantified Customer Needs</div>
                                                <div class="col-xs-2 collapse-arrow">  </div>
                                            </div>
                                            <div class="p-quantified panel-collapse collapse" style="min-height:50px; height: auto !important;">
                                                <div class="panel-body" style="height: 100%;">
                                                    <b>Bad: </b>Customer indicated that the estimated fuel savings would be sufficient to upgrade most of their fleet in the years to come.<br/>
                                                    <b>Good: </b>The customer indicated a fuel burn cost of $25,000 per flight hour and estimates that each pound saved with lighter equipage reduces this by 0.25% with an assumed $5 per gallon fuel cost.  Since they use their aircraft for approximately 350 flight hours per year, the proposed 2 lbs. weight reduction for the new APU equates to an annual fuel savings of $43,750, or $437K over its estimated 10 year life for this customer.
                                                </div>
                                            </div>
                                          </div>    <!--  Quantified Customer Needs  End -->
                                          
                                           <!--  Concept Testing  -->
                                          <div id="act-pop6s" class="panel panel-white popExDivs">
                                            <div class="pop-concept panel-heading col-xs-12 col-md-12 search-createria">                        
                                                <div class="col-xs-10 col-sm-8 col-md-8 col-lg-8 search-criteria-head">Concept Testing</div>
                                                <div class="col-xs-2 col-sm-4 col-md-4 col-lg-4 collapse-arrow">  </div>
                                            </div>
                                            <div class="p-concept panel-collapse collapse" style="min-height:50px; height: auto !important;">
                                                <div class="panel-body" style="height: 100%;">
                                                    <b>Bad: </b>The customer clearly preferred the smaller concept to the larger proposal.<br/>
                                                    <b>Good: </b>Although 78% of the customers interviewed preferred the smaller concept, only 10% of these customers maintained that preference when coupled to the $90K price increase required for its development.  Therefore, the concept appeals to less than 10% of the addressable market and is not likely to generate returns sufficient to justify its continued development.
                                                </div>
                                            </div>
                                          </div>    <!--  Concept Testing  End    -->
                                          
                                        </div>    <!-- Panel End  -->
                                    </div>
                                    <div class="modal-footer popup-footer">
                                        <button type="button" class="btn btn-default gray-btn modal-close-btn" data-dismiss="modal" style="width: 100%;">Ok</button>
                                    </div>                                  
                                </div>
                            </div>
                        </div>
                        
                    </div>
                </div>
                <div class="row" >
                    <div class="col-xs-12 col-sm-12 col-md-8">
                        <textarea id="key_action_items" class="create-textarea" placeholder='What action(s) do you plan to take as a result of this VOC/OVOC project, and who owns these actions?  If multiple topical areas were discussed, please enter actions for all topics covered.  Is additional VOC or OVOC required?'></textarea>
                    </div>
                    
                </div>
                
                <!-- Page navigation buttons Start-->             
                <div id="create-btns5" class="row create-btns-cls">                    
          
                    <div class="col-xs-2 col-sm-2 col-md-2">
                        <a class="btn gray-btn create-btn-back" onclick="backTab5();" id="">Back</a>
                    </div>
                    <div class="col-xs-6 col-xs-offset-1 col-sm-3 col-sm-offset-1 col-md-2 col-md-offset-0">
                        <a name="save_for_later" data-toggle="modal"  href="#saveForLater_popup" class="btn gray-btn create-btn-draft" >Save for later</a>
                    </div>
                    <div class="col-xs-2 col-xs-offset-1 col-sm-2 col-sm-offset-4 col-md-2 col-md-offset-6" style="text-align: right;">
                        <a class="btn red-btn create-next-btn" data-toggle="tab" onclick="if(validateTab5Fin('validate') == true){tickTheTabs();openTab6();}" id="">Next</a>
                    </div>
                </div>
                <!-- Page navigation buttons End-->
                
            </div>
        <!-- Page 5  Content End-->
            
        <!-- Page 6  Content Start-->
            <div class="tab-pane" id="create-tab6">
                <div class="row">
                     <div class="col-md-6 col-sm-6 col-xs-12 all-rows" >
                        <div class="col-xs-12 col-sm-4 col-md-4 create-lbls all-rows">
                            <div class="col-xs-12 col-sm-12 col-md-12">
                                Product Name<br class="hidden-xs"/><span class="create-subtext"> (optional)</span>
                            </div>
                            
                        </div>
                        <div class="col-xs-12 col-sm-8 col-md-8 create-inp-rows all-rows">
                            <input id="product_name" class="create-inp-flds" type="text" placeholder="Honeywell Product e.g. Apex, HTF7500"></input>
                        </div>
                    
                        <div class="col-xs-12 col-sm-4 col-md-4 create-lbls all-rows">
                            <div class="col-xs-4 col-sm-12 col-md-12">
                                Platform<br class="hidden-xs"/><span class="create-subtext"> (optional)</span>
                            </div>
                            
                        </div>
                        <div class="col-xs-12 col-sm-8 col-md-8 create-inp-rows all-rows">
                            <input class="create-inp-flds" type="text" placeholder="Aircraft Name" id="platform" onkeypress="getDataForAutoComplete('platform', 'platformId', 'Platform')" onclick="getDataForAutoComplete('platform', 'platformId', 'Platform')"></input>
                            <input class="create-inp-flds" id="platformId" type="hidden" ></input>
                        </div>
                    </div>
                    
                    <div class="col-md-6 col-sm-6 col-xs-12 all-rows" >
                        <div class="col-xs-12 col-sm-4 col-md-4 create-lbls">
                            Product Family<br class="hidden-xs"/><span class="create-subtext"> (choose one or more)</span>
                        </div>
                        <div class="col-xs-12 col-sm-8 col-md-8">
                            <div id="product_family" class="create-outline create-multiselect">
                                <!--<div class="col-xs-12 col-sm-12 col-md-12">
                                    <input type="checkbox"><span>Air And Thermal Management Systems</span></input>
                                </div>
                                
                                <div class="col-xs-12 col-sm-12 col-md-12">
                                    <input type="checkbox"><span>Aircraft Lighting</span></input>
                                </div>
                                
                                <div class="col-xs-12 col-sm-12 col-md-12">
                                    <input type="checkbox"><span>Auxiliary Power Units</span></input>
                                </div>
                                
                                <div class="col-xs-12 col-sm-12 col-md-12">
                                    <input type="checkbox"><span>Cabin Entertainment</span></input>
                                </div>
                                
                                <div class="col-xs-12 col-sm-12 col-md-12">
                                    <input type="checkbox"><span>Cockpit Displays</span></input>
                                </div>
                                
                                <div class="col-xs-12 col-sm-12 col-md-12">
                                    <input type="checkbox"><span>Communication, Navigation, Surveillance</span></input>
                                </div>
                                
                                <div class="col-xs-12 col-sm-12 col-md-12">
                                    <input type="checkbox"><span>Electric Power Systems</span></input>
                                </div>
                                
                                <div class="col-xs-12 col-sm-12 col-md-12">
                                    <input type="checkbox"><span>Engines</span></input>
                                </div>-->
                            </div>
                        </div>
                        
                    </div>
                </div>
                
                <!-- Page navigation buttons Start-->             
                <div id="create-btns6" class="row create-btns-cls">                    
       
                    <div class="col-xs-2 col-sm-2 col-md-2">
                        <a class="btn gray-btn create-btn-back" onclick="backTab6();" id="">Back</a>
                    </div>
                    <div class="col-xs-6 col-xs-offset-1 col-sm-3 col-sm-offset-1 col-md-2 col-md-offset-0">
                        <a name="save_for_later" data-toggle="modal"  href="#saveForLater_popup" class="btn gray-btn create-btn-draft" >Save for later</a>
                    </div>
                    <div class="col-xs-2 col-xs-offset-1 col-sm-2 col-sm-offset-4 col-md-2 col-md-offset-6" style="text-align: right;">
                        <a class="btn red-btn create-next-btn" data-toggle="tab" onclick="if(validateTab6Product('validate')==true){tickTheTabs();openTab7();}" id="">Next</a>
                    </div>
                </div>
                <!-- Page navigation buttons End-->
                
           </div>
       <!-- Page 6  Content End-->
            
       <!-- Submit Page Start-->
           <div class="tab-pane" id="create-tab7"> 
                 
                <div class="row" >
                    <div class="col-xs-12 col-sm-5 col-md-2 sensitivity-lbls">
                        Is this Sensitive Information?
                    </div>
                    <div id="isSensitive" class="col-xs-7 col-sm-2 col-md-1 hidden-xs">
                        <input type="radio" name="sensitive" value="No" checked="checked" >No</input> <br/>
                        <input type="radio" name="sensitive" value="Yes" >Yes</input> 
                    </div>
             <!--       <div class="col-xs-7 col-sm-2 col-md-2 create-lbls hidden-sm hidden-md hidden-lg" id="sensitivity-switch">
                        No <input type="checkbox" name="sensetive-check" checked="checked" /> Yes
                    </div>    -->
                    
                    <div class="col-xs-6 hidden-sm hidden-md hidden-lg" id="sensitivity-slider">
                        No<input id="ex2" data-slider-id='ex2Slider' type="text" data-slider-min="1" data-slider-max="2" data-slider-step="1" data-slider-value="1"></input>Yes
                    </div>
                    
                    <div class="col-xs-5 col-sm-5 col-md-3">
                        <a id="create-tab7-pop" data-container="body" data-toggle="popover" data-placement="right" class="help-link hidden-xs" href="" style=""> Which To Choose?</a>
                        <a id="" data-toggle="modal" class="help-link hidden-sm hidden-md hidden-lg" href="#whichToChooseSensitivity" style="float: right;" >Which To Choose?</a>
                        <div id="whichToChooseSensitivity"  class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                            <div class="modal-dialog modal-sm">
                                <div class="modal-content">
                                    <div class="modal-header popup-header">
                                        Sensitive Information
                                    </div>
                                    <div class="modal-body popup-body">
                                        <p>
                                            Classifying VOC records as Sensitive limits viewing the data to a single Honeywell Customer Business Team.
                                        </p>
                                        <p>
                                            For example, Boeing VOC classified as sensitive can not be viewed by Airbus or any other CBT
                                        </p>
                                    </div>
                                    <div class="modal-footer popup-footer">
                                        <button type="button" class="btn btn-default gray-btn" data-dismiss="modal" style="width: 100%;">Ok</button>
                                        
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
              <!--      <div class="col-xs-12 col-sm-6 col-md-6">
                        <div class="col-xs-12 col-sm-6 col-md-6">
                            <form id="form1" enctype="multipart/form-data" method="post">
                                <input type="file" name="fileToUpload" id="fileToUpload" onchange="fileSelected();"/>
                            </form>
                        </div>
                        
                        <div class="col-xs-12 col-sm-6 col-md-6">
                            <input type="button" class="btn gray-btn create-btn-back create-upload" onclick="uploadFile()" value="Upload" style="float: right;"/>
                        </div>
                     </div>    -->
                </div>
                
                <div class="row" >
                    
                    <div id="sensitiveInfo" class="col-xs-12 col-sm-5 col-md-5">
                        <div class="col-xs-12 col-sm-12 col-md-12 create-lbls" id="secGroupLabel">  Security Group   </div>
                        
                        <div id="securityGroup" class="col-xs-12 col-sm-12 col-md-12 create-outline create-multioption">
                            <!--<div class="col-xs-12 col-sm-12 col-md-12">
                                <input name="secGroup" type="radio">
                                    <span>Airbus Restricted</span>
                                </input>
                            </div>
                            
                            <div class="col-xs-12 col-sm-12 col-md-12">
                                <input name="secGroup" type="radio">
                                    <span>Boeing Restricted</span>
                                </input>
                            </div>
                            
                            <div class="col-xs-12 col-sm-12 col-md-12">
                                <input name="secGroup" type="radio">
                                    <span>Bombardier Restricted</span>
                                </input>
                            </div>
                            
                            <div class="col-xs-12 col-sm-12 col-md-12">
                                <input name="secGroup" type="radio">
                                    <span>Cessna Restricted</span>
                                </input>
                            </div>
                            
                            <div class="col-xs-12 col-sm-12 col-md-12">
                                <input name="secGroup" type="radio">
                                    <span>China OEM Restricted</span>
                                </input>
                            </div>
                            
                            <div class="col-xs-12 col-sm-12 col-md-12">
                                <input name="secGroup" type="radio">
                                    <span>D&amp;S Restricted</span>
                                </input>
                            </div>
                            
                            <div class="col-xs-12 col-sm-12 col-md-12">
                                <input name="secGroup" type="radio">
                                    <span>Dassault Restricted</span>
                                </input>
                            </div>
                            
                            <div class="col-xs-12 col-sm-12 col-md-12">
                                <input name="secGroup" type="radio">
                                    <span>Embraer Restricted</span>
                                </input>
                            </div>-->
                        </div>
                       <!-- <div class="col-xs-12 col-sm-5 col-md-5">
                            Enter External Links <input type="button" id="AddmoreExtbutton" value="Add" onclick="AddMoreLinksRow()"/>
                            <div id="ExternalLinkDiv">
                                <input type="text" id="externalLinks" placeholder="Enter any external link here"></input>
                            </div>
                        </div> -->
                    </div>
                    
                    <div class="col-xs-12 col-sm-7 col-md-7">
                        <!--<div class="col-sm-5 col-md-5 create-lbls hidden-xs">
                            <img src="{!URLFOR($Resource.VOC_Phase2_Test,'images/attachment.png')}" /> Attachments  
                        </div>
                        <div class="col-sm-7 col-md-7 create-lbls hidden-xs">
                            <input id="add_file" type="file" multiple="multiple"></input>
                        </div>-->
                        <div id="ieAttach" class="hidden">
                        <div class="col-xs-12 col-sm-12 col-md-12" style="margin-top:10px;"> Attachments (&lt; 10MB):</div>
                        <div id="" class="col-sm-6 col-md-6">
                            <apex:inputFile id="addFile" styleclass="uploadFiletoSF"  value="{!attach.body}" filename="{!attach.Name}"></apex:inputFile>    
                        </div>
                        
                        <div id="" class="col-xs-12 col-sm-5 col-sm-offset-1 col-md-5 col-md-offset-1">
                            <apex:inputHidden id="idTitle" value="{!VOC_Title}"/>
                            <apex:inputHidden id="idVOCDate" value="{!VOC_Date}"/>
                            <apex:inputHidden id="idHonLead" value="{!Honeywell_Lead}"/>
                            <apex:inputHidden id="idVOCColl" value="{!VOC_COllection}"/>
                            <apex:inputHidden id="idVOCHyp" value="{!VOC_Hypothesis}"/>
                            <apex:inputHidden id="idKeyTake" value="{!Key_Takeaways}"/>
                            <apex:inputHidden id="idFinImp" value="{!Financial_Implications}"/>
                            <apex:inputHidden id="idKeyAct" value="{!Key_Action_Items}"/>
                            <apex:inputHidden id="idProdName" value="{!Product_Name}"/>
                            <apex:inputHidden id="idPlatform" value="{!Platform}"/>
                            <apex:inputHidden id="idSensitivity" value="{!Sensitive_Information}"/>
                            <apex:inputHidden id="idProdFamily" value="{!Product_Family}"/>
                            <apex:inputHidden id="idvocPurpose" value="{!VOC_purpose}"/>
                            <apex:inputHidden id="idSecGroup" value="{!secGroup}"/>
                            <apex:inputHidden id="idCustDetails" value="{!customerDetails}"/>
                            <apex:inputHidden id="recordType" value="{!recordType}"/>
                            <apex:inputHidden id="iddDeleteFileList" value="{!deleteFileList}"/>
                            <apex:actionFunction name="passVOCDetails"  rerender="resultPanel" >
                                 <apex:param assignTo="{!title}" name="title" value=""/>
                            </apex:actionFunction>
                            <apex:commandLink onclick="if(fileExists==false){displayFileMsg();return false;}setVOCDetails();" action="{!addAttachment}" styleClass="btn gray-btn create-btn-back create-upload">Upload</apex:commandLink> 
                            <apex:outputPanel id="resultPanel">
                            
                            <apex:actionStatus startText="Uploading..." stopText="" id="myStatus" />
                            
                            </apex:outputPanel>
                        </div>
                        </div>
                        <div id="otherBrowserAttach" class="hidden">
                        <div class="col-xs-12 col-sm-12 col-md-12" style="margin-top:10px;"> Attachments (&lt; 25MB):</div>
                        <div class="col-xs-12 col-sm-12 col-md-12 attachment-margin" style="">
                            <div class="col-xs-12 col-sm-6 col-md-6">
                                <!--<form id="form1" enctype="multipart/form-data" method="post">-->
                                
                                  
                                  <input type="file" name="fileToUpload" id="fileToUpload" onchange="fileSelected();"></input>
                                  
                                    
                                  <!--</form>-->
                            </div>
                            
                            <div class="col-xs-12 col-sm-5 col-sm-offset-1 col-md-5 col-md-offset-1">
                                <input type="button" class="btn gray-btn create-btn-back create-upload" onclick="uploadFile()" value="Upload" ></input>
                            </div>
                         </div>
                         </div>
                         <div id="idContentList" class="col-xs-12 col-sm-12 col-md-12 create-customer-outline hidden" style="margin-top: 10px;">
                            
                        </div>
                        <div class="col-sm-12 col-md-12 create-outline create-drag-drop hidden">
                            Drag &amp; drop files here
                        </div>
                        <div id="filesSelected" class="col-sm-12 col-md-12 hidden-xs">
                            
                        </div>
                        <div class="col-xs-12 col-sm-12 col-md-12">
                            <div id="attachmentNameLink" class="hidden" style="padding-top: 20px;">
                                Previously attached files:<br/>
                            </div>
                        </div>
                    </div>
                    
                </div>
                
                 <!-- Adding for external links start-->
                <div class="row" style="margin-top: 10px;">
 
                    <div id="externalLinklabel" class="col-xs-12 col-sm-2 col-md-2" >Enter Additional Links:</div>
                    
                    <div class="col-xs-12 col-sm-7 col-md-7">
                        <input type="text" class="" id="externalLink" placeholder="URL Links to videos in Sharepoint or Brightcove (Honeywell Corporate Video Store)" ></input>
                    </div>
                    
                    <div class="col-xs-12 col-sm-3 col-md-3">
                        <input class="btn gray-btn create-btn-back create-upload" style="margin-left: 30px; margin-top: 7px;" type="button" id="AddmoreExtbutton" value="Add" onclick="AddMoreLinksRow()"/>
                    </div>
                    <div id="ExternalLinkDiv" class="col-xs-12 col-sm-12 col-md-12 create-outline create-multioption"> </div>
                    
                </div>
                <!-- Adding for external links end-->

                <div class="row hidden hidden-sm hidden-md hidden-lg" >
                    <div class="col-xs-12 col-sm-12">
                        <div class="mob_attach">
                            <div style="width:100%; height: 100%; margin-top: 12px;"><img src="{!URLFOR($Resource.VOC_Phase2_Test,'images/attachment.png')}" />&nbsp;&nbsp;
                            <a class="help-link" >Attach Notes, Photos or Videos</a></div>
                            <input id="mob-attachment7" type="file" style="width:100%; height: 100%; opacity:0; position: relative; top: -60px;" />
                        </div>    
                    </div>
                    
                </div>
                
                <!-- Page navigation buttons Start-->             
                <div id="create-btns7" class="row create-btns-cls">                    
       
                    <div class="col-xs-2 col-sm-2 col-md-2">
                        <a class="btn gray-btn create-btn-back" onclick="backTab7();" id="">Back</a>
                    </div>
                    <div class="col-xs-6 col-xs-offset-1 col-sm-3 col-sm-offset-1 col-md-2 col-md-offset-0">
                        <a name="save_for_later" data-toggle="modal"  href="#saveForLater_popup" class="btn gray-btn create-btn-draft" >Save for later</a>
                    </div>
                    <div class="col-xs-2 col-xs-offset-1 col-sm-2 col-sm-offset-4 col-md-2 col-md-offset-6" style="text-align: right;">
                        <a id="voc_submit" class="btn red-btn create-next-btn voc-loader-show" data-toggle="tab">Submit</a>
                    </div>
                </div> 
                <!-- Page navigation buttons End-->
            </div>
            <!-- Submit Page   Content End-->
        </div>
            
    </div>
    
    <!-- Validation popup - Individual fields -->
    <div id="validation_popup" class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-header popup-header">
                    Please enter valid data for:
                </div>
                <div class="modal-body popup-body" id="validation_popup_body"> </div>
                <div class="modal-footer popup-footer">
                    <div class="col-xs-12" style="">
                        <a type="button" id="valid-ok-id" style="width:100%" class="btn btn-default white-btn create-next-btn" data-dismiss="modal">OK</a>
                    </div>
                          
                </div>
                                    
            </div>
        </div>
    </div>
    <!-- Validation popup -->
    
    <!-- Validation popup - Final Submit button -->
    <div id="final_popup" class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-header popup-header">
                    Please enter valid data for:
                </div>
                <div class="modal-body popup-body" id="final_popup_body">
                    
                    
                </div>
                <div class="modal-footer popup-footer">
                    <div class="col-xs-12" style="">
                        <a type="button" id="final-ok-id" style="width:100%" class="btn btn-default white-btn create-next-btn" data-dismiss="modal">OK</a>
                    </div>
                                                
                    
                    
                </div>
                                    
            </div>
        </div>
    </div>
    <!-- Validation popup -->
    
    
    <!-- Save for Later - Draft popup  -->
    <div id="saveForLater_popup" class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-header popup-header">
                    Notification Message
                </div>
                <div class="modal-body popup-body">
                    Your inputs will be saved as a draft; you can access these from MyVOC to resume at any time.
                    
                </div>
                <div class="modal-footer popup-footer">
                    <div class="col-xs-6" style="padding-right:10px">
                        <a type="button" class="btn btn-default white-btn create-next-btn" data-dismiss="modal">Cancel</a>
                    </div>
                    <div class="col-xs-6" style="padding-right:10px">
                        <a type="button" id="saveAsDraft" class="btn btn-default gray-btn create-next-btn" data-dismiss="modal">OK</a>
                    </div>                                              
                    
                </div>
                                    
            </div>
        </div>
    </div>
    <!-- Save for Later - Draft popup -->
    
    
    <!-- Before Navigating to another page - popup  -->
    <div id="befNavigationConfirmation_popup" class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-header popup-header">
                    Notification Message
                </div>
                <div class="modal-body popup-body">
                    Do you want to save the record as Draft before you navigate to New page?
                    
                </div>
                <div class="modal-footer popup-footer">
                    <div class="col-xs-6" style="padding-right:10px">
                        <a type="button" id="confirmNo" class="btn btn-default white-btn create-next-btn" data-dismiss="modal">No</a>
                    </div>
                    <div class="col-xs-6" style="padding-right:10px">
                        <a type="button" id="confirmYes" class="btn btn-default gray-btn create-next-btn" data-dismiss="modal" onclick="saveAndNavigate();">Yes</a>
                    </div>                                              
                    
                </div>
                                    
            </div>
        </div>
    </div>
    <!-- Before Navigating to another page - popup  -->
    <!-- File selection Check - popup  -->
    <div id="fileSelection_popup" class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-header popup-header">
                    Notification Message
                </div>
                <div class="modal-body popup-body">
                    Please select a file and use Upload button.
                    
                </div>
                <div class="modal-footer popup-footer">
                    <div class="col-xs-12" style="">
                        <a type="button" id="" style="width:100%" class="btn btn-default white-btn create-next-btn" data-dismiss="modal">Ok</a>
                    </div>
                                                                 
                    
                </div>
                                    
            </div>
        </div>
    </div>
    <!-- File selection Check - popup   - popup  -->
    
    
    
    <!-- File size Check - popup  -->
    <div id="fileSize_popup" class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-header popup-header">
                    Notification Message
                </div>
                <div class="modal-body popup-body">
                    File too large, greater than 25MB.
                    
                </div>
                <div class="modal-footer popup-footer">
                    <div class="col-xs-12" style="">
                        <a type="button" id="" style="width:100%" class="btn btn-default white-btn create-next-btn" data-dismiss="modal">Ok</a>
                    </div>
                                                                 
                    
                </div>
                                    
            </div>
        </div>
    </div>
    <!-- File size Check - popup   - popup  -->
    
    <!-- Incomplete Customer details - popup  -->
    <div id="incompleteCustomer_popup" class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-header popup-header">
                    Notification Message
                </div>
                <div class="modal-body popup-body">
                    We have incomplete Customer details in latest customer added by you. Please complete the details.
                    
                </div>
                <div class="modal-footer popup-footer">
                    <div class="col-xs-12" style="">
                        <a type="button" id="" style="width:100%" class="btn btn-default white-btn create-next-btn" data-dismiss="modal">Ok</a>
                    </div>
                                                                 
                    
                </div>
                                    
            </div>
        </div>
    </div>
    <!-- Incomplete Customer details - popup   - popup  -->
    <!--    Footer for Tablet and Desktops    -->
    <div class="row hidden">
        <div class="footer">
            <img src="{!URLFOR($Resource.VOC_Phase2_Test,'images/footer_bg.png')}" style="width: 100%;"></img>
            <ul  class="inline-list">
                <li><a href="https://aerospace.honeywell.com" >Honeywell MyAerospace</a></li>        
               <!-- <li><span>|</span><a href="https://www51.honeywell.com/aero/portal/Common/Documents/Generic_Terms_Conditions.pdf" target="_system" rel="external" >Terms &amp; Conditions</a></li>
                <li><span>|</span><a href="https://www51.honeywell.com/privacy/" target="_system" rel="external">Privacy Policy</a></li>-->
                
                <!--- Changes for  DOCUMMENTUM Change Project -->
                
                <li><span>|</span><a href="{!$Setup.Docummentum__c.Docummentum_URL1__c}/aero/portal/Common/Documents/Generic_Terms_Conditions.pdf" target="_system" rel="external" >Terms &amp; Conditions</a></li>
                <li><span>|</span><a href="{!$Setup.Docummentum__c.Docummentum_URL1__c}/privacy/" target="_system" rel="external">Privacy Policy</a></li>
                
                <li><span>|</span><a href="https://wingmanservices.bendixking.com/GlobalCustomerCareWeb/contactusform.do" target="_system" rel="external">Website Feedback</a></li>
                <li><span>|</span><a href="http://www.careersathoneywell.com/en/aerospace" target="_system" rel="external">Careers</a></li>
                <li><span>|</span><a href="https://commerce.honeywell.com/webapp/wcs/stores/servlet/HonMultimediaDisplayView?storeId=10651" target="_system" rel="external">Media Center</a></li>
                <li><span>|</span><a href="https://aerospace.honeywell.com" target="_system" rel="external">Sitemap</a></li> 
            </ul>
        </div>
        <div class="voc-copyrights">
            <span>&copy; 2013</span>&nbsp;&nbsp; 
            <a href="http://www.honeywell.com" >Honeywell International Inc.</a>
        </div>
    </div>  
</div>

<!--  Top Right Menu  -->
<div class="right-menu-overlay"></div>
<div class="right-menu">
    <ul class="list-group ">
        <!--<li class="list-group-item">
            <input class="menu-search" placeholder="Search"></input>
        </li>-->
        <li class="list-group-item menu-item voc-loader-show">Create</li>
        <li class="list-group-item menu-item"><a id="menuItemMyVOC" href="">My VOC</a></li>
        <li class="list-group-item menu-item"><a id="menuItemSearch" href="">Search</a></li>
        <li class="list-group-item menu-item"><a id="menuItemHelp" href="">Help / VOC Guidelines</a></li>
        <li class="list-group-item menu-item"><a id="menuItemLogout" href="">Logout</a></li>
    </ul>
</div>

<!--  Loader Icon  -->
<div class="voc-loader">
    <div class="voc-loader-overlay"></div>
    <div class="voc-loader-icon"></div>
</div>

<!--    Overlay    -->
<div class="voc-overlay"></div>


<!-- Please enter a link Starts -->

<div id="enterALinkpopup" class="modal fade bs-example-modal-sm in" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header popup-header">
                Notification Message
            </div>
            <div class="modal-body popup-body">
             Please enter a link   
            </div>                    
            <div class="modal-footer popup-footer">
                <div class="col-xs-12" style="">
                    <a class="btn btn-default white-btn create-next-btn" style="width:100%" onclick="enterALinkpopuphide()" type="button" data-dismiss="modal">
                        Ok
                    </a>
                </div>
            </div>
        </div>
    </div> 
</div>



<!-- Please enter a link ends -->

<script src="{!URLFOR($Resource.VOC_Phase2_Test,'js/jquery.min.js')}"></script>
<!--<script src="//code.jquery.com/ui/1.10.3/jquery-ui.min.js" /> -->
<script src="{!URLFOR($Resource.VOC_Phase2_Test,'js/jquery-ui.js')}"></script>
<!--    <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js" />    -->
<script src="{!URLFOR($Resource.VOC_Phase2_Test,'js/bootstrap.min.js')}"></script>
<script src="{!URLFOR($Resource.VOC_Phase2_Test,'js/switch/bootstrap-switch.min.js')}"></script>
<script src="{!URLFOR($Resource.VOC_Phase2_Test,'js/slider/bootstrap-slider.js')}"></script>
<script src="{!URLFOR($Resource.VOC_Phase2_Test,'js/common.js')}"></script>
<script src="{!URLFOR($Resource.VOC_Phase2_Test,'js/forcetk.js')}"></script>

<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
  <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<script>

Visualforce.remoting.timeout = 120000;
var listCustomers = new Array();
var listDeleteCustomers = new Array();
var navigateTo = '';
var removeConfirmationOnTopNav = false;
/*Before Navigating to other ask for save */
$('div.btn-group a.btn-group').click(function(){
    //alert(removeConfirmationOnTopNav);
    var navId = $(this).attr('id');
    if(removeConfirmationOnTopNav == false){
        
        
        if(navId == 'voc-myvoc'){
            //alert('ssssss');
            $('#confirmNo').attr('onclick','navigateToNewPage("OVOC_MyVOC")()');
            navigateTo = 'OVOC_MyVOC';
        }else if(navId == 'voc-search'){
            navigateTo = 'OVOC_Search';
            $('#confirmNo').attr('onclick','navigateToNewPage("OVOC_Search")()');
        }else if(navId == 'voc-help'){
            navigateTo = 'OVOC_HelpPage';
            $('#confirmNo').attr('onclick','navigateToNewPage("OVOC_HelpPage")()');
        }
        if(navId != 'voc-create'){
            $('#befNavigationConfirmation_popup').modal({
                show:true,
                closeOnEscape: true
            });
        }
    }else{
    
        if(navId == 'voc-myvoc'){
           top.location = '/apex/OVOC_MyVOC';
        }else if(navId == 'voc-search'){
            top.location = '/apex/OVOC_Search';
        }else if(navId == 'voc-help'){
            top.location = '/apex/OVOC_HelpPage';
        }
    }
});


$('ul.list-group li.menu-item a').click(function(){
    //alert(removeConfirmationOnTopNav);
    var navId = $(this).attr('id');
    if(removeConfirmationOnTopNav == false){
        
        
        if(navId == 'menuItemMyVOC'){
            //alert('ssssss');
            $('#confirmNo').attr('onclick','navigateToNewPage("OVOC_MyVOC")()');
            navigateTo = 'OVOC_MyVOC';
        }else if(navId == 'menuItemSearch'){
            navigateTo = 'OVOC_Search';
            $('#confirmNo').attr('onclick','navigateToNewPage("OVOC_Search")()');
        }else if(navId == 'menuItemHelp'){
            navigateTo = 'OVOC_HelpPage';
            $('#confirmNo').attr('onclick','navigateToNewPage("OVOC_HelpPage")()');
        }else if(navId == 'menuItemLogout'){
            navigateTo = '/secur/logout.jsp';
            $('#confirmNo').attr('onclick','navigateToLogout("/secur/logout.jsp")()');
        }
        if(navId != 'Create'){
            $('#befNavigationConfirmation_popup').modal({
                show:true,
                closeOnEscape: true
            });
        }
    }else{
    
        if(navId == 'menuItemMyVOC'){
           top.location = '/apex/OVOC_MyVOC';
        }else if(navId == 'menuItemSearch'){
            top.location = '/apex/OVOC_Search';
        }else if(navId == 'menuItemHelp'){
            top.location = '/apex/OVOC_HelpPage';
        }else if(navId == 'menuItemLogout'){
            top.location = '/secur/logout.jsp';
        }
    }
});

function navigateToLogout(pageName){

    top.location = pageName; 
}
function navigateToNewPage(pageName){

    top.location = '/apex/'+ pageName; 
}

function saveAndNavigate(){
    var query = window.location.search.substring(1);
    var vocRecord;
    
    if(draftFirstView == true){
        var customerNumber = listCustomers.length;
        //if(customerNumber > 0){
            listCustomers[customerNumber-1].Customer_Name__c = $('#customer_name').val();
            listCustomers[customerNumber-1].Company_Name__c = $('#company_name').val();
            listCustomers[customerNumber-1].VOC_Account__c = $('#company_name_Id').val();
            listCustomers[customerNumber-1].Primary_Customer_s_Email__c = $('#customer_email').val();
            listCustomers[customerNumber-1].Customer_s_Title_Role__c = $('#customer_title').val();
        //}
        draftFirstView = false;    
    }else if(nextClicked == false){
        
        addCustomer();
        //addCustomerCount++;
        //addAnoterCustomerClicked = false;
    }
    var recordId = getParameterByName('id');
    if(recordId != null && recordId != '')
        insertVOC('Draft',recordId);
    else
        insertVOC('Draft',null);
}
$('#create-tab1-back').click(function(){
        navigateTo = 'OVOC_MyVOC';
        $('#confirmNo').attr('onclick','navigateToNewPage("OVOC_MyVOC")()');
    
    $('#befNavigationConfirmation_popup').modal({
        show:true,
        closeOnEscape: true
    });
});
/*Before Navigating to other ask for save */



/*     VOC or OVOC selection process - Start    */
var VOCOVOCSelection = 'VOC';
$( "input[name='voc_radio_btn']" ).click( function(){
    //alert($( "input:checked" ).val());
    
    if($( "input:checked" ).val() == 'OVOC'){
        $( "span[name='voc-ovoc-name']" ).html('OVOC');
        recordTypeId = '{!$Label.OVOC_RecType_Id}';
        VOCOVOCSelection = 'OVOC';
        $('li#create-li-tab3 a').attr('href','#create-tab2');
        $('li#create-li-tab2 a').attr('href','#create-tab3');
    }
    if($( "input:checked" ).val() == 'VOC'){
        $( "span[name='voc-ovoc-name']" ).html('VOC');
        recordTypeId = '{!$Label.VOC_RecType_Id}';
        VOCOVOCSelection = 'VOC';
         $('li#create-li-tab3 a').attr('href','#create-tab3');
        $('li#create-li-tab2 a').attr('href','#create-tab2');
    }
});

$( "#isSensitive" ).click( function(){
    //alert($("#isSensitive input:checked" ).val());    
    if($( "#isSensitive input:checked" ).val() == 'Yes'){
        sensitive = true;
        $( "#securityGroup div input" ).attr('disabled',false);
        $('#securityGroup').show();
        $('#secGroupLabel').show();
        
    }
    else if($( "#isSensitive input:checked" ).val() == 'No') {
        sensitive = false;
        $( "#securityGroup div input" ).attr('disabled',true);
        populateSecurityGroup(); // Added by Deb
        $('#securityGroup').hide();
        $('#secGroupLabel').hide();
    }
});

/*     VOC OVOC selection process - End    */


//Get parameters
function getParameterByName(name) {
    name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
    var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
        results = regex.exec(location.search);
    return results == null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
}

var convertToHtml = function(convert){
return $("<span />", { html: convert }).text();
};

Date.prototype.toDateInputValue = (function() {
    //var local;
    //local.setMinutes(this.getMinutes() - this.getTimezoneOffset());
    if(dateVOC != ''){
        var local = new Date(dateVOC);
    }
    else{
        var local = new Date();
        local.setMinutes(this.getMinutes() - this.getTimezoneOffset());
    }
    return local.toJSON().slice(0,10);
});
var dateVOC ='';
var draftFirstView = false;
var recordStatus = '';
//Drafts
function getQueryParameterAndPouplateFields() {
    $(".voc-loader").show();
    //alert('in Query');
    var query_string = {};
    var query = window.location.search.substring(1);
    var vocRecord;
    
    //alert(query);
    
    var recordId = getParameterByName('id');
    var fileTab = getParameterByName('tab');
    
    if(recordId != ''){
                   
        draftRecordId = recordId;
        draftFirstView = true;
        var data = new SObjectModel.voc();
        var vocRecord;
        OVOC_Create_Controller.getDraftRecord( recordId, function(result, event){
           if(event.type == 'Exception') {  
           //  alert(event.message);
               $(".voc-loader").hide();
           }
           else {
                nextClicked == true;                  
                addAnoterCustomerClicked = true;  
                
                if(result.VOC_Customer_Names__r != null && result.VOC_Customer_Names__r != ''){
                    //alert('listCustomers.length'+listCustomers.length);
                    
                    listCustomers = result.VOC_Customer_Names__r;
                    //console.log(listCustomers);
                    addCustomerCount = listCustomers.length;
                }
                if(result.RecordTypeId == '{!$Label.VOC_RecType_Id}'){
                    $('#create-voc1').attr('checked', 'checked');
                    recordTypeId = '{!$Label.VOC_RecType_Id}';
               //     $('input[name="my-checkbox"]').bootstrapSwitch('state',false);
                    $('#ex1').slider('setValue', 1, true);
                    
                }else if(result.RecordTypeId == '{!$Label.OVOC_RecType_Id}'){
                    $('#create-ovoc1').attr('checked', 'checked');
                    $( "span[name='voc-ovoc-name']" ).html('OVOC');
                    VOCOVOCSelection = 'OVOC';
                    $('li#create-li-tab3 a').attr('href','#create-tab2');
                    $('li#create-li-tab2 a').attr('href','#create-tab3');
                    recordTypeId = '{!$Label.OVOC_RecType_Id}';
             //       $('input[name="my-checkbox"]').bootstrapSwitch('state',true);
                    $('#ex1').slider('setValue', 2, true);
                }
                //alert(result.Sensitive__c);
                if(result.Sensitive__c == true){
                    $('#isSensitive input[value="Yes"]').attr('checked', true);
                    $('#securityGroup').show();
                    $('#secGroupLabel').show();
                    sensitive = true;
                }else{
                    $('#isSensitive input[value="No"]').attr('checked', true);
                    $('#securityGroup').hide();
                    $('#secGroupLabel').hide();
                    sensitive = false;
                }
                
                
                //if(result.Security_Group__c != null){
                    //var secGroup = 'AeroVOC_' + result.Security_Group__c.replace(" ","_");
                    //populateSecurityGroup(result.Security_Group__c);    
                    
                //}
                if(result.Purpose_of_this_VOC__c != null && result.Purpose_of_this_VOC__c != ''){     
                    var purposeList = result.Purpose_of_this_VOC__c.split(';');
                    $.each(purposeList, function(index,value){
                        //alert(value);
                        $('#purposeOfVOC div input[value="' + value +'"]').attr('checked', true);
                           
                    });
                }
                
                if(result.Product_Family__c != null && result.Product_Family__c != ''){
                    var prodFamilyList = result.Product_Family__c.split(';');
                    $.each(prodFamilyList, function(index,value){
                        //alert(value);
                        $('#product_family div input[value="' + value +'"]').attr('checked', true);
                           
                    });
                }
                
                $('#voc_title').val(convertToHtml(result.VOC_Title__c));
                //alert(result.VOC_Date__c);
                //alert(new Date(result.VOC_Date__c + new Date().getTimezoneOffset() * 60000));
                if(result.VOC_Date__c != '' && result.VOC_Date__c != null) {
                        var userAgent = navigator.userAgent; 
                      if (userAgent.match(/IEMobile\/10\.0/)) {
                            $('#voc_date').datepicker("setDate", new Date(result.VOC_Date__c + new Date().getTimezoneOffset() * 60000));  //val(new Date(result.VOC_Date__c));
    
                        } else if (userAgent.match(/(iPad|iPhone|iPod|Mobile|Android|BlackBerry)/g)) { 
                            dateVOC = result.VOC_Date__c;
                        $('#voc_date_mob').val(new Date().toDateInputValue());
                         
                        }
                        else { 
                            $('#voc_date').datepicker("setDate", new Date(result.VOC_Date__c + new Date().getTimezoneOffset() * 60000));  //val(new Date(result.VOC_Date__c));
                        }
           /*         if ( browser == false ) {
                        //$('#voc_date_mob').val(new Date(result.VOC_Date__c));
                        dateVOC = result.VOC_Date__c;
                        $('#voc_date_mob').val(new Date().toDateInputValue());
                    } else {
                        $('#voc_date').datepicker("setDate", new Date(result.VOC_Date__c + new Date().getTimezoneOffset() * 60000));  //val(new Date(result.VOC_Date__c));
                    }    */
                }
                    
                /*if(result.Honeywell__r != null){
                    $('#hon_lead').val(result.Honeywell__r.Name);
                    $('#HonleadId').val(result.Honeywell__c);
                }*/    
                 
                if(result.Honeywell_Lead__c != null){
                  //  $('#hon_lead').val(convertToHtml(result.Honeywell_Lead__c));
                    $('#hon_lead').val(result.Honeywell_Lead__c.replace(/amp;/g,""));
                    
                }
                if(result.Attachments != null){
                    /*var linkForFile='<ul>';
                    $.each(result.Attachments, function(index, value){
                        linkForFile += '<li><a class="help-link" target="_blank" href="/servlet/servlet.FileDownload?file=' + value.Id +'">' + value.Name + '</a></li>';
                        
                    });
                    linkForFile += '</ul>';*/ 
                    
                    //var linkForFile='<div class="col-md-6 col-sm-6"><div id="idDeleteFiles" class="create-outline create-multiselect" style="height:155px">';
                    var linkForFile = '';
                    $.each(result.Attachments, function(index, value){
                        //linkForFile +='<div class="col-xs-12 col-sm-12 col-md-12" name="'+value.Id+'"><input type="checkbox" value="'+value.Id+'"><span><a class="help-link" target="_blank" href="/servlet/servlet.FileDownload?file=' + value.Id +'">' + value.Name + '</a></span></input></div>';
                        linkForFile +='<div class="row create-customer-row"><div class="col-xs-10 col-sm-9 col-md-9"  style="padding: 5px 0 0 5px;"><a target="_blank" href="/servlet/servlet.FileDownload?file='+ value.Id + '">'+value.Name +'</a></div><div name="deleteLinkBtn" class="col-xs-2 col-sm-3 col-md-3 delCls" ><a onclick="deleteAnAttachment(\'' + value.Id +'\')" class="btn create-btn-delete"><span class="hidden-xs">Delete</span></a></div></div>';
                    });
                    
                    $('#idContentList').removeClass('hidden');
                    $('#idContentList').html(linkForFile);
                }else{
                    //$('#attachmentNameLink').append('');
                    //$('#attachmentNameLink').removeClass('hidden');
                    $('#idContentList').addClass('hidden');
                    
                    
                }
                    
                $('#voc_collection').val(convertToHtml(result.VOC_Collection__c));
                
                if(listCustomers != null && listCustomers != ''){
                    //alert('--->'+ listCustomers[listCustomers.length - 1].Id);
                    $('#customer_name').val(convertToHtml(listCustomers[listCustomers.length - 1].Customer_Name__c.replace(/amp;/g,"")));
                    $('#customer_title').val(convertToHtml(listCustomers[listCustomers.length - 1].Customer_s_Title_Role__c.replace(/amp;/g,"")));
                    $('#customer_email').val(convertToHtml(listCustomers[listCustomers.length - 1].Primary_Customer_s_Email__c));
                    if(listCustomers[listCustomers.length - 1].VOC_Account__c != null){
                        $('#company_name').val(convertToHtml(listCustomers[listCustomers.length - 1].VOC_Account__r.Name.replace(/amp;/g,"")));
                        $('#company_name_Id').val(listCustomers[listCustomers.length - 1].VOC_Account__c);
                        
                    }
                    
                    if(listCustomers.length > 0){
                        $('a[name="add_another_cust"]').html('Add Another Customer');
                    }
                    var allCustomers = '';
                    var index = 0;
                    $.each(listCustomers, function(index,value){
                        
                        allCustomers += '<div class="row create-customer-row"><div class="col-xs-9 col-sm-6 col-md-6 create-customer-name hidden-xs" style="padding-top:1px;">'
                                        + convertToHtml(value.Customer_Name__c) + '</div>' 
                                        +'<div name="edit_customer_mob" onclick="editCustomer(' + index + ');" class="col-xs-9 col-sm-6 col-md-6 create-customer-name hidden-sm hidden-md hidden-lg">'
                                        + value.Customer_Name__c + '</div>'   
                                        +'<div class="col-xs-3 col-sm-6 col-md-6 create-alighn-right">'
                                        +'<a name="edit_customer" onclick="editCustomer(' + index + ');" href="#create-tab2" type="button" class="btn create-btn-edit hidden-xs">Edit</a>'
                                        +'<a name="delete_customer" onclick="setDeleteCustomerCall(' + index + ');" data-toggle="modal" href="#delete_customer_popup" type="button" class="btn create-btn-delete"><span class="hidden-xs">Delete</span></a>'
                                        +'</div>'
                                        +'</div>';
                        index++;
                    });
                    
                    $('#update_customers').html(allCustomers);
                }
                //$('#product_name').val(result.Purpose_of_this_VOC__c);
                
               // $('#voc_hypothesis').val(result.VOC_Hypothesis__c);
                $('#voc_hypothesis').val(convertToHtml(result.VOC_Hypothesis__c));
                
               // $('#key_takeaways').val(result.Key_Takeaways1__c);
                $('#key_takeaways').val(convertToHtml(result.Key_Takeaways1__c));
                
                
              //  $('#financial_implications').val(result.Financial_Implications__c);
                $('#financial_implications').val(convertToHtml(result.Financial_Implications__c));
                
              //  $('#key_action_items').val(result.Key_Action_Items__c);
              if(result.Key_Action_Items__c != null) {
                  $('#key_action_items').val(convertToHtml(result.Key_Action_Items__c.replace(/amp;/g,"")));
              }  
              //  $('#product_name').val(result.Product_Name__c);
              if(result.Product_Name__c != null) {
                  $('#product_name').val(result.Product_Name__c.replace(/amp;/g,""));
              }  
                
                //Making Platform as free text
                /*if(result.Platform__r != null){
                    $('#platform').val(result.Platform__r.Name);
                    $('#platformId').val(result.Platform__c);    
                }*/
                
                if(result.Platform_Name__c != null){
                    var platFName = result.Platform_Name__c.replace(/amp;/g,"");
                    $('#platform').val(platFName);
                    
                }
                
                /*if(result.Content_Links__c != null){
                    fileUrl = result.Content_Links__c;
                    
                    var allLinks = fileUrl.split(';');
                    //alert(allLinks);
                    var i = 0;
                    var contentDocLinks = ''; 
                    $.each(allLinks, function(index,value){
                        //alert(index);
                        //alert(value);
                        var fileLinkSupp = '../sfc/servlet.shepherd/version/download/';
                        if(value != ''){
                            contentDocLinks += '<div class="row create-customer-row"><div class="col-xs-10 col-sm-9 col-md-9" name="'+ value.substring(0,18) +'" style="padding: 5px 0 0 5px;"><a href="'+ fileLinkSupp+ value.substring(0,18) + '">'+value.substring(19)+'</a></div><div name="deleteLinkBtn" class="col-xs-2 col-sm-3 col-md-3 delCls" ><a onclick="deleteContentLinks(' + i +')" class="btn create-btn-delete"><span class="hidden-xs">Delete</span></a></div></div>';
                            i++;
                        }
                    });
                    //$('#idContentList').html(contentDocLinks);
                }*/
                
                // Draft tab code
                //alert('result.Current_Tab__c' + result.Current_Tab__c);
                if(result.Current_Tab__c != null){
                    var tabNumber = result.Current_Tab__c;
                    $('#create-tab1').removeClass('active');
                    $('#create-li-tab1').removeClass('active');
                    if(tabNumber == 2 && VOCOVOCSelection=='OVOC'){
                        //alert('tabNumber' + tabNumber);
                        $('#create-tab2').removeClass('active');
                        $('#create-tab3').addClass('active');
                        $('#create-li-tab' + tabNumber).addClass('active');
                    }else if(tabNumber == 3 && VOCOVOCSelection=='OVOC'){
                        $('#create-tab3').removeClass('active');
                        $('#create-tab2').addClass('active');
                        $('#create-li-tab' + tabNumber).addClass('active');
                    }else if(tabNumber == 2 && VOCOVOCSelection=='VOC'){
                        //alert('tabNumber' + tabNumber);
                        //$('#create-tab2').removeClass('active');
                        $('#create-tab2').addClass('active');
                        $('#create-li-tab' + tabNumber).addClass('active');
                    }else{
                        $('#create-tab'+ tabNumber).addClass('active');
                        $('#create-li-tab' + tabNumber).addClass('active');
                    }
                    
                    
                }
                
                recordStatus = result.Status__c;
                //alert(recordStatus);
                
               // $('#product_name').val(result.Product_Name__c);
                $('#product_name').val(convertToHtml(result.Product_Name__c));
                
                if(result.Security_Group__c != null && result.Security_Group__c != '' && sensitive == true){
                    //alert(result.Security_Group__c);
                    //$( '#securityGroup input[id="'+result.Security_Group__c+'"]' ).attr('checked','checked');
                    $('#' + result.Security_Group__c).attr('checked','checked');
                }
                
                if(validateTab1VOCDetails('verify')== true){
                    $('#create-li-tab1').addClass('create-tick');
                }
                if(validateTab3Purpose('verify')== true){
                    if(VOCOVOCSelection == 'OVOC'){
                        $('#create-li-tab2').addClass('create-tick');
                        
                    }
                    else{
                        $('#create-li-tab3').addClass('create-tick');
                        
                    }
                }
                if(validateTab4Hyp('verify')== true){
                    $('#create-li-tab4').addClass('create-tick');
                }
                if(validateTab5Fin('verify')== true){
                    $('#create-li-tab5').addClass('create-tick');
                }
                
                if(validateTab6Product('verify')== true){
                    $('#create-li-tab6').addClass('create-tick');
                }
                if(validateCustomers('verify',null)== true){
                    if(VOCOVOCSelection == 'OVOC'){
                        $('#create-li-tab3').addClass('create-tick');
                    }
                    else{
                        $('#create-li-tab2').addClass('create-tick');
                    }
                }
                if(validateTab7secGroup('verify')== true){
                    $('#create-li-tab7').addClass('create-tick');
                }
                
                if(fileTab == '7'){
                    $('div.tab-pane').removeClass('active');
                    $('ul.nav li').removeClass('active');
                    $('#create-tab7').addClass('active');
                    $('#create-li-tab7').addClass('active');
                    
                }
                
                //$('#product_name').val(result.Product_Family__c);
                
                // Added for External Links Start
                if(result.External_Links__c != null && result.External_Links__c != ''){
                    $('#ExternalLinkDiv').show(600);
                    var Myarray = [];
                    var Myarray = result.External_Links__c.split(','); 
                  //  alert('hello-->'+Myarray);
                    $.each(Myarray, function(index,value) {
                       // AddMoreLinksRow();
                        //index++;
                        $('#externalLink').val(value);
                        AddMoreLinksRow();  
                    });      
                }
                // Added for External Links End                   
                
           $(".voc-loader").hide(); 
           }           
        }); 
    }
    else {
        $("#create-li-tab1").addClass('active');
        $("#create-tab1").addClass('active');
        
        $(".voc-loader").hide();    
    }
}

//  Create VOC/OVOC 

var recordTypeId = '{!$Label.VOC_RecType_Id}';
var otherForPurpose='';
var vocRecordId='';
//Customer related variables
var addCustomerCount = 1;
var addAnoterCustomerClicked = true;
var addAnoterCustomerNoClicked = false;
var nextClicked = false;
var sensitive = false;
var editClicked = false;
var successMessage = false;
var draftRecordId;

//Operational variables
var editIndex = -1;

function validateBeforeSaveAsDraft(){

    //var leadId = $('#HonleadId').val();
    //var leadText = $('#hon_lead').val();
    
    //var platfromId = $('#platformId').val();
    //var platfromText = $('#platform').val();
    
    var customerEmail = $('#customer_email').val();
    //alert(leadText  + '  -->' + leadId);
    var validationSuccess = true;    
    var validationMessage = '<ul><b>';
    
    /*if(leadText != '' && hon_lead != null){
        if(leadId == null || leadId == ''){
            validationMessage += '<li>Honeywell Lead</li>';
            validationSuccess = false; 
        }
    }*/
    
    //Making Platform as free text
    /*
    if(platfromText != '' && platfromText != null){
        if(platfromId == null || platfromId == ''){
            validationMessage += '<li>Platform</li>';
            validationSuccess = false; 
        }
    }*/
    
    if(customerEmail != null && customerEmail != '' ){
        if(emailAddressValidation(customerEmail) == false){
            validationMessage += '<li>Customers Email</li>';
            validationSuccess = false;
        }
    }
    
    validationMessage += '</b></ul>';
    
    if(validationSuccess == false){
        //alert('validationMessage ' + validationMessage );
        $('#validation_popup_body').html(validationMessage);
        
        $('#validation_popup').modal({
            show:true,
            closeOnEscape: true
        });
    }
    return validationSuccess;
}


$('#saveAsDraft').click(function(){
    //alert('in save draft');
    if(validateBeforeSaveAsDraft() == true){
        
        if(draftFirstView == true){
            var customerNumber = listCustomers.length;
            if(customerNumber==0){
                listCustomers.push(new customer());
                listCustomers[0].Customer_Name__c = $('#customer_name').val();
                listCustomers[0].Company_Name__c = $('#company_name').val();
                listCustomers[0].VOC_Account__c = $('#company_name_Id').val();
                listCustomers[0].Primary_Customer_s_Email__c = $('#customer_email').val();
                listCustomers[0].Customer_s_Title_Role__c = $('#customer_title').val();
                
            }else{
                listCustomers[customerNumber-1].Customer_Name__c = $('#customer_name').val();
                listCustomers[customerNumber-1].Company_Name__c = $('#company_name').val();
                listCustomers[customerNumber-1].VOC_Account__c = $('#company_name_Id').val();
                listCustomers[customerNumber-1].Primary_Customer_s_Email__c = $('#customer_email').val();
                listCustomers[customerNumber-1].Customer_s_Title_Role__c = $('#customer_title').val();
            }
            draftFirstView = false;    
        }else if(addAnoterCustomerClicked == true){
            if($('#customer_name').val() != '' || $('#company_name').val() != '' || $('#customer_email').val() != '' ||  $('#customer_title').val() != '')
             addCustomer();
            
        }
        if(editIndex != -1){
            //alert('editIndex' + editIndex);
            if($('#customer_name').val() == '' && $('#company_name').val() == '' &&  $('#customer_email').val() == '' &&  $('#customer_title').val() == ''){
                listDeleteCustomers.push(listCustomers[editIndex]); 
            }   
            listCustomers[editIndex].Customer_Name__c = $('#customer_name').val();
            listCustomers[editIndex].Company_Name__c = $('#company_name').val();
            listCustomers[editIndex].VOC_Account__c = $('#company_name_Id').val();
            listCustomers[editIndex].Primary_Customer_s_Email__c = $('#customer_email').val();
            listCustomers[editIndex].Customer_s_Title_Role__c = $('#customer_title').val();
            editIndex = -1;           
        }
        if(draftRecordId == ''  && draftRecordId == null){
            successMessage = insertVOC('Draft',null);
        }else{
            
            successMessage = updateVOC(draftRecordId);
                
        }
    }
});

$('ul.create-tabs li').click(function(){
    //alert($('ul.create-tabs li.active a').html());
    if($('ul.create-tabs li.active a').html() == 2 && addAnoterCustomerClicked == false){
   //     alert($('ul.create-tabs li.active a').html());
        var customerNumber = listCustomers.length;
        if(customerNumber > 0){
            listCustomers[customerNumber-1].Customer_Name__c = $('#customer_name').val();
            listCustomers[customerNumber-1].Company_Name__c = $('#company_name').val();
            listCustomers[customerNumber-1].VOC_Account__c = $('#company_name_Id').val();
            listCustomers[customerNumber-1].Primary_Customer_s_Email__c = $('#customer_email').val();
            listCustomers[customerNumber-1].Customer_s_Title_Role__c = $('#customer_title').val();
        }/*else{
            addCustomer();
        }*/
    }
});

$('a[name="customerCancel"]').click(function(){
    $('#customer_name').val('');
    $('#company_name_Id').val('');
    $('#company_name').val('');
    $('#customer_email').val('');
    $('#customer_title').val('');
    
    $('#create-tab2-sub1').removeClass('active');
    $('#create-tab2').addClass('active');
    $('a[name="customerCancel"]').addClass('hidden');
});

$('#next_on_customer').click(function(){
    
    if(validateCustomers('validate',null) == true){
        nextClicked = true;
        editClicked = false;
        /*if(draftFirstView == true){
           // console.log('in draft');
            var customerNumber = listCustomers.length;
            if(customerNumber==0){
                listCustomers.push(new customer());
                listCustomers[customerNumber-1].Customer_Name__c = convert($('#customer_name').val());
                listCustomers[customerNumber-1].Company_Name__c = convert($('#company_name').val());
                listCustomers[customerNumber-1].VOC_Account__c = $('#company_name_Id').val();
                listCustomers[customerNumber-1].Primary_Customer_s_Email__c = convert($('#customer_email').val());
                listCustomers[customerNumber-1].Customer_s_Title_Role__c = convert($('#customer_title').val());
                
            }else{
                listCustomers[customerNumber-1].Customer_Name__c = convert($('#customer_name').val());
                listCustomers[customerNumber-1].Company_Name__c = convert($('#company_name').val());
                listCustomers[customerNumber-1].VOC_Account__c = $('#company_name_Id').val();
                listCustomers[customerNumber-1].Primary_Customer_s_Email__c = convert($('#customer_email').val());
                listCustomers[customerNumber-1].Customer_s_Title_Role__c = convert$('#customer_title').val());
            }
            draftFirstView = false;    
        }*/
        if(addAnoterCustomerClicked == true){
           // console.log('add another');
            addCustomer();
            addCustomerCount++;
            addAnoterCustomerClicked = false;
        }
        
        if(editIndex != -1){
            //alert('editIndex' + editIndex);
            listCustomers[editIndex].Customer_Name__c = $('#customer_name').val();
            listCustomers[editIndex].Company_Name__c = $('#company_name').val();
            listCustomers[editIndex].VOC_Account__c = $('#company_name_Id').val();
            listCustomers[editIndex].Primary_Customer_s_Email__c = $('#customer_email').val();
            listCustomers[editIndex].Customer_s_Title_Role__c = $('#customer_title').val();
            editIndex = -1;           
        }
        
        var allCustomers = '';
        var index = 0;
        $.each(listCustomers, function(index,value){
            
            allCustomers += '<div class="row create-customer-row"><div class="col-xs-9 col-sm-6 col-md-6 create-customer-name hidden-xs">'
                            + value.Customer_Name__c + '</div>' 
                            +'<div name="edit_customer_mob" onclick="editCustomer(' + index + ');" class="col-xs-9 col-sm-6 col-md-6 create-customer-name hidden-sm hidden-md hidden-lg">'
                            + value.Customer_Name__c + '</div>'   
                            +'<div class="col-xs-3 col-sm-6 col-md-6 create-alighn-right">'
                            +'<a name="edit_customer" onclick="editCustomer(' + index + ');" href="#create-tab2" type="button" class="btn create-btn-edit hidden-xs">Edit</a>'
                            +'<a name="delete_customer" onclick="setDeleteCustomerCall(' + index + ');" data-toggle="modal" href="#delete_customer_popup" type="button" class="btn create-btn-delete"><span class="hidden-xs">Delete</span></a>'
                            +'</div>'
                            +'</div>';
            index++;
        });
        
        $('#update_customers').html(allCustomers);
        
        $("#create-tab2").addClass('active');
        $("#create-tab2-sub1").removeClass('active');
        /*if(addCustomerCount  >= 1){
            //Display Sub Tab for Tab2
            if(VOCOVOCSelection == 'VOC'){
                openTab2SubTab1();
                $("#create-tab3").removeClass('active');
            }else if(VOCOVOCSelection == 'OVOC'){
                openTab2SubTab1();
                $("#create-tab2").removeClass('active');
            }
            
            var allCustomers = '';
            var index = 0;
            $.each(listCustomers, function(index,value){
                
                allCustomers += '<div class="row create-customer-row"><div class="col-xs-9 col-sm-6 col-md-6 create-customer-name hidden-xs">'
                                + value.Customer_Name__c + '</div>' 
                                +'<div name="edit_customer_mob" onclick="editCustomer(' + index + ');" class="col-xs-9 col-sm-6 col-md-6 create-customer-name hidden-sm hidden-md hidden-lg">'
                                + value.Customer_Name__c + '</div>'   
                                +'<div class="col-xs-3 col-sm-6 col-md-6 create-alighn-right">'
                                +'<a name="edit_customer" onclick="editCustomer(' + index + ');" href="#create-tab2" type="button" class="btn create-btn-edit hidden-xs">Edit</a>'
                                +'<a name="delete_customer" onclick="setDeleteCustomerCall(' + index + ');" data-toggle="modal" href="#delete_customer_popup" type="button" class="btn create-btn-delete"><span class="hidden-xs">Delete</span></a>'
                                +'</div>'
                                +'</div>';
                index++;
            });
            
            $('#update_customers').html(allCustomers);
        }else{
            if(VOCOVOCSelection == 'OVOC'){
                $("#create-tab4").addClass('active');
                $("#create-tab2").removeClass('active');
                $("#create-li-tab4").addClass('active');
                $("#create-li-tab3").removeClass('active');
            }else if(VOCOVOCSelection == 'VOC'){
                $("#create-tab3").addClass('active');
                $("#create-tab2").removeClass('active');
                $("#create-li-tab3").addClass('active');
                $("#create-li-tab2").removeClass('active');
            }
        }*/  
        if(listCustomers.length > 0){
            $('a[name="add_another_cust"]').html('Add Another Customer');
        } 
    }   
    
});
function setDeleteCustomerCall(index){
    //alert('in setDeleteCustomerCall');
    var deleteYesLink = '<a type="button" class="btn btn-default gray-btn create-next-btn" data-dismiss="modal" onclick="deleteCustomer(' + index + ');">Yes</a>';
    $('#delete_yes').html(deleteYesLink);
}

function emailAddressValidation(emailAddress){
       
    var atpos = emailAddress.indexOf("@");
    var dotpos = emailAddress.lastIndexOf(".");
    if (atpos<1 || dotpos<atpos+2 || dotpos+2>=emailAddress.length) {
        
        return false;
    }else{
        return true;
    }
}
function validateCustomers(status, mode){
    //alert('in validateCustomers  --- status-->' + status);
    var customerName = $('#customer_name').val();

    var companyName = $('#company_name').val();
    //var companyNameId = $('#company_name_Id').val();
    var customerEmail = $('#customer_email').val();
    var customerTitle = $('#customer_title').val(); 
    
    
    var validationSuccess = true;
    var validationMessage = '<ul><b>';
    
    if(customerName == '' || customerName == null){
        validationMessage += '<li>Customer Name</li>';
        validationSuccess = false;
    }
    if( companyName == null || companyName == ''){
        validationMessage  += '<li>Company Name</li>';
        validationSuccess = false; 
    }
    if(customerTitle == '' || customerTitle == null){
        validationMessage += '<li>Customer’s Title</li>';
        validationSuccess = false; 
    }
    //alert(emailAddressValidation(customerEmail));
    if(emailAddressValidation(customerEmail) == false){
        validationMessage += '<li>Customer’s Email</li>';
        validationSuccess = false;
    }
    
    validationMessage += '</b></ul>';
    
    if(validationSuccess == false && status == 'validate'){
        
        $('#validation_popup_body').html(validationMessage);
        
        $('#validation_popup').modal({
            show:true,
            closeOnEscape: true
        });
    }
    if(mode == 'mob' && validationSuccess == true){
        $('#custCreateNotification').modal({
            show:true,
            closeOnEscape: true
        });
    }
    
    return validationSuccess;
}

$('a[name="add_another_cust"]').click(function(){
    
    $('#customer_name').val('');
    $('#company_name_Id').val('');
    $('#company_name').val('');
    $('#customer_email').val('');
    $('#customer_title').val('');
    
    setTimeout(  function() {$("#customer_name").focus() } , 100 );
    
    $("#create-tab2-sub1").addClass('active');
    $("#create-tab2").removeClass('active');
    addAnoterCustomerClicked = true;
    draftFirstView = false;
    $('a[name="customerCancel"]').removeClass('hidden');
    
    /*if(validateCustomers('validate') == true){
        addCustomerCount ++;
        addAnoterCustomerClicked = true;
        
        //alert('nextClicked -->' + nextClicked + 'editClicked  -->' + editClicked);
        if(nextClicked == false && editClicked == false){
            if(draftFirstView == true){
                var customerNumber = listCustomers.length;
                listCustomers[customerNumber-1].Customer_Name__c = $('#customer_name').val();
                listCustomers[customerNumber-1].Company_Name__c = $('#company_name').val();
                listCustomers[customerNumber-1].VOC_Account__c = $('#company_name_Id').val();
                listCustomers[customerNumber-1].Primary_Customer_s_Email__c = $('#customer_email').val();
                listCustomers[customerNumber-1].Customer_s_Title_Role__c = $('#customer_title').val();
                //listCustomers[customerNumber-1].Id = $('#customer_title').val();
                draftFirstView = false;    
            }else{
                
                addCustomer();
                
            }
            
            
        }else if(nextClicked == true && editClicked == true){
            if(editIndex != -1){
                //alert('editIndex-->' + editIndex);
                //alert($('#customer_name').val());
                listCustomers[editIndex].Customer_Name__c = $('#customer_name').val();
                listCustomers[editIndex].Company_Name__c = $('#company_name').val();
                listCustomers[editIndex].Primary_Customer_s_Email__c = $('#customer_email').val();
                listCustomers[editIndex].Customer_s_Title_Role__c = $('#customer_title').val();
                editIndex = -1;           
            }
            editClicked = false;
            nextClicked = false;
        }
        else{
            nextClicked = false;
        }
        $('#customer_name').val('');
        $('#company_name').val('');
        $('#customer_email').val('');
        $('#customer_title').val('');  
    }*/    
});

$('#add_no_customer_mob').click(function(){
    //alert(addAnoterCustomerClicked);
    //alert(listCustomers.length);
    addAnoterCustomerNoClicked = true;
    nextClicked = true;
    if(editClicked == false && addAnoterCustomerClicked == true && draftFirstView == false){
        addCustomer();
        //alert('added');
        addAnoterCustomerClicked = false;
    }else if(editClicked == true){
            //alert('editIndex' + editIndex);
            listCustomers[editIndex].Customer_Name__c = $('#customer_name').val();
            listCustomers[editIndex].Company_Name__c = $('#company_name').val();
            listCustomers[editIndex].VOC_Account__c = $('#company_name_Id').val();
            listCustomers[editIndex].Primary_Customer_s_Email__c = $('#customer_email').val();
            listCustomers[editIndex].Customer_s_Title_Role__c = $('#customer_title').val();
            editIndex = -1;           
    }
    if(listCustomers.length > 1){
        var allCustomers = '';
        var index = 0;
        
        $.each(listCustomers, function(index,value){
            
            allCustomers += '<div class="row create-customer-row"><div name="edit_customer_mob" onclick="editCustomer(' + index + ');" class="col-xs-9 col-sm-6 col-md-6 create-customer-name">'
                            + value.Customer_Name__c + '</div>'  
                            +'<div class="col-xs-3 col-sm-6 col-md-6 create-alighn-right">'
                            +'<a name="edit_customer" onclick="editCustomer(' + index + ');" href="#create-tab2" type="button" class="btn create-btn-edit hidden-xs">Edit</a>'
                            +'<a name="delete_customer" onclick="setDeleteCustomerCall(' + index + ');" data-toggle="modal" href="#delete_customer_popup" type="button" class="btn create-btn-delete"><span class="hidden-xs">Delete</span></a>'
                            +'</div>'
                            +'</div>';
            index++;
        });
        
        $('#update_customers').html(allCustomers);
        openTab2SubTab1();
    }
    else{
        openTab3();
    }
    draftFirstView == false;
});


$('#add_customer_mob').click(function(){
        //alert('in aaa');
        addCustomerCount ++;
        addAnoterCustomerClicked = true;
        nextClicked = true;
        //alert('nextClicked -->' + nextClicked + 'editClicked  -->' + editClicked);
        if(editClicked == false && addAnoterCustomerNoClicked == false && draftFirstView == false){
            //alert('in add cust');
            addCustomer(); 
            
        }else if(editClicked == true){
            if(editIndex != -1){
                //alert('editIndex-->' + editIndex);
                //alert($('#customer_name').val());
                listCustomers[editIndex].Customer_Name__c = $('#customer_name').val();
                listCustomers[editIndex].Company_Name__c = $('#company_name').val();
                listCustomers[editIndex].Primary_Customer_s_Email__c = $('#customer_email').val();
                listCustomers[editIndex].Customer_s_Title_Role__c = $('#customer_title').val();
                editIndex = -1;           
            }
            editClicked = false;
            //nextClicked = false;
        }
        else{
            //nextClicked = false;
        }
        $('#customer_name').val('');
        $('#company_name').val('');
        $('#company_name_Id').val('');
        $('#customer_email').val('');
        $('#customer_title').val('');  
        addAnoterCustomerNoClicked = false;
        draftFirstView = false;
});


function validate(){
    //Required Fields
    var vocTitle = $('#voc_title').val();
    var vocDate = $('#voc_date').val();
    var vocDateMob = $('#voc_date_mob').val();
    var hon_lead = $('#hon_lead').val();
    //alert(hon_lead);
    
    var customerName = $('#customer_name').val();
    var companyName = $('#company_name').val();
    //var companyNameId = $('#company_name_Id').val();
    var customerEmail = $('#customer_email').val();
    var customerTitle = $('#customer_title').val(); 
    
    var vocHypothesis = $('#voc_hypothesis').val();
    var keyTakeaways = $('#key_takeaways').val();
    
    var financialImplications = $('#financial_implications').val();
    var keyActionItems = $('#key_action_items').val();
    
    var purpose = getPurpose();
    var sensitive = $( "#isSensitive input:checked" ).val();
    var secGroup = getSecGroupValue();
      
    //var platformId = $('#platformId').val();
    //var platform = $('#platform').val();
    
    var validationSuccess = true;
    var validationMessage = '<ul><b>';
    
    if(vocTitle == ''){
        validationMessage += '<li>VOC Title</li>';
        validationSuccess = false;
    }
/*    if ( browser == false ) {
        if(vocDateMob == ''){
            validationMessage  += '<li>VOC Date</li>';
            validationSuccess = false; 
        }
    } else {
        if(vocDate == ''){
            validationMessage  += '<li>VOC Date</li>';
            validationSuccess = false; 
        }
    }
*/  
    var userAgent = navigator.userAgent; 
    if (userAgent.match(/IEMobile\/10\.0/)) {
        if(vocDate == ''){
            validationMessage  += '<li>VOC Date</li>';
            validationSuccess = false; 
        }
    
    } else if (userAgent.match(/(iPad|iPhone|iPod|Mobile|Android|BlackBerry)/g)) { 
        if(vocDateMob == ''){
            validationMessage  += '<li>VOC Date</li>';
            validationSuccess = false; 
        }
     
    }
    else { 
        if(vocDate == ''){
            validationMessage  += '<li>VOC Date</li>';
            validationSuccess = false; 
        }
    }

    if(hon_lead == '' || hon_lead == null){
        validationMessage += '<li>Honeywell Lead</li>';
        validationSuccess = false; 
    }
    
    if(customerName == '' || customerName == null){
        validationMessage += '<li>Customer Name</li>';
        validationSuccess = false;
    }
    if(companyName == null || companyName == ''){
        validationMessage  += '<li>Company Name</li>';
        validationSuccess = false; 
    }
    if(customerTitle == '' || customerTitle == null){
        validationMessage += '<li>Customer’s Title</li>';
        validationSuccess = false; 
    }
    //alert(emailAddressValidation(customerEmail));
    if(emailAddressValidation(customerEmail) == false){
        validationMessage += '<li>Customer’s Email</li>';
        validationSuccess = false;
    }
    if(purpose == '' || purpose == null){
        validationMessage += '<li>Purpose</li>';
        validationSuccess = false; 
    }
    if(vocHypothesis == '' || vocHypothesis == null){
        validationMessage += '<li>Voc Hypothesis</li>';
        validationSuccess = false; 
    }
    if(keyTakeaways == '' || keyTakeaways == null){
        validationMessage += '<li>Key Takeaways</li>';
        validationSuccess = false; 
    }
    if(financialImplications == '' || financialImplications == null){
        validationMessage += '<li>Financial Implications</li>';
        validationSuccess = false; 
    }
    if(keyActionItems == '' || keyActionItems == null){
        validationMessage += '<li>Key Action Items</li>';
        validationSuccess = false; 
    }
    
    //Making platform as free text
    /*if((platform != null && platform !='') && (platformId == null || platformId == '') ){
        validationMessage += '<li>Platform</li>';
        validationSuccess = false; 
    }*/
    
    if(sensitive == 'Yes' && (secGroup == '' || secGroup == null)){
        
        validationMessage += '<li>Security Group</li>';
        validationSuccess = false;
    }
    
    validationMessage += '</b></ul>';
    
    if(validationSuccess == false){
        
        $('#final_popup_body').html(validationMessage);

        $('#final_popup').modal({
            show:true,
            closeOnEscape: true
        });
    }
    
    return validationSuccess;
}

//Not using finding Name
/*$('#hon_lead').blur(function(){
    
    if($('#hon_lead').val() != ''){
        
        assignHWLeadId($('#hon_lead').val());
    }
});

function assignHWLeadId(leadName){
    OVOC_Create_Controller.searchHoneywellLeadBasedName(leadName,function(result, event){
        if(event.type == 'Exception'){
             //alert(event.message);
        }
        if(result != null){
            
            if(result[0] != null)
                $('#HonleadId').val(result[0].Id);
            else
                $('#HonleadId').val('');
           
        }
    });
}*/

$('#company_name').blur(function(){
    replaceName('company_name');
    var companyName = $('#company_name').val();
    if(companyName.length <= 1){
        $('#company_name_Id').val('');
    }else{
        
        assignVOCAccountId(companyName);
    }
});

function assignVOCAccountId(accountName){
    OVOC_Create_Controller.getVOCAccounts(accountName,function(result, event){
        if(event.type == 'Exception'){
             //alert(event.message);
        }
        if(result != null){
            
            if(result[0] != null)
                $('#company_name_Id').val(result[0].Id);
            else
                $('#company_name_Id').val('');
           
        }
    });
}


$('#platform').blur(function(){
    replaceName('platform');
    /*var platformName = $('#platform').val();
    if(platformName == ''){
        $('#platformId').val('');
    }else{        
        assignPlatformId(platformName);
    }*/
});

function assignPlatformId(platformName){
    OVOC_Create_Controller.getPlatform(platformName,function(result, event){
        if(event.type == 'Exception'){
             //alert(event.message);
        }
        if(result != null){
            
            if(result[0] != null)
                $('#platformId').val(result[0].Id);
            else
                $('#platformId').val('');
           
        }
    });
}
function validateTab1VOCDetails(status){
    //Required Fields
    var vocTitle = $('#voc_title').val();
    var vocDate = $('#voc_date').val();
    var vocDateMob = $('#voc_date_mob').val();
    var hon_lead = $('#HonleadId').val();
    var hon_leadName = $('#hon_lead').val();
      
    var validationSuccess = true;
    var validationMessage = '<ul><b>';
    
    if(vocTitle == ''){
        validationMessage += '<li>VOC Title</li>';
        validationSuccess = false;
//        $('#voc_title').focus();
    }
/*    if ( browser == false ) {
        if(vocDateMob == ''){
            validationMessage  += '<li>VOC Date</li>';
            validationSuccess = false; 
        }
    } else {
        if(vocDate == ''){
            validationMessage  += '<li>VOC Date</li>';
            validationSuccess = false; 
        }
    }
*/   
    var userAgent = navigator.userAgent; 
    if (userAgent.match(/IEMobile\/10\.0/)) {
        if(vocDate == ''){
            validationMessage  += '<li>VOC Date</li>';
            validationSuccess = false; 
        }
    
    } else if (userAgent.match(/(iPad|iPhone|iPod|Mobile|Android|BlackBerry)/g)) { 
        if(vocDateMob == ''){
            validationMessage  += '<li>VOC Date</li>';
            validationSuccess = false; 
        }
     
    }
    else { 
        if(vocDate == ''){
            validationMessage  += '<li>VOC Date</li>';
            validationSuccess = false; 
        }
    }
     
    if(hon_leadName == null || hon_leadName ==''){
        validationMessage += '<li>Honeywell Lead</li>';
        validationSuccess = false; 
        //$('#hon_lead').focus();
    }
   
    validationMessage += '</b></ul>';
    
    if(validationSuccess == false && status=='validate'){
        
        $('#validation_popup_body').html(validationMessage);
        
        $('#validation_popup').modal({
            show:true,
            closeOnEscape: true
        });
    }
    
    return validationSuccess;
}

function validateTab3Purpose(status){
   
    var purpose = getPurpose();
    var validationSuccess = true;
    var validationMessage = '<ul><b>';
    
    if(purpose == '' || purpose == null){
        validationMessage += '<li>Purpose</li>';
        validationSuccess = false; 
    }
    validationMessage += '</b></ul>';
    
    if(validationSuccess == false && status=='validate'){
        
        $('#validation_popup_body').html(validationMessage);
        
        $('#validation_popup').modal({
            show:true,
            closeOnEscape: true
        });
    }
    
    return validationSuccess;
}

function validateTab4Hyp(status){
   
    var vocHypothesis = $('#voc_hypothesis').val();
    var keyTakeaways = $('#key_takeaways').val();
    
    var validationSuccess = true;
    var validationMessage = '<ul><b>';
    
    if(vocHypothesis == '' || vocHypothesis == null){
        validationMessage += '<li>Voc Hypothesis</li>';
        validationSuccess = false; 
    }
    if(keyTakeaways == '' || keyTakeaways == null){
        validationMessage += '<li>Key Takeaways</li>';
        validationSuccess = false; 
    }
    
    validationMessage += '</b></ul>';
    
    if(validationSuccess == false && status == 'validate'){
        
        $('#validation_popup_body').html(validationMessage);
        
        $('#validation_popup').modal({
            show:true,
            closeOnEscape: true
        });
    }
    
    return validationSuccess;
}


function validateTab5Fin(status){
   
    var financialImplications = $('#financial_implications').val();
    var keyActionItems = $('#key_action_items').val();
    
    var validationSuccess = true;
    var validationMessage = '<ul><b>';
    
    if(financialImplications == '' || financialImplications == null){
        validationMessage += '<li>Financial Implications</li>';
        validationSuccess = false; 
    }
    if(keyActionItems == '' || keyActionItems == null){
        validationMessage += '<li>Key Action Items</li>';
        validationSuccess = false; 
    }
    
    validationMessage += '</b></ul>';
    
    if(validationSuccess == false && status == 'validate'){
        
        $('#validation_popup_body').html(validationMessage);
        
        $('#validation_popup').modal({
            show:true,
            closeOnEscape: true
        });
    }
    
    return validationSuccess;
}
function validateTab6Product(status){
    //alert('sss');
    //var platformId = $('#platformId').val();
    //var platform = $('#platform').val();
    var prodFamily = getProductFamilyValues();
    var validationSuccess = true;
    var validationMessage = '<ul><b>';
    
    //Making Platform as free text
    /*if((platform != null && platform !='') && (platformId == null || platformId == '') ){
        validationMessage += '<li>Platform</li>';
        validationSuccess = false; 
    }*/
    
    
    if(prodFamily == null || prodFamily == ''){
        validationMessage += '<li>Product Family</li>';
        validationSuccess = false; 
    }
    
    
    validationMessage += '</b></ul>';
    
    if(validationSuccess == false && status == 'validate'){
        
        $('#validation_popup_body').html(validationMessage);
        
        $('#validation_popup').modal({
            show:true,
            closeOnEscape: true
        });
    }
    
    return validationSuccess;

}

function validateTab7secGroup(status){
    var validationSuccess = true;
    var validationMessage = '<ul><b>';
    
    var sensitive = $( "#isSensitive input:checked" ).val();
    var secGroup = getSecGroupValue();
    
    if(sensitive == 'Yes' && (secGroup == '' || secGroup == null)){
        validationMessage += '<li>Security Group</li>';
        validationSuccess = false;
    }
    
    validationMessage += '</b></ul>';
        
    if(validationSuccess == false && status == 'validate'){
        
        $('#final_popup_body').html(validationMessage);
    
        $('#final_popup').modal({
            show:true,
            closeOnEscape: true
        });
    }
    
    return validationSuccess;
}

$('#voc_submit').click(function(){
    //console.log('submit');
   // console.log('QueueList' + QueueList);
    
    var validationComplete = validate();
    
    if(validationComplete == true){
        if(draftFirstView == true){
            var customerNumber = listCustomers.length;
            //if(customerNumber > 0){
                listCustomers[customerNumber-1].Customer_Name__c = $('#customer_name').val();
                listCustomers[customerNumber-1].Company_Name__c = $('#company_name').val();
                listCustomers[customerNumber-1].VOC_Account__c = $('#company_name_Id').val();
                listCustomers[customerNumber-1].Primary_Customer_s_Email__c = $('#customer_email').val();
                listCustomers[customerNumber-1].Customer_s_Title_Role__c = $('#customer_title').val();
            //}
            draftFirstView = false;    
        }else if(addAnoterCustomerClicked == true){
            if($('#customer_name').val() != '' || $('#company_name').val()!= '' || $('#customer_email').val() != '' ||  $('#customer_title').val() != '')
                addCustomer();
        }
        
        if(editIndex != -1){
            //alert('editIndex' + editIndex);
            listCustomers[editIndex].Customer_Name__c = $('#customer_name').val();
            listCustomers[editIndex].Company_Name__c = $('#company_name').val();
            listCustomers[editIndex].VOC_Account__c = $('#company_name_Id').val();
            listCustomers[editIndex].Primary_Customer_s_Email__c = $('#customer_email').val();
            listCustomers[editIndex].Customer_s_Title_Role__c = $('#customer_title').val();
            editIndex = -1;           
        }
        
        if(draftRecordId == '' || draftRecordId == null)
            successMessage = insertVOC('Submitted',null);       
        else{
            successMessage = insertVOC('Submitted',draftRecordId);       
        }
    
    }
});

function pullLastCustomer(){
    addAnoterCustomerClicked = false;
    var size = listCustomers.length;
    if(size > 0){
        $('#customer_name').val(listCustomers[size-1].Customer_Name__c );
        $('#company_name').val(listCustomers[size-1].Company_Name__c );
        $('#customer_email').val(listCustomers[size-1].Primary_Customer_s_Email__c );
        $('#customer_title').val(listCustomers[size-1].Customer_s_Title_Role__c); 
        $('#company_name_Id').val(listCustomers[size-1].VOC_Account__c);
    }
}


function editCustomer(index){
    //alert('ssss in edit');
    editClicked = true;
    editIndex = index;
    $(".voc-loader").show();
    addAnoterCustomerClicked = false;
    $("#create-tab2-sub1").addClass('active');
    $("#create-tab2").removeClass('active');
    //console.log(listCustomers[index]);
    $('#customer_name').val(convertToHtml(listCustomers[index].Customer_Name__c));
    $('#company_name').val(convertToHtml(listCustomers[index].Company_Name__c));
    $('#customer_email').val(convertToHtml(listCustomers[index].Primary_Customer_s_Email__c));
    $('#customer_title').val(convertToHtml(listCustomers[index].Customer_s_Title_Role__c)); 
    $('#company_name_Id').val(listCustomers[index].VOC_Account__c); 
    $(".voc-loader").hide(); 
}
var contentDeleteFileList='';
/*function deleteContentLinks(indexCon){
    //alert(indexCon);
    var contentList = fileUrl.split(';');
    var finalList = '';
    $.each(contentList , function(index, value){
        if(value != ''){
            if(index == indexCon){
                
                contentDeleteFileList += value + ';';
            }else{
                finalList += value + ';';
            }    
        }
    });
    //alert('finalList' + finalList);
    //alert('contentDeleteFileList' + finalList);
    fileUrl = finalList;
    
    
    OVOC_Create_Controller.deleteContenVersions(contentDeleteFileList, fileUrl, draftRecordId, function(result, event){
       
       if(event.type == 'Exception') {  
       //  alert(event.message);
           $(".voc-loader").hide();
       }else{ 
          top.location = '/apex/OVOC_Create?id=' + draftRecordId;
       }
    });
    
    
    
}*/

function deleteAnAttachment(attachId){
    //alert(attachId);
    $('.voc-loader').show();
    if(attachId != null){
        OVOC_Create_Controller.deleteAttachments(attachId, function(result,event){
            if(event.type == 'Exception'){
                //  alert(event.message);
                $('.voc-loader').hide();
            }else{
                top.location = '/apex/OVOC_Create?id=' + draftRecordId;
            }
        });
    } else { $('.voc-loader').hide(); }
}

function deleteCustomer(deleteIndex){
    $(".voc-loader").show();    // To Show loader
    
    //alert('in deleteCustomer');
    addCustomerCount--;
    
    var i = 0;
    var tempArray = [];
    listCustomers.forEach( function( elem, index, array){
        if(index != deleteIndex){
            array[i] = elem;
            tempArray[i] = elem;
            i++;
        }else{
            if(elem.Id != null)
                listDeleteCustomers.push(elem);
            
            //console.log(listDeleteCustomers);    
        }
        
    });
    listCustomers = tempArray;
    //console.log(listCustomers);
    
    var allCustomers = '';
    var index = 0;
    $.each(listCustomers, function(index,value){
        
        allCustomers += '<div class="row create-customer-row"><div class="col-xs-9 col-sm-6 col-md-6 create-customer-name hidden-xs">'
                        + value.Customer_Name__c + '</div>' 
                        +'<div name="edit_customer_mob" class="col-xs-9 col-sm-6 col-md-6 create-customer-name hidden-sm hidden-md hidden-lg">'
                        + value.Customer_Name__c + '</div>' 
                        +'<div class="col-xs-3 col-sm-6 col-md-6 create-alighn-right">'
                        +'<a name="edit_customer" onclick="editCustomer(' + index + ');" href="#create-tab2" type="button" class="btn create-btn-edit hidden-xs">Edit</a>'
                        +'<a name="delete_customer" onclick="setDeleteCustomerCall(' + index + ');" data-toggle="modal" href="#delete_customer_popup" type="button" class="btn create-btn-delete"><span class="hidden-xs">Delete</span></a>'
                        +'</div>'
                        +'</div>';
        index++;
    });
    
    $('#update_customers').html(allCustomers);
    
    if(listCustomers.length == 0){
        $('#customer_name').val('');
        $('#company_name').val('');
        $('#company_name_Id').val('');
        $('#customer_email').val('');
        $('#customer_title').val('');
        $('a[name="add_another_cust"]').html('Add Customer');
        addAnoterCustomerClicked = true;
        //alert(listCustomers.length);
    }
    $(".voc-loader").hide();    // To Hide loader
}

function updateVOC(recordId){
              
    return insertVOC('Draft',recordId);
}

function VOC(){
    this.VOC_Title__c = null;
}
var fileExists = false;
$('input[class="uploadFiletoSF"]').change(function(e){
    //alert('here');
    var inp = $('input[class="uploadFiletoSF"]');
    
    //alert('name--->' + inp );
    if(inp != undefined){
        fileExists = true;
    }
});

function displayFileMsg(){
    $('#fileSelection_popup').modal({
        show:true,
        closeOnEscape: true
    });
}
function setVOCDetails(){
    $(".voc-loader").show();    
    var vocDate;
    if($('#voc_date').val() !== ''){
        vocDate = $.datepicker.formatDate('mm/dd/yy', new Date($('#voc_date').val()));
    }
    
    var sensitiveSelection;
    
    $('[id$=idTitle]').val($('#voc_title').val());
    $('[id$=idVOCDate]').val(vocDate);
    $('[id$=idHonLead]').val($('#hon_lead').val());
    $('[id$=idVOCColl]').val($('#voc_collection').val());
    $('[id$=idVOCHyp]').val($('#voc_hypothesis').val());
    $('[id$=idKeyTake]').val($('#key_takeaways').val());
    $('[id$=idFinImp]').val($('#financial_implications').val());
    $('[id$=idKeyAct]').val($('#key_action_items').val());
    $('[id$=idProdName]').val($('#product_name').val());
    $('[id$=idPlatform]').val($('#platformId').val());
    
    if($('#isSensitive input:checked').val() == 'Yes'){
        sensitiveSelection = 'true';
    }else{
        sensitiveSelection = 'false';
    }
    
    $('[id$=idSensitivity]').val(sensitiveSelection);
    $('[id$=idProdFamily]').val(getProductFamilyValues());
    $('[id$=idvocPurpose]').val(getPurpose());
    var SecuritygrpName  = '';
    var secGrp = getSecGroupValue();
    $.each(QueueList, function(index,value){
        //alert('Outside'+value.GroupId__c);
        if(value.GroupId__c == secGrp){
            SecuritygrpName = value.GroupId__c;
            assignedQueue = value.Queue_Id__c.trim();
            //SecuritygrpName = value.Name;  
            
        }
        
    });
    $('[id$=idSecGroup]').val(SecuritygrpName);
    var allCusts='';
    $.each(listCustomers,function(index,value){
        
        if(value.Id == ''){
            allCusts += 'null,';
        }else{
            allCusts += value.Id +',';
        }
        
        if(value.Customer_Name__c == ''){
            allCusts += 'null,';
        }else{
            allCusts += value.Customer_Name__c+',';
        }
        
        if(value.VOC_Account__c == ''){
            allCusts += 'null,';
        }else{
            allCusts += value.VOC_Account__c+',';
        }
        
        
        if(value.Customer_s_Title_Role__c == ''){
            allCusts += 'null,';
        }else{
            allCusts += value.Customer_s_Title_Role__c+',';
        }
        
        if(value.Primary_Customer_s_Email__c == ''){
            allCusts += 'null;';
        }else{
            allCusts += value.Primary_Customer_s_Email__c+';';
        }
    });
    //alert(recordTypeId);
    $('[id$=recordType]').val(recordTypeId);
    $('[id$=idCustDetails]').val(allCusts);
    $('[id$=iddDeleteFileList]').val(deleteFileList);
    //passVOCDetails(vocTitle);
    return true;
    
}
function insertVOC(status,draftRecordId) {

    $(".voc-loader").show();    // To Show loader

    //Create VOC record
    var vocrec = new SObjectModel.Voice_of_Customer__c();
    
    //Map VOC fields
    var vocTitle = convertToHtml($('#voc_title').val());
    var vocDate = $('#voc_date').val();
    var vocDateMob = $('#voc_date_mob').val();
    
    var honLead = $('#hon_lead').val();
    var vocCollection = convertToHtml($('#voc_collection').val());
    var vocHypothesis = convertToHtml($('#voc_hypothesis').val());
    var keyTakeaways = convertToHtml($('#key_takeaways').val());
    
    var financialImplications = convertToHtml($('#financial_implications').val());
    var keyActionItems = $('#key_action_items').val();
    var productName = convertToHtml($('#product_name').val());
    var platform = $('#platformId').val();
    var platformName = convertToHtml($('#platform').val());
    var hon_lead = $('#HonleadId').val();
    var honewellLeadName = convertToHtml($('#hon_lead').val());
    var success = false;
    var i='';
    var ExternalLinks = '';
    /* for (i=0;i<=len;i++) {
       ExternalLinks += $('#externalLinks'+len).val() + ' ;'; 
       alert(ExternalLinks);         
    }
    */
    var inputValues = '';
    $('#ExternalLinkDiv input').each(function() {
        //inputValues.push($(this).val());
            inputValues += $(this).val() + ',';
    });
    inputValues = inputValues.replace(/[,;]\s*$/, "");
    //alert('Hello'+inputValues);
    vocrec.set('VOC_Title__c',vocTitle);
    vocrec.set('RecordTypeId',recordTypeId);
    //alert('new Date(vocDate)' + new Date(vocDate));
    
/*    if ( browser == false ) {
        if(vocDateMob != null && vocDateMob != '') {  vocrec.set('VOC_Date__c',new Date(vocDateMob)); }
    } else {
        if(vocDate != null && vocDate != '') {  vocrec.set('VOC_Date__c',new Date(vocDate)); }
    }
*/    
    var userAgent = navigator.userAgent; 
    if (userAgent.match(/IEMobile\/10\.0/)) {
        if(vocDate != null && vocDate != '') {  vocrec.set('VOC_Date__c',new Date(vocDate)); }
    
    } else if (userAgent.match(/(iPad|iPhone|iPod|Mobile|Android|BlackBerry)/g)) { 
        if(vocDateMob != null && vocDateMob != '') {  vocrec.set('VOC_Date__c',new Date(vocDateMob)); }
     
    }
    else { 
        if(vocDate != null && vocDate != '') {  vocrec.set('VOC_Date__c',new Date(vocDate)); }
    }
    
    vocrec.set('Honeywell_Lead__c',honewellLeadName);
    //vocrec.set('Honeywell__c',hon_lead);
    vocrec.set('VOC_Collection__c',vocCollection);
    vocrec.set('VOC_Hypothesis__c',vocHypothesis );
    vocrec.set('Key_Takeaways1__c',keyTakeaways );
    vocrec.set('Financial_Implications__c',financialImplications );
    vocrec.set('Key_Action_Items__c',keyActionItems );
    vocrec.set('Product_Name__c',productName );
    //vocrec.set('Platform__c',platform );
    //alert('platformName-->' + platformName);
    vocrec.set('Platform_Name__c',platformName);
    vocrec.set('Content_Links__c',fileUrl);
    
    vocrec.set('External_Links__c',inputValues);
    var purposeVal = getPurpose();
    vocrec.set('Purpose_of_this_VOC__c',purposeVal);
    vocrec.set('Product_Family__c',getProductFamilyValues());
    //console.log('--->');
    //console.log('--->'+ getSecGroupValue());
    vocrec.set('Security_Group__c',getSecGroupValue());
    vocrec.set('Sensitive__c',sensitive);
    // Added by Deb begins
    var queueId = '';
    var secGrp = getSecGroupValue();
    //alert('secGrp'+secGrp);
   // console.log(QueueList);
  //  console.log(secGrp);
      var assignedQueue = '';
      var assignedgroup = '';
      var SecuritygrpName  = '';
    $.each(QueueList, function(index,value){
   //     alert('Outside'+value.GroupId__c);
        if(value.GroupId__c == secGrp){
            assignedgroup = value.GroupId__c;
            assignedQueue = value.Queue_Id__c.trim();
            SecuritygrpName = value.Name;  
            secGroupName = value.Name;
        }
        
    });
   // alert('secGrp '+secGrp);
    if(status == 'Submitted') {
    if(assignedgroup == secGrp) {
            vocrec.set('OwnerId',assignedQueue);
            var secgrp = SecuritygrpName.replace("AeroVOC_","");
            var sec_grp = secgrp.replace("_"," ");
            vocrec.set('Security_Group__c',sec_grp);
        }
        else {
            vocrec.set('OwnerId','{!$Label.VOC_NON_Senstive}');  
            vocrec.set('OVOC_Queue_Id__c','{!$Label.VOC_NON_Senstive}');
        }
     }
    //getchatterGrpdetails(secGrp);
    // Added by Deb ends    
    if(status == 'Draft'){
        vocrec.set('Status__c',status);
        vocrec.set('Current_Tab__c',$('ul.create-tabs li.active a').html());
        if(VOCOVOCSelection == 'VOC')
            vocrec.set('VOC__c','VOC-DRAFT');
        else
            vocrec.set('VOC__c','OVOC-DRAFT');
    }else{
        vocrec.set('Status__c',status);
    }
    
    
    if(fileUploading == false){
        vocrec.set('Pre_Draft__c',false);
    }else if(fileUploading == true){
        //alert(recordStatus );
        if(recordStatus != 'Draft' && recordStatus != 'Submitted'){
            vocrec.set('Status__c','');
            vocrec.set('Pre_Draft__c',true);
        }else{
            vocrec.set('Pre_Draft__c',false);
            //alert('in here');
        }
    }
    
    if(draftRecordId == null || draftRecordId == ''){
        vocrec.create(function(error, result, event) {
            if(error == null){
                vocRecordId = result[0];
               
               /*var vocShareRec = new SObjectModel.Voice_of_Customer__Share();
               vocShareRec.set('ParentId',vocRecordId);
               vocShareRec.set('UserOrGroupId','{!$User.Id}');
               vocShareRec.set('AccessLevel','Read');
               vocShareRec.create(function(error, result, event) {
                   if(error == null){
                     //  console.log(result);
                   }
               });*/
                
                //alert('voc-->' + result[0]);
                               
                //create customers   
                //alert('size of list in insert-->' + listCustomers.length);             
                if(vocRecordId != null){
                    Visualforce.remoting.Manager.invokeAction(
                    '{!$RemoteAction.OVOC_Create_Controller.addCustomer}',
                    listCustomers,vocRecordId,
                    function(result, event) {
                        
                          //console.log(result);
                          if(event.type == 'Exception'){
                              $(".voc-loader").hide();
                           //   alert(event.message);
                          }else{
                               if(deleteFileList != ''){
                                OVOC_Create_Controller.deleteAttachments(deleteFileList, function(result,event){
                                    if(event.type == 'Exception'){
                                        //  alert(event.message);
                                        $(".voc-loader").hide();
                                    }else{
                                        if(status == 'Submitted'){
                                            if(sensitive == true) {
                                                getchatterGrpdetails(secGrp);
                                                getProductChatterList(); // Deb
                                            }
                                            $('#createContnet').addClass("hidden");
                                            $('#successContnet').removeClass("hidden");
                                            removeConfirmationOnTopNav = true;
                                            if(secGrp == null) {
                                              //  alert('inside null');
                                                $('#sharedChatter').addClass("hidden");
                                            }
                                            else {
                                            // alert('inside else');
                                                $('#sharedChatter').removeClass("hidden");
                                            }
                                            $(".voc-loader").hide();
                                        }else if(status == 'Draft'){
                                            if(navigateTo == ''){
                                                top.location="/apex/OVOC_MyVOC?type=draft";
                                            }
                                            else if(navigateTo == '/secur/logout.jsp'){
                                                top.location='/secur/logout.jsp';
                                            } 
                                            else{
                                                top.location='/apex/' + navigateTo;
                                            }
                                        }
                                    }
                                });
                                $(".voc-loader").hide();
                            }else{    
                                if(status == 'Submitted'){
                                    if(sensitive == true) {
                                        getchatterGrpdetails(secGrp);
                                        getProductChatterList(); 
                                    }
                                    $('#createContnet').addClass("hidden");
                                    $('#successContnet').removeClass("hidden");
                                    removeConfirmationOnTopNav = true;
                                    if(secGrp == null) {
                                      //  alert('inside null');
                                        $('#sharedChatter').addClass("hidden");
                                        getProductChatterList();
                                       // $('#sharedChatter').removeClass("hidden"); 
                                    }
                                    else {
                                     //alert('inside else');
                                        $('#sharedChatter').removeClass("hidden");
                                    }
                                    
                                    $(".voc-loader").hide();
                                }else if(status == 'Draft'){
                                    if(fileUploading == true){
                                        if(vocRecordId != null && vocRecordId != ''){       
                                            forcetkClient.create('Attachment', {
                                                "ParentId": vocRecordId,
                                                "Name": fileNameText,
                                                "Body": fileBody
                                            }, function(data) {
                                                  // console.log('file created-->' + data);
                                                   //alert('Success! Created ContentVersion ' + data.id);
                                                   
                                                   if(data.id != null){
                                                       top.location = '/apex/OVOC_Create?id='+ vocRecordId; 
                                                   }
                                                    
                                            },function(error) {
                                                //alert('in');
                                                //console.log('check error->' + error);
                                                   
                                                   if(error.statusText == "Created"){
                                                       top.location = '/apex/OVOC_Create?id='+ vocRecordId; 
                                                   }else{
                                                       alert(JSON.stringify(error));
                                                   }
                                            });
                                        }
                                         
                                    }else{
                                    
                                        if(navigateTo == ''){
                                            top.location = "/apex/OVOC_MyVOC?type=draft";
                                        }
                                        else if(navigateTo == '/secur/logout.jsp'){
                                            top.location ='/secur/logout.jsp';
                                        } 
                                        else{
                                            top.location='/apex/' + navigateTo;
                                        }
                                    }
                                }
                            }
                                
                          }
                    });
                 
                }
                
            }else{
              //  alert(error); 
                $(".voc-loader").hide();    // To Hide loader
            }
        //    $(".voc-loader").hide();    // To Hide loader
        });
    }else{
        //$(".voc-loader").show();    // To Show loader
        
        vocrec.set('Id',draftRecordId);
        vocrec.update(function(error, result, event) {
           if(error == null){
               vocRecordId = result[0];
               
               /*var vocShareRec = new vocShare();
               vocShareRec.set('ParentId',vocRecordId);
               vocShareRec.set('UserOrGroupId','{!$User.Id}');
               vocShareRec.set('AccessLevel','Read');
               vocShareRec.create(function(error, result, event) {
                   if(error == null){
                      // console.log(result);
                   }
               });*/
                         
               //Update customers                
               if(vocRecordId != null){
                    Visualforce.remoting.Manager.invokeAction(
                    '{!$RemoteAction.OVOC_Create_Controller.addCustomer}',
                    listCustomers,vocRecordId,
                    function(result, event) {
                      if(event.type == 'Exception'){
                        //  alert(event.message);
                      }else{
                          
                            
                            if(deleteFileList != ''){
                                OVOC_Create_Controller.deleteAttachments(deleteFileList, function(result,event){
                                    if(event.type == 'Exception'){
                                        //  alert(event.message);
                                    }else{
                                        if(status == 'Submitted'){
                                            if(sensitive == true) {
                                                getchatterGrpdetails(secGrp);
                                                getProductChatterList(); // Deb
                                            }
                                            $('#createContnet').addClass("hidden");
                                            $('#successContnet').removeClass("hidden");
                                            removeConfirmationOnTopNav = true;
                                            if(secGrp == null) {
                                            //    alert('inside null');
                                                $('#sharedChatter').addClass("hidden");
                                                getProductChatterList();
                                            }
                                            else {
                                            // alert('inside else');
                                                $('#sharedChatter').removeClass("hidden");
                                            }
                                        }else if(status == 'Draft'){
                                            if(navigateTo == ''){
                                                top.location="/apex/OVOC_MyVOC?type=draft";
                                            }
                                            else if(navigateTo == '/secur/logout.jsp'){
                                                top.location='/secur/logout.jsp';
                                            } 
                                            else{
                                                top.location='/apex/' + navigateTo;
                                            }
                                        }
                                    }
                                });
                            }else{    
                                if(status == 'Submitted'){
                                    if(sensitive == true) {
                                        getchatterGrpdetails(secGrp);
                                        getProductChatterList(); // Deb
                                    }
                                    $('#createContnet').addClass("hidden");
                                    $('#successContnet').removeClass("hidden");
                                    removeConfirmationOnTopNav = true;
                                    if(secGrp == null) {
                                      //  alert('inside null 2');
                                        $('#sharedChatter').addClass("hidden");
                                        getProductChatterList();
                                    }
                                    else {
                                    // alert('inside else 2');
                                        $('#sharedChatter').removeClass("hidden");
                                    }
                                }else if(status == 'Draft'){
                                    if(fileUploading == true){
                                        if(vocRecordId != null && vocRecordId != ''){       
                                            forcetkClient.create('Attachment', {
                                                "ParentId": vocRecordId,
                                                "Name": fileNameText,
                                                "Body": fileBody
                                            }, function(data) {
                                                  // console.log('file created-->' + data);
                                                   //alert('Success! Created ContentVersion ' + data.id);
                                                   
                                                   if(data.id != null){
                                                       top.location = '/apex/OVOC_Create?id='+ vocRecordId; 
                                                   }
                                                    
                                            },function(error) {
                                                //alert('in');
                                                //console.log('check error->' + error);
                                                   
                                                   if(error.statusText == "Created"){
                                                       top.location = '/apex/OVOC_Create?id='+ vocRecordId; 
                                                   }else{
                                                       alert(JSON.stringify(error));
                                                   }
                                            });
                                        }
                                         
                                    }else{
                                    
                                    if(navigateTo == ''){
                                        top.location="/apex/OVOC_MyVOC?type=draft";
                                    }
                                    else if(navigateTo == '/secur/logout.jsp'){
                                        top.location='/secur/logout.jsp';
                                    } 
                                    else{
                                        top.location='/apex/' + navigateTo;
                                    }
                                    }
                                }
                            }
                            
                      }  
                      //console.log(result);
                    });
                    
                    if(listDeleteCustomers.length > 0){
                        Visualforce.remoting.Manager.invokeAction(
                        '{!$RemoteAction.OVOC_Create_Controller.deleteCustomers}',
                        listDeleteCustomers,
                        function(result, event) {
                          if(event.type == 'Exception'){
                            //  alert(event.message);
                          }  
                          //console.log(result);
                        });
                        
                    }
            
                   
                     //$(".voc-loader").hide();    // To Hide loader
               }               
               
               
           }else{
              //  alert(error); 
                 $(".voc-loader").hide();    // To Hide loader
           }
       });
//       $(".voc-loader").hide();    // To Hide loader
    } 
//    $(".voc-loader").hide();    // To Hide loader
    return success;       
} 

/*$('#add_another_cust').click(function() {
    
    addCustomer();
    //alert(listCustomers);
    $('#customer_name').val('');
    $('#customer_name_Id').val('');
    $('#company_name').val('');
    $('#customer_email').val('');
    $('#customer_title').val('');
    
});*/
$('#neaxt_tab2').click(function(){
    addCustomer();
});

function customer(){
    this.Id = null; 
    this.Customer_Name__c = null;
    this.Company_Name__c = null;
    this.Primary_Customer_s_Email__c = null;
    this.Customer_s_Title_Role__c = null;
    this.VOC_Record__c = null;
    this.VOC_Account__c = null;
}

function addCustomer(){
    
    var cust = new customer();
    
    cust.Customer_Name__c = convertToHtml($('#customer_name').val());
    cust.Company_Name__c = convertToHtml($('#company_name').val());
    //alert('--->' + $('#company_name_Id').val());
    cust.VOC_Account__c = $('#company_name_Id').val();
    cust.Primary_Customer_s_Email__c = convertToHtml($('#customer_email').val());
    cust.Customer_s_Title_Role__c = convertToHtml($('#customer_title').val());  
            
    listCustomers.push(cust);
    //console.log(listCustomers);
    //alert(listCustomers[0]);
    
}

function getPurposeValues(){

    var purpose=[];
        
    $('#purposeOfVOC input:checked').each(function(){
        
        if($(this).attr('id') != 'otherCheckbox')
            purpose.push($(this).val());
    });
    
    if ( $('#otherTextbox').val() != '') { purpose.push($('#otherTextbox').val());    }
            
    return purpose;


/*    var purpose='';
           
    $('#purposeOfVOC input:checked').each(function(){
        
        if($(this).attr('id') != 'otherCheckbox')
            purpose += $(this).val() + ';';
    });
    
    return purpose + $('#otherTextbox').val();
    */
}

function getPurpose(){
    var purpose='';
           
    $('#purposeOfVOC input:checked').each(function(){
        
        if($(this).attr('id') != 'otherCheckbox')
            purpose += $(this).val() + ';';
    });
    
    return purpose + $('#otherTextbox').val();
}
   
function getProductFamilyValues(){
    var productFamilyList='';
           
    $('#product_family input:checked').each(function(){
        productFamilyList += $(this).val() + ';';
    });
    //alert('PF list -->' + productFamilyList);
    return productFamilyList;
}
var deleteFileList='';
function getDeletingFileIds(){
    deleteFileList='';
    var anyFileSelected = false;       
    $('#idDeleteFiles input:checked').each(function(){
        deleteFileList += $(this).val() + ';';
        //$(this).addClass('hidden');
        $('#idDeleteFiles div[name="'+ $(this).val() +'"]').addClass('hidden');
        anyFileSelected = true;
    });
    //alert('File list -->' + deleteFileList);
    if(anyFileSelected == false){
        $('#fileDelete_popup').modal({
            show:true,
            closeOnEscape: true
        });
        
    }
    //return fileList;
}
function getSecGroupValue(){
    var SecGroup = '';
   // alert('SecGroup--->' + SecGroup);
    SecGroup = $( "#securityGroup div input:checked" ).val();
   // alert(SecGroup);     
    
    //console.log(SecGroup);
    return SecGroup;
}



//         File Attachment

//  Upload file functionality
var maxStringSize = 15000000;    //Maximum String size is 6,000,000 characters
var maxFileSize = 9000000;      //After Base64 Encoding, this is the max file size //var maxFileSize = 4350000;  
var chunkSize = 950000;         //Maximum Javascript Remoting message size is 1,000,000 characters
var attachment;
var attachmentName;
var fileSize;
var positionIndex;
var doneUploading;
var attachmentId = '';
var fileIndex=0;
var fileCount;

/*function uploadFile(status) {
//var file = document.getElementById('add_file').files[0];
var file = document.getElementById('add_file').files[fileIndex];
if(file == undefined){
    
    file = document.getElementById('mob-attachment7').files[0];
    //alert('test--> in mob');
}
    //console.log(file);
    if(file != undefined) {
        if(file.size <= maxFileSize) {
            attachmentName = file.name;
            var fileReader = new FileReader();
            fileReader.onloadend = function(e) {
                attachment = window.btoa(this.result);  //Base 64 encode the file before sending it
                positionIndex=0;
                fileSize = attachment.length;
                //alert('file size' + fileSize);
                doneUploading = false;
                attachmentId = '';
                if(fileSize < maxStringSize) {
                    uploadAttachment(status);
                } else {
                    alert("Base 64 Encoded file is too large.  Maximum size is " + maxStringSize + " your file is " + fileSize + ".");
                }
            
            }
            fileReader.onerror = function(e) {
                
                alert("There was an error reading the file.  Please try again.");
            }
            fileReader.onabort = function(e) {
                
                alert("There was an error reading the file.  Please try again.");
            }
            
            fileReader.readAsBinaryString(file);  //Read the body of the file
        } else {
            alert("File must be under 4.3 MB in size.  Your file is too large.  Please try again.");
        }
    }     
}*/
 
/*function uploadAttachment(status) {

    var attachmentBody = "";
    if(fileSize <= positionIndex + chunkSize) {
        attachmentBody = attachment.substring(positionIndex);
        doneUploading = true;
        fileIndex = fileIndex+1;
    } else {
        //alert('positionIndex + chunkSize -->' + positionIndex + fileSize);
        attachmentBody = attachment.substring(positionIndex, positionIndex + chunkSize);
        //attachmentBody = attachment.substring(positionIndex, positionIndex + fileSize);
    }
    
    OVOC_Create_Controller.uploadAttachment(attachmentBody, attachmentName, vocRecordId, attachmentId, function(result, event) {
          if(event.type == 'exception') {
                //  alert(event.message);
          }else{
              attachmentId = result;
              if(attachmentId.substring(0,3) == '00P') {
                  if(doneUploading == true) {
                      if(fileIndex  < fileCount){
                         //alert('calling for next file-- fileIndex -->' + fileIndex ); 
                         
                         uploadFile(status);
                      }else{
                           uploadSuccess = true;
                           if(status == 'Submitted'){
                                
                               // getchatterGrpdetails(secGrp);
                                $('#createContnet').addClass("hidden");
                                $('#successContnet').removeClass("hidden");
                                var secGrp = getSecGroupValue();
                                if(secGrp == null) {
                                  //  alert('inside null');
                                    $('#sharedChatter').addClass("hidden");
                                }
                                else {
                                // alert('inside else');
                                    $('#sharedChatter').removeClass("hidden");
                                }
                            }else if(status == 'Draft'){
                                
                                top.location="/apex/OVOC_MyVOC?type=draft";
                            }
                        }
                  }else {
                        positionIndex += chunkSize;
                        uploadAttachment(status);
                  }
              }
          }
    },
    {buffer: true, escape: true, timeout: 120000});
    
}*/

$('#add_file').change(function(e){
    var message = 'You have selected following files:<br/><ul>';
    var inp = document.getElementById('add_file');
    //var inp = $(this);
    for (var i = 0; i < inp.files.length; ++i) {
      var name = inp.files.item(i).name;
      message += '<li>'+name+'</li>';
    }
    
    message += '</ul>';
    $('#filesSelected').html(message);
});
    
//    File Attachment
/*     Create VOC/OVOC End     */



//      Create 1-6 tick logic - Start

var tickedNumbers = [1];

var index = 1;
/*$( "a.create-next-btn").click(function (){
   // alert('next1');
    tickTheTabs();

});*/

/*$('.create-btn-back').click(function(){

    var clickedTab = $("ul.nav li.active a").html();
    clickedTab = clickedTab  + 1;
    //alert($("ul.nav li.active a").html());
    if(clickedTab == '1'){
        if(validateTab1VOCDetails('verify') == true){
            tickTheTabs();  
        }else{
            $("ul.nav li.active").removeClass('create-tick');
        }
    }else if(clickedTab == '3'){
        if(VOCOVOCSelection =='VOC' && validateTab3Purpose('verify') == true){
            tickTheTabs();  
        }else if(VOCOVOCSelection =='OVOC' && validateCustomers('verify') == true){
            tickTheTabs();  
        }else{
            $("ul.nav li.active").removeClass('create-tick');
        }
    }else if(clickedTab == '4'){
        if(validateTab4Hyp('verify') == true){
            tickTheTabs();  
        }else{
            $("ul.nav li.active").removeClass('create-tick');
        }
    }else if(clickedTab == '5'){
        if(validateTab5Fin('verify') == true){ 
            tickTheTabs();  
        }else{
            $("ul.nav li.active").removeClass('create-tick');
        }
    }else if(clickedTab == '2'){
        if(VOCOVOCSelection =='VOC' && validateCustomers('verify') == true){
            tickTheTabs();  
        }else if(VOCOVOCSelection =='OVOC' && validateTab3Purpose('verify') == true){
            tickTheTabs();  
        }
        else{
            $("ul.nav li.active").removeClass('create-tick');
        }
    }else if(clickedTab == '6'){
        if(validateTab6Product('verify') == true){ 
            tickTheTabs();  
        }else{
            $("ul.nav li.active").removeClass('create-tick');
        }
        
    }else if(clickedTab == '7'){
        if(validateTab7secGroup('verify') == true){ 
            tickTheTabs();  
        }else{
            $("ul.nav li.active").removeClass('create-tick');
        }
        
    }
    
    
    //tickTheTabs();
    $( "li.active" ).after(function(){
        //alert('dddd');
        keepActiveTab();
    });
});*/

$( "ul.nav" ).click( function(){
    var clickedTab = $("ul.nav li.active a").html();
    var currentClickedTab = $(this).html();
    //alert(currentClickedTab);
    if(clickedTab == '1'){
        if(validateTab1VOCDetails('verify') == true){
            tickTheTabs();  
        }else{
            $("ul.nav li.active").removeClass('create-tick');
        }
    }else if(clickedTab == '3'){
        
        if(VOCOVOCSelection =='VOC' && validateTab3Purpose('verify') == true){
            tickTheTabs();  
        }else if(VOCOVOCSelection =='OVOC' && validateCustomers('verify') == true){
            tickTheTabs();
              
        }else{
            $("ul.nav li.active").removeClass('create-tick');
        }
    }else if(clickedTab == '4'){
        if(validateTab4Hyp('verify') == true){
            tickTheTabs();  
        }else{
            $("ul.nav li.active").removeClass('create-tick');
        }
    }else if(clickedTab == '5'){
        if(validateTab5Fin('verify') == true){ 
            tickTheTabs();  
        }else{
            $("ul.nav li.active").removeClass('create-tick');
        }
    }else if(clickedTab == '2'){
        
        if(VOCOVOCSelection =='VOC' && validateCustomers('verify') == true){
            tickTheTabs();  
            
        }else if(VOCOVOCSelection =='OVOC' && validateTab3Purpose('verify') == true){
            tickTheTabs();  
        }
        else{
            $("ul.nav li.active").removeClass('create-tick');
        }
    }else if(clickedTab == '6'){
        if(validateTab6Product('verify') == true){ 
            tickTheTabs();  
        }else{
            $("ul.nav li.active").removeClass('create-tick');
        }
        
    }else if(clickedTab == '7'){
        if(validateTab7secGroup('verify') == true){ 
            tickTheTabs();  
        }else{
            $("ul.nav li.active").removeClass('create-tick');
        }
        
    }
    
    
    //tickTheTabs();
    $( "li.active" ).after(function(){
        //alert('dddd');
        keepActiveTab();
    });
});



function keepActiveTab(){
    
    var activeNumber = $("li.active").attr('id'); 
    //alert('hi' + activeNumber );
    if(activeNumber == 'create-li-tab1'){
        $("li.active a").html('1');
    }else if(activeNumber == 'create-li-tab2'){
        $("li.active a").html('2');
    }else if(activeNumber == 'create-li-tab3'){
        $("li.active a").html('3');
    }else if(activeNumber == 'create-li-tab4'){
        $("li.active a").html('4');
    }else if(activeNumber == 'create-li-tab5'){
        $("li.active a").html('5');
    }else if(activeNumber == 'create-li-tab6'){
        $("li.active a").html('6');
    }
    
}

function tickTheTabs(){
    //alert('sdsdsd');
    var statusBool = true;
    var tabNumber = $( "li.active a" ).html();
    for(i = 0;i<tickedNumbers.length-1;i++){
        if(tickedNumbers[i] == tabNumber){
            statusBool = false; 
            break;
        }
    }
    if(statusBool == true)
        tickedNumbers[tickedNumbers.length -1] = tabNumber;
         
    index++;
           
    for(i=0; i < tickedNumbers.length; i++){
        
        if(tickedNumbers[i] == 1){
            $('#create-li-tab1').addClass('create-tick');
           
        }
        else if(tickedNumbers[i] == 2){
            $('#create-li-tab2').addClass('create-tick');
            
        }else if(tickedNumbers[i] == 3){
            $('#create-li-tab3').addClass('create-tick');
            
        }else if(tickedNumbers[i] == 4){
            $('#create-li-tab4').addClass('create-tick');
            
        }else if(tickedNumbers[i] == 5){
            $('#create-li-tab5').addClass('create-tick');
            
        }else if(tickedNumbers[i] == 6){
            $('#create-li-tab6').addClass('create-tick');
            
           
        }else if(tickedNumbers[i] == 7){
            $('#create-li-tab7').addClass('create-tick');
            
           
        }
    }
}
    
//     Create 1-6 tick logic - End    //


/*  Cursor on First Tab  */


$("#create-li-tab1").click( function() {
    setTimeout(  function() {$("#voc_title").focus() } , 100 );
});

$("#create-li-tab2").click( function() {
    setTimeout(  function() {$("#customer_name").focus() } , 100 );
});

$("#create-li-tab4").click( function() {
    setTimeout(  function() {$("#voc_hypothesis").focus() } , 100 );
});

$("#create-li-tab5").click( function() {
    setTimeout(  function() {$("#financial_implications").focus() } , 100 );
});

$("#create-li-tab6").click( function() {
    setTimeout(  function() {$("#product_name").focus() } , 100 );
});

/*  Cursor on First Tab - END  */

/*       Next Navigation - Tabs      */
function openTab2() {    
    setTimeout(  function() {$("#customer_name").focus() } , 100 );
    
    if(VOCOVOCSelection == 'VOC'){
        if(listCustomers.length > 0){
            $("#create-tab2").addClass('active');
            $("#create-tab1").removeClass('active');
            $("#create-li-tab2").addClass('active');
            $("#create-li-tab1").removeClass('active');
        }else{
            $("#create-tab2-sub1").addClass('active');
            $("#create-tab1").removeClass('active');
            $("#create-li-tab2").addClass('active');
            $("#create-li-tab1").removeClass('active');
        }
    }else if(VOCOVOCSelection == 'OVOC'){
        $("#create-tab3").addClass('active');
        $("#create-tab1").removeClass('active');
        $("#create-li-tab2").addClass('active');
        $("#create-li-tab1").removeClass('active');
    } 
}

function openTab2SubTab1() { 
    $(".voc-loader").show();
    setTimeout(function(){$(".voc-loader").hide()}, 1000);
    
    if(VOCOVOCSelection == 'VOC'){   
        $("#create-tab2-sub1").addClass('active');
        $("#create-tab2").removeClass('active');
        
        //$("#create-li-tab3").addClass('active');
        //$("#create-li-tab2").removeClass('active');
    }else if(VOCOVOCSelection == 'OVOC'){
        $("#create-tab2-sub1").addClass('active');
        $("#create-tab4").removeClass('active');
        $("#create-li-tab3").addClass('active');
        //$("#create-li-tab2").removeClass('active');
    }
}

function openTab3() { 
    $(".voc-loader").show();
    setTimeout(function(){$(".voc-loader").hide()}, 1000);
    
    var size = listCustomers.length;
    if(VOCOVOCSelection == 'VOC'){  
        
        //alert(size);
        //alert(listCustomers[size-1].Customer_Name__c);
        //alert(listCustomers[size-1].VOC_Account__c);
        //alert(listCustomers[size-1].Primary_Customer_s_Email__c );alert(listCustomers[size-1].Customer_s_Title_Role__c);
        if(size > 0 ){
            if(listCustomers[size-1].Customer_Name__c == undefined || listCustomers[size-1].VOC_Account__c == undefined || listCustomers[size-1].Primary_Customer_s_Email__c == undefined || listCustomers[size-1].Customer_s_Title_Role__c == undefined){
                editClicked=true;
                editIndex=size-1;
                addAnoterCustomerClicked = false;
                $('#incompleteCustomer_popup').modal({
                    show:true,
                    closeOnEscape: true
                });
                $("#create-tab2-sub1").addClass('active');
                $("#create-tab2").removeClass('active');
            }else{
             
                $("#create-tab3").addClass('active');
                $("#create-tab2").removeClass('active');
                $("#create-tab2-sub1").removeClass('active');
                $("#create-li-tab3").addClass('active');
                $("#create-li-tab2").removeClass('active');
            }
            
        }else{
             
            $("#create-tab3").addClass('active');
            $("#create-tab2").removeClass('active');
            $("#create-tab2-sub1").removeClass('active');
            $("#create-li-tab3").addClass('active');
            $("#create-li-tab2").removeClass('active');
        }
    }else if(VOCOVOCSelection == 'OVOC'){
    
        if(size > 0 ){
            if(listCustomers[size-1].Customer_Name__c == undefined || listCustomers[size-1].VOC_Account__c == undefined || listCustomers[size-1].Primary_Customer_s_Email__c == undefined || listCustomers[size-1].Customer_s_Title_Role__c == undefined){
                $('#incompleteCustomer_popup').modal({
                    show:true,
                    closeOnEscape: true
                });
                $("#create-tab2-sub1").addClass('active');
                $("#create-tab2").removeClass('active');
            }else{
                $("#create-tab4").addClass('active');
                $("#create-tab2").removeClass('active');
                $("#create-tab2-sub1").removeClass('active');
                $("#create-li-tab4").addClass('active');
                $("#create-li-tab3").removeClass('active');
            }
        }else{
            $("#create-tab4").addClass('active');
            $("#create-tab2").removeClass('active');
            $("#create-tab2-sub1").removeClass('active');
            $("#create-li-tab4").addClass('active');
            $("#create-li-tab3").removeClass('active');
        }
    }
}



function openTab4() { 
    $(".voc-loader").show();
    setTimeout(function(){$(".voc-loader").hide()}, 1000);
    
    setTimeout(  function() {$("#voc_hypothesis").focus() } , 100 );
    
    if(VOCOVOCSelection == 'VOC'){
        $("#create-tab4").addClass('active');
        $("#create-tab3").removeClass('active');
        $("#create-li-tab4").addClass('active');
        $("#create-li-tab3").removeClass('active');
    }else if(VOCOVOCSelection == 'OVOC'){
        if(listCustomers.length > 0){
            $("#create-tab2").addClass('active');
            $("#create-tab3").removeClass('active');
            $("#create-li-tab3").addClass('active');
            $("#create-li-tab2").removeClass('active');
        }else{
            $("#create-tab2-sub1").addClass('active');
            $("#create-tab3").removeClass('active');
            $("#create-li-tab3").addClass('active');
            $("#create-li-tab2").removeClass('active');
        }
    }
}

function openTab5() {  
    $(".voc-loader").show();
    setTimeout(function(){$(".voc-loader").hide()}, 1000);
    setTimeout(  function() {$("#financial_implications").focus() } , 100 );
      
    $("#create-tab5").addClass('active');
    $("#create-tab4").removeClass('active');
    $("#create-li-tab5").addClass('active');
    $("#create-li-tab4").removeClass('active');
}

function openTab6() {  
    $(".voc-loader").show();
    setTimeout(function(){$(".voc-loader").hide()}, 1000);
    setTimeout(  function() {$("#product_name").focus() } , 100 );
      
    $("#create-tab6").addClass('active');
    $("#create-tab5").removeClass('active');
    $("#create-li-tab6").addClass('active');
    $("#create-li-tab5").removeClass('active');
}

function openTab7() {  
    $(".voc-loader").show();
    setTimeout(function(){$(".voc-loader").hide()}, 1000);
      
    $("#create-tab7").addClass('active');
    $("#create-tab6").removeClass('active');
    $("#create-li-tab7").addClass('active');
    $("#create-li-tab6").removeClass('active');
}

/*   Back Navigation - Tabs     */
function backTab2() {    
    $(".voc-loader").show();
    setTimeout(function(){$(".voc-loader").hide()}, 1000);

    if(VOCOVOCSelection == 'VOC'){ 
        $("#create-tab1").addClass('active');
        $("#create-tab2").removeClass('active');
        $("#create-tab2-sub1").removeClass('active');
        $("#create-li-tab1").addClass('active');
        $("#create-li-tab2").removeClass('active');
    }else if(VOCOVOCSelection == 'OVOC'){
        $("#create-tab3").addClass('active');
        $("#create-tab2").removeClass('active');
        $("#create-tab2-sub1").removeClass('active');
        $("#create-li-tab2").addClass('active');
        $("#create-li-tab3").removeClass('active');
    }
}

function backTab2SubTab1(){
    $(".voc-loader").show();
    setTimeout(function(){$(".voc-loader").hide()}, 1000);
    
    /*if(VOCOVOCSelection == 'VOC'){ 
        $("#create-li-tab1").addClass('active');
        $("#create-li-tab2").removeClass('active');
        $("#create-tab1").addClass('active');
        $("#create-tab2-sub1").removeClass('active');
    }else if(VOCOVOCSelection == 'OVOC'){ 
        $("#create-li-tab2").addClass('active');
        $("#create-li-tab3").removeClass('active');
        $("#create-tab3").addClass('active');
        $("#create-tab2-sub1").removeClass('active');
    }*/
    
    if(VOCOVOCSelection == 'VOC'){ 
        $("#create-li-tab1").addClass('active');
        $("#create-li-tab2").removeClass('active');
        $("#create-tab1").addClass('active');
        $("#create-tab2").removeClass('active');
    }else if(VOCOVOCSelection == 'OVOC'){ 
        $("#create-li-tab2").addClass('active');
        $("#create-li-tab3").removeClass('active');
        $("#create-tab3").addClass('active');
        $("#create-tab2").removeClass('active');
    }
}

function backTab3() {   
    $(".voc-loader").show();
    setTimeout(function(){$(".voc-loader").hide()}, 1000);
    /*if(VOCOVOCSelection == 'VOC'){ 
        $("#create-tab2-sub1").addClass('active');
        $("#create-tab3").removeClass('active');
        $("#create-li-tab2").addClass('active');
        $("#create-li-tab3").removeClass('active');
    }else if(VOCOVOCSelection == 'OVOC'){
        $("#create-tab1").addClass('active');
        $("#create-tab3").removeClass('active');
        $("#create-li-tab1").addClass('active');
        $("#create-li-tab2").removeClass('active');
    }*/
    
    if(VOCOVOCSelection == 'VOC'){ 
        $("#create-tab2").addClass('active');
        $("#create-tab3").removeClass('active');
        $("#create-li-tab2").addClass('active');
        $("#create-li-tab3").removeClass('active');
    }else if(VOCOVOCSelection == 'OVOC'){
        $("#create-tab1").addClass('active');
        $("#create-tab3").removeClass('active');
        $("#create-li-tab1").addClass('active');
        $("#create-li-tab2").removeClass('active');
    }
}

function backTab4() {  
    $(".voc-loader").show();
    setTimeout(function(){$(".voc-loader").hide()}, 1000);
    
    if(VOCOVOCSelection == 'VOC'){   
        $("#create-tab3").addClass('active');
        $("#create-tab4").removeClass('active');
        $("#create-li-tab3").addClass('active');
        $("#create-li-tab4").removeClass('active');
    }else if(VOCOVOCSelection == 'OVOC'){ 
        $("#create-tab2").addClass('active');
        $("#create-tab4").removeClass('active');
        $("#create-li-tab3").addClass('active');
        $("#create-li-tab4").removeClass('active');
    }
}

function backTab5() {
    $(".voc-loader").show();
    setTimeout(function(){$(".voc-loader").hide()}, 1000);
        
    $("#create-tab4").addClass('active');
    $("#create-tab5").removeClass('active');
    $("#create-li-tab4").addClass('active');
    $("#create-li-tab5").removeClass('active');
}

function backTab6() {
    $(".voc-loader").show();
    setTimeout(function(){$(".voc-loader").hide()}, 1000);
        
    $("#create-tab5").addClass('active');
    $("#create-tab6").removeClass('active');
    $("#create-li-tab5").addClass('active');
    $("#create-li-tab6").removeClass('active');
}

function backTab7() { 
    $(".voc-loader").show();
    setTimeout(function(){$(".voc-loader").hide()}, 1000);
       
    $("#create-tab6").addClass('active');
    $("#create-tab7").removeClass('active');
    $("#create-li-tab6").addClass('active');
    $("#create-li-tab7").removeClass('active');
}
/*       Next Navigation - Tabs End     */

function closepop() {
    $('#create-tab1-pop').popover('hide');
    $('#create-tab2-pop').popover('hide');
    $('#create-tab4-popVH').popover('hide');
    $('#create-tab7-pop').popover('hide');
    $('#voc-hypo-examples').popover('hide');
    $('#voc-keytake-examples').popover('hide');
    $('#voc-financial-examples').popover('hide');
    $('#voc-keyaction-examples').popover('hide');
    $('#create-voccoll-pop').popover('hide');
    
    $('.voc-overlay').hide();
}
var QueueList;

$(document).ready( function(){
        var ProArray;
        var prochatterlist;
        PopulateProdFamilyChatter();
        //code for working of - Home Screen shortcut
        if (("standalone" in window.navigator) && window.navigator.standalone) {
        // For iOS Apps
        $('a').on('click', function(e){
              e.preventDefault();
              var new_location = $(this).attr('href');
              if (new_location != undefined && new_location.substr(0, 1) != '#' && $(this).attr('data-method') == undefined){
                window.location = new_location;
              }
            });
        }
        //alert(navigator.userAgent);
   //     if (navigator.userAgent.match(/IE\/7\.0/) || navigator.userAgent.match(/IE\/8\.0/) || navigator.userAgent.match(/MSIE\/9\.0/)) {
         if ( $('html').is('.ie8') || $('html').is('.ie7') || $('html').is('.ie9') ) {
            $('#ieAttach').removeClass('hidden');
            //alert('ie');
        }else{
            $('#otherBrowserAttach').removeClass('hidden');
            //alert('other');
        }

        $(".voc-loader").hide();
        /* External links hidden onload */
        $('#ExternalLinkDiv').hide(600);
        
    /* Loader function onclick start */
        $("#voc-create").click( function() { 
        // $(".voc-loader").show();
        });
        
        // My VOC Page
        $("#voc-myvoc").click( function() { 
            $(".voc-loader").show(); 
        });
        
        // Search Page
        $("#voc-search").click( function() { 
            $(".voc-loader").show();
        });
        
        // Help Page
        $("#voc-help").click( function() {
            $(".voc-loader").show();
        });    
    /* Loader function onclick ends */
    
    /* Sensitivity  Slider Start  */
     $('#ex2').slider({ handle : 'round', selection: 'before', tooltip: 'hide' });
    
    $('#ex2').on('slideStop', function() {
        var c_sliderVal = $('#ex2').slider('getValue');
   
    
         if( c_sliderVal == 2 ){    // If YES selected

            $('#securityGroup').show();
            $('#secGroupLabel').show();
            sensitive = true;
        } else {    // If NO selected

            $('#securityGroup').hide();
            $('#secGroupLabel').hide();
            sensitive = false;
        }
        
    });
    /* Sensitivity Slider End     */

    /* VOC-OVOC Slider Start  */
     $('#ex1').slider({ handle : 'round', selection: 'before', tooltip: 'hide' });
    
    $('#ex1').on('slideStop', function() {
        var c_sliderVal = $('#ex1').slider('getValue');
   
    
         if( c_sliderVal == 2 ){

            $( "span[name='voc-ovoc-name']" ).html('OVOC');
            recordTypeId = '{!$Label.OVOC_RecType_Id}';
            VOCOVOCSelection = 'OVOC';
            $('li#create-li-tab3 a').attr('href','#create-tab2');
            $('li#create-li-tab2 a').attr('href','#create-tab3');
        } else{
        
            $( "span[name='voc-ovoc-name']" ).html('VOC');
            recordTypeId = '{!$Label.VOC_RecType_Id}';
            VOCOVOCSelection = 'VOC';
            $('li#create-li-tab3 a').attr('href','#create-tab3');
            $('li#create-li-tab2 a').attr('href','#create-tab2');
        }
        
    });
        /* VOC-OVOC Slider End     */
        
        
    var mDate = new Date();
    var mDay = mDate.getDate();
    var mMonth = mDate.getMonth() + 1;
    var mYear = mDate.getFullYear();
    
    var todayDate = mYear +"-"+mMonth+"-"+mDay;
//    $("#voc_date_mob").attr( "value", todayDate );
    
//    alert("val-- " + $("#voc_date_mob").val() + " --- " + todayDate  );
    
    
    var userAgent = navigator.userAgent; 
    if (userAgent.match(/IEMobile\/10\.0/)) {
   //     alert("IE--> " +userAgent );
        $("#voc_date_mob").hide();
        $("#voc_date").show();
        $(".mob_attach").hide();
        
    } else if (userAgent.match(/(iPad|iPhone|iPod|Mobile|Android|BlackBerry)/g)) { 
        browser = false; //   alert( userAgent );
        $("#voc_date_mob").show();
        $("#voc_date").hide();
        $(".mob_attach").show();
     
    }
    else {   
        browser = true;
        $("#voc_date_mob").hide();
        $("#voc_date").show();
        $(".mob_attach").hide();
    }
    
    $("#voc_date_mob").click( function() {
//        $("#voc_date_mob").attr("type", "date");
    });
    
    $("#voc_date_mob").change( function () {
 //       alert("val--> " + $("#voc_date_mob").val() );
    });
    

    $("#final-ok-id").click(function() {
    
        // Tab 6
        //Commented, as Platform made as free text 
        /*var p11 = $('#platformId').val();
        var p1 = $('#platform').val();
        
        if ( p1 != '' && p11 == '' )  {
             setTimeout(function(){ 
                $("ul.create-tabs li").removeClass('active');
                $("div.create-tabcontent .tab-pane").removeClass('active');
                $("#create-li-tab6").addClass('active');
                $("#create-tab6").addClass('active');    
                
                $("#platform").focus() }, 100);
        
        }*/
        
    
        //Tab 5
        var fi1 = $('#financial_implications').val();
        var kai1 = $('#key_action_items').val();
        if ( kai1 == '' ) {
            setTimeout(function(){ 
                $("ul.create-tabs li").removeClass('active');
                $("div.create-tabcontent .tab-pane").removeClass('active');
                $("#create-li-tab5").addClass('active');
                $("#create-tab5").addClass('active');    
                
                $("#key_action_items").focus() }, 100);
        }
        if ( fi1 == '' ) {
            setTimeout(function(){ 
                $("ul.create-tabs li").removeClass('active');
                $("div.create-tabcontent .tab-pane").removeClass('active');
                $("#create-li-tab5").addClass('active');
                $("#create-tab5").addClass('active');    
                
                $("#financial_implications").focus() }, 100);
        } 
        
        // Tab 4
        var vh1 = $('#voc_hypothesis').val();
        var kt1 = $('#key_takeaways').val();
        
        if ( kt1 == '' ) {
            setTimeout(function(){ 
                $("ul.create-tabs li").removeClass('active');
                $("div.create-tabcontent .tab-pane").removeClass('active');
                $("#create-li-tab4").addClass('active');
                $("#create-tab4").addClass('active');    
                
                $("#key_takeaways").focus() }, 100);
        }
        if ( vh1 == '' ) {
            setTimeout(function(){ 
                $("ul.create-tabs li").removeClass('active');
                $("div.create-tabcontent .tab-pane").removeClass('active');
                $("#create-li-tab4").addClass('active');
                $("#create-tab4").addClass('active');    
                
                $("#voc_hypothesis").focus() }, 100);
        }
        
        // Tab 2
        var n1 = $('#customer_name').val();
        var cn1 = $('#company_name').val();
        var cn11 = $('#company_name_Id').val();
        var ct1 = $('#customer_title').val();
        var ce1 = $('#customer_email').val();
        
        if ( ce1 == '' || emailAddressValidation(ce1) == false ) {
            setTimeout(function(){ 
                $("ul.create-tabs li").removeClass('active');
                $("div.create-tabcontent .tab-pane").removeClass('active');
                $("#create-li-tab2").addClass('active');
            //    $("#create-tab2").addClass('active'); 
                $("#create-tab2-sub1").addClass('active'); 
                   
                $("#customer_email").focus() }, 100);
        }
        if ( ct1 == '' ) {
            setTimeout(function(){ 
                $("ul.create-tabs li").removeClass('active');
                $("div.create-tabcontent .tab-pane").removeClass('active');
                $("#create-li-tab2").addClass('active');
                //$("#create-tab2").addClass('active');    
                $("#create-tab2-sub1").addClass('active');
                $("#customer_title").focus() }, 100);
        } 
        if ( cn1 == '' || cn11 == '' ) {
            setTimeout(function(){ 
                $("ul.create-tabs li").removeClass('active');
                $("div.create-tabcontent .tab-pane").removeClass('active');
                $("#create-li-tab2").addClass('active');
                //$("#create-tab2").addClass('active');    
                $("#create-tab2-sub1").addClass('active');
                $("#company_name").focus() }, 100);
        }
        if ( n1 == '' ) {
            setTimeout(function(){ 
                $("ul.create-tabs li").removeClass('active');
                $("div.create-tabcontent .tab-pane").removeClass('active');
                $("#create-li-tab2").addClass('active');
                //$("#create-tab2").addClass('active');    
                $("#create-tab2-sub1").addClass('active');
                $("#customer_name").focus() }, 100);
        }
        
        // Tab 1
        var h1 = $('#hon_lead').val();
        var h11 = $('#HonleadId').val();
        var d1 = $('#voc_date').val();
        var dd1 = $('#voc_date_mob').val();
        var t1 = $('#voc_title').val();
        
        
        if ( h1 == '' ) {
            setTimeout(function(){ 
                $("ul.create-tabs li").removeClass('active');
                $("div.create-tabcontent .tab-pane").removeClass('active');
                $("#create-li-tab1").addClass('active');
                $("#create-tab1").addClass('active');    
                
                $("#hon_lead").focus();
            }, 100);
        }
        if ( browser == false ) { 
            if ( dd1 == '' ) {
                setTimeout(function(){ 
                    $("ul.create-tabs li").removeClass('active');
                    $("div.create-tabcontent .tab-pane").removeClass('active');
                    $("#create-li-tab1").addClass('active');
                    $("#create-tab1").addClass('active');    
    
                    $("#voc_date_mob").focus() ;
                }, 100);
            }
        } else {
            if ( d1 == '' ) {
                setTimeout(function(){ 
                    $("ul.create-tabs li").removeClass('active');
                    $("div.create-tabcontent .tab-pane").removeClass('active');
                    $("#create-li-tab1").addClass('active');
                    $("#create-tab1").addClass('active');    
    
                    $("#voc_date").focus() ;
                }, 100);
            } 
        } 
        if ( t1 == '' ) {
            
            setTimeout(function(){ 
                $("ul.create-tabs li").removeClass('active');
                $("div.create-tabcontent .tab-pane").removeClass('active');
                $("#create-li-tab1").addClass('active');
                $("#create-tab1").addClass('active');    
                
                $("#voc_title").focus();    
            }, 100);
            
        }
           
    });

    $("#valid-ok-id").click(function() {
    
         // Tab 6 
        var p11 = $('#platformId').val();
        var p1 = $('#platform').val();
        
        if ( p1 != '' && p11 == '' )  {
             setTimeout(function(){  $("#platform").focus() }, 100);
        }
        
    
        //Tab 5
        var fi1 = $('#financial_implications').val();
        var kai1 = $('#key_action_items').val();
        if ( kai1 == '' ) {
            setTimeout(function(){  $("#key_action_items").focus() }, 100);
        }
        if ( fi1 == '' ) {
            setTimeout(function(){  $("#financial_implications").focus() }, 100);
        } 
        
        // Tab 4
        var vh1 = $('#voc_hypothesis').val();
        var kt1 = $('#key_takeaways').val();
        
        if ( kt1 == '' ) {
            setTimeout(function(){  $("#key_takeaways").focus() }, 100);
        }
        if ( vh1 == '' ) {
            setTimeout(function(){ $("#voc_hypothesis").focus() }, 100);
        }
        
        // Tab 2
        var n1 = $('#customer_name').val();
        var cn1 = $('#company_name').val();
        var cn11 = $('#company_name_Id').val();
        var ct1 = $('#customer_title').val();
        var ce1 = $('#customer_email').val();
        
        if ( ce1 == '' || emailAddressValidation(ce1) == false ) {
            setTimeout(function(){  $("#customer_email").focus() }, 100);
        }
        if ( ct1 == '' ) {
            setTimeout(function(){  $("#customer_title").focus() }, 100);
        } 
        if ( cn1 == '' || cn11 == '' ) {
            setTimeout(function(){  $("#company_name").focus() }, 100);
        }
        if ( n1 == '' ) {
            setTimeout(function(){   $("#customer_name").focus() }, 100);
        }
        
        // Tab 1
        var h1 = $('#hon_lead').val();
        var h11 = $('#HonleadId').val();
        var d1 = $('#voc_date').val();
        var dd1 = $('#voc_date_mob').val();
        var t1 = $('#voc_title').val();
        
        
        if ( h1 == '' ) {
            setTimeout(function(){   $("#hon_lead").focus();  }, 100);
        }
        if ( browser == false ) { 
            if ( dd1 == '' ) {
                setTimeout(function(){  $("#voc_date_mob").focus() ;    }, 100);
            } 
        } else {
            if ( d1 == '' ) {
                setTimeout(function(){  $("#voc_date").focus() ;    }, 100);
            } 
        } 
        if ( t1 == '' ) {
            setTimeout(function(){  $("#voc_title").focus() ;    }, 100);
            
        }
           
    });

    $('.voc-overlay').click(function() {
        closepop();
        $('.voc-overlay').hide();
    });
    
    
    $(".modal-close-btn").click( function() {

        $('.collapse').removeClass("in");
        $('.panel .panel-heading').removeClass('panel-red');
        
    });
    
     //    Understanding the Market
    $(".pop-understanding").click( function() {
        if ( $('.p-understanding').hasClass("in")) {
            $('.p-understanding.collapse').removeClass("in");
            $('.pop-understanding').removeClass('panel-red');
        } else {
            $('.collapse').removeClass("in");
            $('.pop-accordion .panel .panel-heading').removeClass('panel-red');
            $('.p-understanding.collapse').addClass("in");
            $('.pop-understanding').addClass('panel-red');
        }
    });
    
     //    Sizing the Market
    $(".pop-sizing").click( function() {
        if ( $('.p-sizing').hasClass("in")) {
            $('.p-sizing.collapse').removeClass("in");
            $('.pop-sizing').removeClass('panel-red');
        } else {
            $('.collapse').removeClass("in");
            $('.pop-accordion .panel .panel-heading').removeClass('panel-red');
            $('.p-sizing.collapse').addClass("in");
            $('.pop-sizing').addClass('panel-red');
        }
    });
    
     //    Segmenting the Market
    $(".pop-segmenting").click( function() {
        if ( $('.p-segmenting').hasClass("in")) {
            $('.p-segmenting.collapse').removeClass("in");
            $('.pop-segmenting').removeClass('panel-red');
        } else {
            $('.collapse').removeClass("in");
            $('.pop-accordion .panel .panel-heading').removeClass('panel-red');
            $('.p-segmenting.collapse').addClass("in");
            $('.pop-segmenting').addClass('panel-red');
        }
    });
    
     //    Understanding Segment Needs
    $(".pop-needs").click( function() {
        if ( $('.p-needs').hasClass("in")) {
            $('.p-needs.collapse').removeClass("in");
            $('.pop-needs').removeClass('panel-red');
        } else {
            $('.collapse').removeClass("in");
            $('.pop-accordion .panel .panel-heading').removeClass('panel-red');
            $('.p-needs.collapse').addClass("in");
            $('.pop-needs').addClass('panel-red');
        }
    });
    
     //    Quantified Customer Needs
    $(".pop-quantified").click( function() {
        if ( $('.p-quantified').hasClass("in")) {
            $('.p-quantified.collapse').removeClass("in");
            $('.pop-quantified').removeClass('panel-red');
        } else {
            $('.collapse').removeClass("in");
            $('.pop-accordion .panel .panel-heading').removeClass('panel-red');
            $('.p-quantified.collapse').addClass("in");
            $('.pop-quantified').addClass('panel-red');
        }
    });
    
     //    Concept Testing 
    $(".pop-concept").click( function() {
        if ( $('.p-concept').hasClass("in")) {
            $('.p-concept.collapse').removeClass("in");
            $('.pop-concept').removeClass('panel-red');
        } else {
            $('.collapse').removeClass("in");
            $('.pop-accordion .panel .panel-heading').removeClass('panel-red');
            $('.p-concept.collapse').addClass("in");
            $('.pop-concept').addClass('panel-red');
        }
    });
    
    // Mobile view Modal
    $(".understandingMarket").click( function() {
        if ( $('.understandingMarket-coll ').hasClass("in")) {
            $('.understandingMarket-coll .collapse').removeClass("in");
            $('.understandingMarket').removeClass('panel-red');
        } else {
            $('.collapse').removeClass("in");
            $('#search-accordion .panel .panel-heading').removeClass('panel-red');
            $('.understandingMarket-coll.collapse').addClass("in");
            $('.understandingMarket').addClass('panel-red');
        }
    });
      
    //    Populate Purpose,Product Family Start     //
    populatePurpose();
    populateProductFamily();
    populateSecurityGroup(null);
    getQueryParameterAndPouplateFields();
    //    Populate Purpose, Product Family End    //    
    
    // Populate sensitive group start //
    //populateSecurityGroup();
    
    //populate sensitive group ends //
    $('#securityGroup').hide(); 
    $('#secGroupLabel').hide();   
    //    Date Picker
    $(function () {
        
        $('#voc_date').datepicker({ 
            dateFormat: 'DD, MM d, yy'
            
        }).datepicker("setDate", "0");
       
    });
    //    Date Picker
    
    /*   Tab 4 - VOC hypo pop     */
    $('#voc-hypo-examples').popover({
        html: 'true', 
        title : '<div class="popover-title-img"><b>VOC Hypothesis Examples</b><a onclick="closepop()" class="popover-close pull-right"></a></div>', 
        content : '<div class="popover-examples">'+
            '<div id="hypo-pop1" class="popExDivs"><b class="pop-subhdr">Understanding the Market</b><br></br><span class="red-col">Bad:</span> We believe market dynamics could be shifting favorably.<br></br>' +
            '<span class="green-col">Good:</span> We would like to confirm our assumption that Southwest Airlines plans to continue to shift flights to less trafficked airports and assess the implications of that strategy to potential future sales of eTaxi.<br></br></div>' +
            '<div id="hypo-pop2" class="popExDivs"><b class="pop-subhdr">Sizing the Market</b><br></br><span class="red-col">Bad:</span> We believe the size of the APU aftermarket is shrinking.<br></br>' +
            '<span class="green-col">Good:</span> We plan to assess the impact of new aircraft acquisition on American`s fleet composition and our assumption that reduced reliance on older aircraft will reduce the total available market for aftermarket APUs.<br></br></div>' +
            '<div id="hypo-pop3" class="popExDivs"><b class="pop-subhdr">Segmenting the Market</b><br></br><span class="red-col">Bad:</span> Since this customer flies large aircraft, we want their opinions on FANS for transoceanic routes.<br></br>' +
            '<span class="green-col">Good:</span> We would like to investigate our assumed correlation between purchase of long range aircraft and frequent use of these aircraft on transoceanic routes.<br></br></div>' +
            '<div id="hypo-pop4" class="popExDivs"><b class="pop-subhdr">Understanding Segment Needs</b><br></br><span class="red-col">Bad:</span> Since this customer flies large aircraft, we want their opinions on a few prestige products that will improve their standing with their ownership and management.<br></br>' +
            '<span class="green-col">Good:</span> We are interested in the perceived value of prestige and social standing within the "Latest & Greatest" segment and if value calculators typically presented with avionics upgrades are beneficial for this group.<br></br></div>' +
            '<div id="hypo-pop5" class="popExDivs"><b class="pop-subhdr">Quantified Customer Needs</b><br></br><span class="red-col">Bad:</span> We want to learn how much fuel this customer expects to save by buying and installing our new APU.<br></br>' +
            '<span class="green-col">Good:</span> We would like to determine if the customer uses fuel savings estimates as a purchase criterion for new APUs, and if so, what metrics new hardware upgrades must meet for them to purchase the upgrade.<br></br></div>' +                  
            '<div id="hypo-pop6" class="popExDivs"><b class="pop-subhdr">Concept Testing</b><br></br><span class="red-col">Bad:</span> We want to ensure the customer likes the smaller concept.<br></br>'+
            '<span class="green-col">Good:</span> We want to verify that the customer prefers the smaller concept to the medium and large concepts, and if so, to test the customer`s willingness to pay the additional 10% price increase required for development of the product</div>' +
            '</div>'
    });
    
    $('#voc-hypo-examples').on('shown.bs.popover', function () {
        $('.voc-overlay').show();
        $('.popover').addClass('popover-border-css');
        $('.popover-title').addClass('popover-title-css');  
        
        var popEx = getPurposeValues();
        
        if ( ( popEx.length == 0 ) || ( popEx.length == 1 && popEx[0] != "Understanding the Market" && popEx[0] != "Sizing the Market"
                    && popEx[0] != "Segmenting the Market" && popEx[0] != "Understanding Segment Needs" 
                    && popEx[0] != "Quantified Customer Needs" && popEx[0] != "Concept Testing" ) )  {
            $('#hypo-pop1').show();
            $('#hypo-pop2').show();
            $('#hypo-pop3').show();
            $('#hypo-pop4').show();
            $('#hypo-pop5').show();          
            $('#hypo-pop6').show();
            
        } else {
            jQuery.each( popEx, function( i, val ) {
            
                if ( val == "Understanding the Market") { $('#hypo-pop1').show()    }
                if ( val == "Sizing the Market") { $('#hypo-pop2').show()    }
                if ( val == "Segmenting the Market") { $('#hypo-pop3').show()    }
                if ( val == "Understanding Segment Needs") { $('#hypo-pop4').show()    }
                if ( val == "Quantified Customer Needs") { $('#hypo-pop5').show()    }
                if ( val == "Concept Testing") { $('#hypo-pop6').show()    }
             
                
            });
        }        
    });
    
    $("#voc-hyposmall-examples").click( function() {
        var popEx = getPurposeValues();
                
        if ( ( popEx.length == 0 ) || ( popEx.length == 1 && popEx[0] != "Understanding the Market" && popEx[0] != "Sizing the Market"
                    && popEx[0] != "Segmenting the Market" && popEx[0] != "Understanding Segment Needs" 
                    && popEx[0] != "Quantified Customer Needs" && popEx[0] != "Concept Testing" ) )  {
                    
            $('#hypo-pop1s').show();
            $('#hypo-pop2s').show();
            $('#hypo-pop3s').show();
            $('#hypo-pop4s').show();
            $('#hypo-pop5s').show();          
            $('#hypo-pop6s').show();
            
        } else {
            jQuery.each( popEx, function( i, val ) {
                if ( val == "Understanding the Market") { $('#hypo-pop1s').show()    }
                if ( val == "Sizing the Market") { $('#hypo-pop2s').show()    }
                if ( val == "Segmenting the Market") { $('#hypo-pop3s').show()    }
                if ( val == "Understanding Segment Needs") { $('#hypo-pop4s').show()    }
                if ( val == "Quantified Customer Needs") { $('#hypo-pop5s').show()    }
                if ( val == "Concept Testing") { $('#hypo-pop6s').show()    }
             
                
            });
        }       
    });
    
    /*   Tab 4 - Key Takeaways     */
    $('#voc-keytake-examples').popover({
        html: 'true', 
        title : '<div class="popover-title-img"><b>VOC Key Takeaways Examples</b><a onclick="closepop()" class="popover-close pull-right"></a></div>', 
        content : '<div class="popover-examples">'+
            '<div id="key-pop1" class="popExDivs"><b class="pop-subhdr">Understanding the Market</b><br></br><span class="red-col">Bad:</span> Market dynamics look positive with 75% growth a realistic expectation.<br></br>' +
            '<span class="green-col">Good:</span> Southwest Airlines, an excellent example of the regional mid-price carrier segment, is shifting flights to less trafficked airports through at least 2020, such as through increased use of Dallas Love field in the DFW metroplex.  Assuming this successfully mitigates taxi time as Southwest hopes, this segment will continue to be unattractive for eTaxi for at least the next five years.<br></br></div>' +
            '<div id="key-pop2" class="popExDivs"><b class="pop-subhdr">Sizing the Market</b><br></br><span class="red-col">Bad:</span> We anticipate a shrinking market for the 331 series APU.<br></br>' +
            '<span class="green-col">Good:</span> American Airlines provided its forward-looking fleet composition data to us during our interviews, which showed that the -400 series aircraft will be reduced from its current 90 aircraft to only 30 by 2018.  This is a 66% reduction in available market size for the 331 series APU at AAL.<br></br></div>' +
            '<div id="key-pop3" class="popExDivs"><b class="pop-subhdr">Segmenting the Market</b><br></br><span class="red-col">Bad:</span> This customer flies large aircraft on transoceanic routes and is aware of FANS.<br></br>' +
            '<span class="green-col">Good:</span> Although all aircraft in Meridian`s fleet are transoceanic-capable, only half of the fleet (3 aircraft) is actually used on transoceanic routes.  We need to either reconsider our assumption that large aircraft fleet customers are interested in FANS upgrades for their entire fleets or refine our segmentation to model customers dedicating specific aircraft to specific routes.<br></br></div>' +
            '<div id="key-pop4" class="popExDivs"><b class="pop-subhdr">Understanding Segment Needs</b><br></br><span class="red-col">Bad:</span> This customer flies large aircraft and seems more concerned about the prestige of our products than the pricing.<br></br>' +
            '<span class="green-col" >Good:</span> Although Western behaves like other members of the "Latest and Greatest" segment by considering product prestige, they also consider pricing carefully and rely heavily on our avionics value calculators to prioritize upcoming upgrades across their fleet.<br></br></div>' +
            '<div id="key-pop5" class="popExDivs"><b class="pop-subhdr">Quantified Customer Needs</b><br></br><span class="red-col">Bad:</span> Customer believes APU replacement can be a fuel-saver.<br></br>' +
            '<span class="green-col">Good:</span> Customer treats upgrade opportunities providing weight savings identically regardless of the component and shared the value calculator they use for evaluating upgrades.  With fuel at $5/gallon and 300 annual flight hours (their working assumptions), a one pound weight savings equates to approximately $6100 capital expense.  Their value calculator is attached to this VOC record.<br></br></div>' +  
            '<div id="key-pop6" class="popExDivs"><b class="pop-subhdr">Concept Testing</b><br></br><span class="red-col">Bad:</span> The customer responded favorably to the smaller concept.<br></br>'+
            '<span class="green-col">Good:</span> The customer responded favorably to the small concept and seemed uninterested in the larger concept even before potential price points were discussed.  The proposed 10% higher price point for the smaller concept was not an issue for this customer, and even higher pricing may be possible since the smaller concept frees rack space needed for other hardware.  Suggest additional research emphasizing additional rack space and testing price points higher than the 10% worked with this customer.</div>'+
            '</div>'
    });
    
    $('#voc-keytake-examples').on('shown.bs.popover', function () {
        $('.voc-overlay').show();
        $('.popover').addClass('popover-border-css');
        $('.popover-title').addClass('popover-title-css');  
        
        var popKeyEx = getPurposeValues();
        
        if ( popKeyEx.length == 0 || ( popKeyEx.length == 1 && popKeyEx[0] != "Understanding the Market" && popKeyEx[0] != "Sizing the Market"
                    && popKeyEx[0] != "Segmenting the Market" && popKeyEx[0] != "Understanding Segment Needs" 
                    && popKeyEx[0] != "Quantified Customer Needs" && popKeyEx[0] != "Concept Testing" ) ) {
            $('#key-pop1').show();
            $('#key-pop2').show();
            $('#key-pop3').show();
            $('#key-pop4').show();
            $('#key-pop5').show();          
            $('#key-pop6').show();
            
        } else {
            jQuery.each( popKeyEx, function( i, val ) {

                if ( val == "Understanding the Market") { $('#key-pop1').show()    }
                if ( val == "Sizing the Market") { $('#key-pop2').show()    }
                if ( val == "Segmenting the Market") { $('#key-pop3').show()    }
                if ( val == "Understanding Segment Needs") { $('#key-pop4').show()    }
                if ( val == "Quantified Customer Needs") { $('#key-pop5').show()    }
                if ( val == "Concept Testing") { $('#key-pop6').show()    }
            });
        }
        
    });
    
    $("#voc-keytakesmall-examples").click( function() {
        var popEx = getPurposeValues();
                
        if ( ( popEx.length == 0 ) || ( popEx.length == 1 && popEx[0] != "Understanding the Market" && popEx[0] != "Sizing the Market"
                    && popEx[0] != "Segmenting the Market" && popEx[0] != "Understanding Segment Needs" 
                    && popEx[0] != "Quantified Customer Needs" && popEx[0] != "Concept Testing" ) )  {
                    
            $('#key-pop1s').show();
            $('#key-pop2s').show();
            $('#key-pop3s').show();
            $('#key-pop4s').show();
            $('#key-pop5s').show();          
            $('#key-pop6s').show();
            
        } else {
            jQuery.each( popEx, function( i, val ) {
                if ( val == "Understanding the Market") { $('#key-pop1s').show()    }
                if ( val == "Sizing the Market") { $('#key-pop2s').show()    }
                if ( val == "Segmenting the Market") { $('#key-pop3s').show()    }
                if ( val == "Understanding Segment Needs") { $('#key-pop4s').show()    }
                if ( val == "Quantified Customer Needs") { $('#key-pop5s').show()    }
                if ( val == "Concept Testing") { $('#key-pop6s').show()    }
             
            });
        }       
    });
    
     /*   Tab 5 - Financial Implications     */
    $('#voc-financial-examples').popover({
        html: 'true', 
        title : '<div class="popover-title-img"><b>VOC Financial Implications Examples</b><a onclick="closepop()" class="popover-close pull-right" style="margin-top: -14px;"></a></div>', 
        content : '<div class="popover-examples">'+
            '<div id="fin-pop1" class="popExDivs"><b class="pop-subhdr">Understanding the Market</b><br></br><span class="red-col">Bad:</span> This interview confirms our belief that market dynamics are shifting.<br></br>' +
            '<span class="green-col">Good:</span> Customer interview revealed the airline`s strategy to increased use of less trafficked airports, particularly in metro DFW, where they will redirect 40% of their current DFW flights to Dallas Love Field over the next 3 - 5 years.  This could have positive implications for sale of avionics products, especially navigational hardware, but a potentially negative impact to eTaxi, with further research on that topic required.<br></br></div>' +
            '<div id="fin-pop2" class="popExDivs"><b class="pop-subhdr">Sizing the Market</b><br></br><span class="red-col">Bad:</span> The customer thinks highly of our APU offerings and told us to expect continued robust demand for years to come.<br></br>' +
            '<span class="green-col">Good:</span> Customer interview revealed their intent to continue to purchase new aircraft to drive their fleet composition from its current 18% twin engine fuel efficient to 42% or more by 2018 through replacement of Boeing 747-400s with Boeing 757s.  Allowing for expected route addition and commensurate fleet growth over the next four years, this equates to retirement of approximately 72 747s and purchase of 86 757s.<br></br></div>' +
            '<div id="fin-pop3" class="popExDivs"><b class="pop-subhdr">Segmenting the Market</b><br></br><span class="red-col">Bad:</span> Since this customer has three business aircraft in their fleet, all with ranges of 4000 miles or more, it can be assumed that they are flying transoceanic routes regularly.<br></br>' +
            '<span class="green-col">Good:</span> Focus Groups showed that 20% of the interviewees did value quantifiable benefits but did not share the prestige needs of the "Latest & Greatest" segment.  This is potentially a new segment of Pragmatists, which will be added to the APUs business aircraft segmentation model.<br></br></div>' +
            '<div id="fin-pop4" class="popExDivs"><b class="pop-subhdr">Understanding Segment Needs</b><br></br><span class="red-col">Bad:</span> These customers seem to want products that will improve their standing with their ownership and management.<br></br>' +
            '<span class="green-col">Good:</span> Customers repeatedly emphasized their need for dispatch reliability and time to destination without a need for prestige, placing them in the Pragmatists segment.  We need to ensure that quantifiable tools to allow these customers to translate specific financial benefits to their route and fleet usage patterns are included in our marketing materials for this segment.<br></br></div>' +
            '<div id="fin-pop5" class="popExDivs"><b class="pop-subhdr">Quantified Customer Needs</b><br></br><span class="red-col">Bad:</span> Customer indicated that the estimated fuel savings would be sufficient to upgrade most of their fleet in the years to come.<br></br>' +
            '<span class="green-col">Good:</span> The customer indicated a fuel burn cost of $25,000 per flight hour and estimates that each pound saved with lighter equipage reduces this by 0.25% with an assumed $5 per gallon fuel cost.  Since they use their aircraft for approximately 350 flight hours per year, the proposed 2 lbs. weight reduction for the new APU equates to an annual fuel savings of $43,750, or $437K over its estimated 10 year life for this customer.<br></br></div>' +   
            '<div id="fin-pop6" class="popExDivs"><b class="pop-subhdr">Concept Testing</b><br></br><span class="red-col">Bad:</span> The customer clearly preferred the smaller concept to the larger proposal.<br></br>'+
            '<span class="green-col">Good:</span> Although 78% of the customers interviewed preferred the smaller concept, only 10% of these customers maintained that preference when coupled to the $90K price increase required for its development.  Therefore, the concept appeals to less than 10% of the addressable market and is not likely to generate returns sufficient to justify its continued development.</div>'+
            '</div>'
    });
    
    $('#voc-financial-examples').on('shown.bs.popover', function () {
        $('.voc-overlay').show();
        $('.popover').addClass('popover-border-css');
        $('.popover-title').addClass('popover-title-css');  
        
        var popFinanceEx = getPurposeValues();
        
        if ( popFinanceEx.length == 0 || ( popFinanceEx.length == 1 && popFinanceEx[0] != "Understanding the Market" && popFinanceEx[0] != "Sizing the Market"
                    && popFinanceEx[0] != "Segmenting the Market" && popFinanceEx[0] != "Understanding Segment Needs" 
                    && popFinanceEx[0] != "Quantified Customer Needs" && popFinanceEx[0] != "Concept Testing" )  ) {
            $('#fin-pop1').show();
            $('#fin-pop2').show();
            $('#fin-pop3').show();
            $('#fin-pop4').show();
            $('#fin-pop5').show();          
            $('#fin-pop6').show();
            
        } else {
            jQuery.each( popFinanceEx, function( i, val ) {

                if ( val == "Understanding the Market") { $('#fin-pop1').show()    }
                if ( val == "Sizing the Market") { $('#fin-pop2').show()    }
                if ( val == "Segmenting the Market") { $('#fin-pop3').show()    }
                if ( val == "Understanding Segment Needs") { $('#fin-pop4').show()    }
                if ( val == "Quantified Customer Needs") { $('#fin-pop5').show()    }
                if ( val == "Concept Testing") { $('#fin-pop6').show()    }
            });
        }
    });
    
    $("#voc-financesmall-examples").click( function() {
        var popEx = getPurposeValues();
                
        if ( ( popEx.length == 0 ) || ( popEx.length == 1 && popEx[0] != "Understanding the Market" && popEx[0] != "Sizing the Market"
                    && popEx[0] != "Segmenting the Market" && popEx[0] != "Understanding Segment Needs" 
                    && popEx[0] != "Quantified Customer Needs" && popEx[0] != "Concept Testing" ) )  {
                    
            $('#fin-pop1s').show();
            $('#fin-pop2s').show();
            $('#fin-pop3s').show();
            $('#fin-pop4s').show();
            $('#fin-pop5s').show();          
            $('#fin-pop6s').show();
            
        } else {
            jQuery.each( popEx, function( i, val ) {
                if ( val == "Understanding the Market") { $('#fin-pop1s').show()    }
                if ( val == "Sizing the Market") { $('#fin-pop2s').show()    }
                if ( val == "Segmenting the Market") { $('#fin-pop3s').show()    }
                if ( val == "Understanding Segment Needs") { $('#fin-pop4s').show()    }
                if ( val == "Quantified Customer Needs") { $('#fin-pop5s').show()    }
                if ( val == "Concept Testing") { $('#fin-pop6s').show()    }
             
            });
        }       
    });
    

     /*   Tab 5 - Key Action Items     */
    $('#voc-keyaction-examples').popover({
        html: 'true', 
        title : '<div class="popover-title-img"><b>VOC Key Action Items Examples</b><a onclick="closepop()" class="popover-close pull-right"></a></div>', 
        content : '<div class="popover-examples">'+
            '<div id="act-pop1" class="popExDivs"><b class="pop-subhdr">Understanding the Market</b><br></br><span class="red-col">Bad:</span> We believe market dynamics could be shifting favorably.<br></br>' +
            '<span class="green-col">Good:</span> We would like to confirm our assumption that Southwest Airlines plans to continue to shift flights to less trafficked airports and assess the implications of that strategy to potential future sales of eTaxi.<br></br></div>' +
            '<div id="act-pop2" class="popExDivs"><b class="pop-subhdr">Sizing the Market</b><br></br><span class="red-col">Bad:</span> We anticipate a shrinking market for the 331 series APU.<br></br>' +
            '<span class="green-col">Good:</span> American Airlines provided its forward-looking fleet composition data to us during our interviews, which showed that the -400 series aircraft will be reduced from its current 90 aircraft to only 30 by 2018.  This is a 66% reduction in available market size for the 331 series APU at AAL.<br></br></div>' +
            '<div id="act-pop3" class="popExDivs"><b class="pop-subhdr">Segmenting the Market</b><br></br><span class="red-col">Bad:</span> Since this customer has three business aircraft in their fleet, all with ranges of 4000 miles or more, it can be assumed that they are flying transoceanic routes regularly.<br></br>' +
            '<span class="green-col">Good:</span> Focus Groups showed that 20% of the interviewees did value quantifiable benefits but did not share the prestige needs of the "Latest & Greatest" segment.  This is potentially a new segment of Pragmatists, which will be added to the APUs business aircraft segmentation model.<br></br></div>' +
            '<div id="act-pop4" class="popExDivs"><b class="pop-subhdr">Understanding Segment Needs</b><br></br><span class="red-col">Bad:</span> This customer flies large aircraft and seems more concerned about the prestige of our products than the pricing.<br></br>' +
            '<span class="green-col">Good:</span> Although Western behaves like other members of the "Latest and Greatest" segment by considering product prestige, they also consider pricing carefully and rely heavily on our avionics value calculators to prioritize upcoming upgrades across their fleet.<br></br></div>' +
            '<div id="act-pop5" class="popExDivs"><b class="pop-subhdr">Quantified Customer Needs</b><br></br><span class="red-col">Bad:</span> Customer indicated that the estimated fuel savings would be sufficient to upgrade most of their fleet in the years to come.<br></br>' +
            '<span class="green-col">Good:</span> The customer indicated a fuel burn cost of $25,000 per flight hour and estimates that each pound saved with lighter equipage reduces this by 0.25% with an assumed $5 per gallon fuel cost.  Since they use their aircraft for approximately 350 flight hours per year, the proposed 2 lbs. weight reduction for the new APU equates to an annual fuel savings of $43,750, or $437K over its estimated 10 year life for this customer.<br></br></div>' +  
            '<div id="act-pop6" class="popExDivs"><b class="pop-subhdr">Concept Testing</b><br></br><span class="red-col">Bad:</span> The customer clearly preferred the smaller concept to the larger proposal.<br></br>'+
            '<span class="green-col">Good:</span> Although 78% of the customers interviewed preferred the smaller concept, only 10% of these customers maintained that preference when coupled to the $90K price increase required for its development.  Therefore, the concept appeals to less than 10% of the addressable market and is not likely to generate returns sufficient to justify its continued development.</div>'+
            '</div>'
    });
    
    $('#voc-keyaction-examples').on('shown.bs.popover', function () {
        $('.voc-overlay').show();
        $('.popover').addClass('popover-border-css');
        $('.popover-title').addClass('popover-title-css');  
        
        var popKeyActEx = getPurposeValues();
        
        if ( popKeyActEx.length == 0 || ( popKeyActEx.length == 1 && popKeyActEx[0] != "Understanding the Market" && popKeyActEx[0] != "Sizing the Market"
                    && popKeyActEx[0] != "Segmenting the Market" && popKeyActEx[0] != "Understanding Segment Needs" 
                    && popKeyActEx[0] != "Quantified Customer Needs" && popKeyActEx[0] != "Concept Testing" )  ) {
            $('#act-pop1').show();
            $('#act-pop2').show();
            $('#act-pop3').show();
            $('#act-pop4').show();
            $('#act-pop5').show();          
            $('#act-pop6').show();
            
        } else {
            jQuery.each( popKeyActEx, function( i, val ) {

                if ( val == "Understanding the Market") { $('#act-pop1').show()    }
                if ( val == "Sizing the Market") { $('#act-pop2').show()    }
                if ( val == "Segmenting the Market") { $('#act-pop3').show()    }
                if ( val == "Understanding Segment Needs") { $('#act-pop4').show()    }
                if ( val == "Quantified Customer Needs") { $('#act-pop5').show()    }
                if ( val == "Concept Testing") { $('#act-pop6').show()    }
            });
        }
        
    });
    
    $("#voc-keyactionsmall-examples").click( function() {
        var popEx = getPurposeValues();
                
        if ( ( popEx.length == 0 ) || ( popEx.length == 1 && popEx[0] != "Understanding the Market" && popEx[0] != "Sizing the Market"
                    && popEx[0] != "Segmenting the Market" && popEx[0] != "Understanding Segment Needs" 
                    && popEx[0] != "Quantified Customer Needs" && popEx[0] != "Concept Testing" ) )  {
                    
            $('#act-pop1s').show();
            $('#act-pop2s').show();
            $('#act-pop3s').show();
            $('#act-pop4s').show();
            $('#act-pop5s').show();          
            $('#act-pop6s').show();
            
        } else {
            jQuery.each( popEx, function( i, val ) {
                if ( val == "Understanding the Market") { $('#act-pop1s').show()    }
                if ( val == "Sizing the Market") { $('#act-pop2s').show()    }
                if ( val == "Segmenting the Market") { $('#act-pop3s').show()    }
                if ( val == "Understanding Segment Needs") { $('#act-pop4s').show()    }
                if ( val == "Quantified Customer Needs") { $('#act-pop5s').show()    }
                if ( val == "Concept Testing") { $('#act-pop6s').show()    }
             
            });
        }       
    });
    
    /*     Voc CollectionCode     */             
    $('#create-voccoll-pop').popover({
        html: 'true', 
        title : '<div class="popover-title-img"><b>VOC or OVOC Collections</b><a onclick="closepop()" class="popover-close pull-right"></a></div>', 
        content : 'VOC Collections are designed to group highly related O/VOC records.  For example, if you plan to save VOC findings on the same topic conducted at three different customer sites as three discrete records, grouping them into a single VOC Collection will help you and others find all three records in the future.'
    });
    
    $('#create-voccoll-pop').on('shown.bs.popover', function () {
        $('.voc-overlay').show();
        $('.popover').addClass('popover-border-css');
        $('.popover-title').addClass('popover-title-css'); 
    });
    
    
    /*     Popover Code     */             
    $('#create-tab1-pop').popover({
        html: 'true', 
        title : '<div class="popover-title-img"><b>VOC or OVOC</b><a onclick="closepop()" class="popover-close pull-right"></a></div>', 
        content : 'The primary difference between VOC and Observational VOC (OVOC) is the level of Honeywell input and participation.<br/><br/>In <b>VOC</b>, Honeywell employees provide significant input, usually in the form of input questions or prompts.<br/><br/>For <b>OVOC</b>, an opportunity to observe customers is arranged and Honeywell employees observe quietly, without prompting, questioning or interrupting customer(s), to observe their natural, real life, real-time interaction with a product or service'
    });
        
    $('#create-tab1-pop').on('shown.bs.popover', function () {
        $('.voc-overlay').show();
        $('.popover').addClass('popover-border-css');
        $('.popover-title').addClass('popover-title-css');  
    });
    
    /*     Tab 7     */             
    $('#create-tab7-pop').popover({
        html: 'true', 
        title : '<div class="popover-title-img"><b>Sensitive Information</b><a onclick="closepop()" class="popover-close pull-right"></a></div>', 
        content : 'Classifying VOC records as Sensitive limits viewing the data to a single Honeywell CBT - for example, Boeing VOC classified as sensitive can not be viewed by Airbus or any other CBT'
    });
        
    $('#create-tab7-pop').on('shown.bs.popover', function () {
        $('.voc-overlay').show();
        $('.popover').addClass('popover-border-css');
        $('.popover-title').addClass('popover-title-css');  
    });
    
    //Tab2 popover
    $('#create-tab2-pop').popover({
        html: 'true', 
        title : '<div class="popover-title-img"><b>Adding More Customers</b><a onclick="closepop()" class="popover-close pull-right"></a></div>', 
        content : 'At least one customer is required, if you need to add more, just click on the <b>"Add Another Customer"</b> button to save your inputs and reset the form to allow additional inputs as needed.'
    });
        
    $('#create-tab2-pop').on('shown.bs.popover', function () {
        $('.popover').addClass('popover-border-css');
        $('.popover-title').addClass('popover-title-css');  
        $('.voc-overlay').show();
    });
    
    //Tab4 popovers
    $('#create-tab4-popVH').popover({
        html: 'true', 
//        title : '<div><b><img src="{!URLFOR($Resource.VOC_Phase2_Test,'images/popover-icon.png')}">VOC Hypothesis Examples</b><a href=""><div class="popover-close"><img src="{!URLFOR($Resource.VOC_Phase2_Test,'images/popover-close.png')}"></div></a></div>', 
        title : '<div class="popover-title-img"><b>VOC Hypothesis Examples</b><a onclick="closepop()" class="popover-close pull-right"></a></div>', 
        content : 'At least one customer is required, if you need to add more, just click on the <b>"Add Another Customer"</b> button to save your inputs and reset the form to allow additional inputs as needed'
    });
        
    $('#create-tab4-popVH').on('shown.bs.popover', function () {
        $('.popover').addClass('popover-border-css');
        $('.popover-title').addClass('popover-title-css');  
        $('.voc-overlay').show();
    });
    
    
    /*     End Popover Code     */
    
    
    /*     Switch code     */
    $("[name='my-checkbox']").bootstrapSwitch();
    $('div.bootstrap-switch').addClass('switch-dimensions');
    $('.bootstrap-switch-handle-on').html('');
    $('.bootstrap-switch-handle-off').html('');
    
    
    $('input[name="my-checkbox"]').bootstrapSwitch('state',false);
    $('#voc-ovoc-switch .bootstrap-switch').on('switchChange.bootstrapSwitch', function(event, state) {
   //     var statusofVOC = $('input[name="my-checkbox"]').bootstrapSwitch('state');
           
         //  console.log(" voc ovoc --> " + state.value);
   
        if(state.value == true){
            $( "span[name='voc-ovoc-name']" ).html('OVOC');
            recordTypeId = '{!$Label.OVOC_RecType_Id}';
            VOCOVOCSelection = 'OVOC';
            $('li#create-li-tab3 a').attr('href','#create-tab2');
            $('li#create-li-tab2 a').attr('href','#create-tab3');
        }else{
            $( "span[name='voc-ovoc-name']" ).html('VOC');
            recordTypeId = '{!$Label.VOC_RecType_Id}';
            VOCOVOCSelection = 'VOC';
            $('li#create-li-tab3 a').attr('href','#create-tab3');
            $('li#create-li-tab2 a').attr('href','#create-tab2');
        }
    });
    
    
    /*-----Sensitive ------*/
        $("[name='sensetive-check']").bootstrapSwitch();
        $('div.bootstrap-switch').addClass('switch-dimensions');
        $('.bootstrap-switch-handle-on').html('');
        $('.bootstrap-switch-handle-off').html('');
        $('input[name="sensetive-check"]').bootstrapSwitch('state',false);
        
        $('#sensitivity-switch .bootstrap-switch').on('switchChange.bootstrapSwitch', function(event, state) {
        //    var statusSensetive = $('input[name="sensetive-check"]').bootstrapSwitch('state');
        
          // console.log(" sensitive --> " + state.value);
        
            if( state.value== true){
                //$("#sensitiveInfo").show();
                $('#securityGroup').show();
                $('#secGroupLabel').show();
                sensitive = true;
            }else{
                //$("#sensitiveInfo").hide();
                $('#securityGroup').hide();
                $('#secGroupLabel').hide();
                sensitive = false;
            }
        });
    /*     Switch code End    */
    
    //Set Security group as disabled by default
    //$( "#securityGroup div input" ).attr('disabled',true);
    
    
    /*    Hide Other textbox    */
    $('#otherTextbox').hide();  
    /*    Hide Other textbox End    */
    
    
    /* get QueueList */
    getOueueList();
  //  console.log('QueueList-->' + QueueList);
    
});

/*     Other field working - Start     */
$('#otherCheckbox').on('click',function(){
    if($('#otherCheckbox').is(':checked')){
        $('#otherLabel').hide();
        $('#otherTextbox').show();
    }
    else{
        $('#otherTextbox').hide();
        $('#otherTextbox').val('');  
        $('#otherLabel').show();
    }

});    
/     Other field working - End     */

//function to change the chararacters if name contains &amp;
function replaceName(id){
    
    var nameEntered = $('#'+id).val();
    if(nameEntered.indexOf("amp;") > -1){
        //$('#'+id).val(nameEntered.replace('amp;',''));
        var tt = nameEntered.replace(/amp;/g,"");
        $('#'+id).val(tt);
    }
}
    
/*    Start - Honeywell Lead, Platform Autocomplete    */
function getDataForAutoComplete(inputFieldId, resultFieldId, objectName){
    
    var Objects;
    $('#'+ inputFieldId ).addClass('ui-autocomplete-loading');
    //alert('dddddd');
    $('[id$='+inputFieldId+']').autocomplete({
    minLength: 2,
    source: function(request, response) {
                //alert('in method call');
                queryTerm = request.term;
                if(objectName == 'Platform'){
                    OVOC_Create_Controller.searchPlatforms(request.term, function(result, event){
                        if(event.type == 'exception') {
                            //  alert(event.message);
                        } else {
                             Objects= result;
                             response(Objects);
                             if(result[0] == ''){
                                 $('#'+ resultFieldId ).val('');
                             }
                        }
                    });
                
                }
                if(objectName == 'hon_lead') {
                    OVOC_Create_Controller.searchHoneywellLead(request.term, function(result, event){
                        if(event.type == 'exception') {
                            //  alert(event.message);
                        } else {
                             Objects= result;
                             response(Objects);
                             if(result[0] == ''){
                             
                                 $('#'+ resultFieldId ).val('');
                             }
                        }
                    });    
                }  
                if(objectName == 'Account'){
                    OVOC_Create_Controller.searchVOCAccounts(request.term, function(result, event){
                        if(event.type == 'exception') {
                            //  alert(event.message);
                        } else {
                             Objects= result;
                             response(Objects);
                             if(result[0] == ''){
                                 alert('ddd');
                                 $('#'+ resultFieldId ).val('');
                             }
                        }
                    });
                
                }                               
           },
    focus: function( event, ui ) {
            $('[id$='+inputFieldId+']').val( ui.item.Name );
            return false;
            },
    select: function( event, ui ) {
                $('[id$='+inputFieldId+']').val( ui.item.Name );
                $('[id$='+resultFieldId+']').val( ui.item.Id );
                return false;
            },
     }).data( "ui-autocomplete" )._renderItem = function( ul, item ) {
        
        var entry = "<a>" + item.Name;
        
        // check for & in names
        /*if(entry.indexOf("amp;") > -1){
            entry = entry.replace("amp;","");
            //console.log('entry-->'+ entry );
        }*/
        entry = entry + "</a>";
        entry = entry.replace(queryTerm, "<b>" + queryTerm + "</b>");
       // console.log('entry-->'+ entry );
        return $( "<li></li>" )
            .data( "ui-autocomplete-item", item )
            .append( entry )
            .appendTo( ul );
    };
    $('#'+ inputFieldId ).removeClass('ui-autocomplete-loading');
}
/*    End- Account, Contact, Platform Autocomplete    */


/*     Populate Purpose of VOC     */
function populatePurpose() {
    var purposeValues;
    var vocPurposePiklist = '';
    var vocPurposeOther = '';
    OVOC_Create_Controller.getVOCPurpose(function(result, event){
        if(event.type == 'exception') {
            //  alert(event.message);
        } else {
            purposeValues= result;
            if(purposeValues != null){
                $.each( purposeValues , function(index, value){
                                    
                    vocPurposePiklist += '<div class="col-xs-12 col-sm-12 col-md-12"><input name="purpose" type="checkbox" value="'+ value + '"><span>' + value + '</span></input></div>';
                });
                           
                $('#purposeOfVOC').prepend(vocPurposePiklist);
            }
        }
    });
}

//     Populate Purpose of VOC 
//product_family

/*     Populate Product Family Start     */
function populateProductFamily() {
    var listProductFamily = '';
    var productFamily = '';
    OVOC_Create_Controller.getProductFamily(function(result, event){
        if(event.type == 'exception') {
            //  alert(event.message);
        } else {
            
            listProductFamily = result;
            //alert('PF'+listProductFamily[0]);  
            if(listProductFamily != null){
                $.each(listProductFamily , function(index, value){
                    //var pickListValue = value;
                    productFamily += '<div class="col-xs-12 col-sm-12 col-md-12"><input type="checkbox" value="' + value +'"><span>' + value + '</span></input></div>';
                });
                //alert('PF-->' + productFamily );
                $('#product_family').html(productFamily );
            }
                  
        }
    });
} 
//     Populate Product Family End


/*     Populate Security Group     */
/*function populateSecurityGroup() {
    var listSecGroup = '';
    var SecGroups = '';
    OVOC_Create_Controller.getSecurityGroup(function(result, event){
        if(event.type == 'exception') {
           //   alert(event.message);
        } else {
            
            listSecGroup = result;
            
            if(listSecGroup != null){
                $.each(listSecGroup, function(index, value){
                    
                    SecGroups += '<div class="col-xs-12 col-sm-12 col-md-12"><input name="secGroup" type="radio" disabled="disabled" value="'+ value +'"><span>'+ value +'</span></input></div>';
                });
                
                $('#securityGroup').html(SecGroups);
            }
                  
        }
    });
} 
*/
//     Populate Product Family End

//Get group details

function getchatterGrpdetails(secGrp) {
   // alert('Entered'+secGrp);
    Visualforce.remoting.Manager.invokeAction(
    '{!$RemoteAction.OVOC_Create_Controller.getChatterNames}',secGrp,
      function(result, event){
        if(event.type == 'exception') {
            $(".voc-loader").hide();
          //  alert(event.message);
        }
        else {
            var listChatterGroups ='';
            var chatterList ='';
            listChatterGroups = result;
            if(listChatterGroups != null){
                $.each(listChatterGroups, function(index, value){
                    chatterList += '<tr><td><a>'+'#'+value.Group_Name__c+'</a> </td></tr>';
                    $('#ChatterGroups').html(chatterList);
                });  
                
                $(".voc-loader").hide();
            }   
        }
   });
}

///////////////////////////// Get sensitive Group details start ///////////////////////////////
    
    function populateSecurityGroup(secGroup) {
        var listgroup = '';
        var grp = '';
        OVOC_Create_Controller.getownerQueue(function(result, event){ //getchattergroup
            if(event.type == 'exception') {
                //  alert(event.message);
            } 
            else {            
                listgroup = result;
              //  console.log('listgroup-'+listgroup);
                if(listgroup != null){
                    $.each(listgroup , function(index, value) {
                    var valQueueId= value.GroupId__c.substring(0,15);
                  //  console.log(valQueueId);
                    var valQueueName = value.Name.replace("AeroVOC_", "");
                    var finalQueuename = valQueueName.replace("_"," ");
                   // console.log(valQueueName);
                       if(secGroup == finalQueuename){
                           grp += '<div class="col-xs-12 col-sm-12 col-md-12"><input type="radio" name="secGroup" checked="checked" value="' + value.GroupId__c +'"><span>' + finalQueuename + '</span></input></div>'
                       }else{
                           grp += '<div class="col-xs-12 col-sm-12 col-md-12"><input type="radio" name="secGroup" id="'+value.GroupId__c+'" value="' + value.GroupId__c +'"><span>' + finalQueuename + '</span></input></div>'
                       }
                    });
                    $('#securityGroup').html(grp);
                }          
            }
        });
    } 

///////////////////////////// Get sensitive Group details end ///////////////////////////////

///////////////////////////// Get Owner Queue Start///////////////////////////////
function getOueueList() {
    var listgroup = '';
    var grp = '';
    Visualforce.remoting.Manager.invokeAction(
    '{!$RemoteAction.OVOC_Create_Controller.getownerQueue}',
    
    function(result, event) {
        if(event.type == 'exception') {
            //  alert(event.message);
        } 
        else { 
             
            if(result != null){           
                 
                 QueueList = result;
            }          
        }
    });
    
} 
///////////////////////////// Get Owner Queue End///////////////////////////////

//////////////////////////////
    function ShareRecord(vocRecordId) {
    var vocTitle = $('#voc_title').val();
    OVOC_Create_Controller.ShareVOCRecord(vocRecordId,vocTitle,
    function(result, event) {
        if(event.type == 'exception') {
            //  alert(event.message);
        } 
        else { 
             
            if(result != null){           
                 
                
            }          
        }
    });
    
    }

////////////////////////////// 
///////////////////Add more begins/////////////////////
    var deleteflag = '';
    var len=0;
    function AddMoreLinksRow() {
        
        var linkval = document.getElementById('externalLink').value; 
        var linkwithHTTP = removeHttps(linkval);
       
        if (linkval == '') {     
            $('#enterALinkpopup').modal({
                show:true,
                closeOnEscape: true
            });
        }
        else {
            var moblink ='';
            var dsktplink ='';
            
            $('#ExternalLinkDiv').show(600);
       //     if ( $( window ).width() < 750 )  {
       //         moblink = '<a href="#" id="externalLinks_mob">'+linkval+'</a><input type="hidden" id="inputexternalLinks_Mob" value="'+linkval+'"/>';               
       //     }
       //     else {
                dsktplink = '<a href="'+linkwithHTTP+'" id="externalLinks" target="_blank">'+linkwithHTTP+'</a><input type="hidden" id="inputexternalLinks" value="'+linkwithHTTP+'"/>';    
       //     }
            var str = '<div class="row create-customer-row" id="deletelinkblock">'
                   +'<div class="col-xs-9 col-sm-9 col-md-10 create-customer-name" id="linkclassid">'  // hidden-xs
                   +dsktplink+'</div>'
                 //  +'<div name="external_link_mob" class="col-xs-3 col-sm-3 col-md-2 hidden-sm hidden-md hidden-lg">'
                 //  +moblink+'</div>'
                   +'<div class="col-xs-3 col-sm-3 col-md-2 create-alighn-right" id="deletelinkclassid" style="padding-top: 0px;">'
                   +'<a id="deletebtn" name="delete_link" onclick="deleteinput(\'' + len +'\');" data-toggle="modal" type="button" class="btn create-btn-delete"><span class="hidden-xs">Delete</span></a>'
                   +'</div>'
                   +'</div>';
            len++;
            $('#ExternalLinkDiv').append(str);        
            var inpid = document.getElementById('externalLinks');
         //   var inpid_mob = document.getElementById('externalLinks_mob');
            var inpbtnid = document.getElementById('deletebtn');
            var linkclassdel = document.getElementById('deletelinkclassid');
            var linkclassid = document.getElementById('linkclassid');
            var linkblock = document.getElementById('deletelinkblock');
            var inputextlink = document.getElementById('inputexternalLinks');
         //   var inputextlink_Mob = document.getElementById('inputexternalLinks_Mob');
            if(inpid != null) {
                inpid.id += len;
            }
         //   if(inpid_mob != null) {   
         //       inpid_mob.id += len;
         //   }  
            if(inpbtnid != null) {         
                inpbtnid.id += len;
            }
            linkclassdel.id += len;
            linkclassid.id += len;
            linkblock.id += len;
            if(inputextlink != null) {
                inputextlink.id += len;
            }
         //   if(inputextlink_Mob != null) {
         //       inputextlink_Mob.id += len;
         //   }
            document.getElementById('externalLink').value = '';
        }
    }

    
    function deleteinput(len) {
        len++;
        var indexnum = 'externalLinks' + len;
      //  var indexnum_Mob = 'externalLinks_mob' + len;
        var indexnumbtn = 'deletebtn' + len;
        var deletelinkclassdel = 'deletelinkclassid' + len;
        var deletebtnclassdel = 'linkclassid' + len;
        var deletelinkblock = 'deletelinkblock' + len;
        var inputlinktxt = 'inputexternalLinks' + len;
      //  var inputlinktxt_Mob = 'inputexternalLinks_Mob' + len;
        $('#'+ indexnum).remove();
      //  $('#'+ indexnum_Mob).remove();
        $('#'+ indexnumbtn).remove();
        $('#'+ deletelinkclassdel).remove();
        $('#'+ deletebtnclassdel).remove();
        $('#'+ deletelinkblock).remove();
        $('#'+ inputlinktxt).remove();
      //  $('#'+ inputlinktxt_Mob).remove();
    }
    
    $('#externalLinklabel').click(function() {
  //      $('#ExternalLinkDiv').toggle(600);
 //       return false;
    });
    function enterALinkpopuphide() { 
        $('#enterALinkpopup').modal("hide") 
    }
    
    function removeHttps(url){
        
        if(url.indexOf("http://") == 0 || url.indexOf("https://") == 0) {
            url = url.replace('https://','http://');            
        }
        else {
            url = 'http://'+ url;            
        }
        return url;
    }
    
///////////////////Add More Ends//////////////////////// 


///////////////////File upload////////////////////////  
    var forcetkClient = new forcetk.Client();
    var fileUrl ='';
    var fileUploading = false;
    var fileBody;
    var fileNameText = '';
    forcetkClient.setSessionToken('{!$Api.Session_ID}');
    
    function uploadContentVersion(filename, filecontent) {
        $('.voc-loader').show();
        fileBody = filecontent;
        fileNameText = filename;
        fileUploading = true;
    //alert('new value ---->');
    /*forcetkClient.create('ContentVersion', {
                    "Origin": "C",
                    "FirstPublishLocationId": "058c00000004aso",
                    "PathOnClient": filename,
                    "VersionData": filecontent
                }, function(data) {
                      // console.log('file created-->' + data.id);
                       alert('Success! Created ContentVersion ' + data.id);
                       fileUploading = true;
                       fileUrl += data.id + '='+ filename +  ';';
                       
                       if(draftRecordId != null && draftRecordId != ''){
                           alert(draftRecordId);
                           insertVOC('Draft',draftRecordId);
                       }else{
                           insertVOC('Draft',null); 
                       } 
                },function(error) {
                                    alert(JSON.stringify(error));
                });*/
                
        if(draftRecordId != null && draftRecordId != ''){
           //alert(draftRecordId);
           insertVOC('Draft',draftRecordId);
        }else{
           insertVOC('Draft',null); 
        }
    
    }

    function fileSelected() {
        var file = document.getElementById('fileToUpload').files[0];
        if (file) {
            var fileSize = 0;
            if (file.size > (25 * 1024 * 1024)) {
                //alert('File too large, greater than 25MB');
                $('#fileSize_popup').modal({
                    show:true,
                    closeOnEscape: true
                });
                return;
            }
            if (file.size > 1024 * 1024)
                fileSize = (Math.round(file.size * 100 / (1024 * 1024)) / 100).toString() + 'MB';
            else
                fileSize = (Math.round(file.size * 100 / 1024) / 100).toString() + 'KB';

            //document.getElementById('fileName').innerHTML = 'File Name: ' + file.name;
            //document.getElementById('fileSize').innerHTML = 'File Size: ' + fileSize;
            //document.getElementById('fileType').innerHTML = 'File Type: ' + file.type;
            //fileName = file.Name;
        }
    }

    function uploadFile() {
 //       $('.voc-loader').show();
        var file = document.getElementById('fileToUpload').files[0];
        
        if(file == undefined){
 //           $('.voc-loader').hide();
            $('#fileSelection_popup').modal({
                show:true,
                closeOnEscape: true
            });
            
        } else {   
            if (file.size > (25 * 1024 * 1024)) {
                //alert('File too large, greater than 25MB');
                $('#fileSize_popup').modal({
                    show:true,
                    closeOnEscape: true
                });
                return;
            } 
        $('.voc-loader').show();
            setTimeout(  function() {
                var reader = new FileReader();
                reader.onload = loaded;
                //reader.onerror = errorHandler;
                reader.readAsDataURL(file); 
            } , 1000 );
        }         
    }

    function loaded(evt) {
        var filename = document.getElementById('fileToUpload').files[0].name;
        var fileContent = String(evt.target.result);
        fileContent = fileContent.substr(fileContent.indexOf(',') + 1);
        uploadContentVersion(filename, fileContent);  
    }

    function errorHandler(evt) {
        if (evt.target.error.name == 'NotReadableError') {
            alert('File could not be read');
        }
        else {
            alert(evt.target.error);
        }
    }
    
    // Populate Product family Chatter starts
    function PopulateProdFamilyChatter() {
        OVOC_Create_Controller.getProdFamilyChatter(function(result, event){
            if(event.type == 'exception') {
                //  alert(event.message);   
            } 
            else {   
                ProArray = new Array();         
              //  console.log(result); 
                if(result != null){
                    $.each(result, function(index, value){                        
                        ProArray.push(value);    //.Chatter_Group_Name__c
                     //   console.log(value);
                    });
                 //   console.log(ProArray);
                 //   console.log(ProArray.length);
                }   
            }
        });
    } 
    // Populate Product family Chatter ends
    function getProductChatterList(){
        var chatterList ='';
        var tt = ''; 
            $('#product_family input:checked').each(function(){
              //  console.log('each-->'+$(this).val());  
                for(i=0; i<= ProArray.length-1; i++) { 
             //   console.log(i);
             //   console.log(ProArray[i].Name);
                    if(ProArray[i].Name.indexOf("amp;") > -1) {
                        tt = ProArray[i].Name.replace(/amp;/g,"");
                    }  
                    else {
                        tt = ProArray[i].Name;    
                    }  
              //      console.log('-------------->'+tt);          
                    if($(this).val() == tt) {
                        chatterList += '<tr><td><a>'+'#'+ProArray[i].Chatter_Group_Name__c+'</a> </td></tr>';
                    }
                }
            });
            $('#ProdFamilyChatterGroups').html(chatterList);
            if(chatterList == '') {
                $('#sharedChatter').addClass("hidden");
            }
            else {
                $('#sharedChatter').removeClass("hidden");    
            }
    }

///////////////////File upload////////////////////////
</script>
</apex:form>
</body>
</html>
</apex:page>