<!-- 
    Apttus Billing 
    InvoiceApprove
 
    @2013-2015 Apttus Inc. All rights reserved.
 -->
<apex:page standardController="Apttus_Billing__Invoice__c" extensions="Apttus_Billing.InvoiceStatusController" showHeader="true" 
           sidebar="true" standardStylesheets="true" cache="false" tabstyle="Apttus_Billing__Invoice__c" >

    <apex:sectionHeader title="{!$ObjectType.Apttus_Billing__Invoice__c.label} {!$Label.apttus_billing__approve}"/>
    <apex:form >
        <apex:pageBlock title="" mode="create">
            <apex:messages />
	        <apex:pageBlockButtons >
	            <apex:commandButton action="{!doUpdateInvoiceStatus}" value="{!$Label.apttus_billing__approve}" 
	            					disabled="{!!canBeApproved}" 
	            					oncomplete="calculateTaxForInvoice();" 
	            					status="approvalStatus" />
	            <apex:commandButton action="{!cancel}" value="{!$Label.apttus_billing__cancel}"/>
	            <apex:actionStatus id="approvalStatus" >
	               	<apex:facet name="start">
	                	<img src="{!URLFOR($Resource.Apttus_Config2__Image_LoadingIcon)}"/>  
					</apex:facet>
				</apex:actionStatus>	            
		    </apex:pageBlockButtons>

		    <apex:pageBlockSection id="id2" columns="1" collapsible="false" >
                <apex:outputText value="{!pageMessage}" escape="false"/>
            </apex:pageBlockSection>
        </apex:pageBlock>
        <apex:actionFunction name="calculateTaxForInvoice" action="{!doCalculateTaxForInvoice}" />
    </apex:form>
 
</apex:page>