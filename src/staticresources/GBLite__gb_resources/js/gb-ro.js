/*! jQuery v1.12.3 | (c) jQuery Foundation | jquery.org/license */
!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=a.document,e=c.slice,f=c.concat,g=c.push,h=c.indexOf,i={},j=i.toString,k=i.hasOwnProperty,l={},m="1.12.3",n=function(a,b){return new n.fn.init(a,b)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,q=/-([\da-z])/gi,r=function(a,b){return b.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:"",length:0,toArray:function(){return e.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:e.call(this)},pushStack:function(a){var b=n.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a){return n.each(this,a)},map:function(a){return this.pushStack(n.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(e.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor()},push:g,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||n.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(e=arguments[h]))for(d in e)a=g[d],c=e[d],g!==c&&(j&&c&&(n.isPlainObject(c)||(b=n.isArray(c)))?(b?(b=!1,f=a&&n.isArray(a)?a:[]):f=a&&n.isPlainObject(a)?a:{},g[d]=n.extend(j,f,c)):void 0!==c&&(g[d]=c));return g},n.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===n.type(a)},isArray:Array.isArray||function(a){return"array"===n.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){var b=a&&a.toString();return!n.isArray(a)&&b-parseFloat(b)+1>=0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},isPlainObject:function(a){var b;if(!a||"object"!==n.type(a)||a.nodeType||n.isWindow(a))return!1;try{if(a.constructor&&!k.call(a,"constructor")&&!k.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}if(!l.ownFirst)for(b in a)return k.call(a,b);for(b in a);return void 0===b||k.call(a,b)},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?i[j.call(a)]||"object":typeof a},globalEval:function(b){b&&n.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(p,"ms-").replace(q,r)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b){var c,d=0;if(s(a)){for(c=a.length;c>d;d++)if(b.call(a[d],d,a[d])===!1)break}else for(d in a)if(b.call(a[d],d,a[d])===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(o,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(s(Object(a))?n.merge(c,"string"==typeof a?[a]:a):g.call(c,a)),c},inArray:function(a,b,c){var d;if(b){if(h)return h.call(b,a,c);for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,b){var c=+b.length,d=0,e=a.length;while(c>d)a[e++]=b[d++];if(c!==c)while(void 0!==b[d])a[e++]=b[d++];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,e,g=0,h=[];if(s(a))for(d=a.length;d>g;g++)e=b(a[g],g,c),null!=e&&h.push(e);else for(g in a)e=b(a[g],g,c),null!=e&&h.push(e);return f.apply([],h)},guid:1,proxy:function(a,b){var c,d,f;return"string"==typeof b&&(f=a[b],b=a,a=f),n.isFunction(a)?(c=e.call(arguments,2),d=function(){return a.apply(b||this,c.concat(e.call(arguments)))},d.guid=a.guid=a.guid||n.guid++,d):void 0},now:function(){return+new Date},support:l}),"function"==typeof Symbol&&(n.fn[Symbol.iterator]=c[Symbol.iterator]),n.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,b){i["[object "+b+"]"]=b.toLowerCase()});function s(a){var b=!!a&&"length"in a&&a.length,c=n.type(a);return"function"===c||n.isWindow(a)?!1:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var t=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=ga(),z=ga(),A=ga(),B=function(a,b){return a===b&&(l=!0),0},C=1<<31,D={}.hasOwnProperty,E=[],F=E.pop,G=E.push,H=E.push,I=E.slice,J=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",N="\\["+L+"*("+M+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+M+"))|)"+L+"*\\]",O=":("+M+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+N+")*)|.*)\\)|)",P=new RegExp(L+"+","g"),Q=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),R=new RegExp("^"+L+"*,"+L+"*"),S=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),T=new RegExp("="+L+"*([^\\]'\"]*?)"+L+"*\\]","g"),U=new RegExp(O),V=new RegExp("^"+M+"$"),W={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M+"|[*])"),ATTR:new RegExp("^"+N),PSEUDO:new RegExp("^"+O),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+K+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},X=/^(?:input|select|textarea|button)$/i,Y=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,$=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,_=/[+~]/,aa=/'|\\/g,ba=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),ca=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},da=function(){m()};try{H.apply(E=I.call(v.childNodes),v.childNodes),E[v.childNodes.length].nodeType}catch(ea){H={apply:E.length?function(a,b){G.apply(a,I.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function fa(a,b,d,e){var f,h,j,k,l,o,r,s,w=b&&b.ownerDocument,x=b?b.nodeType:9;if(d=d||[],"string"!=typeof a||!a||1!==x&&9!==x&&11!==x)return d;if(!e&&((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,p)){if(11!==x&&(o=$.exec(a)))if(f=o[1]){if(9===x){if(!(j=b.getElementById(f)))return d;if(j.id===f)return d.push(j),d}else if(w&&(j=w.getElementById(f))&&t(b,j)&&j.id===f)return d.push(j),d}else{if(o[2])return H.apply(d,b.getElementsByTagName(a)),d;if((f=o[3])&&c.getElementsByClassName&&b.getElementsByClassName)return H.apply(d,b.getElementsByClassName(f)),d}if(c.qsa&&!A[a+" "]&&(!q||!q.test(a))){if(1!==x)w=b,s=a;else if("object"!==b.nodeName.toLowerCase()){(k=b.getAttribute("id"))?k=k.replace(aa,"\\$&"):b.setAttribute("id",k=u),r=g(a),h=r.length,l=V.test(k)?"#"+k:"[id='"+k+"']";while(h--)r[h]=l+" "+qa(r[h]);s=r.join(","),w=_.test(a)&&oa(b.parentNode)||b}if(s)try{return H.apply(d,w.querySelectorAll(s)),d}catch(y){}finally{k===u&&b.removeAttribute("id")}}}return i(a.replace(Q,"$1"),b,d,e)}function ga(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function ha(a){return a[u]=!0,a}function ia(a){var b=n.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function ja(a,b){var c=a.split("|"),e=c.length;while(e--)d.attrHandle[c[e]]=b}function ka(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||C)-(~a.sourceIndex||C);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function la(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function ma(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function na(a){return ha(function(b){return b=+b,ha(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function oa(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}c=fa.support={},f=fa.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},m=fa.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(n=g,o=n.documentElement,p=!f(n),(e=n.defaultView)&&e.top!==e&&(e.addEventListener?e.addEventListener("unload",da,!1):e.attachEvent&&e.attachEvent("onunload",da)),c.attributes=ia(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ia(function(a){return a.appendChild(n.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=Z.test(n.getElementsByClassName),c.getById=ia(function(a){return o.appendChild(a).id=u,!n.getElementsByName||!n.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c=b.getElementById(a);return c?[c]:[]}},d.filter.ID=function(a){var b=a.replace(ba,ca);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(ba,ca);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return"undefined"!=typeof b.getElementsByClassName&&p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=Z.test(n.querySelectorAll))&&(ia(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\r\\' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+L+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+L+"*(?:value|"+K+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),ia(function(a){var b=n.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+L+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=Z.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ia(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",O)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=Z.test(o.compareDocumentPosition),t=b||Z.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===n||a.ownerDocument===v&&t(v,a)?-1:b===n||b.ownerDocument===v&&t(v,b)?1:k?J(k,a)-J(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,g=[a],h=[b];if(!e||!f)return a===n?-1:b===n?1:e?-1:f?1:k?J(k,a)-J(k,b):0;if(e===f)return ka(a,b);c=a;while(c=c.parentNode)g.unshift(c);c=b;while(c=c.parentNode)h.unshift(c);while(g[d]===h[d])d++;return d?ka(g[d],h[d]):g[d]===v?-1:h[d]===v?1:0},n):n},fa.matches=function(a,b){return fa(a,null,null,b)},fa.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(T,"='$1']"),c.matchesSelector&&p&&!A[b+" "]&&(!r||!r.test(b))&&(!q||!q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return fa(b,n,null,[a]).length>0},fa.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},fa.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&D.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},fa.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},fa.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=fa.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=fa.selectors={cacheLength:50,createPseudo:ha,match:W,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ba,ca),a[3]=(a[3]||a[4]||a[5]||"").replace(ba,ca),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||fa.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&fa.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return W.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&U.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ba,ca).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+L+")"+a+"("+L+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=fa.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e.replace(P," ")+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h,t=!1;if(q){if(f){while(p){m=b;while(m=m[p])if(h?m.nodeName.toLowerCase()===r:1===m.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){m=q,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n&&j[2],m=n&&q.childNodes[n];while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if(1===m.nodeType&&++t&&m===b){k[a]=[w,n,t];break}}else if(s&&(m=b,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n),t===!1)while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if((h?m.nodeName.toLowerCase()===r:1===m.nodeType)&&++t&&(s&&(l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),k[a]=[w,t]),m===b))break;return t-=e,t===d||t%d===0&&t/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||fa.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ha(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=J(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:ha(function(a){var b=[],c=[],d=h(a.replace(Q,"$1"));return d[u]?ha(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ha(function(a){return function(b){return fa(a,b).length>0}}),contains:ha(function(a){return a=a.replace(ba,ca),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:ha(function(a){return V.test(a||"")||fa.error("unsupported lang: "+a),a=a.replace(ba,ca).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Y.test(a.nodeName)},input:function(a){return X.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:na(function(){return[0]}),last:na(function(a,b){return[b-1]}),eq:na(function(a,b,c){return[0>c?c+b:c]}),even:na(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:na(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:na(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:na(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=la(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=ma(b);function pa(){}pa.prototype=d.filters=d.pseudos,d.setFilters=new pa,g=fa.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){c&&!(e=R.exec(h))||(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=S.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(Q," ")}),h=h.slice(c.length));for(g in d.filter)!(e=W[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?fa.error(a):z(a,i).slice(0)};function qa(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function ra(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j,k=[w,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(j=b[u]||(b[u]={}),i=j[b.uniqueID]||(j[b.uniqueID]={}),(h=i[d])&&h[0]===w&&h[1]===f)return k[2]=h[2];if(i[d]=k,k[2]=a(b,c,g))return!0}}}function sa(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function ta(a,b,c){for(var d=0,e=b.length;e>d;d++)fa(a,b[d],c);return c}function ua(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(c&&!c(f,d,e)||(g.push(f),j&&b.push(h)));return g}function va(a,b,c,d,e,f){return d&&!d[u]&&(d=va(d)),e&&!e[u]&&(e=va(e,f)),ha(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||ta(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:ua(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=ua(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?J(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=ua(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):H.apply(g,r)})}function wa(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=ra(function(a){return a===b},h,!0),l=ra(function(a){return J(b,a)>-1},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];f>i;i++)if(c=d.relative[a[i].type])m=[ra(sa(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;f>e;e++)if(d.relative[a[e].type])break;return va(i>1&&sa(m),i>1&&qa(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(Q,"$1"),c,e>i&&wa(a.slice(i,e)),f>e&&wa(a=a.slice(e)),f>e&&qa(a))}m.push(c)}return sa(m)}function xa(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,o,q,r=0,s="0",t=f&&[],u=[],v=j,x=f||e&&d.find.TAG("*",k),y=w+=null==v?1:Math.random()||.1,z=x.length;for(k&&(j=g===n||g||k);s!==z&&null!=(l=x[s]);s++){if(e&&l){o=0,g||l.ownerDocument===n||(m(l),h=!p);while(q=a[o++])if(q(l,g||n,h)){i.push(l);break}k&&(w=y)}c&&((l=!q&&l)&&r--,f&&t.push(l))}if(r+=s,c&&s!==r){o=0;while(q=b[o++])q(t,u,g,h);if(f){if(r>0)while(s--)t[s]||u[s]||(u[s]=F.call(i));u=ua(u)}H.apply(i,u),k&&!f&&u.length>0&&r+b.length>1&&fa.uniqueSort(i)}return k&&(w=y,j=v),t};return c?ha(f):f}return h=fa.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=wa(b[c]),f[u]?d.push(f):e.push(f);f=A(a,xa(e,d)),f.selector=a}return f},i=fa.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(ba,ca),b)||[])[0],!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=W.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type])break;if((m=d.find[l])&&(f=m(k.matches[0].replace(ba,ca),_.test(j[0].type)&&oa(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&qa(j),!a)return H.apply(e,f),e;break}}}return(n||h(a,o))(f,b,!p,e,!b||_.test(a)&&oa(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ia(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),ia(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||ja("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ia(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||ja("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),ia(function(a){return null==a.getAttribute("disabled")})||ja(K,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),fa}(a);n.find=t,n.expr=t.selectors,n.expr[":"]=n.expr.pseudos,n.uniqueSort=n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=function(a,b,c){var d=[],e=void 0!==c;while((a=a[b])&&9!==a.nodeType)if(1===a.nodeType){if(e&&n(a).is(c))break;d.push(a)}return d},v=function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c},w=n.expr.match.needsContext,x=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,y=/^.[^:#\[\.,]*$/;function z(a,b,c){if(n.isFunction(b))return n.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return n.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(y.test(b))return n.filter(b,a,c);b=n.filter(b,a)}return n.grep(a,function(a){return n.inArray(a,b)>-1!==c})}n.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?n.find.matchesSelector(d,a)?[d]:[]:n.find.matches(a,n.grep(b,function(a){return 1===a.nodeType}))},n.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if("string"!=typeof a)return this.pushStack(n(a).filter(function(){for(b=0;e>b;b++)if(n.contains(d[b],this))return!0}));for(b=0;e>b;b++)n.find(a,d[b],c);return c=this.pushStack(e>1?n.unique(c):c),c.selector=this.selector?this.selector+" "+a:a,c},filter:function(a){return this.pushStack(z(this,a||[],!1))},not:function(a){return this.pushStack(z(this,a||[],!0))},is:function(a){return!!z(this,"string"==typeof a&&w.test(a)?n(a):a||[],!1).length}});var A,B=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,C=n.fn.init=function(a,b,c){var e,f;if(!a)return this;if(c=c||A,"string"==typeof a){if(e="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:B.exec(a),!e||!e[1]&&b)return!b||b.jquery?(b||c).find(a):this.constructor(b).find(a);if(e[1]){if(b=b instanceof n?b[0]:b,n.merge(this,n.parseHTML(e[1],b&&b.nodeType?b.ownerDocument||b:d,!0)),x.test(e[1])&&n.isPlainObject(b))for(e in b)n.isFunction(this[e])?this[e](b[e]):this.attr(e,b[e]);return this}if(f=d.getElementById(e[2]),f&&f.parentNode){if(f.id!==e[2])return A.find(a);this.length=1,this[0]=f}return this.context=d,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):n.isFunction(a)?"undefined"!=typeof c.ready?c.ready(a):a(n):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),n.makeArray(a,this))};C.prototype=n.fn,A=n(d);var D=/^(?:parents|prev(?:Until|All))/,E={children:!0,contents:!0,next:!0,prev:!0};n.fn.extend({has:function(a){var b,c=n(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++)if(n.contains(this,c[b]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=w.test(a)||"string"!=typeof a?n(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&n.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?n.uniqueSort(f):f)},index:function(a){return a?"string"==typeof a?n.inArray(this[0],n(a)):n.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(n.uniqueSort(n.merge(this.get(),n(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function F(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}n.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return u(a,"parentNode")},parentsUntil:function(a,b,c){return u(a,"parentNode",c)},next:function(a){return F(a,"nextSibling")},prev:function(a){return F(a,"previousSibling")},nextAll:function(a){return u(a,"nextSibling")},prevAll:function(a){return u(a,"previousSibling")},nextUntil:function(a,b,c){return u(a,"nextSibling",c)},prevUntil:function(a,b,c){return u(a,"previousSibling",c)},siblings:function(a){return v((a.parentNode||{}).firstChild,a)},children:function(a){return v(a.firstChild)},contents:function(a){return n.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:n.merge([],a.childNodes)}},function(a,b){n.fn[a]=function(c,d){var e=n.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=n.filter(d,e)),this.length>1&&(E[a]||(e=n.uniqueSort(e)),D.test(a)&&(e=e.reverse())),this.pushStack(e)}});var G=/\S+/g;function H(a){var b={};return n.each(a.match(G)||[],function(a,c){b[c]=!0}),b}n.Callbacks=function(a){a="string"==typeof a?H(a):n.extend({},a);var b,c,d,e,f=[],g=[],h=-1,i=function(){for(e=a.once,d=b=!0;g.length;h=-1){c=g.shift();while(++h<f.length)f[h].apply(c[0],c[1])===!1&&a.stopOnFalse&&(h=f.length,c=!1)}a.memory||(c=!1),b=!1,e&&(f=c?[]:"")},j={add:function(){return f&&(c&&!b&&(h=f.length-1,g.push(c)),function d(b){n.each(b,function(b,c){n.isFunction(c)?a.unique&&j.has(c)||f.push(c):c&&c.length&&"string"!==n.type(c)&&d(c)})}(arguments),c&&!b&&i()),this},remove:function(){return n.each(arguments,function(a,b){var c;while((c=n.inArray(b,f,c))>-1)f.splice(c,1),h>=c&&h--}),this},has:function(a){return a?n.inArray(a,f)>-1:f.length>0},empty:function(){return f&&(f=[]),this},disable:function(){return e=g=[],f=c="",this},disabled:function(){return!f},lock:function(){return e=!0,c||j.disable(),this},locked:function(){return!!e},fireWith:function(a,c){return e||(c=c||[],c=[a,c.slice?c.slice():c],g.push(c),b||i()),this},fire:function(){return j.fireWith(this,arguments),this},fired:function(){return!!d}};return j},n.extend({Deferred:function(a){var b=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return n.Deferred(function(c){n.each(b,function(b,f){var g=n.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&n.isFunction(a.promise)?a.promise().progress(c.notify).done(c.resolve).fail(c.reject):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?n.extend(a,d):d}},e={};return d.pipe=d.then,n.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=e.call(arguments),d=c.length,f=1!==d||a&&n.isFunction(a.promise)?d:0,g=1===f?a:n.Deferred(),h=function(a,b,c){return function(d){b[a]=this,c[a]=arguments.length>1?e.call(arguments):d,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(d>1)for(i=new Array(d),j=new Array(d),k=new Array(d);d>b;b++)c[b]&&n.isFunction(c[b].promise)?c[b].promise().progress(h(b,j,i)).done(h(b,k,c)).fail(g.reject):--f;return f||g.resolveWith(k,c),g.promise()}});var I;n.fn.ready=function(a){return n.ready.promise().done(a),this},n.extend({isReady:!1,readyWait:1,holdReady:function(a){a?n.readyWait++:n.ready(!0)},ready:function(a){(a===!0?--n.readyWait:n.isReady)||(n.isReady=!0,a!==!0&&--n.readyWait>0||(I.resolveWith(d,[n]),n.fn.triggerHandler&&(n(d).triggerHandler("ready"),n(d).off("ready"))))}});function J(){d.addEventListener?(d.removeEventListener("DOMContentLoaded",K),a.removeEventListener("load",K)):(d.detachEvent("onreadystatechange",K),a.detachEvent("onload",K))}function K(){(d.addEventListener||"load"===a.event.type||"complete"===d.readyState)&&(J(),n.ready())}n.ready.promise=function(b){if(!I)if(I=n.Deferred(),"complete"===d.readyState||"loading"!==d.readyState&&!d.documentElement.doScroll)a.setTimeout(n.ready);else if(d.addEventListener)d.addEventListener("DOMContentLoaded",K),a.addEventListener("load",K);else{d.attachEvent("onreadystatechange",K),a.attachEvent("onload",K);var c=!1;try{c=null==a.frameElement&&d.documentElement}catch(e){}c&&c.doScroll&&!function f(){if(!n.isReady){try{c.doScroll("left")}catch(b){return a.setTimeout(f,50)}J(),n.ready()}}()}return I.promise(b)},n.ready.promise();var L;for(L in n(l))break;l.ownFirst="0"===L,l.inlineBlockNeedsLayout=!1,n(function(){var a,b,c,e;c=d.getElementsByTagName("body")[0],c&&c.style&&(b=d.createElement("div"),e=d.createElement("div"),e.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(e).appendChild(b),"undefined"!=typeof b.style.zoom&&(b.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",l.inlineBlockNeedsLayout=a=3===b.offsetWidth,a&&(c.style.zoom=1)),c.removeChild(e))}),function(){var a=d.createElement("div");l.deleteExpando=!0;try{delete a.test}catch(b){l.deleteExpando=!1}a=null}();var M=function(a){var b=n.noData[(a.nodeName+" ").toLowerCase()],c=+a.nodeType||1;return 1!==c&&9!==c?!1:!b||b!==!0&&a.getAttribute("classid")===b},N=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,O=/([A-Z])/g;function P(a,b,c){if(void 0===c&&1===a.nodeType){var d="data-"+b.replace(O,"-$1").toLowerCase();if(c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:N.test(c)?n.parseJSON(c):c}catch(e){}n.data(a,b,c)}else c=void 0;
}return c}function Q(a){var b;for(b in a)if(("data"!==b||!n.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function R(a,b,d,e){if(M(a)){var f,g,h=n.expando,i=a.nodeType,j=i?n.cache:a,k=i?a[h]:a[h]&&h;if(k&&j[k]&&(e||j[k].data)||void 0!==d||"string"!=typeof b)return k||(k=i?a[h]=c.pop()||n.guid++:h),j[k]||(j[k]=i?{}:{toJSON:n.noop}),"object"!=typeof b&&"function"!=typeof b||(e?j[k]=n.extend(j[k],b):j[k].data=n.extend(j[k].data,b)),g=j[k],e||(g.data||(g.data={}),g=g.data),void 0!==d&&(g[n.camelCase(b)]=d),"string"==typeof b?(f=g[b],null==f&&(f=g[n.camelCase(b)])):f=g,f}}function S(a,b,c){if(M(a)){var d,e,f=a.nodeType,g=f?n.cache:a,h=f?a[n.expando]:n.expando;if(g[h]){if(b&&(d=c?g[h]:g[h].data)){n.isArray(b)?b=b.concat(n.map(b,n.camelCase)):b in d?b=[b]:(b=n.camelCase(b),b=b in d?[b]:b.split(" ")),e=b.length;while(e--)delete d[b[e]];if(c?!Q(d):!n.isEmptyObject(d))return}(c||(delete g[h].data,Q(g[h])))&&(f?n.cleanData([a],!0):l.deleteExpando||g!=g.window?delete g[h]:g[h]=void 0)}}}n.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){return a=a.nodeType?n.cache[a[n.expando]]:a[n.expando],!!a&&!Q(a)},data:function(a,b,c){return R(a,b,c)},removeData:function(a,b){return S(a,b)},_data:function(a,b,c){return R(a,b,c,!0)},_removeData:function(a,b){return S(a,b,!0)}}),n.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=n.data(f),1===f.nodeType&&!n._data(f,"parsedAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=n.camelCase(d.slice(5)),P(f,d,e[d])));n._data(f,"parsedAttrs",!0)}return e}return"object"==typeof a?this.each(function(){n.data(this,a)}):arguments.length>1?this.each(function(){n.data(this,a,b)}):f?P(f,a,n.data(f,a)):void 0},removeData:function(a){return this.each(function(){n.removeData(this,a)})}}),n.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=n._data(a,b),c&&(!d||n.isArray(c)?d=n._data(a,b,n.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=n.queue(a,b),d=c.length,e=c.shift(),f=n._queueHooks(a,b),g=function(){n.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return n._data(a,c)||n._data(a,c,{empty:n.Callbacks("once memory").add(function(){n._removeData(a,b+"queue"),n._removeData(a,c)})})}}),n.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?n.queue(this[0],a):void 0===b?this:this.each(function(){var c=n.queue(this,a,b);n._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&n.dequeue(this,a)})},dequeue:function(a){return this.each(function(){n.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=n.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=n._data(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}}),function(){var a;l.shrinkWrapBlocks=function(){if(null!=a)return a;a=!1;var b,c,e;return c=d.getElementsByTagName("body")[0],c&&c.style?(b=d.createElement("div"),e=d.createElement("div"),e.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(e).appendChild(b),"undefined"!=typeof b.style.zoom&&(b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",b.appendChild(d.createElement("div")).style.width="5px",a=3!==b.offsetWidth),c.removeChild(e),a):void 0}}();var T=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,U=new RegExp("^(?:([+-])=|)("+T+")([a-z%]*)$","i"),V=["Top","Right","Bottom","Left"],W=function(a,b){return a=b||a,"none"===n.css(a,"display")||!n.contains(a.ownerDocument,a)};function X(a,b,c,d){var e,f=1,g=20,h=d?function(){return d.cur()}:function(){return n.css(a,b,"")},i=h(),j=c&&c[3]||(n.cssNumber[b]?"":"px"),k=(n.cssNumber[b]||"px"!==j&&+i)&&U.exec(n.css(a,b));if(k&&k[3]!==j){j=j||k[3],c=c||[],k=+i||1;do f=f||".5",k/=f,n.style(a,b,k+j);while(f!==(f=h()/i)&&1!==f&&--g)}return c&&(k=+k||+i||0,e=c[1]?k+(c[1]+1)*c[2]:+c[2],d&&(d.unit=j,d.start=k,d.end=e)),e}var Y=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===n.type(c)){e=!0;for(h in c)Y(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,n.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(n(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},Z=/^(?:checkbox|radio)$/i,$=/<([\w:-]+)/,_=/^$|\/(?:java|ecma)script/i,aa=/^\s+/,ba="abbr|article|aside|audio|bdi|canvas|data|datalist|details|dialog|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|picture|progress|section|summary|template|time|video";function ca(a){var b=ba.split("|"),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c}!function(){var a=d.createElement("div"),b=d.createDocumentFragment(),c=d.createElement("input");a.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",l.leadingWhitespace=3===a.firstChild.nodeType,l.tbody=!a.getElementsByTagName("tbody").length,l.htmlSerialize=!!a.getElementsByTagName("link").length,l.html5Clone="<:nav></:nav>"!==d.createElement("nav").cloneNode(!0).outerHTML,c.type="checkbox",c.checked=!0,b.appendChild(c),l.appendChecked=c.checked,a.innerHTML="<textarea>x</textarea>",l.noCloneChecked=!!a.cloneNode(!0).lastChild.defaultValue,b.appendChild(a),c=d.createElement("input"),c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),a.appendChild(c),l.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,l.noCloneEvent=!!a.addEventListener,a[n.expando]=1,l.attributes=!a.getAttribute(n.expando)}();var da={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:l.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]};da.optgroup=da.option,da.tbody=da.tfoot=da.colgroup=da.caption=da.thead,da.th=da.td;function ea(a,b){var c,d,e=0,f="undefined"!=typeof a.getElementsByTagName?a.getElementsByTagName(b||"*"):"undefined"!=typeof a.querySelectorAll?a.querySelectorAll(b||"*"):void 0;if(!f)for(f=[],c=a.childNodes||a;null!=(d=c[e]);e++)!b||n.nodeName(d,b)?f.push(d):n.merge(f,ea(d,b));return void 0===b||b&&n.nodeName(a,b)?n.merge([a],f):f}function fa(a,b){for(var c,d=0;null!=(c=a[d]);d++)n._data(c,"globalEval",!b||n._data(b[d],"globalEval"))}var ga=/<|&#?\w+;/,ha=/<tbody/i;function ia(a){Z.test(a.type)&&(a.defaultChecked=a.checked)}function ja(a,b,c,d,e){for(var f,g,h,i,j,k,m,o=a.length,p=ca(b),q=[],r=0;o>r;r++)if(g=a[r],g||0===g)if("object"===n.type(g))n.merge(q,g.nodeType?[g]:g);else if(ga.test(g)){i=i||p.appendChild(b.createElement("div")),j=($.exec(g)||["",""])[1].toLowerCase(),m=da[j]||da._default,i.innerHTML=m[1]+n.htmlPrefilter(g)+m[2],f=m[0];while(f--)i=i.lastChild;if(!l.leadingWhitespace&&aa.test(g)&&q.push(b.createTextNode(aa.exec(g)[0])),!l.tbody){g="table"!==j||ha.test(g)?"<table>"!==m[1]||ha.test(g)?0:i:i.firstChild,f=g&&g.childNodes.length;while(f--)n.nodeName(k=g.childNodes[f],"tbody")&&!k.childNodes.length&&g.removeChild(k)}n.merge(q,i.childNodes),i.textContent="";while(i.firstChild)i.removeChild(i.firstChild);i=p.lastChild}else q.push(b.createTextNode(g));i&&p.removeChild(i),l.appendChecked||n.grep(ea(q,"input"),ia),r=0;while(g=q[r++])if(d&&n.inArray(g,d)>-1)e&&e.push(g);else if(h=n.contains(g.ownerDocument,g),i=ea(p.appendChild(g),"script"),h&&fa(i),c){f=0;while(g=i[f++])_.test(g.type||"")&&c.push(g)}return i=null,p}!function(){var b,c,e=d.createElement("div");for(b in{submit:!0,change:!0,focusin:!0})c="on"+b,(l[b]=c in a)||(e.setAttribute(c,"t"),l[b]=e.attributes[c].expando===!1);e=null}();var ka=/^(?:input|select|textarea)$/i,la=/^key/,ma=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,na=/^(?:focusinfocus|focusoutblur)$/,oa=/^([^.]*)(?:\.(.+)|)/;function pa(){return!0}function qa(){return!1}function ra(){try{return d.activeElement}catch(a){}}function sa(a,b,c,d,e,f){var g,h;if("object"==typeof b){"string"!=typeof c&&(d=d||c,c=void 0);for(h in b)sa(a,h,c,d,b[h],f);return a}if(null==d&&null==e?(e=c,d=c=void 0):null==e&&("string"==typeof c?(e=d,d=void 0):(e=d,d=c,c=void 0)),e===!1)e=qa;else if(!e)return a;return 1===f&&(g=e,e=function(a){return n().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=n.guid++)),a.each(function(){n.event.add(this,b,e,d,c)})}n.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=n._data(a);if(r){c.handler&&(i=c,c=i.handler,e=i.selector),c.guid||(c.guid=n.guid++),(g=r.events)||(g=r.events={}),(k=r.handle)||(k=r.handle=function(a){return"undefined"==typeof n||a&&n.event.triggered===a.type?void 0:n.event.dispatch.apply(k.elem,arguments)},k.elem=a),b=(b||"").match(G)||[""],h=b.length;while(h--)f=oa.exec(b[h])||[],o=q=f[1],p=(f[2]||"").split(".").sort(),o&&(j=n.event.special[o]||{},o=(e?j.delegateType:j.bindType)||o,j=n.event.special[o]||{},l=n.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&n.expr.match.needsContext.test(e),namespace:p.join(".")},i),(m=g[o])||(m=g[o]=[],m.delegateCount=0,j.setup&&j.setup.call(a,d,p,k)!==!1||(a.addEventListener?a.addEventListener(o,k,!1):a.attachEvent&&a.attachEvent("on"+o,k))),j.add&&(j.add.call(a,l),l.handler.guid||(l.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,l):m.push(l),n.event.global[o]=!0);a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=n.hasData(a)&&n._data(a);if(r&&(k=r.events)){b=(b||"").match(G)||[""],j=b.length;while(j--)if(h=oa.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=n.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,m=k[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=m.length;while(f--)g=m[f],!e&&q!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(m.splice(f,1),g.selector&&m.delegateCount--,l.remove&&l.remove.call(a,g));i&&!m.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||n.removeEvent(a,o,r.handle),delete k[o])}else for(o in k)n.event.remove(a,o+b[j],c,d,!0);n.isEmptyObject(k)&&(delete r.handle,n._removeData(a,"events"))}},trigger:function(b,c,e,f){var g,h,i,j,l,m,o,p=[e||d],q=k.call(b,"type")?b.type:b,r=k.call(b,"namespace")?b.namespace.split("."):[];if(i=m=e=e||d,3!==e.nodeType&&8!==e.nodeType&&!na.test(q+n.event.triggered)&&(q.indexOf(".")>-1&&(r=q.split("."),q=r.shift(),r.sort()),h=q.indexOf(":")<0&&"on"+q,b=b[n.expando]?b:new n.Event(q,"object"==typeof b&&b),b.isTrigger=f?2:3,b.namespace=r.join("."),b.rnamespace=b.namespace?new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=e),c=null==c?[b]:n.makeArray(c,[b]),l=n.event.special[q]||{},f||!l.trigger||l.trigger.apply(e,c)!==!1)){if(!f&&!l.noBubble&&!n.isWindow(e)){for(j=l.delegateType||q,na.test(j+q)||(i=i.parentNode);i;i=i.parentNode)p.push(i),m=i;m===(e.ownerDocument||d)&&p.push(m.defaultView||m.parentWindow||a)}o=0;while((i=p[o++])&&!b.isPropagationStopped())b.type=o>1?j:l.bindType||q,g=(n._data(i,"events")||{})[b.type]&&n._data(i,"handle"),g&&g.apply(i,c),g=h&&i[h],g&&g.apply&&M(i)&&(b.result=g.apply(i,c),b.result===!1&&b.preventDefault());if(b.type=q,!f&&!b.isDefaultPrevented()&&(!l._default||l._default.apply(p.pop(),c)===!1)&&M(e)&&h&&e[q]&&!n.isWindow(e)){m=e[h],m&&(e[h]=null),n.event.triggered=q;try{e[q]()}catch(s){}n.event.triggered=void 0,m&&(e[h]=m)}return b.result}},dispatch:function(a){a=n.event.fix(a);var b,c,d,f,g,h=[],i=e.call(arguments),j=(n._data(this,"events")||{})[a.type]||[],k=n.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=n.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,c=0;while((g=f.handlers[c++])&&!a.isImmediatePropagationStopped())a.rnamespace&&!a.rnamespace.test(g.namespace)||(a.handleObj=g,a.data=g.data,d=((n.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),void 0!==d&&(a.result=d)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&("click"!==a.type||isNaN(a.button)||a.button<1))for(;i!=this;i=i.parentNode||this)if(1===i.nodeType&&(i.disabled!==!0||"click"!==a.type)){for(d=[],c=0;h>c;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?n(e,this).index(i)>-1:n.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},fix:function(a){if(a[n.expando])return a;var b,c,e,f=a.type,g=a,h=this.fixHooks[f];h||(this.fixHooks[f]=h=ma.test(f)?this.mouseHooks:la.test(f)?this.keyHooks:{}),e=h.props?this.props.concat(h.props):this.props,a=new n.Event(g),b=e.length;while(b--)c=e[b],a[c]=g[c];return a.target||(a.target=g.srcElement||d),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,h.filter?h.filter(a,g):a},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,e,f,g=b.button,h=b.fromElement;return null==a.pageX&&null!=b.clientX&&(e=a.target.ownerDocument||d,f=e.documentElement,c=e.body,a.pageX=b.clientX+(f&&f.scrollLeft||c&&c.scrollLeft||0)-(f&&f.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(f&&f.scrollTop||c&&c.scrollTop||0)-(f&&f.clientTop||c&&c.clientTop||0)),!a.relatedTarget&&h&&(a.relatedTarget=h===a.target?b.toElement:h),a.which||void 0===g||(a.which=1&g?1:2&g?3:4&g?2:0),a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==ra()&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){return this===ra()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return n.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(a){return n.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c){var d=n.extend(new n.Event,c,{type:a,isSimulated:!0});n.event.trigger(d,null,b),d.isDefaultPrevented()&&c.preventDefault()}},n.removeEvent=d.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c)}:function(a,b,c){var d="on"+b;a.detachEvent&&("undefined"==typeof a[d]&&(a[d]=null),a.detachEvent(d,c))},n.Event=function(a,b){return this instanceof n.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?pa:qa):this.type=a,b&&n.extend(this,b),this.timeStamp=a&&a.timeStamp||n.now(),void(this[n.expando]=!0)):new n.Event(a,b)},n.Event.prototype={constructor:n.Event,isDefaultPrevented:qa,isPropagationStopped:qa,isImmediatePropagationStopped:qa,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=pa,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=pa,a&&!this.isSimulated&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=pa,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},n.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){n.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return e&&(e===d||n.contains(d,e))||(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),l.submit||(n.event.special.submit={setup:function(){return n.nodeName(this,"form")?!1:void n.event.add(this,"click._submit keypress._submit",function(a){var b=a.target,c=n.nodeName(b,"input")||n.nodeName(b,"button")?n.prop(b,"form"):void 0;c&&!n._data(c,"submit")&&(n.event.add(c,"submit._submit",function(a){a._submitBubble=!0}),n._data(c,"submit",!0))})},postDispatch:function(a){a._submitBubble&&(delete a._submitBubble,this.parentNode&&!a.isTrigger&&n.event.simulate("submit",this.parentNode,a))},teardown:function(){return n.nodeName(this,"form")?!1:void n.event.remove(this,"._submit")}}),l.change||(n.event.special.change={setup:function(){return ka.test(this.nodeName)?("checkbox"!==this.type&&"radio"!==this.type||(n.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._justChanged=!0)}),n.event.add(this,"click._change",function(a){this._justChanged&&!a.isTrigger&&(this._justChanged=!1),n.event.simulate("change",this,a)})),!1):void n.event.add(this,"beforeactivate._change",function(a){var b=a.target;ka.test(b.nodeName)&&!n._data(b,"change")&&(n.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||n.event.simulate("change",this.parentNode,a)}),n._data(b,"change",!0))})},handle:function(a){var b=a.target;return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return n.event.remove(this,"._change"),!ka.test(this.nodeName)}}),l.focusin||n.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){n.event.simulate(b,a.target,n.event.fix(a))};n.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=n._data(d,b);e||d.addEventListener(a,c,!0),n._data(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=n._data(d,b)-1;e?n._data(d,b,e):(d.removeEventListener(a,c,!0),n._removeData(d,b))}}}),n.fn.extend({on:function(a,b,c,d){return sa(this,a,b,c,d)},one:function(a,b,c,d){return sa(this,a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,n(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return b!==!1&&"function"!=typeof b||(c=b,b=void 0),c===!1&&(c=qa),this.each(function(){n.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){n.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?n.event.trigger(a,b,c,!0):void 0}});var ta=/ jQuery\d+="(?:null|\d+)"/g,ua=new RegExp("<(?:"+ba+")[\\s/>]","i"),va=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,wa=/<script|<style|<link/i,xa=/checked\s*(?:[^=]|=\s*.checked.)/i,ya=/^true\/(.*)/,za=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Aa=ca(d),Ba=Aa.appendChild(d.createElement("div"));function Ca(a,b){return n.nodeName(a,"table")&&n.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function Da(a){return a.type=(null!==n.find.attr(a,"type"))+"/"+a.type,a}function Ea(a){var b=ya.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function Fa(a,b){if(1===b.nodeType&&n.hasData(a)){var c,d,e,f=n._data(a),g=n._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;e>d;d++)n.event.add(b,c,h[c][d])}g.data&&(g.data=n.extend({},g.data))}}function Ga(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!l.noCloneEvent&&b[n.expando]){e=n._data(b);for(d in e.events)n.removeEvent(b,d,e.handle);b.removeAttribute(n.expando)}"script"===c&&b.text!==a.text?(Da(b).text=a.text,Ea(b)):"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),l.html5Clone&&a.innerHTML&&!n.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&Z.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.defaultSelected=b.selected=a.defaultSelected:"input"!==c&&"textarea"!==c||(b.defaultValue=a.defaultValue)}}function Ha(a,b,c,d){b=f.apply([],b);var e,g,h,i,j,k,m=0,o=a.length,p=o-1,q=b[0],r=n.isFunction(q);if(r||o>1&&"string"==typeof q&&!l.checkClone&&xa.test(q))return a.each(function(e){var f=a.eq(e);r&&(b[0]=q.call(this,e,f.html())),Ha(f,b,c,d)});if(o&&(k=ja(b,a[0].ownerDocument,!1,a,d),e=k.firstChild,1===k.childNodes.length&&(k=e),e||d)){for(i=n.map(ea(k,"script"),Da),h=i.length;o>m;m++)g=k,m!==p&&(g=n.clone(g,!0,!0),h&&n.merge(i,ea(g,"script"))),c.call(a[m],g,m);if(h)for(j=i[i.length-1].ownerDocument,n.map(i,Ea),m=0;h>m;m++)g=i[m],_.test(g.type||"")&&!n._data(g,"globalEval")&&n.contains(j,g)&&(g.src?n._evalUrl&&n._evalUrl(g.src):n.globalEval((g.text||g.textContent||g.innerHTML||"").replace(za,"")));k=e=null}return a}function Ia(a,b,c){for(var d,e=b?n.filter(b,a):a,f=0;null!=(d=e[f]);f++)c||1!==d.nodeType||n.cleanData(ea(d)),d.parentNode&&(c&&n.contains(d.ownerDocument,d)&&fa(ea(d,"script")),d.parentNode.removeChild(d));return a}n.extend({htmlPrefilter:function(a){return a.replace(va,"<$1></$2>")},clone:function(a,b,c){var d,e,f,g,h,i=n.contains(a.ownerDocument,a);if(l.html5Clone||n.isXMLDoc(a)||!ua.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(Ba.innerHTML=a.outerHTML,Ba.removeChild(f=Ba.firstChild)),!(l.noCloneEvent&&l.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||n.isXMLDoc(a)))for(d=ea(f),h=ea(a),g=0;null!=(e=h[g]);++g)d[g]&&Ga(e,d[g]);if(b)if(c)for(h=h||ea(a),d=d||ea(f),g=0;null!=(e=h[g]);g++)Fa(e,d[g]);else Fa(a,f);return d=ea(f,"script"),d.length>0&&fa(d,!i&&ea(a,"script")),d=h=e=null,f},cleanData:function(a,b){for(var d,e,f,g,h=0,i=n.expando,j=n.cache,k=l.attributes,m=n.event.special;null!=(d=a[h]);h++)if((b||M(d))&&(f=d[i],g=f&&j[f])){if(g.events)for(e in g.events)m[e]?n.event.remove(d,e):n.removeEvent(d,e,g.handle);j[f]&&(delete j[f],k||"undefined"==typeof d.removeAttribute?d[i]=void 0:d.removeAttribute(i),c.push(f))}}}),n.fn.extend({domManip:Ha,detach:function(a){return Ia(this,a,!0)},remove:function(a){return Ia(this,a)},text:function(a){return Y(this,function(a){return void 0===a?n.text(this):this.empty().append((this[0]&&this[0].ownerDocument||d).createTextNode(a))},null,a,arguments.length)},append:function(){return Ha(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=Ca(this,a);b.appendChild(a)}})},prepend:function(){return Ha(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=Ca(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return Ha(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return Ha(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){1===a.nodeType&&n.cleanData(ea(a,!1));while(a.firstChild)a.removeChild(a.firstChild);a.options&&n.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return n.clone(this,a,b)})},html:function(a){return Y(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a)return 1===b.nodeType?b.innerHTML.replace(ta,""):void 0;if("string"==typeof a&&!wa.test(a)&&(l.htmlSerialize||!ua.test(a))&&(l.leadingWhitespace||!aa.test(a))&&!da[($.exec(a)||["",""])[1].toLowerCase()]){a=n.htmlPrefilter(a);try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(n.cleanData(ea(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=[];return Ha(this,arguments,function(b){var c=this.parentNode;n.inArray(this,a)<0&&(n.cleanData(ea(this)),c&&c.replaceChild(b,this))},a)}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){n.fn[a]=function(a){for(var c,d=0,e=[],f=n(a),h=f.length-1;h>=d;d++)c=d===h?this:this.clone(!0),n(f[d])[b](c),g.apply(e,c.get());return this.pushStack(e)}});var Ja,Ka={HTML:"block",BODY:"block"};function La(a,b){var c=n(b.createElement(a)).appendTo(b.body),d=n.css(c[0],"display");return c.detach(),d}function Ma(a){var b=d,c=Ka[a];return c||(c=La(a,b),"none"!==c&&c||(Ja=(Ja||n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=(Ja[0].contentWindow||Ja[0].contentDocument).document,b.write(),b.close(),c=La(a,b),Ja.detach()),Ka[a]=c),c}var Na=/^margin/,Oa=new RegExp("^("+T+")(?!px)[a-z%]+$","i"),Pa=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e},Qa=d.documentElement;!function(){var b,c,e,f,g,h,i=d.createElement("div"),j=d.createElement("div");if(j.style){j.style.cssText="float:left;opacity:.5",l.opacity="0.5"===j.style.opacity,l.cssFloat=!!j.style.cssFloat,j.style.backgroundClip="content-box",j.cloneNode(!0).style.backgroundClip="",l.clearCloneStyle="content-box"===j.style.backgroundClip,i=d.createElement("div"),i.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",j.innerHTML="",i.appendChild(j),l.boxSizing=""===j.style.boxSizing||""===j.style.MozBoxSizing||""===j.style.WebkitBoxSizing,n.extend(l,{reliableHiddenOffsets:function(){return null==b&&k(),f},boxSizingReliable:function(){return null==b&&k(),e},pixelMarginRight:function(){return null==b&&k(),c},pixelPosition:function(){return null==b&&k(),b},reliableMarginRight:function(){return null==b&&k(),g},reliableMarginLeft:function(){return null==b&&k(),h}});function k(){var k,l,m=d.documentElement;m.appendChild(i),j.style.cssText="-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",b=e=h=!1,c=g=!0,a.getComputedStyle&&(l=a.getComputedStyle(j),b="1%"!==(l||{}).top,h="2px"===(l||{}).marginLeft,e="4px"===(l||{width:"4px"}).width,j.style.marginRight="50%",c="4px"===(l||{marginRight:"4px"}).marginRight,k=j.appendChild(d.createElement("div")),k.style.cssText=j.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",k.style.marginRight=k.style.width="0",j.style.width="1px",g=!parseFloat((a.getComputedStyle(k)||{}).marginRight),j.removeChild(k)),j.style.display="none",f=0===j.getClientRects().length,f&&(j.style.display="",j.innerHTML="<table><tr><td></td><td>t</td></tr></table>",k=j.getElementsByTagName("td"),k[0].style.cssText="margin:0;border:0;padding:0;display:none",f=0===k[0].offsetHeight,f&&(k[0].style.display="",k[1].style.display="none",f=0===k[0].offsetHeight)),m.removeChild(i)}}}();var Ra,Sa,Ta=/^(top|right|bottom|left)$/;a.getComputedStyle?(Ra=function(b){var c=b.ownerDocument.defaultView;return c&&c.opener||(c=a),c.getComputedStyle(b)},Sa=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Ra(a),g=c?c.getPropertyValue(b)||c[b]:void 0,""!==g&&void 0!==g||n.contains(a.ownerDocument,a)||(g=n.style(a,b)),c&&!l.pixelMarginRight()&&Oa.test(g)&&Na.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f),void 0===g?g:g+""}):Qa.currentStyle&&(Ra=function(a){return a.currentStyle},Sa=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Ra(a),g=c?c[b]:void 0,null==g&&h&&h[b]&&(g=h[b]),Oa.test(g)&&!Ta.test(b)&&(d=h.left,e=a.runtimeStyle,f=e&&e.left,f&&(e.left=a.currentStyle.left),h.left="fontSize"===b?"1em":g,g=h.pixelLeft+"px",h.left=d,f&&(e.left=f)),void 0===g?g:g+""||"auto"});function Ua(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}var Va=/alpha\([^)]*\)/i,Wa=/opacity\s*=\s*([^)]*)/i,Xa=/^(none|table(?!-c[ea]).+)/,Ya=new RegExp("^("+T+")(.*)$","i"),Za={position:"absolute",visibility:"hidden",display:"block"},$a={letterSpacing:"0",fontWeight:"400"},_a=["Webkit","O","Moz","ms"],ab=d.createElement("div").style;function bb(a){if(a in ab)return a;var b=a.charAt(0).toUpperCase()+a.slice(1),c=_a.length;while(c--)if(a=_a[c]+b,a in ab)return a}function cb(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=n._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&W(d)&&(f[g]=n._data(d,"olddisplay",Ma(d.nodeName)))):(e=W(d),(c&&"none"!==c||!e)&&n._data(d,"olddisplay",e?c:n.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function db(a,b,c){var d=Ya.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function eb(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=n.css(a,c+V[f],!0,e)),d?("content"===c&&(g-=n.css(a,"padding"+V[f],!0,e)),"margin"!==c&&(g-=n.css(a,"border"+V[f]+"Width",!0,e))):(g+=n.css(a,"padding"+V[f],!0,e),"padding"!==c&&(g+=n.css(a,"border"+V[f]+"Width",!0,e)));return g}function fb(b,c,e){var f=!0,g="width"===c?b.offsetWidth:b.offsetHeight,h=Ra(b),i=l.boxSizing&&"border-box"===n.css(b,"boxSizing",!1,h);if(d.msFullscreenElement&&a.top!==a&&b.getClientRects().length&&(g=Math.round(100*b.getBoundingClientRect()[c])),0>=g||null==g){if(g=Sa(b,c,h),(0>g||null==g)&&(g=b.style[c]),Oa.test(g))return g;f=i&&(l.boxSizingReliable()||g===b.style[c]),g=parseFloat(g)||0}return g+eb(b,c,e||(i?"border":"content"),f,h)+"px"}n.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Sa(a,"opacity");return""===c?"1":c}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":l.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=n.camelCase(b),i=a.style;if(b=n.cssProps[h]||(n.cssProps[h]=bb(h)||h),g=n.cssHooks[b]||n.cssHooks[h],void 0===c)return g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b];if(f=typeof c,"string"===f&&(e=U.exec(c))&&e[1]&&(c=X(a,b,e),f="number"),null!=c&&c===c&&("number"===f&&(c+=e&&e[3]||(n.cssNumber[h]?"":"px")),l.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),!(g&&"set"in g&&void 0===(c=g.set(a,c,d)))))try{i[b]=c}catch(j){}}},css:function(a,b,c,d){var e,f,g,h=n.camelCase(b);return b=n.cssProps[h]||(n.cssProps[h]=bb(h)||h),g=n.cssHooks[b]||n.cssHooks[h],g&&"get"in g&&(f=g.get(a,!0,c)),void 0===f&&(f=Sa(a,b,d)),"normal"===f&&b in $a&&(f=$a[b]),""===c||c?(e=parseFloat(f),c===!0||isFinite(e)?e||0:f):f}}),n.each(["height","width"],function(a,b){n.cssHooks[b]={get:function(a,c,d){return c?Xa.test(n.css(a,"display"))&&0===a.offsetWidth?Pa(a,Za,function(){return fb(a,b,d)}):fb(a,b,d):void 0},set:function(a,c,d){var e=d&&Ra(a);return db(a,c,d?eb(a,b,d,l.boxSizing&&"border-box"===n.css(a,"boxSizing",!1,e),e):0)}}}),l.opacity||(n.cssHooks.opacity={get:function(a,b){return Wa.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=n.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===n.trim(f.replace(Va,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=Va.test(f)?f.replace(Va,e):f+" "+e)}}),n.cssHooks.marginRight=Ua(l.reliableMarginRight,function(a,b){return b?Pa(a,{display:"inline-block"},Sa,[a,"marginRight"]):void 0}),n.cssHooks.marginLeft=Ua(l.reliableMarginLeft,function(a,b){
return b?(parseFloat(Sa(a,"marginLeft"))||(n.contains(a.ownerDocument,a)?a.getBoundingClientRect().left-Pa(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}):0))+"px":void 0}),n.each({margin:"",padding:"",border:"Width"},function(a,b){n.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+V[d]+b]=f[d]||f[d-2]||f[0];return e}},Na.test(a)||(n.cssHooks[a+b].set=db)}),n.fn.extend({css:function(a,b){return Y(this,function(a,b,c){var d,e,f={},g=0;if(n.isArray(b)){for(d=Ra(a),e=b.length;e>g;g++)f[b[g]]=n.css(a,b[g],!1,d);return f}return void 0!==c?n.style(a,b,c):n.css(a,b)},a,b,arguments.length>1)},show:function(){return cb(this,!0)},hide:function(){return cb(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){W(this)?n(this).show():n(this).hide()})}});function gb(a,b,c,d,e){return new gb.prototype.init(a,b,c,d,e)}n.Tween=gb,gb.prototype={constructor:gb,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||n.easing._default,this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(n.cssNumber[c]?"":"px")},cur:function(){var a=gb.propHooks[this.prop];return a&&a.get?a.get(this):gb.propHooks._default.get(this)},run:function(a){var b,c=gb.propHooks[this.prop];return this.options.duration?this.pos=b=n.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):gb.propHooks._default.set(this),this}},gb.prototype.init.prototype=gb.prototype,gb.propHooks={_default:{get:function(a){var b;return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(b=n.css(a.elem,a.prop,""),b&&"auto"!==b?b:0)},set:function(a){n.fx.step[a.prop]?n.fx.step[a.prop](a):1!==a.elem.nodeType||null==a.elem.style[n.cssProps[a.prop]]&&!n.cssHooks[a.prop]?a.elem[a.prop]=a.now:n.style(a.elem,a.prop,a.now+a.unit)}}},gb.propHooks.scrollTop=gb.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},n.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"},n.fx=gb.prototype.init,n.fx.step={};var hb,ib,jb=/^(?:toggle|show|hide)$/,kb=/queueHooks$/;function lb(){return a.setTimeout(function(){hb=void 0}),hb=n.now()}function mb(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)c=V[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function nb(a,b,c){for(var d,e=(qb.tweeners[b]||[]).concat(qb.tweeners["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function ob(a,b,c){var d,e,f,g,h,i,j,k,m=this,o={},p=a.style,q=a.nodeType&&W(a),r=n._data(a,"fxshow");c.queue||(h=n._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,m.always(function(){m.always(function(){h.unqueued--,n.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[p.overflow,p.overflowX,p.overflowY],j=n.css(a,"display"),k="none"===j?n._data(a,"olddisplay")||Ma(a.nodeName):j,"inline"===k&&"none"===n.css(a,"float")&&(l.inlineBlockNeedsLayout&&"inline"!==Ma(a.nodeName)?p.zoom=1:p.display="inline-block")),c.overflow&&(p.overflow="hidden",l.shrinkWrapBlocks()||m.always(function(){p.overflow=c.overflow[0],p.overflowX=c.overflow[1],p.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],jb.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(q?"hide":"show")){if("show"!==e||!r||void 0===r[d])continue;q=!0}o[d]=r&&r[d]||n.style(a,d)}else j=void 0;if(n.isEmptyObject(o))"inline"===("none"===j?Ma(a.nodeName):j)&&(p.display=j);else{r?"hidden"in r&&(q=r.hidden):r=n._data(a,"fxshow",{}),f&&(r.hidden=!q),q?n(a).show():m.done(function(){n(a).hide()}),m.done(function(){var b;n._removeData(a,"fxshow");for(b in o)n.style(a,b,o[b])});for(d in o)g=nb(q?r[d]:0,d,m),d in r||(r[d]=g.start,q&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function pb(a,b){var c,d,e,f,g;for(c in a)if(d=n.camelCase(c),e=b[d],f=a[c],n.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=n.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function qb(a,b,c){var d,e,f=0,g=qb.prefilters.length,h=n.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=hb||lb(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:n.extend({},b),opts:n.extend(!0,{specialEasing:{},easing:n.easing._default},c),originalProperties:b,originalOptions:c,startTime:hb||lb(),duration:c.duration,tweens:[],createTween:function(b,c){var d=n.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?(h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j,b])):h.rejectWith(a,[j,b]),this}}),k=j.props;for(pb(k,j.opts.specialEasing);g>f;f++)if(d=qb.prefilters[f].call(j,a,k,j.opts))return n.isFunction(d.stop)&&(n._queueHooks(j.elem,j.opts.queue).stop=n.proxy(d.stop,d)),d;return n.map(k,nb,j),n.isFunction(j.opts.start)&&j.opts.start.call(a,j),n.fx.timer(n.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}n.Animation=n.extend(qb,{tweeners:{"*":[function(a,b){var c=this.createTween(a,b);return X(c.elem,a,U.exec(b),c),c}]},tweener:function(a,b){n.isFunction(a)?(b=a,a=["*"]):a=a.match(G);for(var c,d=0,e=a.length;e>d;d++)c=a[d],qb.tweeners[c]=qb.tweeners[c]||[],qb.tweeners[c].unshift(b)},prefilters:[ob],prefilter:function(a,b){b?qb.prefilters.unshift(a):qb.prefilters.push(a)}}),n.speed=function(a,b,c){var d=a&&"object"==typeof a?n.extend({},a):{complete:c||!c&&b||n.isFunction(a)&&a,duration:a,easing:c&&b||b&&!n.isFunction(b)&&b};return d.duration=n.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in n.fx.speeds?n.fx.speeds[d.duration]:n.fx.speeds._default,null!=d.queue&&d.queue!==!0||(d.queue="fx"),d.old=d.complete,d.complete=function(){n.isFunction(d.old)&&d.old.call(this),d.queue&&n.dequeue(this,d.queue)},d},n.fn.extend({fadeTo:function(a,b,c,d){return this.filter(W).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=n.isEmptyObject(a),f=n.speed(b,c,d),g=function(){var b=qb(this,n.extend({},a),f);(e||n._data(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=n.timers,g=n._data(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&kb.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));!b&&c||n.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=n._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=n.timers,g=d?d.length:0;for(c.finish=!0,n.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),n.each(["toggle","show","hide"],function(a,b){var c=n.fn[b];n.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(mb(b,!0),a,d,e)}}),n.each({slideDown:mb("show"),slideUp:mb("hide"),slideToggle:mb("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){n.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),n.timers=[],n.fx.tick=function(){var a,b=n.timers,c=0;for(hb=n.now();c<b.length;c++)a=b[c],a()||b[c]!==a||b.splice(c--,1);b.length||n.fx.stop(),hb=void 0},n.fx.timer=function(a){n.timers.push(a),a()?n.fx.start():n.timers.pop()},n.fx.interval=13,n.fx.start=function(){ib||(ib=a.setInterval(n.fx.tick,n.fx.interval))},n.fx.stop=function(){a.clearInterval(ib),ib=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(b,c){return b=n.fx?n.fx.speeds[b]||b:b,c=c||"fx",this.queue(c,function(c,d){var e=a.setTimeout(c,b);d.stop=function(){a.clearTimeout(e)}})},function(){var a,b=d.createElement("input"),c=d.createElement("div"),e=d.createElement("select"),f=e.appendChild(d.createElement("option"));c=d.createElement("div"),c.setAttribute("className","t"),c.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",a=c.getElementsByTagName("a")[0],b.setAttribute("type","checkbox"),c.appendChild(b),a=c.getElementsByTagName("a")[0],a.style.cssText="top:1px",l.getSetAttribute="t"!==c.className,l.style=/top/.test(a.getAttribute("style")),l.hrefNormalized="/a"===a.getAttribute("href"),l.checkOn=!!b.value,l.optSelected=f.selected,l.enctype=!!d.createElement("form").enctype,e.disabled=!0,l.optDisabled=!f.disabled,b=d.createElement("input"),b.setAttribute("value",""),l.input=""===b.getAttribute("value"),b.value="t",b.setAttribute("type","radio"),l.radioValue="t"===b.value}();var rb=/\r/g,sb=/[\x20\t\r\n\f]+/g;n.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=n.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,n(this).val()):a,null==e?e="":"number"==typeof e?e+="":n.isArray(e)&&(e=n.map(e,function(a){return null==a?"":a+""})),b=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=n.valHooks[e.type]||n.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(rb,""):null==c?"":c)}}}),n.extend({valHooks:{option:{get:function(a){var b=n.find.attr(a,"value");return null!=b?b:n.trim(n.text(a)).replace(sb," ")}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],(c.selected||i===e)&&(l.optDisabled?!c.disabled:null===c.getAttribute("disabled"))&&(!c.parentNode.disabled||!n.nodeName(c.parentNode,"optgroup"))){if(b=n(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=n.makeArray(b),g=e.length;while(g--)if(d=e[g],n.inArray(n.valHooks.option.get(d),f)>-1)try{d.selected=c=!0}catch(h){d.scrollHeight}else d.selected=!1;return c||(a.selectedIndex=-1),e}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(a,b){return n.isArray(b)?a.checked=n.inArray(n(a).val(),b)>-1:void 0}},l.checkOn||(n.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var tb,ub,vb=n.expr.attrHandle,wb=/^(?:checked|selected)$/i,xb=l.getSetAttribute,yb=l.input;n.fn.extend({attr:function(a,b){return Y(this,n.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){n.removeAttr(this,a)})}}),n.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return"undefined"==typeof a.getAttribute?n.prop(a,b,c):(1===f&&n.isXMLDoc(a)||(b=b.toLowerCase(),e=n.attrHooks[b]||(n.expr.match.bool.test(b)?ub:tb)),void 0!==c?null===c?void n.removeAttr(a,b):e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:(a.setAttribute(b,c+""),c):e&&"get"in e&&null!==(d=e.get(a,b))?d:(d=n.find.attr(a,b),null==d?void 0:d))},attrHooks:{type:{set:function(a,b){if(!l.radioValue&&"radio"===b&&n.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(G);if(f&&1===a.nodeType)while(c=f[e++])d=n.propFix[c]||c,n.expr.match.bool.test(c)?yb&&xb||!wb.test(c)?a[d]=!1:a[n.camelCase("default-"+c)]=a[d]=!1:n.attr(a,c,""),a.removeAttribute(xb?c:d)}}),ub={set:function(a,b,c){return b===!1?n.removeAttr(a,c):yb&&xb||!wb.test(c)?a.setAttribute(!xb&&n.propFix[c]||c,c):a[n.camelCase("default-"+c)]=a[c]=!0,c}},n.each(n.expr.match.bool.source.match(/\w+/g),function(a,b){var c=vb[b]||n.find.attr;yb&&xb||!wb.test(b)?vb[b]=function(a,b,d){var e,f;return d||(f=vb[b],vb[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,vb[b]=f),e}:vb[b]=function(a,b,c){return c?void 0:a[n.camelCase("default-"+b)]?b.toLowerCase():null}}),yb&&xb||(n.attrHooks.value={set:function(a,b,c){return n.nodeName(a,"input")?void(a.defaultValue=b):tb&&tb.set(a,b,c)}}),xb||(tb={set:function(a,b,c){var d=a.getAttributeNode(c);return d||a.setAttributeNode(d=a.ownerDocument.createAttribute(c)),d.value=b+="","value"===c||b===a.getAttribute(c)?b:void 0}},vb.id=vb.name=vb.coords=function(a,b,c){var d;return c?void 0:(d=a.getAttributeNode(b))&&""!==d.value?d.value:null},n.valHooks.button={get:function(a,b){var c=a.getAttributeNode(b);return c&&c.specified?c.value:void 0},set:tb.set},n.attrHooks.contenteditable={set:function(a,b,c){tb.set(a,""===b?!1:b,c)}},n.each(["width","height"],function(a,b){n.attrHooks[b]={set:function(a,c){return""===c?(a.setAttribute(b,"auto"),c):void 0}}})),l.style||(n.attrHooks.style={get:function(a){return a.style.cssText||void 0},set:function(a,b){return a.style.cssText=b+""}});var zb=/^(?:input|select|textarea|button|object)$/i,Ab=/^(?:a|area)$/i;n.fn.extend({prop:function(a,b){return Y(this,n.prop,a,b,arguments.length>1)},removeProp:function(a){return a=n.propFix[a]||a,this.each(function(){try{this[a]=void 0,delete this[a]}catch(b){}})}}),n.extend({prop:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return 1===f&&n.isXMLDoc(a)||(b=n.propFix[b]||b,e=n.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=n.find.attr(a,"tabindex");return b?parseInt(b,10):zb.test(a.nodeName)||Ab.test(a.nodeName)&&a.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),l.hrefNormalized||n.each(["href","src"],function(a,b){n.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}}),l.optSelected||(n.propHooks.selected={get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null},set:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this}),l.enctype||(n.propFix.enctype="encoding");var Bb=/[\t\r\n\f]/g;function Cb(a){return n.attr(a,"class")||""}n.fn.extend({addClass:function(a){var b,c,d,e,f,g,h,i=0;if(n.isFunction(a))return this.each(function(b){n(this).addClass(a.call(this,b,Cb(this)))});if("string"==typeof a&&a){b=a.match(G)||[];while(c=this[i++])if(e=Cb(c),d=1===c.nodeType&&(" "+e+" ").replace(Bb," ")){g=0;while(f=b[g++])d.indexOf(" "+f+" ")<0&&(d+=f+" ");h=n.trim(d),e!==h&&n.attr(c,"class",h)}}return this},removeClass:function(a){var b,c,d,e,f,g,h,i=0;if(n.isFunction(a))return this.each(function(b){n(this).removeClass(a.call(this,b,Cb(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof a&&a){b=a.match(G)||[];while(c=this[i++])if(e=Cb(c),d=1===c.nodeType&&(" "+e+" ").replace(Bb," ")){g=0;while(f=b[g++])while(d.indexOf(" "+f+" ")>-1)d=d.replace(" "+f+" "," ");h=n.trim(d),e!==h&&n.attr(c,"class",h)}}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):n.isFunction(a)?this.each(function(c){n(this).toggleClass(a.call(this,c,Cb(this),b),b)}):this.each(function(){var b,d,e,f;if("string"===c){d=0,e=n(this),f=a.match(G)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else void 0!==a&&"boolean"!==c||(b=Cb(this),b&&n._data(this,"__className__",b),n.attr(this,"class",b||a===!1?"":n._data(this,"__className__")||""))})},hasClass:function(a){var b,c,d=0;b=" "+a+" ";while(c=this[d++])if(1===c.nodeType&&(" "+Cb(c)+" ").replace(Bb," ").indexOf(b)>-1)return!0;return!1}}),n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){n.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),n.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});var Db=a.location,Eb=n.now(),Fb=/\?/,Gb=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;n.parseJSON=function(b){if(a.JSON&&a.JSON.parse)return a.JSON.parse(b+"");var c,d=null,e=n.trim(b+"");return e&&!n.trim(e.replace(Gb,function(a,b,e,f){return c&&b&&(d=0),0===d?a:(c=e||b,d+=!f-!e,"")}))?Function("return "+e)():n.error("Invalid JSON: "+b)},n.parseXML=function(b){var c,d;if(!b||"string"!=typeof b)return null;try{a.DOMParser?(d=new a.DOMParser,c=d.parseFromString(b,"text/xml")):(c=new a.ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(b))}catch(e){c=void 0}return c&&c.documentElement&&!c.getElementsByTagName("parsererror").length||n.error("Invalid XML: "+b),c};var Hb=/#.*$/,Ib=/([?&])_=[^&]*/,Jb=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Kb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Lb=/^(?:GET|HEAD)$/,Mb=/^\/\//,Nb=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Ob={},Pb={},Qb="*/".concat("*"),Rb=Db.href,Sb=Nb.exec(Rb.toLowerCase())||[];function Tb(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(G)||[];if(n.isFunction(c))while(d=f[e++])"+"===d.charAt(0)?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function Ub(a,b,c,d){var e={},f=a===Pb;function g(h){var i;return e[h]=!0,n.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function Vb(a,b){var c,d,e=n.ajaxSettings.flatOptions||{};for(d in b)void 0!==b[d]&&((e[d]?a:c||(c={}))[d]=b[d]);return c&&n.extend(!0,a,c),a}function Wb(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===e&&(e=a.mimeType||b.getResponseHeader("Content-Type"));if(e)for(g in h)if(h[g]&&h[g].test(e)){i.unshift(g);break}if(i[0]in c)f=i[0];else{for(g in c){if(!i[0]||a.converters[g+" "+i[0]]){f=g;break}d||(d=g)}f=f||d}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function Xb(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Rb,type:"GET",isLocal:Kb.test(Sb[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Qb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Vb(Vb(a,n.ajaxSettings),b):Vb(n.ajaxSettings,a)},ajaxPrefilter:Tb(Ob),ajaxTransport:Tb(Pb),ajax:function(b,c){"object"==typeof b&&(c=b,b=void 0),c=c||{};var d,e,f,g,h,i,j,k,l=n.ajaxSetup({},c),m=l.context||l,o=l.context&&(m.nodeType||m.jquery)?n(m):n.event,p=n.Deferred(),q=n.Callbacks("once memory"),r=l.statusCode||{},s={},t={},u=0,v="canceled",w={readyState:0,getResponseHeader:function(a){var b;if(2===u){if(!k){k={};while(b=Jb.exec(g))k[b[1].toLowerCase()]=b[2]}b=k[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===u?g:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return u||(a=t[c]=t[c]||a,s[a]=b),this},overrideMimeType:function(a){return u||(l.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>u)for(b in a)r[b]=[r[b],a[b]];else w.always(a[w.status]);return this},abort:function(a){var b=a||v;return j&&j.abort(b),y(0,b),this}};if(p.promise(w).complete=q.add,w.success=w.done,w.error=w.fail,l.url=((b||l.url||Rb)+"").replace(Hb,"").replace(Mb,Sb[1]+"//"),l.type=c.method||c.type||l.method||l.type,l.dataTypes=n.trim(l.dataType||"*").toLowerCase().match(G)||[""],null==l.crossDomain&&(d=Nb.exec(l.url.toLowerCase()),l.crossDomain=!(!d||d[1]===Sb[1]&&d[2]===Sb[2]&&(d[3]||("http:"===d[1]?"80":"443"))===(Sb[3]||("http:"===Sb[1]?"80":"443")))),l.data&&l.processData&&"string"!=typeof l.data&&(l.data=n.param(l.data,l.traditional)),Ub(Ob,l,c,w),2===u)return w;i=n.event&&l.global,i&&0===n.active++&&n.event.trigger("ajaxStart"),l.type=l.type.toUpperCase(),l.hasContent=!Lb.test(l.type),f=l.url,l.hasContent||(l.data&&(f=l.url+=(Fb.test(f)?"&":"?")+l.data,delete l.data),l.cache===!1&&(l.url=Ib.test(f)?f.replace(Ib,"$1_="+Eb++):f+(Fb.test(f)?"&":"?")+"_="+Eb++)),l.ifModified&&(n.lastModified[f]&&w.setRequestHeader("If-Modified-Since",n.lastModified[f]),n.etag[f]&&w.setRequestHeader("If-None-Match",n.etag[f])),(l.data&&l.hasContent&&l.contentType!==!1||c.contentType)&&w.setRequestHeader("Content-Type",l.contentType),w.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+("*"!==l.dataTypes[0]?", "+Qb+"; q=0.01":""):l.accepts["*"]);for(e in l.headers)w.setRequestHeader(e,l.headers[e]);if(l.beforeSend&&(l.beforeSend.call(m,w,l)===!1||2===u))return w.abort();v="abort";for(e in{success:1,error:1,complete:1})w[e](l[e]);if(j=Ub(Pb,l,c,w)){if(w.readyState=1,i&&o.trigger("ajaxSend",[w,l]),2===u)return w;l.async&&l.timeout>0&&(h=a.setTimeout(function(){w.abort("timeout")},l.timeout));try{u=1,j.send(s,y)}catch(x){if(!(2>u))throw x;y(-1,x)}}else y(-1,"No Transport");function y(b,c,d,e){var k,s,t,v,x,y=c;2!==u&&(u=2,h&&a.clearTimeout(h),j=void 0,g=e||"",w.readyState=b>0?4:0,k=b>=200&&300>b||304===b,d&&(v=Wb(l,w,d)),v=Xb(l,v,w,k),k?(l.ifModified&&(x=w.getResponseHeader("Last-Modified"),x&&(n.lastModified[f]=x),x=w.getResponseHeader("etag"),x&&(n.etag[f]=x)),204===b||"HEAD"===l.type?y="nocontent":304===b?y="notmodified":(y=v.state,s=v.data,t=v.error,k=!t)):(t=y,!b&&y||(y="error",0>b&&(b=0))),w.status=b,w.statusText=(c||y)+"",k?p.resolveWith(m,[s,y,w]):p.rejectWith(m,[w,y,t]),w.statusCode(r),r=void 0,i&&o.trigger(k?"ajaxSuccess":"ajaxError",[w,l,k?s:t]),q.fireWith(m,[w,y]),i&&(o.trigger("ajaxComplete",[w,l]),--n.active||n.event.trigger("ajaxStop")))}return w},getJSON:function(a,b,c){return n.get(a,b,c,"json")},getScript:function(a,b){return n.get(a,void 0,b,"script")}}),n.each(["get","post"],function(a,b){n[b]=function(a,c,d,e){return n.isFunction(c)&&(e=e||d,d=c,c=void 0),n.ajax(n.extend({url:a,type:b,dataType:e,data:c,success:d},n.isPlainObject(a)&&a))}}),n._evalUrl=function(a){return n.ajax({url:a,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},n.fn.extend({wrapAll:function(a){if(n.isFunction(a))return this.each(function(b){n(this).wrapAll(a.call(this,b))});if(this[0]){var b=n(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&1===a.firstChild.nodeType)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return n.isFunction(a)?this.each(function(b){n(this).wrapInner(a.call(this,b))}):this.each(function(){var b=n(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=n.isFunction(a);return this.each(function(c){n(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()}});function Yb(a){return a.style&&a.style.display||n.css(a,"display")}function Zb(a){while(a&&1===a.nodeType){if("none"===Yb(a)||"hidden"===a.type)return!0;a=a.parentNode}return!1}n.expr.filters.hidden=function(a){return l.reliableHiddenOffsets()?a.offsetWidth<=0&&a.offsetHeight<=0&&!a.getClientRects().length:Zb(a)},n.expr.filters.visible=function(a){return!n.expr.filters.hidden(a)};var $b=/%20/g,_b=/\[\]$/,ac=/\r?\n/g,bc=/^(?:submit|button|image|reset|file)$/i,cc=/^(?:input|select|textarea|keygen)/i;function dc(a,b,c,d){var e;if(n.isArray(b))n.each(b,function(b,e){c||_b.test(a)?d(a,e):dc(a+"["+("object"==typeof e&&null!=e?b:"")+"]",e,c,d)});else if(c||"object"!==n.type(b))d(a,b);else for(e in b)dc(a+"["+e+"]",b[e],c,d)}n.param=function(a,b){var c,d=[],e=function(a,b){b=n.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(a)||a.jquery&&!n.isPlainObject(a))n.each(a,function(){e(this.name,this.value)});else for(c in a)dc(c,a[c],b,e);return d.join("&").replace($b,"+")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=n.prop(this,"elements");return a?n.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!n(this).is(":disabled")&&cc.test(this.nodeName)&&!bc.test(a)&&(this.checked||!Z.test(a))}).map(function(a,b){var c=n(this).val();return null==c?null:n.isArray(c)?n.map(c,function(a){return{name:b.name,value:a.replace(ac,"\r\n")}}):{name:b.name,value:c.replace(ac,"\r\n")}}).get()}}),n.ajaxSettings.xhr=void 0!==a.ActiveXObject?function(){return this.isLocal?ic():d.documentMode>8?hc():/^(get|post|head|put|delete|options)$/i.test(this.type)&&hc()||ic()}:hc;var ec=0,fc={},gc=n.ajaxSettings.xhr();a.attachEvent&&a.attachEvent("onunload",function(){for(var a in fc)fc[a](void 0,!0)}),l.cors=!!gc&&"withCredentials"in gc,gc=l.ajax=!!gc,gc&&n.ajaxTransport(function(b){if(!b.crossDomain||l.cors){var c;return{send:function(d,e){var f,g=b.xhr(),h=++ec;if(g.open(b.type,b.url,b.async,b.username,b.password),b.xhrFields)for(f in b.xhrFields)g[f]=b.xhrFields[f];b.mimeType&&g.overrideMimeType&&g.overrideMimeType(b.mimeType),b.crossDomain||d["X-Requested-With"]||(d["X-Requested-With"]="XMLHttpRequest");for(f in d)void 0!==d[f]&&g.setRequestHeader(f,d[f]+"");g.send(b.hasContent&&b.data||null),c=function(a,d){var f,i,j;if(c&&(d||4===g.readyState))if(delete fc[h],c=void 0,g.onreadystatechange=n.noop,d)4!==g.readyState&&g.abort();else{j={},f=g.status,"string"==typeof g.responseText&&(j.text=g.responseText);try{i=g.statusText}catch(k){i=""}f||!b.isLocal||b.crossDomain?1223===f&&(f=204):f=j.text?200:404}j&&e(f,i,j,g.getAllResponseHeaders())},b.async?4===g.readyState?a.setTimeout(c):g.onreadystatechange=fc[h]=c:c()},abort:function(){c&&c(void 0,!0)}}}});function hc(){try{return new a.XMLHttpRequest}catch(b){}}function ic(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){return n.globalEval(a),a}}}),n.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),n.ajaxTransport("script",function(a){if(a.crossDomain){var b,c=d.head||n("head")[0]||d.documentElement;return{send:function(e,f){b=d.createElement("script"),b.async=!0,a.scriptCharset&&(b.charset=a.scriptCharset),b.src=a.url,b.onload=b.onreadystatechange=function(a,c){(c||!b.readyState||/loaded|complete/.test(b.readyState))&&(b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),b=null,c||f(200,"success"))},c.insertBefore(b,c.firstChild)},abort:function(){b&&b.onload(void 0,!0)}}}});var jc=[],kc=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=jc.pop()||n.expando+"_"+Eb++;return this[a]=!0,a}}),n.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(kc.test(b.url)?"url":"string"==typeof b.data&&0===(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&kc.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=n.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(kc,"$1"+e):b.jsonp!==!1&&(b.url+=(Fb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||n.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){void 0===f?n(a).removeProp(e):a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,jc.push(e)),g&&n.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),n.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||d;var e=x.exec(a),f=!c&&[];return e?[b.createElement(e[1])]:(e=ja([a],b,f),f&&f.length&&n(f).remove(),n.merge([],e.childNodes))};var lc=n.fn.load;n.fn.load=function(a,b,c){if("string"!=typeof a&&lc)return lc.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>-1&&(d=n.trim(a.slice(h,a.length)),a=a.slice(0,h)),n.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&n.ajax({url:a,type:e||"GET",dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?n("<div>").append(n.parseHTML(a)).find(d):a)}).always(c&&function(a,b){g.each(function(){c.apply(this,f||[a.responseText,b,a])})}),this},n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){n.fn[b]=function(a){return this.on(b,a)}}),n.expr.filters.animated=function(a){return n.grep(n.timers,function(b){return a===b.elem}).length};function mc(a){return n.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}n.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=n.css(a,"position"),l=n(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=n.css(a,"top"),i=n.css(a,"left"),j=("absolute"===k||"fixed"===k)&&n.inArray("auto",[f,i])>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),n.isFunction(b)&&(b=b.call(a,c,n.extend({},h))),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},n.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){n.offset.setOffset(this,a,b)});var b,c,d={top:0,left:0},e=this[0],f=e&&e.ownerDocument;if(f)return b=f.documentElement,n.contains(b,e)?("undefined"!=typeof e.getBoundingClientRect&&(d=e.getBoundingClientRect()),c=mc(f),{top:d.top+(c.pageYOffset||b.scrollTop)-(b.clientTop||0),left:d.left+(c.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}):d},position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===n.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),n.nodeName(a[0],"html")||(c=a.offset()),c.top+=n.css(a[0],"borderTopWidth",!0),c.left+=n.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-n.css(d,"marginTop",!0),left:b.left-c.left-n.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent;while(a&&!n.nodeName(a,"html")&&"static"===n.css(a,"position"))a=a.offsetParent;return a||Qa})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c=/Y/.test(b);n.fn[a]=function(d){return Y(this,function(a,d,e){var f=mc(a);return void 0===e?f?b in f?f[b]:f.document.documentElement[d]:a[d]:void(f?f.scrollTo(c?n(f).scrollLeft():e,c?e:n(f).scrollTop()):a[d]=e)},a,d,arguments.length,null)}}),n.each(["top","left"],function(a,b){n.cssHooks[b]=Ua(l.pixelPosition,function(a,c){return c?(c=Sa(a,b),Oa.test(c)?n(a).position()[b]+"px":c):void 0;
})}),n.each({Height:"height",Width:"width"},function(a,b){n.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){n.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return Y(this,function(b,c,d){var e;return n.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?n.css(b,c,g):n.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),n.fn.extend({bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}}),n.fn.size=function(){return this.length},n.fn.andSelf=n.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return n});var nc=a.jQuery,oc=a.$;return n.noConflict=function(b){return a.$===n&&(a.$=oc),b&&a.jQuery===n&&(a.jQuery=nc),n},b||(a.jQuery=a.$=n),n});
/* Include jQuery Migrate to port over features that we're dependent on.
   Custom build of jquery-migrate | Contains: $.browser | https://github.com/jquery/jquery-migrate */
!function(e){e.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},e.browser||(matched=e.uaMatch(navigator.userAgent),browser={},matched.browser&&(browser[matched.browser]=!0,browser.version=matched.version),browser.chrome?browser.webkit=!0:browser.webkit&&(browser.safari=!0),e.browser=browser)}(jQuery);

/*!
 * jQuery UI Core 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */
!function(t){function e(e,s){var n,o,a,r=e.nodeName.toLowerCase();return"area"===r?(n=e.parentNode,o=n.name,e.href&&o&&"map"===n.nodeName.toLowerCase()?(a=t("img[usemap='#"+o+"']")[0],!!a&&i(a)):!1):(/^(input|select|textarea|button|object)$/.test(r)?!e.disabled:"a"===r?e.href||s:s)&&i(e)}function i(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length}t.ui=t.ui||{},t.extend(t.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({scrollParent:function(e){var i=this.css("position"),s="absolute"===i,n=e?/(auto|scroll|hidden)/:/(auto|scroll)/,o=this.parents().filter(function(){var e=t(this);return s&&"static"===e.css("position")?!1:n.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==i&&o.length?o:t(this[0].ownerDocument||document)},uniqueId:function(){var t=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++t)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,s){return!!t.data(e,s[3])},focusable:function(i){return e(i,!isNaN(t.attr(i,"tabindex")))},tabbable:function(i){var s=t.attr(i,"tabindex"),n=isNaN(s);return(n||s>=0)&&e(i,!n)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(e,i){function s(e,i,s,o){return t.each(n,function(){i-=parseFloat(t.css(e,"padding"+this))||0,s&&(i-=parseFloat(t.css(e,"border"+this+"Width"))||0),o&&(i-=parseFloat(t.css(e,"margin"+this))||0)}),i}var n="Width"===i?["Left","Right"]:["Top","Bottom"],o=i.toLowerCase(),a={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+i]=function(e){return void 0===e?a["inner"+i].call(this):this.each(function(){t(this).css(o,s(this,e)+"px")})},t.fn["outer"+i]=function(e,n){return"number"!=typeof e?a["outer"+i].call(this,e):this.each(function(){t(this).css(o,s(this,e,!0,n)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(i){return arguments.length?e.call(this,t.camelCase(i)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.fn.extend({focus:function(e){return function(i,s){return"number"==typeof i?this.each(function(){var e=this;setTimeout(function(){t(e).focus(),s&&s.call(e)},i)}):e.apply(this,arguments)}}(t.fn.focus),disableSelection:function(){var t="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(t+".ui-disableSelection",function(t){t.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(e){if(void 0!==e)return this.css("zIndex",e);if(this.length)for(var i,s,n=t(this[0]);n.length&&n[0]!==document;){if(i=n.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(s=parseInt(n.css("zIndex"),10),!isNaN(s)&&0!==s))return s;n=n.parent()}return 0}}),t.ui.plugin={add:function(e,i,s){var n,o=t.ui[e].prototype;for(n in s)o.plugins[n]=o.plugins[n]||[],o.plugins[n].push([i,s[n]])},call:function(t,e,i,s){var n,o=t.plugins[e];if(o&&(s||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(n=0;n<o.length;n++)t.options[o[n][0]]&&o[n][1].apply(t.element,i)}}}(jQuery);
/*!
 * jQuery UI Widget 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */
!function(t){var e=0,i=Array.prototype.slice;t.cleanData=function(e){return function(i){var s,n,o;for(o=0;null!=(n=i[o]);o++)try{s=t._data(n,"events"),s&&s.remove&&t(n).triggerHandler("remove")}catch(a){}e(i)}}(t.cleanData),t.widget=function(e,i,s){var n,o,a,r,l={},h=e.split(".")[0];return e=e.split(".")[1],n=h+"-"+e,s||(s=i,i=t.Widget),t.expr[":"][n.toLowerCase()]=function(e){return!!t.data(e,n)},t[h]=t[h]||{},o=t[h][e],a=t[h][e]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new a(t,e)},t.extend(a,o,{version:s.version,_proto:t.extend({},s),_childConstructors:[]}),r=new i,r.options=t.widget.extend({},r.options),t.each(s,function(e,s){return t.isFunction(s)?void(l[e]=function(){var t=function(){return i.prototype[e].apply(this,arguments)},n=function(t){return i.prototype[e].apply(this,t)};return function(){var e,i=this._super,o=this._superApply;return this._super=t,this._superApply=n,e=s.apply(this,arguments),this._super=i,this._superApply=o,e}}()):void(l[e]=s)}),a.prototype=t.widget.extend(r,{widgetEventPrefix:o?r.widgetEventPrefix||e:e},l,{constructor:a,namespace:h,widgetName:e,widgetFullName:n}),o?(t.each(o._childConstructors,function(e,i){var s=i.prototype;t.widget(s.namespace+"."+s.widgetName,a,i._proto)}),delete o._childConstructors):i._childConstructors.push(a),t.widget.bridge(e,a),a},t.widget.extend=function(e){for(var s,n,o=i.call(arguments,1),a=0,r=o.length;r>a;a++)for(s in o[a])n=o[a][s],o[a].hasOwnProperty(s)&&void 0!==n&&(e[s]=t.isPlainObject(n)?t.isPlainObject(e[s])?t.widget.extend({},e[s],n):t.widget.extend({},n):n);return e},t.widget.bridge=function(e,s){var n=s.prototype.widgetFullName||e;t.fn[e]=function(o){var a="string"==typeof o,r=i.call(arguments,1),l=this;return a?this.each(function(){var i,s=t.data(this,n);return"instance"===o?(l=s,!1):s?t.isFunction(s[o])&&"_"!==o.charAt(0)?(i=s[o].apply(s,r),i!==s&&void 0!==i?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0):t.error("no such method '"+o+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+o+"'")}):(r.length&&(o=t.widget.extend.apply(null,[o].concat(r))),this.each(function(){var e=t.data(this,n);e?(e.option(o||{}),e._init&&e._init()):t.data(this,n,new s(o,this))})),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(i,s){s=t(s||this.defaultElement||this)[0],this.element=t(s),this.uuid=e++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),s!==this&&(t.data(s,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===s&&this.destroy()}}),this.document=t(s.style?s.ownerDocument:s.document||s),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),i),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(e,i){var s,n,o,a=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(a={},s=e.split("."),e=s.shift(),s.length){for(n=a[e]=t.widget.extend({},this.options[e]),o=0;o<s.length-1;o++)n[s[o]]=n[s[o]]||{},n=n[s[o]];if(e=s.pop(),1===arguments.length)return void 0===n[e]?null:n[e];n[e]=i}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];a[e]=i}return this._setOptions(a),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!e),e&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(e,i,s){var n,o=this;"boolean"!=typeof e&&(s=i,i=e,e=!1),s?(i=n=t(i),this.bindings=this.bindings.add(i)):(s=i,i=this.element,n=this.widget()),t.each(s,function(s,a){function r(){return e||o.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof a?o[a]:a).apply(o,arguments):void 0}"string"!=typeof a&&(r.guid=a.guid=a.guid||r.guid||t.guid++);var l=s.match(/^([\w:-]*)\s*(.*)$/),h=l[1]+o.eventNamespace,u=l[2];u?n.delegate(u,h,r):i.bind(h,r)})},_off:function(e,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(i).undelegate(i),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){function i(){return("string"==typeof t?s[t]:t).apply(s,arguments)}var s=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,i,s){var n,o,a=this.options[e];if(s=s||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(n in o)n in i||(i[n]=o[n]);return this.element.trigger(i,s),!(t.isFunction(a)&&a.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(s,n,o){"string"==typeof n&&(n={effect:n});var a,r=n?n===!0||"number"==typeof n?i:n.effect||i:e;n=n||{},"number"==typeof n&&(n={duration:n}),a=!t.isEmptyObject(n),n.complete=o,n.delay&&s.delay(n.delay),a&&t.effects&&t.effects.effect[r]?s[e](n):r!==e&&s[r]?s[r](n.duration,n.easing,o):s.queue(function(i){t(this)[e](),o&&o.call(s[0]),i()})}})}(jQuery);
/*!
 * jQuery UI Mouse 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/mouse/
 * 
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 */
!function(t){var e=!1;t(document).mouseup(function(){e=!1});t.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(i){return!0===t.data(i.target,e.widgetName+".preventClickEvent")?(t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!e){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var s=this,n=1===i.which,o="string"==typeof this.options.cancel&&i.target.nodeName?t(i.target).closest(this.options.cancel).length:!1;return n&&!o&&this._mouseCapture(i)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){s.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted)?(i.preventDefault(),!0):(!0===t.data(i.target,this.widgetName+".preventClickEvent")&&t.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return s._mouseMove(t)},this._mouseUpDelegate=function(t){return s._mouseUp(t)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),e=!0,!0)):!0}},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button)return this._mouseUp(e);if(!e.which)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(i){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,i.target===this._mouseDownEvent.target&&t.data(i.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(i)),e=!1,!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery);
/*!
 * jQuery UI Datepicker 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/datepicker/
 * 
 * Depends:
 *	jquery.ui.core.js
 */
!function(t){function e(t){for(var e,i;t.length&&t[0]!==document;){if(e=t.css("position"),("absolute"===e||"relative"===e||"fixed"===e)&&(i=parseInt(t.css("zIndex"),10),!isNaN(i)&&0!==i))return i;t=t.parent()}return 0}function i(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},t.extend(this._defaults,this.regional[""]),this.regional.en=t.extend(!0,{},this.regional[""]),this.regional["en-US"]=t.extend(!0,{},this.regional.en),this.dpDiv=s(t("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function s(e){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(i,"mouseout",function(){t(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",n)}function n(){t.datepicker._isDisabledDatepicker(o.inline?o.dpDiv.parent()[0]:o.input[0])||(t(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),t(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).addClass("ui-datepicker-next-hover"))}function a(e,i){t.extend(e,i);for(var s in i)null==i[s]&&(e[s]=i[s]);return e}t.extend(t.ui,{datepicker:{version:"1.11.4"}});var o;t.extend(i.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return a(this._defaults,t||{}),this},_attachDatepicker:function(e,i){var s,n,a;s=e.nodeName.toLowerCase(),n="div"===s||"span"===s,e.id||(this.uuid+=1,e.id="dp"+this.uuid),a=this._newInst(t(e),n),a.settings=t.extend({},i||{}),"input"===s?this._connectDatepicker(e,a):n&&this._inlineDatepicker(e,a)},_newInst:function(e,i){var n=e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:n,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?s(t("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,i){var s=t(e);i.append=t([]),i.trigger=t([]),s.hasClass(this.markerClassName)||(this._attachments(s,i),s.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),t.data(e,"datepicker",i),i.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,i){var s,n,a,o=this._get(i,"appendText"),u=this._get(i,"isRTL");i.append&&i.append.remove(),o&&(i.append=t("<span class='"+this._appendClass+"'>"+o+"</span>"),e[u?"before":"after"](i.append)),e.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),s=this._get(i,"showOn"),("focus"===s||"both"===s)&&e.focus(this._showDatepicker),("button"===s||"both"===s)&&(n=this._get(i,"buttonText"),a=this._get(i,"buttonImage"),i.trigger=t(this._get(i,"buttonImageOnly")?t("<img/>").addClass(this._triggerClass).attr({src:a,alt:n,title:n}):t("<button type='button'></button>").addClass(this._triggerClass).html(a?t("<img/>").attr({src:a,alt:n,title:n}):n)),e[u?"before":"after"](i.trigger),i.trigger.click(function(){return t.datepicker._datepickerShowing&&t.datepicker._lastInput===e[0]?t.datepicker._hideDatepicker():t.datepicker._datepickerShowing&&t.datepicker._lastInput!==e[0]?(t.datepicker._hideDatepicker(),t.datepicker._showDatepicker(e[0])):t.datepicker._showDatepicker(e[0]),!1}))},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e,i,s,n,a=new Date(2009,11,20),o=this._get(t,"dateFormat");o.match(/[DM]/)&&(e=function(t){for(i=0,s=0,n=0;n<t.length;n++)t[n].length>i&&(i=t[n].length,s=n);return s},a.setMonth(e(this._get(t,o.match(/MM/)?"monthNames":"monthNamesShort"))),a.setDate(e(this._get(t,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-a.getDay())),t.input.attr("size",this._formatDate(t,a).length)}},_inlineDatepicker:function(e,i){var s=t(e);s.hasClass(this.markerClassName)||(s.addClass(this.markerClassName).append(i.dpDiv),t.data(e,"datepicker",i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(e),i.dpDiv.css("display","block"))},_dialogDatepicker:function(e,i,s,n,o){var u,r,l,h,d,c=this._dialogInst;return c||(this.uuid+=1,u="dp"+this.uuid,this._dialogInput=t("<input type='text' id='"+u+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),t("body").append(this._dialogInput),c=this._dialogInst=this._newInst(this._dialogInput,!1),c.settings={},t.data(this._dialogInput[0],"datepicker",c)),a(c.settings,n||{}),i=i&&i.constructor===Date?this._formatDate(c,i):i,this._dialogInput.val(i),this._pos=o?o.length?o:[o.pageX,o.pageY]:null,this._pos||(r=document.documentElement.clientWidth,l=document.documentElement.clientHeight,h=document.documentElement.scrollLeft||document.body.scrollLeft,d=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[r/2-100+h,l/2-150+d]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),c.settings.onSelect=s,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),t.blockUI&&t.blockUI(this.dpDiv),t.data(this._dialogInput[0],"datepicker",c),this},_destroyDatepicker:function(e){var i,s=t(e),n=t.data(e,"datepicker");s.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),t.removeData(e,"datepicker"),"input"===i?(n.append.remove(),n.trigger.remove(),s.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===i||"span"===i)&&s.removeClass(this.markerClassName).empty(),o===n&&(o=null))},_enableDatepicker:function(e){var i,s,n=t(e),a=t.data(e,"datepicker");n.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),"input"===i?(e.disabled=!1,a.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().removeClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}))},_disableDatepicker:function(e){var i,s,n=t(e),a=t.data(e,"datepicker");n.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),"input"===i?(e.disabled=!0,a.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().addClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;e<this._disabledInputs.length;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(e){try{return t.data(e,"datepicker")}catch(i){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,i,s){var n,o,u,r,l=this._getInst(e);return 2===arguments.length&&"string"==typeof i?"defaults"===i?t.extend({},t.datepicker._defaults):l?"all"===i?t.extend({},l.settings):this._get(l,i):null:(n=i||{},"string"==typeof i&&(n={},n[i]=s),void(l&&(this._curInst===l&&this._hideDatepicker(),o=this._getDateDatepicker(e,!0),u=this._getMinMaxDate(l,"min"),r=this._getMinMaxDate(l,"max"),a(l.settings,n),null!==u&&void 0!==n.dateFormat&&void 0===n.minDate&&(l.settings.minDate=this._formatDate(l,u)),null!==r&&void 0!==n.dateFormat&&void 0===n.maxDate&&(l.settings.maxDate=this._formatDate(l,r)),"disabled"in n&&(n.disabled?this._disableDatepicker(e):this._enableDatepicker(e)),this._attachments(t(e),l),this._autoSize(l),this._setDate(l,o),this._updateAlternate(l),this._updateDatepicker(l))))},_changeDatepicker:function(t,e,i){this._optionDatepicker(t,e,i)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var i=this._getInst(t);i&&(this._setDate(i,e),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(t,e){var i=this._getInst(t);return i&&!i.inline&&this._setDateFromField(i,e),i?this._getDate(i):null},_doKeyDown:function(e){var i,s,n,a=t.datepicker._getInst(e.target),o=!0,u=a.dpDiv.is(".ui-datepicker-rtl");if(a._keyEvent=!0,t.datepicker._datepickerShowing)switch(e.keyCode){case 9:t.datepicker._hideDatepicker(),o=!1;break;case 13:return n=t("td."+t.datepicker._dayOverClass+":not(."+t.datepicker._currentClass+")",a.dpDiv),n[0]&&t.datepicker._selectDay(e.target,a.selectedMonth,a.selectedYear,n[0]),i=t.datepicker._get(a,"onSelect"),i?(s=t.datepicker._formatDate(a),i.apply(a.input?a.input[0]:null,[s,a])):t.datepicker._hideDatepicker(),!1;case 27:t.datepicker._hideDatepicker();break;case 33:t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(a,"stepBigMonths"):-t.datepicker._get(a,"stepMonths"),"M");break;case 34:t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(a,"stepBigMonths"):+t.datepicker._get(a,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&t.datepicker._clearDate(e.target),o=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&t.datepicker._gotoToday(e.target),o=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,u?1:-1,"D"),o=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(a,"stepBigMonths"):-t.datepicker._get(a,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,-7,"D"),o=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,u?-1:1,"D"),o=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(a,"stepBigMonths"):+t.datepicker._get(a,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,7,"D"),o=e.ctrlKey||e.metaKey;break;default:o=!1}else 36===e.keyCode&&e.ctrlKey?t.datepicker._showDatepicker(this):o=!1;o&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var i,s,n=t.datepicker._getInst(e.target);return t.datepicker._get(n,"constrainInput")?(i=t.datepicker._possibleChars(t.datepicker._get(n,"dateFormat")),s=String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),e.ctrlKey||e.metaKey||" ">s||!i||i.indexOf(s)>-1):void 0},_doKeyUp:function(e){var i,s=t.datepicker._getInst(e.target);if(s.input.val()!==s.lastVal)try{i=t.datepicker.parseDate(t.datepicker._get(s,"dateFormat"),s.input?s.input.val():null,t.datepicker._getFormatConfig(s)),i&&(t.datepicker._setDateFromField(s),t.datepicker._updateAlternate(s),t.datepicker._updateDatepicker(s))}catch(n){}return!0},_showDatepicker:function(i){if(i=i.target||i,"input"!==i.nodeName.toLowerCase()&&(i=t("input",i.parentNode)[0]),!t.datepicker._isDisabledDatepicker(i)&&t.datepicker._lastInput!==i){var s,n,o,u,r,l,h;s=t.datepicker._getInst(i),t.datepicker._curInst&&t.datepicker._curInst!==s&&(t.datepicker._curInst.dpDiv.stop(!0,!0),s&&t.datepicker._datepickerShowing&&t.datepicker._hideDatepicker(t.datepicker._curInst.input[0])),n=t.datepicker._get(s,"beforeShow"),o=n?n.apply(i,[i,s]):{},o!==!1&&(a(s.settings,o),s.lastVal=null,t.datepicker._lastInput=i,t.datepicker._setDateFromField(s),t.datepicker._inDialog&&(i.value=""),t.datepicker._pos||(t.datepicker._pos=t.datepicker._findPos(i),t.datepicker._pos[1]+=i.offsetHeight),u=!1,t(i).parents().each(function(){return u|="fixed"===t(this).css("position"),!u}),r={left:t.datepicker._pos[0],top:t.datepicker._pos[1]},t.datepicker._pos=null,s.dpDiv.empty(),s.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),t.datepicker._updateDatepicker(s),r=t.datepicker._checkOffset(s,r,u),s.dpDiv.css({position:t.datepicker._inDialog&&t.blockUI?"static":u?"fixed":"absolute",display:"none",left:r.left+"px",top:r.top+"px"}),s.inline||(l=t.datepicker._get(s,"showAnim"),h=t.datepicker._get(s,"duration"),s.dpDiv.css("z-index",e(t(i))+1),t.datepicker._datepickerShowing=!0,t.effects&&t.effects.effect[l]?s.dpDiv.show(l,t.datepicker._get(s,"showOptions"),h):s.dpDiv[l||"show"](l?h:null),t.datepicker._shouldFocusInput(s)&&s.input.focus(),t.datepicker._curInst=s))}},_updateDatepicker:function(e){this.maxRows=4,o=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var i,s=this._getNumberOfMonths(e),a=s[1],u=17,r=e.dpDiv.find("."+this._dayOverClass+" a");r.length>0&&n.apply(r.get(0)),e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),a>1&&e.dpDiv.addClass("ui-datepicker-multi-"+a).css("width",u*a+"em"),e.dpDiv[(1!==s[0]||1!==s[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e===t.datepicker._curInst&&t.datepicker._datepickerShowing&&t.datepicker._shouldFocusInput(e)&&e.input.focus(),e.yearshtml&&(i=e.yearshtml,setTimeout(function(){i===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),i=e.yearshtml=null},0))},_shouldFocusInput:function(t){return t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&!t.input.is(":focus")},_checkOffset:function(e,i,s){var n=e.dpDiv.outerWidth(),a=e.dpDiv.outerHeight(),o=e.input?e.input.outerWidth():0,u=e.input?e.input.outerHeight():0,r=document.documentElement.clientWidth+(s?0:t(document).scrollLeft()),l=document.documentElement.clientHeight+(s?0:t(document).scrollTop());return i.left-=this._get(e,"isRTL")?n-o:0,i.left-=s&&i.left===e.input.offset().left?t(document).scrollLeft():0,i.top-=s&&i.top===e.input.offset().top+u?t(document).scrollTop():0,i.left-=Math.min(i.left,i.left+n>r&&r>n?Math.abs(i.left+n-r):0),i.top-=Math.min(i.top,i.top+a>l&&l>a?Math.abs(a+u):0),i},_findPos:function(e){for(var i,s=this._getInst(e),n=this._get(s,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||t.expr.filters.hidden(e));)e=e[n?"previousSibling":"nextSibling"];return i=t(e).offset(),[i.left,i.top]},_hideDatepicker:function(e){var i,s,n,a,o=this._curInst;!o||e&&o!==t.data(e,"datepicker")||this._datepickerShowing&&(i=this._get(o,"showAnim"),s=this._get(o,"duration"),n=function(){t.datepicker._tidyDialog(o)},t.effects&&(t.effects.effect[i]||t.effects[i])?o.dpDiv.hide(i,t.datepicker._get(o,"showOptions"),s,n):o.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?s:null,n),i||n(),this._datepickerShowing=!1,a=this._get(o,"onClose"),a&&a.apply(o.input?o.input[0]:null,[o.input?o.input.val():"",o]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),t.blockUI&&(t.unblockUI(),t("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(t.datepicker._curInst){var i=t(e.target),s=t.datepicker._getInst(i[0]);(i[0].id!==t.datepicker._mainDivId&&0===i.parents("#"+t.datepicker._mainDivId).length&&!i.hasClass(t.datepicker.markerClassName)&&!i.closest("."+t.datepicker._triggerClass).length&&t.datepicker._datepickerShowing&&(!t.datepicker._inDialog||!t.blockUI)||i.hasClass(t.datepicker.markerClassName)&&t.datepicker._curInst!==s)&&t.datepicker._hideDatepicker()}},_adjustDate:function(e,i,s){var n=t(e),a=this._getInst(n[0]);this._isDisabledDatepicker(n[0])||(this._adjustInstDate(a,i+("M"===s?this._get(a,"showCurrentAtPos"):0),s),this._updateDatepicker(a))},_gotoToday:function(e){var i,s=t(e),n=this._getInst(s[0]);this._get(n,"gotoCurrent")&&n.currentDay?(n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear):(i=new Date,n.selectedDay=i.getDate(),n.drawMonth=n.selectedMonth=i.getMonth(),n.drawYear=n.selectedYear=i.getFullYear()),this._notifyChange(n),this._adjustDate(s)},_selectMonthYear:function(e,i,s){var n=t(e),a=this._getInst(n[0]);a["selected"+("M"===s?"Month":"Year")]=a["draw"+("M"===s?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(a),this._adjustDate(n)},_selectDay:function(e,i,s,n){var a,o=t(e);t(n).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0])||(a=this._getInst(o[0]),a.selectedDay=a.currentDay=t("a",n).html(),a.selectedMonth=a.currentMonth=i,a.selectedYear=a.currentYear=s,this._selectDate(e,this._formatDate(a,a.currentDay,a.currentMonth,a.currentYear)))},_clearDate:function(e){var i=t(e);this._selectDate(i,"")},_selectDate:function(e,i){var s,n=t(e),a=this._getInst(n[0]);i=null!=i?i:this._formatDate(a),a.input&&a.input.val(i),this._updateAlternate(a),s=this._get(a,"onSelect"),s?s.apply(a.input?a.input[0]:null,[i,a]):a.input&&a.input.trigger("change"),a.inline?this._updateDatepicker(a):(this._hideDatepicker(),this._lastInput=a.input[0],"object"!=typeof a.input[0]&&a.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var i,s,n,a=this._get(e,"altField");a&&(i=this._get(e,"altFormat")||this._get(e,"dateFormat"),s=this._getDate(e),n=this.formatDate(i,s,this._getFormatConfig(e)),t(a).each(function(){t(this).val(n)}))},noWeekends:function(t){var e=t.getDay();return[e>0&&6>e,""]},iso8601Week:function(t){var e,i=new Date(t.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),e=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((e-i)/864e5)/7)+1},parseDate:function(e,i,s){if(null==e||null==i)throw"Invalid arguments";if(i="object"==typeof i?""+i:i+"",""===i)return null;var n,a,o,u,r=0,l=(s?s.shortYearCutoff:null)||this._defaults.shortYearCutoff,h="string"!=typeof l?l:(new Date).getFullYear()%100+parseInt(l,10),d=(s?s.dayNamesShort:null)||this._defaults.dayNamesShort,c=(s?s.dayNames:null)||this._defaults.dayNames,p=(s?s.monthNamesShort:null)||this._defaults.monthNamesShort,m=(s?s.monthNames:null)||this._defaults.monthNames,b=-1,f=-1,v=-1,y=-1,g=!1,_=function(t){var i=n+1<e.length&&e.charAt(n+1)===t;return i&&n++,i},k=function(t){var e=_(t),s="@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2,n="y"===t?s:1,a=RegExp("^\\d{"+n+","+s+"}"),o=i.substring(r).match(a);if(!o)throw"Missing number at position "+r;return r+=o[0].length,parseInt(o[0],10)},C=function(e,s,n){var a=-1,o=t.map(_(e)?n:s,function(t,e){return[[e,t]]}).sort(function(t,e){return-(t[1].length-e[1].length)});if(t.each(o,function(t,e){var s=e[1];return i.substr(r,s.length).toLowerCase()===s.toLowerCase()?(a=e[0],r+=s.length,!1):void 0}),-1!==a)return a+1;throw"Unknown name at position "+r},E=function(){if(i.charAt(r)!==e.charAt(n))throw"Unexpected literal at position "+r;r++};for(n=0;n<e.length;n++)if(g)"'"!==e.charAt(n)||_("'")?E():g=!1;else switch(e.charAt(n)){case"d":v=k("d");break;case"D":C("D",d,c);break;case"o":y=k("o");break;case"m":f=k("m");break;case"M":f=C("M",p,m);break;case"y":b=k("y");break;case"@":u=new Date(k("@")),b=u.getFullYear(),f=u.getMonth()+1,v=u.getDate();break;case"!":u=new Date((k("!")-this._ticksTo1970)/1e4),b=u.getFullYear(),f=u.getMonth()+1,v=u.getDate();break;case"'":_("'")?E():g=!0;break;default:E()}if(r<i.length&&(o=i.substr(r),!/^\s+/.test(o)))throw"Extra/unparsed characters found in date: "+o;if(-1===b?b=(new Date).getFullYear():100>b&&(b+=(new Date).getFullYear()-(new Date).getFullYear()%100+(b>h?-100:0)),y>-1)for(f=1,v=y;;){if(a=this._getDaysInMonth(b,f-1),a>=v)break;f++,v-=a}if(u=this._daylightSavingAdjust(new Date(b,f-1,v)),u.getFullYear()!==b||u.getMonth()+1!==f||u.getDate()!==v)throw"Invalid date";return u},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(t,e,i){if(!e)return"";var s,n=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,a=(i?i.dayNames:null)||this._defaults.dayNames,o=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,u=(i?i.monthNames:null)||this._defaults.monthNames,r=function(e){var i=s+1<t.length&&t.charAt(s+1)===e;return i&&s++,i},l=function(t,e,i){var s=""+e;if(r(t))for(;s.length<i;)s="0"+s;return s},h=function(t,e,i,s){return r(t)?s[e]:i[e]},d="",c=!1;if(e)for(s=0;s<t.length;s++)if(c)"'"!==t.charAt(s)||r("'")?d+=t.charAt(s):c=!1;else switch(t.charAt(s)){case"d":d+=l("d",e.getDate(),2);break;case"D":d+=h("D",e.getDay(),n,a);break;case"o":d+=l("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":d+=l("m",e.getMonth()+1,2);break;case"M":d+=h("M",e.getMonth(),o,u);break;case"y":d+=r("y")?e.getFullYear():(e.getYear()%100<10?"0":"")+e.getYear()%100;break;case"@":d+=e.getTime();break;case"!":d+=1e4*e.getTime()+this._ticksTo1970;break;case"'":r("'")?d+="'":c=!0;break;default:d+=t.charAt(s)}return d},_possibleChars:function(t){var e,i="",s=!1,n=function(i){var s=e+1<t.length&&t.charAt(e+1)===i;return s&&e++,s};for(e=0;e<t.length;e++)if(s)"'"!==t.charAt(e)||n("'")?i+=t.charAt(e):s=!1;else switch(t.charAt(e)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":n("'")?i+="'":s=!0;break;default:i+=t.charAt(e)}return i},_get:function(t,e){return void 0!==t.settings[e]?t.settings[e]:this._defaults[e]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var i=this._get(t,"dateFormat"),s=t.lastVal=t.input?t.input.val():null,n=this._getDefaultDate(t),a=n,o=this._getFormatConfig(t);try{a=this.parseDate(i,s,o)||n}catch(u){s=e?"":s}t.selectedDay=a.getDate(),t.drawMonth=t.selectedMonth=a.getMonth(),t.drawYear=t.selectedYear=a.getFullYear(),t.currentDay=s?a.getDate():0,t.currentMonth=s?a.getMonth():0,t.currentYear=s?a.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(e,i,s){var n=function(t){var e=new Date;return e.setDate(e.getDate()+t),e},a=function(i){try{return t.datepicker.parseDate(t.datepicker._get(e,"dateFormat"),i,t.datepicker._getFormatConfig(e))}catch(s){}for(var n=(i.toLowerCase().match(/^c/)?t.datepicker._getDate(e):null)||new Date,a=n.getFullYear(),o=n.getMonth(),u=n.getDate(),r=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=r.exec(i);l;){switch(l[2]||"d"){case"d":case"D":u+=parseInt(l[1],10);break;case"w":case"W":u+=7*parseInt(l[1],10);break;case"m":case"M":o+=parseInt(l[1],10),u=Math.min(u,t.datepicker._getDaysInMonth(a,o));break;case"y":case"Y":a+=parseInt(l[1],10),u=Math.min(u,t.datepicker._getDaysInMonth(a,o))}l=r.exec(i)}return new Date(a,o,u)},o=null==i||""===i?s:"string"==typeof i?a(i):"number"==typeof i?isNaN(i)?s:n(i):new Date(i.getTime());return o=o&&""+o=="Invalid Date"?s:o,o&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(t){return t?(t.setHours(t.getHours()>12?t.getHours()+2:0),t):null},_setDate:function(t,e,i){var s=!e,n=t.selectedMonth,a=t.selectedYear,o=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=o.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=o.getMonth(),t.drawYear=t.selectedYear=t.currentYear=o.getFullYear(),n===t.selectedMonth&&a===t.selectedYear||i||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(s?"":this._formatDate(t))},_getDate:function(t){var e=!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return e},_attachHandlers:function(e){var i=this._get(e,"stepMonths"),s="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){t.datepicker._adjustDate(s,-i,"M")},next:function(){t.datepicker._adjustDate(s,+i,"M")},hide:function(){t.datepicker._hideDatepicker()},today:function(){t.datepicker._gotoToday(s)},selectDay:function(){return t.datepicker._selectDay(s,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return t.datepicker._selectMonthYear(s,this,"M"),!1},selectYear:function(){return t.datepicker._selectMonthYear(s,this,"Y"),!1}};t(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(t){var e,i,s,n,a,o,u,r,l,h,d,c,p,m,b,f,v,y,g,_,k,C,E,x,w,D,$,N,T,M,A,I,S,O,P,R,B,F,Y,j=new Date,L=this._daylightSavingAdjust(new Date(j.getFullYear(),j.getMonth(),j.getDate())),K=this._get(t,"isRTL"),W=this._get(t,"showButtonPanel"),G=this._get(t,"hideIfNoPrevNext"),H=this._get(t,"navigationAsDateFormat"),U=this._getNumberOfMonths(t),z=this._get(t,"showCurrentAtPos"),q=this._get(t,"stepMonths"),Q=1!==U[0]||1!==U[1],J=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),V=this._getMinMaxDate(t,"min"),X=this._getMinMaxDate(t,"max"),Z=t.drawMonth-z,te=t.drawYear;if(0>Z&&(Z+=12,te--),X)for(e=this._daylightSavingAdjust(new Date(X.getFullYear(),X.getMonth()-U[0]*U[1]+1,X.getDate())),e=V&&V>e?V:e;this._daylightSavingAdjust(new Date(te,Z,1))>e;)Z--,0>Z&&(Z=11,te--);for(t.drawMonth=Z,t.drawYear=te,i=this._get(t,"prevText"),i=H?this.formatDate(i,this._daylightSavingAdjust(new Date(te,Z-q,1)),this._getFormatConfig(t)):i,s=this._canAdjustMonth(t,-1,te,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(K?"e":"w")+"'>"+i+"</span></a>":G?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(K?"e":"w")+"'>"+i+"</span></a>",n=this._get(t,"nextText"),n=H?this.formatDate(n,this._daylightSavingAdjust(new Date(te,Z+q,1)),this._getFormatConfig(t)):n,a=this._canAdjustMonth(t,1,te,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(K?"w":"e")+"'>"+n+"</span></a>":G?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(K?"w":"e")+"'>"+n+"</span></a>",o=this._get(t,"currentText"),u=this._get(t,"gotoCurrent")&&t.currentDay?J:L,o=H?this.formatDate(o,u,this._getFormatConfig(t)):o,r=t.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>",l=W?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(K?r:"")+(this._isInRange(t,u)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+o+"</button>":"")+(K?"":r)+"</div>":"",h=parseInt(this._get(t,"firstDay"),10),h=isNaN(h)?0:h,d=this._get(t,"showWeek"),c=this._get(t,"dayNames"),p=this._get(t,"dayNamesMin"),m=this._get(t,"monthNames"),b=this._get(t,"monthNamesShort"),f=this._get(t,"beforeShowDay"),v=this._get(t,"showOtherMonths"),y=this._get(t,"selectOtherMonths"),g=this._getDefaultDate(t),_="",C=0;C<U[0];C++){for(E="",this.maxRows=4,x=0;x<U[1];x++){if(w=this._daylightSavingAdjust(new Date(te,Z,t.selectedDay)),D=" ui-corner-all",$="",Q){if($+="<div class='ui-datepicker-group",U[1]>1)switch(x){case 0:$+=" ui-datepicker-group-first",D=" ui-corner-"+(K?"right":"left");break;case U[1]-1:$+=" ui-datepicker-group-last",D=" ui-corner-"+(K?"left":"right");break;default:$+=" ui-datepicker-group-middle",D=""}$+="'>"}for($+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+D+"'>"+(/all|left/.test(D)&&0===C?K?a:s:"")+(/all|right/.test(D)&&0===C?K?s:a:"")+this._generateMonthYearHeader(t,Z,te,V,X,C>0||x>0,m,b)+"</div><table class='ui-datepicker-calendar'><thead><tr>",N=d?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",k=0;7>k;k++)T=(k+h)%7,N+="<th scope='col'"+(5>(k+h+6)%7?"":" class='ui-datepicker-week-end'")+"><span title='"+c[T]+"'>"+p[T]+"</span></th>";for($+=N+"</tr></thead><tbody>",M=this._getDaysInMonth(te,Z),te===t.selectedYear&&Z===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,M)),A=(this._getFirstDayOfMonth(te,Z)-h+7)%7,I=Math.ceil((A+M)/7),S=Q&&this.maxRows>I?this.maxRows:I,this.maxRows=S,O=this._daylightSavingAdjust(new Date(te,Z,1-A)),P=0;S>P;P++){for($+="<tr>",R=d?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(O)+"</td>":"",k=0;7>k;k++)B=f?f.apply(t.input?t.input[0]:null,[O]):[!0,""],F=O.getMonth()!==Z,Y=F&&!y||!B[0]||V&&V>O||X&&O>X,R+="<td class='"+(5>(k+h+6)%7?"":" ui-datepicker-week-end")+(F?" ui-datepicker-other-month":"")+(O.getTime()===w.getTime()&&Z===t.selectedMonth&&t._keyEvent||g.getTime()===O.getTime()&&g.getTime()===w.getTime()?" "+this._dayOverClass:"")+(Y?" "+this._unselectableClass+" ui-state-disabled":"")+(F&&!v?"":" "+B[1]+(O.getTime()===J.getTime()?" "+this._currentClass:"")+(O.getTime()===L.getTime()?" ui-datepicker-today":""))+"'"+(F&&!v||!B[2]?"":" title='"+B[2].replace(/'/g,"&#39;")+"'")+(Y?"":" data-handler='selectDay' data-event='click' data-month='"+O.getMonth()+"' data-year='"+O.getFullYear()+"'")+">"+(F&&!v?"&#xa0;":Y?"<span class='ui-state-default'>"+O.getDate()+"</span>":"<a class='ui-state-default"+(O.getTime()===L.getTime()?" ui-state-highlight":"")+(O.getTime()===J.getTime()?" ui-state-active":"")+(F?" ui-priority-secondary":"")+"' href='#'>"+O.getDate()+"</a>")+"</td>",O.setDate(O.getDate()+1),O=this._daylightSavingAdjust(O);$+=R+"</tr>"}Z++,Z>11&&(Z=0,te++),$+="</tbody></table>"+(Q?"</div>"+(U[0]>0&&x===U[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),E+=$}_+=E}return _+=l,t._keyEvent=!1,_},_generateMonthYearHeader:function(t,e,i,s,n,a,o,u){var r,l,h,d,c,p,m,b,f=this._get(t,"changeMonth"),v=this._get(t,"changeYear"),y=this._get(t,"showMonthAfterYear"),g="<div class='ui-datepicker-title'>",_="";if(a||!f)_+="<span class='ui-datepicker-month'>"+o[e]+"</span>";else{for(r=s&&s.getFullYear()===i,l=n&&n.getFullYear()===i,_+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",h=0;12>h;h++)r&&h<s.getMonth()||l&&h>n.getMonth()||(_+="<option value='"+h+"'"+(h===e?" selected='selected'":"")+">"+u[h]+"</option>");
_+="</select>"}if(y||(g+=_+(!a&&f&&v?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",a||!v)g+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(d=this._get(t,"yearRange").split(":"),c=(new Date).getFullYear(),p=function(t){var e=t.match(/c[+\-].*/)?i+parseInt(t.substring(1),10):t.match(/[+\-].*/)?c+parseInt(t,10):parseInt(t,10);return isNaN(e)?c:e},m=p(d[0]),b=Math.max(m,p(d[1]||"")),m=s?Math.max(m,s.getFullYear()):m,b=n?Math.min(b,n.getFullYear()):b,t.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";b>=m;m++)t.yearshtml+="<option value='"+m+"'"+(m===i?" selected='selected'":"")+">"+m+"</option>";t.yearshtml+="</select>",g+=t.yearshtml,t.yearshtml=null}return g+=this._get(t,"yearSuffix"),y&&(g+=(!a&&f&&v?"":"&#xa0;")+_),g+="</div>"},_adjustInstDate:function(t,e,i){var s=t.drawYear+("Y"===i?e:0),n=t.drawMonth+("M"===i?e:0),a=Math.min(t.selectedDay,this._getDaysInMonth(s,n))+("D"===i?e:0),o=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(s,n,a)));t.selectedDay=o.getDate(),t.drawMonth=t.selectedMonth=o.getMonth(),t.drawYear=t.selectedYear=o.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(t)},_restrictMinMax:function(t,e){var i=this._getMinMaxDate(t,"min"),s=this._getMinMaxDate(t,"max"),n=i&&i>e?i:e;return s&&n>s?s:n},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,i,s){var n=this._getNumberOfMonths(t),a=this._daylightSavingAdjust(new Date(i,s+(0>e?e:n[0]*n[1]),1));return 0>e&&a.setDate(this._getDaysInMonth(a.getFullYear(),a.getMonth())),this._isInRange(t,a)},_isInRange:function(t,e){var i,s,n=this._getMinMaxDate(t,"min"),a=this._getMinMaxDate(t,"max"),o=null,u=null,r=this._get(t,"yearRange");return r&&(i=r.split(":"),s=(new Date).getFullYear(),o=parseInt(i[0],10),u=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(o+=s),i[1].match(/[+\-].*/)&&(u+=s)),!(n&&e.getTime()<n.getTime()||a&&e.getTime()>a.getTime()||o&&e.getFullYear()<o||u&&e.getFullYear()>u)},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),{shortYearCutoff:e,dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,i,s){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var n=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(s,i,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),n,this._getFormatConfig(t))}}),t.fn.datepicker=function(e){if(!this.length)return this;t.datepicker.initialized||(t(document).mousedown(t.datepicker._checkExternalClick),t.datepicker.initialized=!0),0===t("#"+t.datepicker._mainDivId).length&&t("body").append(t.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!==e&&"getDate"!==e&&"widget"!==e?"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof e?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this].concat(i)):t.datepicker._attachDatepicker(this,e)}):t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i))},t.datepicker=new i,t.datepicker.initialized=!1,t.datepicker.uuid=(new Date).getTime(),t.datepicker.version="1.11.4"}(jQuery);
function enableDatePicker(b,a,c){var d=(c!=false);if(b.toUpperCase()=="DATE"){jQuery(a).datepicker("destroy");jQuery(a).datepicker({changeMonth:true,changeYear:true,showOtherMonths:true,selectOtherMonths:true,constrainInput:d})}else{if(b.toUpperCase()=="DATETIME"){jQuery(a).datepicker("destroy");jQuery(a).datepicker({changeMonth:true,changeYear:true,showOtherMonths:true,selectOtherMonths:true,onSelect:appendTime,constrainInput:d})}}}function getCurrentDateFormatted(){var a="";if(dateFormat){a=dateFormat}return jQuery.datepicker.formatDate(dateFormat,new Date())}function parseTime(a){if(currentLocale==""||currentLocale=="en-US"||currentLocale=="en-AU"||currentLocale=="en-CA"||currentLocale=="en-NZ"||currentLocale=="ar"||currentLocale=="el"||currentLocale=="zh-TW"||currentLocale=="zh-CN"||currentLocale=="zh-HK"||currentLocale=="ko"){a=parse12HourTime(a)}else{a=parse24HourTime(a)}return a}function parse12HourTime(b){var c,a;if(b.indexOf("AM")!=-1){a="AM";b=b.replace("AM","")}else{a="PM";b=b.replace("PM","")}b=b.trim();c=b.split(":");if(a=="PM"){c[0]=(c[0]*1)+12;c[0]=c[0].toString()}c[0]=("0"+c[0]).slice(-2);b=c.join(":");b=b+":00";return b}function parse24HourTime(a){var b;a=a.trim();b=a.split(":");b[0]=("0"+b[0]).slice(-2);a=b.join(":");a=a+":00";return a}function getCurrentTimeFormatted(){var a="";if(currentLocale==""||currentLocale=="en-US"||currentLocale=="en-AU"||currentLocale=="en-CA"||currentLocale=="en-NZ"||currentLocale=="ar"||currentLocale=="el"){a=get12HourTime()}else{if(currentLocale=="zh-TW"||currentLocale=="zh-CN"||currentLocale=="zh-HK"||currentLocale=="ko"){a=getChinaTime(currentLocale)}else{a=get24HourTime()}}return a}function getTimeFormatted(a){var b="";if(currentLocale==""||currentLocale=="en-US"||currentLocale=="en-AU"||currentLocale=="en-CA"||currentLocale=="en-NZ"||currentLocale=="ar"||currentLocale=="el"){b=get12HourTime(a)}else{if(currentLocale=="zh-TW"||currentLocale=="zh-CN"||currentLocale=="zh-HK"||currentLocale=="ko"){b=getChinaTime(currentLocale,a)}else{b=get24HourTime(a)}}return b}function disableDatePicker(a){jQuery(a).datepicker("destroy")}function appendTime(c,a){var b=jQuery(this).parent().find("input.gbt");if(b.length>0){if(b.val().trim()==""){b.val(getCurrentTimeFormatted())}b.change()}else{jQuery(this).val(c+" "+getCurrentTimeFormatted());jQuery(this).change()}}function get12HourTime(e){var g=e?e:new Date();var a=g.getHours();var b=g.getMinutes();var c;var f;if(a==0){a=12;c="AM"}else{if(a<12){c="AM"}else{if(a>12){a-=12}c="PM"}}if(b<10){f=a+":0"+b+" "+c}else{f=a+":"+b+" "+c}return f}function get24HourTime(c){var f=c?c:new Date();var a=f.getHours();var b=f.getMinutes();var e;if(b<10){e=a+":0"+b}else{e=a+":"+b}return e}function getChinaTime(a,f){var h=f?f:new Date();var b=h.getHours();var c=h.getMinutes();var e;var g;if(b==0){b=12;e="AM"}else{if(b<12){e="AM"}else{if(b>12){b-=12}e="PM"}}if(c<10){c="0"+c}if(a=="zh-TW"||a=="ko"){g=e+" "+b+":"+c}else{if(a=="zh-CN"||a=="zh-HK"){g=e+b+":"+c}}return g};
/*!
 * jQuery UI Draggable 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/draggable/
 * 
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *	jquery.ui.mouse.js
 */
!function(t){t.widget("ui.draggable",t.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(e){var i=this.options;return this._blurActiveElement(e),this.helper||i.disabled||t(e.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(e),this.handle?(this._blockFrames(i.iframeFix===!0?"iframe":i.iframeFix),!0):!1)},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map(function(){var e=t(this);return t("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(e){var i=this.document[0];if(this.handleElement.is(e.target))try{i.activeElement&&"body"!==i.activeElement.nodeName.toLowerCase()&&t(i.activeElement).blur()}catch(s){}},_mouseStart:function(e){var i=this.options;return this.helper=this._createHelper(e),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===t(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(e),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",e)===!1?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._normalizeRightBottom(),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(e,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var s=this._uiHash();if(this._trigger("drag",e,s)===!1)return this._mouseUp({}),!1;this.position=s.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var i=this,s=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(s=t.ui.ddmanager.drop(this,e)),this.dropped&&(s=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!s||"valid"===this.options.revert&&s||this.options.revert===!0||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",e)!==!1&&i._clear()}):this._trigger("stop",e)!==!1&&this._clear(),!1},_mouseUp:function(e){return this._unblockFrames(),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),this.handleElement.is(e.target)&&this.element.focus(),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){return this.options.handle?!!t(e.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper),n=s?t(i.helper.apply(this.element[0],[e])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),s&&n[0]===this.element[0]&&this._setPositionRelative(),n[0]===this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,s,n=this.options,o=this.document[0];return this.relativeContainer=null,n.containment?"window"===n.containment?void(this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===n.containment?void(this.containment=[0,0,t(o).width()-this.helperProportions.width-this.margins.left,(t(o).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):n.containment.constructor===Array?void(this.containment=n.containment):("parent"===n.containment&&(n.containment=this.helper[0].parentNode),i=t(n.containment),s=i[0],void(s&&(e=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(e?Math.max(s.scrollWidth,s.offsetWidth):s.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(s.scrollHeight,s.offsetHeight):s.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i))):void(this.containment=null)},_convertPositionTo:function(t,e){e||(e=this.position);var i="absolute"===t?1:-1,s=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:s?0:this.offset.scroll.top)*i,left:e.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:s?0:this.offset.scroll.left)*i}},_generatePosition:function(t,e){var i,s,n,o,a=this.options,r=this._isRootNode(this.scrollParent[0]),u=t.pageX,l=t.pageY;return r&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(this.relativeContainer?(s=this.relativeContainer.offset(),i=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(u=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(l=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(u=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(l=i[3]+this.offset.click.top)),a.grid&&(n=a.grid[1]?this.originalPageY+Math.round((l-this.originalPageY)/a.grid[1])*a.grid[1]:this.originalPageY,l=i?n-this.offset.click.top>=i[1]||n-this.offset.click.top>i[3]?n:n-this.offset.click.top<i[1]?n+a.grid[1]:n-a.grid[1]:n,o=a.grid[0]?this.originalPageX+Math.round((u-this.originalPageX)/a.grid[0])*a.grid[0]:this.originalPageX,u=i?o-this.offset.click.left>=i[0]||o-this.offset.click.left>i[2]?o:o-this.offset.click.left<i[0]?o+a.grid[0]:o-a.grid[0]:o),"y"===a.axis&&(u=this.originalPageX),"x"===a.axis&&(l=this.originalPageY)),{top:l-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:r?0:this.offset.scroll.top),left:u-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:r?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(e,i,s){return s=s||this._uiHash(),t.ui.plugin.call(this,e,[i,s,this],!0),/^(drag|start|stop)/.test(e)&&(this.positionAbs=this._convertPositionTo("absolute"),s.offset=this.positionAbs),t.Widget.prototype._trigger.call(this,e,i,s)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,i,s){var n=t.extend({},i,{item:s.element});s.sortables=[],t(s.options.connectToSortable).each(function(){var i=t(this).sortable("instance");i&&!i.options.disabled&&(s.sortables.push(i),i.refreshPositions(),i._trigger("activate",e,n))})},stop:function(e,i,s){var n=t.extend({},i,{item:s.element});s.cancelHelperRemoval=!1,t.each(s.sortables,function(){var t=this;t.isOver?(t.isOver=0,s.cancelHelperRemoval=!0,t.cancelHelperRemoval=!1,t._storedCSS={position:t.placeholder.css("position"),top:t.placeholder.css("top"),left:t.placeholder.css("left")},t._mouseStop(e),t.options.helper=t.options._helper):(t.cancelHelperRemoval=!0,t._trigger("deactivate",e,n))})},drag:function(e,i,s){t.each(s.sortables,function(){var n=!1,o=this;o.positionAbs=s.positionAbs,o.helperProportions=s.helperProportions,o.offset.click=s.offset.click,o._intersectsWith(o.containerCache)&&(n=!0,t.each(s.sortables,function(){return this.positionAbs=s.positionAbs,this.helperProportions=s.helperProportions,this.offset.click=s.offset.click,this!==o&&this._intersectsWith(this.containerCache)&&t.contains(o.element[0],this.element[0])&&(n=!1),n})),n?(o.isOver||(o.isOver=1,s._parent=i.helper.parent(),o.currentItem=i.helper.appendTo(o.element).data("ui-sortable-item",!0),o.options._helper=o.options.helper,o.options.helper=function(){return i.helper[0]},e.target=o.currentItem[0],o._mouseCapture(e,!0),o._mouseStart(e,!0,!0),o.offset.click.top=s.offset.click.top,o.offset.click.left=s.offset.click.left,o.offset.parent.left-=s.offset.parent.left-o.offset.parent.left,o.offset.parent.top-=s.offset.parent.top-o.offset.parent.top,s._trigger("toSortable",e),s.dropped=o.element,t.each(s.sortables,function(){this.refreshPositions()}),s.currentItem=s.element,o.fromOutside=s),o.currentItem&&(o._mouseDrag(e),i.position=o.position)):o.isOver&&(o.isOver=0,o.cancelHelperRemoval=!0,o.options._revert=o.options.revert,o.options.revert=!1,o._trigger("out",e,o._uiHash(o)),o._mouseStop(e,!0),o.options.revert=o.options._revert,o.options.helper=o.options._helper,o.placeholder&&o.placeholder.remove(),i.helper.appendTo(s._parent),s._refreshOffsets(e),i.position=s._generatePosition(e,!0),s._trigger("fromSortable",e),s.dropped=!1,t.each(s.sortables,function(){this.refreshPositions()}))})}}),t.ui.plugin.add("draggable","cursor",{start:function(e,i,s){var n=t("body"),o=s.options;n.css("cursor")&&(o._cursor=n.css("cursor")),n.css("cursor",o.cursor)},stop:function(e,i,s){var n=s.options;n._cursor&&t("body").css("cursor",n._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,i,s){var n=t(i.helper),o=s.options;n.css("opacity")&&(o._opacity=n.css("opacity")),n.css("opacity",o.opacity)},stop:function(e,i,s){var n=s.options;n._opacity&&t(i.helper).css("opacity",n._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(t,e,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(e,i,s){var n=s.options,o=!1,a=s.scrollParentNotHidden[0],r=s.document[0];a!==r&&"HTML"!==a.tagName?(n.axis&&"x"===n.axis||(s.overflowOffset.top+a.offsetHeight-e.pageY<n.scrollSensitivity?a.scrollTop=o=a.scrollTop+n.scrollSpeed:e.pageY-s.overflowOffset.top<n.scrollSensitivity&&(a.scrollTop=o=a.scrollTop-n.scrollSpeed)),n.axis&&"y"===n.axis||(s.overflowOffset.left+a.offsetWidth-e.pageX<n.scrollSensitivity?a.scrollLeft=o=a.scrollLeft+n.scrollSpeed:e.pageX-s.overflowOffset.left<n.scrollSensitivity&&(a.scrollLeft=o=a.scrollLeft-n.scrollSpeed))):(n.axis&&"x"===n.axis||(e.pageY-t(r).scrollTop()<n.scrollSensitivity?o=t(r).scrollTop(t(r).scrollTop()-n.scrollSpeed):t(window).height()-(e.pageY-t(r).scrollTop())<n.scrollSensitivity&&(o=t(r).scrollTop(t(r).scrollTop()+n.scrollSpeed))),n.axis&&"y"===n.axis||(e.pageX-t(r).scrollLeft()<n.scrollSensitivity?o=t(r).scrollLeft(t(r).scrollLeft()-n.scrollSpeed):t(window).width()-(e.pageX-t(r).scrollLeft())<n.scrollSensitivity&&(o=t(r).scrollLeft(t(r).scrollLeft()+n.scrollSpeed)))),o!==!1&&t.ui.ddmanager&&!n.dropBehaviour&&t.ui.ddmanager.prepareOffsets(s,e)}}),t.ui.plugin.add("draggable","snap",{start:function(e,i,s){var n=s.options;s.snapElements=[],t(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var e=t(this),i=e.offset();this!==s.element[0]&&s.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:i.top,left:i.left})})},drag:function(e,i,s){var n,o,a,r,u,l,h,c,d,p,m=s.options,b=m.snapTolerance,f=i.offset.left,v=f+s.helperProportions.width,g=i.offset.top,y=g+s.helperProportions.height;for(d=s.snapElements.length-1;d>=0;d--)u=s.snapElements[d].left-s.margins.left,l=u+s.snapElements[d].width,h=s.snapElements[d].top-s.margins.top,c=h+s.snapElements[d].height,u-b>v||f>l+b||h-b>y||g>c+b||!t.contains(s.snapElements[d].item.ownerDocument,s.snapElements[d].item)?(s.snapElements[d].snapping&&s.options.snap.release&&s.options.snap.release.call(s.element,e,t.extend(s._uiHash(),{snapItem:s.snapElements[d].item})),s.snapElements[d].snapping=!1):("inner"!==m.snapMode&&(n=Math.abs(h-y)<=b,o=Math.abs(c-g)<=b,a=Math.abs(u-v)<=b,r=Math.abs(l-f)<=b,n&&(i.position.top=s._convertPositionTo("relative",{top:h-s.helperProportions.height,left:0}).top),o&&(i.position.top=s._convertPositionTo("relative",{top:c,left:0}).top),a&&(i.position.left=s._convertPositionTo("relative",{top:0,left:u-s.helperProportions.width}).left),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l}).left)),p=n||o||a||r,"outer"!==m.snapMode&&(n=Math.abs(h-g)<=b,o=Math.abs(c-y)<=b,a=Math.abs(u-f)<=b,r=Math.abs(l-v)<=b,n&&(i.position.top=s._convertPositionTo("relative",{top:h,left:0}).top),o&&(i.position.top=s._convertPositionTo("relative",{top:c-s.helperProportions.height,left:0}).top),a&&(i.position.left=s._convertPositionTo("relative",{top:0,left:u}).left),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l-s.helperProportions.width}).left)),!s.snapElements[d].snapping&&(n||o||a||r||p)&&s.options.snap.snap&&s.options.snap.snap.call(s.element,e,t.extend(s._uiHash(),{snapItem:s.snapElements[d].item})),s.snapElements[d].snapping=n||o||a||r||p)}}),t.ui.plugin.add("draggable","stack",{start:function(e,i,s){var n,o=s.options,a=t.makeArray(t(o.stack)).sort(function(e,i){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(i).css("zIndex"),10)||0)});a.length&&(n=parseInt(t(a[0]).css("zIndex"),10)||0,t(a).each(function(e){t(this).css("zIndex",n+e)}),this.css("zIndex",n+a.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,i,s){var n=t(i.helper),o=s.options;n.css("zIndex")&&(o._zIndex=n.css("zIndex")),n.css("zIndex",o.zIndex)},stop:function(e,i,s){var n=s.options;n._zIndex&&t(i.helper).css("zIndex",n._zIndex)}})}(jQuery);
/*!
 * jQuery UI Resizable 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/resizable/
 * 
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *	jquery.ui.mouse.js
 *
 * On 9/4/16, reduced the zIndex from 90 to 40 so that it would work with sticky header.
 */
!function(t){t.widget("ui.resizable",t.ui.mouse,{version:"1.11.4",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:40,resize:null,start:null,stop:null},_num:function(t){return parseInt(t,10)||0},_isNumber:function(t){return!isNaN(parseInt(t,10))},_hasScroll:function(e,i){if("hidden"===t(e).css("overflow"))return!1;var s=i&&"left"===i?"scrollLeft":"scrollTop",n=!1;return e[s]>0?!0:(e[s]=1,n=e[s]>0,e[s]=0,n)},_create:function(){var e,i,s,n,o,a=this,r=this.options;if(this.element.addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!r.aspectRatio,aspectRatio:r.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:r.helper||r.ghost||r.animate?r.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=r.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=t(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),e=this.handles.split(","),this.handles={},i=0;i<e.length;i++)s=t.trim(e[i]),o="ui-resizable-"+s,n=t("<div class='ui-resizable-handle "+o+"'></div>"),n.css({zIndex:r.zIndex}),"se"===s&&n.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[s]=".ui-resizable-"+s,this.element.append(n);this._renderAxis=function(e){var i,s,n,o;e=e||this.element;for(i in this.handles)this.handles[i].constructor===String?this.handles[i]=this.element.children(this.handles[i]).first().show():(this.handles[i].jquery||this.handles[i].nodeType)&&(this.handles[i]=t(this.handles[i]),this._on(this.handles[i],{mousedown:a._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(s=t(this.handles[i],this.element),o=/sw|ne|nw|se|n|s/.test(i)?s.outerHeight():s.outerWidth(),n="padding"+(/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"),e.css(n,o),this._proportionallyResize()),this._handles=this._handles.add(this.handles[i])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.mouseover(function(){a.resizing||(this.className&&(n=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),a.axis=n&&n[1]?n[1]:"se")}),r.autoHide&&(this._handles.hide(),t(this.element).addClass("ui-resizable-autohide").mouseenter(function(){r.disabled||(t(this).removeClass("ui-resizable-autohide"),a._handles.show())}).mouseleave(function(){r.disabled||a.resizing||(t(this).addClass("ui-resizable-autohide"),a._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,i=function(e){t(e).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(e){var i,s,n=!1;for(i in this.handles)s=t(this.handles[i])[0],(s===e.target||t.contains(s,e.target))&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(e){var i,s,n,o=this.options,a=this.element;return this.resizing=!0,this._renderProxy(),i=this._num(this.helper.css("left")),s=this._num(this.helper.css("top")),o.containment&&(i+=t(o.containment).scrollLeft()||0,s+=t(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:s},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:a.width(),height:a.height()},this.originalSize=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.sizeDiff={width:a.outerWidth()-a.width(),height:a.outerHeight()-a.height()},this.originalPosition={left:i,top:s},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,n=t(".ui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===n?this.axis+"-resize":n),a.addClass("ui-resizable-resizing"),this._propagate("start",e),!0},_mouseDrag:function(e){var i,s,n=this.originalMousePosition,o=this.axis,a=e.pageX-n.left||0,r=e.pageY-n.top||0,l=this._change[o];return this._updatePrevProperties(),l?(i=l.apply(this,[e,a,r]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(i=this._updateRatio(i,e)),i=this._respectSize(i,e),this._updateCache(i),this._propagate("resize",e),s=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(s)||(this._updatePrevProperties(),this._trigger("resize",e,this.ui()),this._applyChanges()),!1):!1},_mouseStop:function(e){this.resizing=!1;var i,s,n,o,a,r,l,u=this.options,h=this;return this._helper&&(i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),n=s&&this._hasScroll(i[0],"left")?0:h.sizeDiff.height,o=s?0:h.sizeDiff.width,a={width:h.helper.width()-o,height:h.helper.height()-n},r=parseInt(h.element.css("left"),10)+(h.position.left-h.originalPosition.left)||null,l=parseInt(h.element.css("top"),10)+(h.position.top-h.originalPosition.top)||null,u.animate||this.element.css(t.extend(a,{top:l,left:r})),h.helper.height(h.size.height),h.helper.width(h.size.width),this._helper&&!u.animate&&this._proportionallyResize()),t("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var t={};return this.position.top!==this.prevPosition.top&&(t.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(t.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(t.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(t.height=this.size.height+"px"),this.helper.css(t),t},_updateVirtualBoundaries:function(t){var e,i,s,n,o,a=this.options;o={minWidth:this._isNumber(a.minWidth)?a.minWidth:0,maxWidth:this._isNumber(a.maxWidth)?a.maxWidth:1/0,minHeight:this._isNumber(a.minHeight)?a.minHeight:0,maxHeight:this._isNumber(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||t)&&(e=o.minHeight*this.aspectRatio,s=o.minWidth/this.aspectRatio,i=o.maxHeight*this.aspectRatio,n=o.maxWidth/this.aspectRatio,e>o.minWidth&&(o.minWidth=e),s>o.minHeight&&(o.minHeight=s),i<o.maxWidth&&(o.maxWidth=i),n<o.maxHeight&&(o.maxHeight=n)),this._vBoundaries=o},_updateCache:function(t){this.offset=this.helper.offset(),this._isNumber(t.left)&&(this.position.left=t.left),this._isNumber(t.top)&&(this.position.top=t.top),this._isNumber(t.height)&&(this.size.height=t.height),this._isNumber(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,i=this.size,s=this.axis;return this._isNumber(t.height)?t.width=t.height*this.aspectRatio:this._isNumber(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===s&&(t.left=e.left+(i.width-t.width),t.top=null),"nw"===s&&(t.top=e.top+(i.height-t.height),t.left=e.left+(i.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,i=this.axis,s=this._isNumber(t.width)&&e.maxWidth&&e.maxWidth<t.width,n=this._isNumber(t.height)&&e.maxHeight&&e.maxHeight<t.height,o=this._isNumber(t.width)&&e.minWidth&&e.minWidth>t.width,a=this._isNumber(t.height)&&e.minHeight&&e.minHeight>t.height,r=this.originalPosition.left+this.originalSize.width,l=this.position.top+this.size.height,u=/sw|nw|w/.test(i),h=/nw|ne|n/.test(i);return o&&(t.width=e.minWidth),a&&(t.height=e.minHeight),s&&(t.width=e.maxWidth),n&&(t.height=e.maxHeight),o&&u&&(t.left=r-e.minWidth),s&&u&&(t.left=r-e.maxWidth),a&&h&&(t.top=l-e.minHeight),n&&h&&(t.top=l-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_getPaddingPlusBorderDimensions:function(t){for(var e=0,i=[],s=[t.css("borderTopWidth"),t.css("borderRightWidth"),t.css("borderBottomWidth"),t.css("borderLeftWidth")],n=[t.css("paddingTop"),t.css("paddingRight"),t.css("paddingBottom"),t.css("paddingLeft")];4>e;e++)i[e]=parseInt(s[e],10)||0,i[e]+=parseInt(n[e],10)||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var t,e=0,i=this.helper||this.element;e<this._proportionallyResizeElements.length;e++)t=this._proportionallyResizeElements[e],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(t)),t.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var e=this.element,i=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||t("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize,s=this.originalPosition;return{left:s.left+e,width:i.width-e}},n:function(t,e,i){var s=this.originalSize,n=this.originalPosition;return{top:n.top+i,height:s.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},sw:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,s]))},ne:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},nw:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,s]))}},_propagate:function(e,i){t.ui.plugin.call(this,e,[i,this.ui()]),"resize"!==e&&this._trigger(e,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var i=t(this).resizable("instance"),s=i.options,n=i._proportionallyResizeElements,o=n.length&&/textarea/i.test(n[0].nodeName),a=o&&i._hasScroll(n[0],"left")?0:i.sizeDiff.height,r=o?0:i.sizeDiff.width,l={width:i.size.width-r,height:i.size.height-a},u=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,h=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(t.extend(l,h&&u?{top:h,left:u}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var s={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};n&&n.length&&t(n[0]).css({width:s.width,height:s.height}),i._updateCache(s),i._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var e,i,s,n,o,a,r,l=t(this).resizable("instance"),u=l.options,h=l.element,d=u.containment,c=d instanceof t?d.get(0):/parent/.test(d)?h.parent().get(0):d;c&&(l.containerElement=t(c),/document/.test(d)||d===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(e=t(c),i=[],t(["Top","Right","Left","Bottom"]).each(function(t,s){i[t]=l._num(e.css("padding"+s))}),l.containerOffset=e.offset(),l.containerPosition=e.position(),l.containerSize={height:e.innerHeight()-i[3],width:e.innerWidth()-i[1]},s=l.containerOffset,n=l.containerSize.height,o=l.containerSize.width,a=l._hasScroll(c,"left")?c.scrollWidth:o,r=l._hasScroll(c)?c.scrollHeight:n,l.parentData={element:c,left:s.left,top:s.top,width:a,height:r}))},resize:function(e){var i,s,n,o,a=t(this).resizable("instance"),r=a.options,l=a.containerOffset,u=a.position,h=a._aspectRatio||e.shiftKey,d={top:0,left:0},c=a.containerElement,p=!0;c[0]!==document&&/static/.test(c.css("position"))&&(d=l),u.left<(a._helper?l.left:0)&&(a.size.width=a.size.width+(a._helper?a.position.left-l.left:a.position.left-d.left),h&&(a.size.height=a.size.width/a.aspectRatio,p=!1),a.position.left=r.helper?l.left:0),u.top<(a._helper?l.top:0)&&(a.size.height=a.size.height+(a._helper?a.position.top-l.top:a.position.top),h&&(a.size.width=a.size.height*a.aspectRatio,p=!1),a.position.top=a._helper?l.top:0),n=a.containerElement.get(0)===a.element.parent().get(0),o=/relative|absolute/.test(a.containerElement.css("position")),n&&o?(a.offset.left=a.parentData.left+a.position.left,a.offset.top=a.parentData.top+a.position.top):(a.offset.left=a.element.offset().left,a.offset.top=a.element.offset().top),i=Math.abs(a.sizeDiff.width+(a._helper?a.offset.left-d.left:a.offset.left-l.left)),s=Math.abs(a.sizeDiff.height+(a._helper?a.offset.top-d.top:a.offset.top-l.top)),i+a.size.width<a.parentData.width||(a.size.width=a.parentData.width-i,h&&(a.size.height=a.size.width/a.aspectRatio,p=!1)),s+a.size.height<a.parentData.height||(a.size.height=a.parentData.height-s,h&&(a.size.width=a.size.height*a.aspectRatio,p=!1)),p||(a.position.left=a.prevPosition.left,a.position.top=a.prevPosition.top,a.size.width=a.prevSize.width,a.size.height=a.prevSize.height)},stop:function(){var e=t(this).resizable("instance"),i=e.options,s=e.containerOffset,n=e.containerPosition,o=e.containerElement,a=t(e.helper),r=a.offset(),l=a.outerWidth()-e.sizeDiff.width,u=a.outerHeight()-e.sizeDiff.height;e._helper&&!i.animate&&/relative/.test(o.css("position"))&&t(this).css({left:r.left-n.left-s.left,width:l,height:u}),e._helper&&!i.animate&&/static/.test(o.css("position"))&&t(this).css({left:r.left-n.left-s.left,width:l,height:u})}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).resizable("instance"),i=e.options;t(i.alsoResize).each(function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseInt(e.width(),10),height:parseInt(e.height(),10),left:parseInt(e.css("left"),10),top:parseInt(e.css("top"),10)})})},resize:function(e,i){var s=t(this).resizable("instance"),n=s.options,o=s.originalSize,a=s.originalPosition,r={height:s.size.height-o.height||0,width:s.size.width-o.width||0,top:s.position.top-a.top||0,left:s.position.left-a.left||0};t(n.alsoResize).each(function(){var e=t(this),s=t(this).data("ui-resizable-alsoresize"),n={},o=e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(o,function(t,e){var i=(s[e]||0)+(r[e]||0);i&&i>=0&&(n[e]=i||null)}),e.css(n)})},stop:function(){t(this).removeData("resizable-alsoresize")}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).resizable("instance"),i=e.options,s=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).resizable("instance");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).resizable("instance");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(){var e,i=t(this).resizable("instance"),s=i.options,n=i.size,o=i.originalSize,a=i.originalPosition,r=i.axis,l="number"==typeof s.grid?[s.grid,s.grid]:s.grid,u=l[0]||1,h=l[1]||1,d=Math.round((n.width-o.width)/u)*u,c=Math.round((n.height-o.height)/h)*h,p=o.width+d,m=o.height+c,f=s.maxWidth&&s.maxWidth<p,b=s.maxHeight&&s.maxHeight<m,v=s.minWidth&&s.minWidth>p,g=s.minHeight&&s.minHeight>m;s.grid=l,v&&(p+=u),g&&(m+=h),f&&(p-=u),b&&(m-=h),/^(se|s|e)$/.test(r)?(i.size.width=p,i.size.height=m):/^(ne)$/.test(r)?(i.size.width=p,i.size.height=m,i.position.top=a.top-c):/^(sw)$/.test(r)?(i.size.width=p,i.size.height=m,i.position.left=a.left-d):(m-h>0&&p-u>0||(e=i._getPaddingPlusBorderDimensions(this)),m-h>0?(i.size.height=m,i.position.top=a.top-c):(m=h-e.height,i.size.height=m,i.position.top=a.top+o.height-m),p-u>0?(i.size.width=p,i.position.left=a.left-d):(p=u-e.width,i.size.width=p,i.position.left=a.left+o.width-p))}})}(jQuery);
/*!
 * jQuery UI Position 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/position/
 */
!function(t){function e(t,e,i){return[parseFloat(t[0])*(p.test(t[0])?e/100:1),parseFloat(t[1])*(p.test(t[1])?i/100:1)]}function i(e,i){return parseInt(t.css(e,i),10)||0}function s(e){var i=e[0];return 9===i.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(i)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}t.ui=t.ui||{};var n,o,a=Math.max,r=Math.abs,l=Math.round,h=/left|center|right/,u=/top|center|bottom/,c=/[\+\-]\d+(\.[\d]+)?%?/,d=/^\w+/,p=/%$/,m=t.fn.position;t.position={scrollbarWidth:function(){if(void 0!==n)return n;var e,i,s=t("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=s.children()[0];return t("body").append(s),e=o.offsetWidth,s.css("overflow","scroll"),i=o.offsetWidth,e===i&&(i=s[0].clientWidth),s.remove(),n=e-i},getScrollInfo:function(e){var i=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),s=e.isWindow||e.isDocument?"":e.element.css("overflow-y"),n="scroll"===i||"auto"===i&&e.width<e.element[0].scrollWidth,o="scroll"===s||"auto"===s&&e.height<e.element[0].scrollHeight;return{width:o?t.position.scrollbarWidth():0,height:n?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),s=t.isWindow(i[0]),n=!!i[0]&&9===i[0].nodeType;return{element:i,isWindow:s,isDocument:n,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:s||n?i.width():i.outerWidth(),height:s||n?i.height():i.outerHeight()}}},t.fn.position=function(n){if(!n||!n.of)return m.apply(this,arguments);n=t.extend({},n);var p,f,b,v,g,y,_=t(n.of),C=t.position.getWithinInfo(n.within),k=t.position.getScrollInfo(C),w=(n.collision||"flip").split(" "),x={};return y=s(_),_[0].preventDefault&&(n.at="left top"),f=y.width,b=y.height,v=y.offset,g=t.extend({},v),t.each(["my","at"],function(){var t,e,i=(n[this]||"").split(" ");1===i.length&&(i=h.test(i[0])?i.concat(["center"]):u.test(i[0])?["center"].concat(i):["center","center"]),i[0]=h.test(i[0])?i[0]:"center",i[1]=u.test(i[1])?i[1]:"center",t=c.exec(i[0]),e=c.exec(i[1]),x[this]=[t?t[0]:0,e?e[0]:0],n[this]=[d.exec(i[0])[0],d.exec(i[1])[0]]}),1===w.length&&(w[1]=w[0]),"right"===n.at[0]?g.left+=f:"center"===n.at[0]&&(g.left+=f/2),"bottom"===n.at[1]?g.top+=b:"center"===n.at[1]&&(g.top+=b/2),p=e(x.at,f,b),g.left+=p[0],g.top+=p[1],this.each(function(){var s,h,u=t(this),c=u.outerWidth(),d=u.outerHeight(),m=i(this,"marginLeft"),y=i(this,"marginTop"),E=c+m+i(this,"marginRight")+k.width,D=d+y+i(this,"marginBottom")+k.height,N=t.extend({},g),T=e(x.my,u.outerWidth(),u.outerHeight());"right"===n.my[0]?N.left-=c:"center"===n.my[0]&&(N.left-=c/2),"bottom"===n.my[1]?N.top-=d:"center"===n.my[1]&&(N.top-=d/2),N.left+=T[0],N.top+=T[1],o||(N.left=l(N.left),N.top=l(N.top)),s={marginLeft:m,marginTop:y},t.each(["left","top"],function(e,i){t.ui.position[w[e]]&&t.ui.position[w[e]][i](N,{targetWidth:f,targetHeight:b,elemWidth:c,elemHeight:d,collisionPosition:s,collisionWidth:E,collisionHeight:D,offset:[p[0]+T[0],p[1]+T[1]],my:n.my,at:n.at,within:C,elem:u})}),n.using&&(h=function(t){var e=v.left-N.left,i=e+f-c,s=v.top-N.top,o=s+b-d,l={target:{element:_,left:v.left,top:v.top,width:f,height:b},element:{element:u,left:N.left,top:N.top,width:c,height:d},horizontal:0>i?"left":e>0?"right":"center",vertical:0>o?"top":s>0?"bottom":"middle"};c>f&&r(e+i)<f&&(l.horizontal="center"),d>b&&r(s+o)<b&&(l.vertical="middle"),l.important=a(r(e),r(i))>a(r(s),r(o))?"horizontal":"vertical",n.using.call(this,t,l)}),u.offset(t.extend(N,{using:h}))})},t.ui.position={fit:{left:function(t,e){var i,s=e.within,n=s.isWindow?s.scrollLeft:s.offset.left,o=s.width,r=t.left-e.collisionPosition.marginLeft,l=n-r,h=r+e.collisionWidth-o-n;e.collisionWidth>o?l>0&&0>=h?(i=t.left+l+e.collisionWidth-o-n,t.left+=l-i):t.left=h>0&&0>=l?n:l>h?n+o-e.collisionWidth:n:l>0?t.left+=l:h>0?t.left-=h:t.left=a(t.left-r,t.left)},top:function(t,e){var i,s=e.within,n=s.isWindow?s.scrollTop:s.offset.top,o=e.within.height,r=t.top-e.collisionPosition.marginTop,l=n-r,h=r+e.collisionHeight-o-n;e.collisionHeight>o?l>0&&0>=h?(i=t.top+l+e.collisionHeight-o-n,t.top+=l-i):t.top=h>0&&0>=l?n:l>h?n+o-e.collisionHeight:n:l>0?t.top+=l:h>0?t.top-=h:t.top=a(t.top-r,t.top)}},flip:{left:function(t,e){var i,s,n=e.within,o=n.offset.left+n.scrollLeft,a=n.width,l=n.isWindow?n.scrollLeft:n.offset.left,h=t.left-e.collisionPosition.marginLeft,u=h-l,c=h+e.collisionWidth-a-l,d="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,p="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,m=-2*e.offset[0];0>u?(i=t.left+d+p+m+e.collisionWidth-a-o,(0>i||i<r(u))&&(t.left+=d+p+m)):c>0&&(s=t.left-e.collisionPosition.marginLeft+d+p+m-l,(s>0||r(s)<c)&&(t.left+=d+p+m))},top:function(t,e){var i,s,n=e.within,o=n.offset.top+n.scrollTop,a=n.height,l=n.isWindow?n.scrollTop:n.offset.top,h=t.top-e.collisionPosition.marginTop,u=h-l,c=h+e.collisionHeight-a-l,d="top"===e.my[1],p=d?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,m="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,f=-2*e.offset[1];0>u?(s=t.top+p+m+f+e.collisionHeight-a-o,(0>s||s<r(u))&&(t.top+=p+m+f)):c>0&&(i=t.top-e.collisionPosition.marginTop+p+m+f-l,(i>0||r(i)<c)&&(t.top+=p+m+f))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,i,s,n,a,r=document.getElementsByTagName("body")[0],l=document.createElement("div");e=document.createElement(r?"div":"body"),s={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},r&&t.extend(s,{position:"absolute",left:"-1000px",top:"-1000px"});for(a in s)e.style[a]=s[a];e.appendChild(l),i=r||document.documentElement,i.insertBefore(e,i.firstChild),l.style.cssText="position: absolute; left: 10.7432222px;",n=t(l).offset().left,o=n>10&&11>n,e.innerHTML="",i.removeChild(e)}()}(jQuery);
/*!
 * jQuery UI Autocomplete 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/autocomplete/
 * 
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *	jquery.ui.position.js
 *	jquery.ui.menu.js
 */
!function(t){t.widget("ui.autocomplete",{version:"1.11.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var e,i,s,n=this.element[0].nodeName.toLowerCase(),o="textarea"===n,a="input"===n;this.isMultiLine=o?!0:a?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[o||a?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(n){if(this.element.prop("readOnly"))return e=!0,s=!0,void(i=!0);e=!1,s=!1,i=!1;var o=t.ui.keyCode;switch(n.keyCode){case o.PAGE_UP:e=!0,this._move("previousPage",n);break;case o.PAGE_DOWN:e=!0,this._move("nextPage",n);break;case o.UP:e=!0,this._keyEvent("previous",n);break;case o.DOWN:e=!0,this._keyEvent("next",n);break;case o.ENTER:this.menu.active&&(e=!0,n.preventDefault(),this.menu.select(n));break;case o.TAB:this.menu.active&&this.menu.select(n);break;case o.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(n),n.preventDefault());break;default:i=!0,this._searchTimeout(n)}},keypress:function(s){if(e)return e=!1,void((!this.isMultiLine||this.menu.element.is(":visible"))&&s.preventDefault());if(!i){var n=t.ui.keyCode;switch(s.keyCode){case n.PAGE_UP:this._move("previousPage",s);break;case n.PAGE_DOWN:this._move("nextPage",s);break;case n.UP:this._keyEvent("previous",s);break;case n.DOWN:this._keyEvent("next",s)}}},input:function(t){return s?(s=!1,void t.preventDefault()):void this._searchTimeout(t)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(t){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(t),void this._change(t))}}),this._initSource(),this.menu=t("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._on(this.menu.element,{mousedown:function(e){e.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];t(e.target).closest(".ui-menu-item").length||this._delay(function(){var e=this;this.document.one("mousedown",function(s){s.target===e.element[0]||s.target===i||t.contains(i,s.target)||e.close()})})},menufocus:function(e,i){var s,n;return this.isNewMenu&&(this.isNewMenu=!1,e.originalEvent&&/^mouse/.test(e.originalEvent.type))?(this.menu.blur(),void this.document.one("mousemove",function(){t(e.target).trigger(e.originalEvent)})):(n=i.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",e,{item:n})&&e.originalEvent&&/^key/.test(e.originalEvent.type)&&this._value(n.value),s=i.item.attr("aria-label")||n.value,void(s&&t.trim(s).length&&(this.liveRegion.children().hide(),t("<div>").text(s).appendTo(this.liveRegion))))},menuselect:function(t,e){var i=e.item.data("ui-autocomplete-item"),s=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=s,this._delay(function(){this.previous=s,this.selectedItem=i})),!1!==this._trigger("select",t,{item:i})&&this._value(i.value),this.term=this._value(),this.close(t),this.selectedItem=i}}),this.liveRegion=t("<span>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(t,e){this._super(t,e),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(this._appendTo()),"disabled"===t&&e&&this.xhr&&this.xhr.abort()},_appendTo:function(){var e=this.options.appendTo;return e&&(e=e.jquery||e.nodeType?t(e):this.document.find(e).eq(0)),e&&e[0]||(e=this.element.closest(".ui-front")),e.length||(e=this.document[0].body),e},_initSource:function(){var e,i,s=this;t.isArray(this.options.source)?(e=this.options.source,this.source=function(i,s){s(t.ui.autocomplete.filter(e,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(e,n){s.xhr&&s.xhr.abort(),s.xhr=t.ajax({url:i,data:e,dataType:"json",success:function(t){n(t)},error:function(){n([])}})}):this.source=this.options.source},_searchTimeout:function(t){clearTimeout(this.searching),this.searching=this._delay(function(){var e=this.term===this._value(),i=this.menu.element.is(":visible"),s=t.altKey||t.ctrlKey||t.metaKey||t.shiftKey;(!e||e&&!i&&!s)&&(this.selectedItem=null,this.search(null,t))},this.options.delay)},search:function(t,e){return t=null!=t?t:this._value(),this.term=this._value(),t.length<this.options.minLength?this.close(e):this._trigger("search",e)!==!1?this._search(t):void 0},_search:function(t){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:t},this._response())},_response:function(){var e=++this.requestIndex;return t.proxy(function(t){e===this.requestIndex&&this.__response(t),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(t){t&&(t=this._normalize(t)),this._trigger("response",null,{content:t}),!this.options.disabled&&t&&t.length&&!this.cancelSearch?(this._suggest(t),this._trigger("open")):this._close()},close:function(t){this.cancelSearch=!0,this._close(t)},_close:function(t){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",t))},_change:function(t){this.previous!==this._value()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(e){return e.length&&e[0].label&&e[0].value?e:t.map(e,function(e){return"string"==typeof e?{label:e,value:e}:t.extend({},e,{label:e.label||e.value,value:e.value||e.label})})},_suggest:function(e){var i=this.menu.element.empty();this._renderMenu(i,e),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(t.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(e,i){var s=this;t.each(i,function(t,i){s._renderItemData(e,i)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-autocomplete-item",e)},_renderItem:function(e,i){return t("<li>").text(i.label).appendTo(e)},_move:function(t,e){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(t)||this.menu.isLastItem()&&/^next/.test(t)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[t](e):void this.search(null,e)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(t,e){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(t,e),e.preventDefault())}}),t.extend(t.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(e,i){var s=RegExp(t.ui.autocomplete.escapeRegex(i),"i");return t.grep(e,function(t){return s.test(t.label||t.value||t)})}}),t.widget("ui.autocomplete",t.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(t){return t+(t>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var i;this._superApply(arguments),this.options.disabled||this.cancelSearch||(i=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.children().hide(),t("<div>").text(i).appendTo(this.liveRegion))}})}(jQuery);
/*!
 * jQuery UI Menu 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/menu/
 * 
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *	jquery.ui.position.js
 */
!function(t){t.widget("ui.menu",{version:"1.11.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item":function(t){t.preventDefault()},"click .ui-menu-item":function(e){var i=t(e.target);!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.select(e),e.isPropagationStopped()||(this.mouseHandled=!0),i.has(".ui-menu").length?this.expand(e):!this.element.is(":focus")&&t(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(e){if(!this.previousFilter){var i=t(e.currentTarget);i.siblings(".ui-state-active").removeClass("ui-state-active"),this.focus(e,i)}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var i=this.active||this.element.find(this.options.items).eq(0);e||this.focus(t,i)},blur:function(e){this._delay(function(){t.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(e)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){this._closeOnDocumentClick(t)&&this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var e=t(this);e.data("ui-menu-submenu-carat")&&e.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(e){var i,s,n,o,a=!0;switch(e.keyCode){case t.ui.keyCode.PAGE_UP:this.previousPage(e);break;case t.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case t.ui.keyCode.HOME:this._move("first","first",e);break;case t.ui.keyCode.END:this._move("last","last",e);break;case t.ui.keyCode.UP:this.previous(e);break;case t.ui.keyCode.DOWN:this.next(e);break;case t.ui.keyCode.LEFT:this.collapse(e);break;case t.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(e);break;case t.ui.keyCode.ENTER:case t.ui.keyCode.SPACE:this._activate(e);break;case t.ui.keyCode.ESCAPE:this.collapse(e);break;default:a=!1,s=this.previousFilter||"",n=String.fromCharCode(e.keyCode),o=!1,clearTimeout(this.filterTimer),n===s?o=!0:n=s+n,i=this._filterMenuItems(n),i=o&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i,i.length||(n=String.fromCharCode(e.keyCode),i=this._filterMenuItems(n)),i.length?(this.focus(e,i),this.previousFilter=n,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}a&&e.preventDefault()},_activate:function(t){this.active.is(".ui-state-disabled")||(this.active.is("[aria-haspopup='true']")?this.expand(t):this.select(t))},refresh:function(){var e,i,s=this,n=this.options.icons.submenu,o=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),o.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var e=t(this),i=e.parent(),s=t("<span>").addClass("ui-menu-icon ui-icon "+n).data("ui-menu-submenu-carat",!0);i.attr("aria-haspopup","true").prepend(s),e.attr("aria-labelledby",i.attr("id"))}),e=o.add(this.element),i=e.find(this.options.items),i.not(".ui-menu-item").each(function(){var e=t(this);s._isDivider(e)&&e.addClass("ui-widget-content ui-menu-divider")}),i.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),i.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!t.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(t,e){"icons"===t&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(e.submenu),"disabled"===t&&this.element.toggleClass("ui-state-disabled",!!e).attr("aria-disabled",e),this._super(t,e)},focus:function(t,e){var i,s;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),s=this.active.addClass("ui-state-focus").removeClass("ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",s.attr("id")),this.active.parent().closest(".ui-menu-item").addClass("ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=e.children(".ui-menu"),i.length&&t&&/^mouse/.test(t.type)&&this._startOpening(i),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(e){var i,s,n,o,a,r;this._hasScroll()&&(i=parseFloat(t.css(this.activeMenu[0],"borderTopWidth"))||0,s=parseFloat(t.css(this.activeMenu[0],"paddingTop"))||0,n=e.offset().top-this.activeMenu.offset().top-i-s,o=this.activeMenu.scrollTop(),a=this.activeMenu.height(),r=e.outerHeight(),0>n?this.activeMenu.scrollTop(o+n):n+r>a&&this.activeMenu.scrollTop(o+n-a+r))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this.active.removeClass("ui-state-focus"),this.active=null,this._trigger("blur",t,{item:this.active}))},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(t)},this.delay))},_open:function(e){var i=t.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden","true"),e.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(e,i){clearTimeout(this.timer),this.timer=this._delay(function(){var s=i?this.element:t(e&&e.target).closest(this.element.find(".ui-menu"));s.length||(s=this.element),this._close(s),this.blur(e),this.activeMenu=s},this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element),t.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active")},_closeOnDocumentClick:function(e){return!t(e.target).closest(".ui-menu").length},_isDivider:function(t){return!/[^\-\u2014\u2013\s]/.test(t.text())},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();e&&e.length&&(this._open(e.parent()),this._delay(function(){this.focus(t,e)}))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,i){var s;this.active&&(s="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0)),s&&s.length&&this.active||(s=this.activeMenu.find(this.options.items)[e]()),this.focus(i,s)},nextPage:function(e){var i,s,n;return this.active?void(this.isLastItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=t(this),i.offset().top-s-n<0}),this.focus(e,i)):this.focus(e,this.activeMenu.find(this.options.items)[this.active?"last":"first"]()))):void this.next(e)},previousPage:function(e){var i,s,n;return this.active?void(this.isFirstItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=t(this),i.offset().top-s+n>0}),this.focus(e,i)):this.focus(e,this.activeMenu.find(this.options.items).first()))):void this.next(e)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){this.active=this.active||t(e.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(e,!0),this._trigger("select",e,i)},_filterMenuItems:function(e){var i=e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),s=RegExp("^"+i,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return s.test(t.trim(t(this).text()))})}})}(jQuery);
/*!
 * jQuery UI Button 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/button/
 * 
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 */
!function(t){var e,i="ui-button ui-widget ui-state-default ui-corner-all",s="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",n=function(){var e=t(this);setTimeout(function(){e.find(":ui-button").button("refresh")},1)},o=function(e){var i=e.name,s=e.form,n=t([]);return i&&(i=i.replace(/'/g,"\\'"),n=s?t(s).find("[name='"+i+"'][type=radio]"):t("[name='"+i+"'][type=radio]",e.ownerDocument).filter(function(){return!this.form})),n};t.widget("ui.button",{version:"1.11.4",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,n),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var s=this,a=this.options,u="checkbox"===this.type||"radio"===this.type,r=u?"":"ui-state-active";null===a.label&&(a.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(i).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){a.disabled||this===e&&t(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){a.disabled||t(this).removeClass(r)}).bind("click"+this.eventNamespace,function(t){a.disabled&&(t.preventDefault(),t.stopImmediatePropagation())}),this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}}),u&&this.element.bind("change"+this.eventNamespace,function(){s.refresh()}),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return a.disabled?!1:void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(a.disabled)return!1;t(this).addClass("ui-state-active"),s.buttonElement.attr("aria-pressed","true");var e=s.element[0];o(e).not(e).map(function(){return t(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return a.disabled?!1:(t(this).addClass("ui-state-active"),e=this,void s.document.one("mouseup",function(){e=null}))}).bind("mouseup"+this.eventNamespace,function(){return a.disabled?!1:void t(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(e){return a.disabled?!1:void((e.keyCode===t.ui.keyCode.SPACE||e.keyCode===t.ui.keyCode.ENTER)&&t(this).addClass("ui-state-active"))}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){t(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(e){e.keyCode===t.ui.keyCode.SPACE&&t(this).click()})),this._setOption("disabled",a.disabled),this._resetButton()},_determineButtonType:function(){var t,e,i;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(t=this.element.parents().last(),e="label[for='"+this.element.attr("id")+"']",this.buttonElement=t.find(e),this.buttonElement.length||(t=t.length?t.siblings():this.element.siblings(),this.buttonElement=t.filter(e),this.buttonElement.length||(this.buttonElement=t.find(e))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(i+" ui-state-active "+s).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(t,e){return this._super(t,e),"disabled"===t?(this.widget().toggleClass("ui-state-disabled",!!e),this.element.prop("disabled",!!e),void(e&&this.buttonElement.removeClass("checkbox"===this.type||"radio"===this.type?"ui-state-focus":"ui-state-focus ui-state-active"))):void this._resetButton()},refresh:function(){var e=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");e!==this.options.disabled&&this._setOption("disabled",e),"radio"===this.type?o(this.element[0]).each(function(){t(this).is(":checked")?t(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):t(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var e=this.buttonElement.removeClass(s),i=t("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(e.empty()).text(),n=this.options.icons,o=n.primary&&n.secondary,a=[];n.primary||n.secondary?(this.options.text&&a.push("ui-button-text-icon"+(o?"s":n.primary?"-primary":"-secondary")),n.primary&&e.prepend("<span class='ui-button-icon-primary ui-icon "+n.primary+"'></span>"),n.secondary&&e.append("<span class='ui-button-icon-secondary ui-icon "+n.secondary+"'></span>"),this.options.text||(a.push(o?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||e.attr("title",t.trim(i)))):a.push("ui-button-text-only"),e.addClass(a.join(" "))}}),t.widget("ui.buttonset",{version:"1.11.4",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(t,e){"disabled"===t&&this.buttons.button("option",t,e),this._super(t,e)},refresh:function(){var e="rtl"===this.element.css("direction"),i=this.element.find(this.options.items),s=i.filter(":ui-button");i.not(":ui-button").button(),s.button("refresh"),this.buttons=i.map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(e?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(e?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery);
/*!
 * jQuery UI Sortable 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/sortable/
 * 
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *	jquery.ui.mouse.js
 */
!function(t){t.widget("ui.sortable",t.ui.mouse,{version:"1.11.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(t,e,i){return t>=e&&e+i>t},_isFloating:function(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))},_create:function(){this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(t,e){this._super(t,e),"handle"===t&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),t.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(e,i){var s=null,n=!1,o=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(e),t(e.target).parents().each(function(){return t.data(this,o.widgetName+"-item")===o?(s=t(this),!1):void 0}),t.data(e.target,o.widgetName+"-item")===o&&(s=t(e.target)),s&&(!this.options.handle||i||(t(this.options.handle,s).find("*").addBack().each(function(){this===e.target&&(n=!0)}),n))?(this.currentItem=s,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(e,i,s){var n,o,a=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,a.cursorAt&&this._adjustOffsetFromHelper(a.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),a.containment&&this._setContainment(),a.cursor&&"auto"!==a.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",a.cursor),this.storedStylesheet=t("<style>*{ cursor: "+a.cursor+" !important; }</style>").appendTo(o)),a.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",a.opacity)),a.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",a.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!s)for(n=this.containers.length-1;n>=0;n--)this.containers[n]._trigger("activate",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!a.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){var i,s,n,o,a=this.options,r=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<a.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+a.scrollSpeed:e.pageY-this.overflowOffset.top<a.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-a.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<a.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+a.scrollSpeed:e.pageX-this.overflowOffset.left<a.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-a.scrollSpeed)):(e.pageY-this.document.scrollTop()<a.scrollSensitivity?r=this.document.scrollTop(this.document.scrollTop()-a.scrollSpeed):this.window.height()-(e.pageY-this.document.scrollTop())<a.scrollSensitivity&&(r=this.document.scrollTop(this.document.scrollTop()+a.scrollSpeed)),e.pageX-this.document.scrollLeft()<a.scrollSensitivity?r=this.document.scrollLeft(this.document.scrollLeft()-a.scrollSpeed):this.window.width()-(e.pageX-this.document.scrollLeft())<a.scrollSensitivity&&(r=this.document.scrollLeft(this.document.scrollLeft()+a.scrollSpeed))),r!==!1&&t.ui.ddmanager&&!a.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(s=this.items[i],n=s.item[0],o=this._intersectsWithPointer(s),o&&s.instance===this.currentContainer&&n!==this.currentItem[0]&&this.placeholder[1===o?"next":"prev"]()[0]!==n&&!t.contains(this.placeholder[0],n)&&("semi-dynamic"===this.options.type?!t.contains(this.element[0],n):!0)){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(s))break;this._rearrange(e,s),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,i){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var s=this,n=this.placeholder.offset(),o=this.options.axis,a={};o&&"x"!==o||(a.left=n.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),o&&"y"!==o||(a.top=n.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,t(this.helper).animate(a,parseInt(this.options.revert,10)||500,function(){s._clear(e)})}else this._clear(e,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];return e=e||{},t(i).each(function(){var i=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);i&&s.push((e.key||i[1]+"[]")+"="+(e.key&&e.expression?i[1]:i[2]))}),!s.length&&e.key&&s.push(e.key+"="),s.join("&")},toArray:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];return e=e||{},i.each(function(){s.push(t(e.item||this).attr(e.attribute||"id")||"")}),s},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,s=this.positionAbs.top,n=s+this.helperProportions.height,o=t.left,a=o+t.width,r=t.top,l=r+t.height,h=this.offset.click.top,u=this.offset.click.left,c="x"===this.options.axis||s+h>r&&l>s+h,d="y"===this.options.axis||e+u>o&&a>e+u,p=c&&d;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?p:o<e+this.helperProportions.width/2&&i-this.helperProportions.width/2<a&&r<s+this.helperProportions.height/2&&n-this.helperProportions.height/2<l},_intersectsWithPointer:function(t){var e="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),i="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),s=e&&i,n=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return s?this.floating?o&&"right"===o||"down"===n?2:1:n&&("down"===n?2:1):!1},_intersectsWithSides:function(t){var e=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),s=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection();return this.floating&&n?"right"===n&&i||"left"===n&&!i:s&&("down"===s&&e||"up"===s&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){function i(){r.push(this)}var s,n,o,a,r=[],l=[],h=this._connectWith();if(h&&e)for(s=h.length-1;s>=0;s--)for(o=t(h[s],this.document[0]),n=o.length-1;n>=0;n--)a=t.data(o[n],this.widgetFullName),a&&a!==this&&!a.options.disabled&&l.push([t.isFunction(a.options.items)?a.options.items.call(a.element):t(a.options.items,a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),a]);for(l.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),s=l.length-1;s>=0;s--)l[s][0].each(i);return t(r)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var i=0;i<e.length;i++)if(e[i]===t.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var i,s,n,o,a,r,l,h,u=this.items,c=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],d=this._connectWith();if(d&&this.ready)for(i=d.length-1;i>=0;i--)for(n=t(d[i],this.document[0]),s=n.length-1;s>=0;s--)o=t.data(n[s],this.widgetFullName),o&&o!==this&&!o.options.disabled&&(c.push([t.isFunction(o.options.items)?o.options.items.call(o.element[0],e,{item:this.currentItem}):t(o.options.items,o.element),o]),this.containers.push(o));for(i=c.length-1;i>=0;i--)for(a=c[i][1],r=c[i][0],s=0,h=r.length;h>s;s++)l=t(r[s]),l.data(this.widgetName+"-item",a),u.push({item:l,instance:a,width:0,height:0,left:0,top:0})},refreshPositions:function(e){this.floating=this.items.length?"x"===this.options.axis||this._isFloating(this.items[0].item):!1,this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,s,n,o;for(i=this.items.length-1;i>=0;i--)s=this.items[i],s.instance!==this.currentContainer&&this.currentContainer&&s.item[0]!==this.currentItem[0]||(n=this.options.toleranceElement?t(this.options.toleranceElement,s.item):s.item,e||(s.width=n.outerWidth(),s.height=n.outerHeight()),o=n.offset(),s.left=o.left,s.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)o=this.containers[i].element.offset(),this.containers[i].containerCache.left=o.left,this.containers[i].containerCache.top=o.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(e){e=e||this;var i,s=e.options;s.placeholder&&s.placeholder.constructor!==String||(i=s.placeholder,s.placeholder={element:function(){var s=e.currentItem[0].nodeName.toLowerCase(),n=t("<"+s+">",e.document[0]).addClass(i||e.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tbody"===s?e._createTrPlaceholder(e.currentItem.find("tr").eq(0),t("<tr>",e.document[0]).appendTo(n)):"tr"===s?e._createTrPlaceholder(e.currentItem,n):"img"===s&&n.attr("src",e.currentItem.attr("src")),i||n.css("visibility","hidden"),n},update:function(t,n){(!i||s.forcePlaceholderSize)&&(n.height()||n.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),n.width()||n.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}),e.placeholder=t(s.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),s.placeholder.update(e,e.placeholder)},_createTrPlaceholder:function(e,i){var s=this;e.children().each(function(){t("<td>&#160;</td>",s.document[0]).attr("colspan",t(this).attr("colspan")||1).appendTo(i)})},_contactContainers:function(e){var i,s,n,o,a,r,l,h,u,c,d=null,p=null;for(i=this.containers.length-1;i>=0;i--)if(!t.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(d&&t.contains(this.containers[i].element[0],d.element[0]))continue;d=this.containers[i],p=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",e,this._uiHash(this)),this.containers[i].containerCache.over=0);if(d)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",e,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(n=1e4,o=null,u=d.floating||this._isFloating(this.currentItem),a=u?"left":"top",r=u?"width":"height",c=u?"clientX":"clientY",s=this.items.length-1;s>=0;s--)t.contains(this.containers[p].element[0],this.items[s].item[0])&&this.items[s].item[0]!==this.currentItem[0]&&(l=this.items[s].item.offset()[a],h=!1,e[c]-l>this.items[s][r]/2&&(h=!0),Math.abs(e[c]-l)<n&&(n=Math.abs(e[c]-l),o=this.items[s],this.direction=h?"up":"down"));if(!o&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return void(this.currentContainer.containerCache.over||(this.containers[p]._trigger("over",e,this._uiHash()),this.currentContainer.containerCache.over=1));o?this._rearrange(e,o,null,!0):this._rearrange(e,null,this.containers[p].element,!0),this._trigger("change",e,this._uiHash()),this.containers[p]._trigger("change",e,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",e,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return s.parents("body").length||t("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(s[0]),s[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!s[0].style.width||i.forceHelperSize)&&s.width(this.currentItem.width()),(!s[0].style.height||i.forceHelperSize)&&s.height(this.currentItem.height()),s},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,s,n=this.options;"parent"===n.containment&&(n.containment=this.helper[0].parentNode),("document"===n.containment||"window"===n.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===n.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===n.containment?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(n.containment)||(e=t(n.containment)[0],i=t(n.containment).offset(),s="hidden"!==t(e).css("overflow"),this.containment=[i.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,i.left+(s?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(s?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,i){i||(i=this.position);var s="absolute"===e?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(n[0].tagName);return{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:n.scrollTop())*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:n.scrollLeft())*s}},_generatePosition:function(e){var i,s,n=this.options,o=e.pageX,a=e.pageY,r="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(r[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(a=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(a=this.containment[3]+this.offset.click.top)),n.grid&&(i=this.originalPageY+Math.round((a-this.originalPageY)/n.grid[1])*n.grid[1],a=this.containment&&(i-this.offset.click.top<this.containment[1]||i-this.offset.click.top>this.containment[3])?i-this.offset.click.top<this.containment[1]?i+n.grid[1]:i-n.grid[1]:i,s=this.originalPageX+Math.round((o-this.originalPageX)/n.grid[0])*n.grid[0],o=this.containment&&(s-this.offset.click.left<this.containment[0]||s-this.offset.click.left>this.containment[2])?s-this.offset.click.left<this.containment[0]?s+n.grid[0]:s-n.grid[0]:s)),{top:a-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:r.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:r.scrollLeft())}},_rearrange:function(t,e,i,s){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var n=this.counter;this._delay(function(){n===this.counter&&this.refreshPositions(!s)})},_clear:function(t,e){function i(t,e,i){return function(s){i._trigger(t,s,e._uiHash(e))}}this.reverting=!1;var s,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(s in this._storedCSS)("auto"===this._storedCSS[s]||"static"===this._storedCSS[s])&&(this._storedCSS[s]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&n.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||n.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(n.push(function(t){this._trigger("remove",t,this._uiHash())}),n.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),s=this.containers.length-1;s>=0;s--)e||n.push(i("deactivate",this,this.containers[s])),this.containers[s].containerCache.over&&(n.push(i("out",this,this.containers[s])),this.containers[s].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!e){for(s=0;s<n.length;s++)n[s].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){t.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(e){var i=e||this;return{helper:i.helper,placeholder:i.placeholder||t([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:e?e.element:null}}})}(jQuery);
/*Copyright ?? 2010-2019 Primal Cause, Inc. All rights reserved.*/
(function(e,b){if(!b.__SV){var a,f,i,g;window.mixpanel=b;b._i=[];b.init=function(a,e,d){function f(b,h){var a=h.split(".");2==a.length&&(b=b[a[0]],h=a[1]);b[h]=function(){b.push([h].concat(Array.prototype.slice.call(arguments,0)))}}var c=b;"undefined"!==typeof d?c=b[d]=[]:d="mixpanel";c.people=c.people||[];c.toString=function(b){var a="mixpanel";"mixpanel"!==d&&(a+="."+d);b||(a+=" (stub)");return a};c.people.toString=function(){return c.toString(1)+".people (stub)"};i="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config people.set people.set_once people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
for(g=0;g<i.length;g++)f(c,i[g]);b._i.push([a,e,d])};b.__SV=1.2;a=e.createElement("script");a.type="text/javascript";a.async=!0;a.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";f=e.getElementsByTagName("script")[0];f.parentNode.insertBefore(a,f)}})(document,window.mixpanel||[]);
var jq=jQuery.noConflict();(function(a){a.inviewport=function(b){var b=a(b),c=b.offset().top,d=a(window).scrollTop();return d<=c};a.justthetop=function(b,c){var b=a(b),d,e=a(window).scrollTop();if(b.prev(".dr").length==0){d=b.offset().top-c.offsetTopForTopSection}else{d=b.offset().top-(c.offsetTopForTopSection+c.offsetTopForHeaderRow)}return e>=d};a.partialabovethetop=function(c,d){var c=a(c),e=c.offset().top-(d.offsetTopForTopSection+d.offsetTopForHeaderRow),b=e+c.height(),f=a(window).scrollTop();return((f>e)&&(f<=b))};a.extend(a.expr[":"],{"in-viewport":function(d,c,b){return a.inviewport(d)},"just-the-top":function(e,d,c){var b=c[3].split(",");return a.justthetop(e,{offsetTopForTopSection:+b[0],offsetTopForHeaderRow:+b[1]})},"partial-above-the-top":function(e,d,c){var b=c[3].split(",");return a.partialabovethetop(e,{offsetTopForTopSection:+b[0],offsetTopForHeaderRow:+b[1]})}})})(jq);if(typeof String.prototype.startsWith!=="function"){String.prototype.startsWith=function(a){return this.slice(0,a.length)==a}}if(typeof String.prototype.endsWith!=="function"){String.prototype.endsWith=function(a){return this.indexOf(a,this.length-a.length)!==-1}}function setFocusOnLoad(){}var textInputDataTypes="|COMBOBOX|CURRENCY|DOUBLE|EMAIL|INTEGER|PERCENT|PHONE|STRING|DATE|DATETIME|URL|REFERENCE|TIME|",defaultLookupData=[{label:lang.noMatchLookUp,id:""}],showingFirstXMatchesMsg=lang.first100,gridInfoMap={},gridInfoMapLen=0,gridInfoMapId,gridData,modData={},modDataSize=0,newData={},newDataSize=0,lookupIds={},btnClick="default",whoIdActivityObjects=[],whatIdActivityObjects=[],currentNewRowId=-1,frozenColsContainerJqueryId="#frozenColsContainer",mainTableJqueryId="#gbMainTable",mainTableHeaderJqueryId="#gbMainTableFrozenHeaderContainer",mainFrozenTableContainerJqueryId="#gbMainTableCloneContainer",mainFrozenTableHeaderIdOnly="gbMainTableCloneHeader",mainFrozenTableHeaderJqueryId="#"+mainFrozenTableHeaderIdOnly,jqFrozenAndUnfrozenTables=jq(mainTableJqueryId+", "+mainFrozenTableContainerJqueryId),outerTableContainer=jq("#outerTableContainer"),notLinkableObjects=["AccountContactRole","ContractContactRole","CaseContactRole","OpportunityContactRole","EventRelation","EventAttendee","CaseComment","AccountTeamMember","OpportunityLineItemSchedule","Partner","AccountPartner","OpportunityPartner","CaseTeamMember","LeadHistory","ProcessInstanceHistory","OpportunityFieldHistory","ProcessInstance","ProcessNode"],dependentPickListInfo={},dependentToControlling={},rtPicklistMap={},gridHasUpdateableFields=false,gridHasCreateableFields=false,objectsWithNoDeletePerms=[],isIE6=(jq.browser.msie==true&&jq.browser.version==6),isIE7=(jq.browser.msie==true&&parseInt(jq.browser.version,10)==7),isIE8=(jq.browser.msie==true&&parseInt(jq.browser.version,10)==8),currentDate,currentTime,parentGridApiName,descBox=jq("div.descBox"),descBoxRowId=jq("div.descBox #rowId"),massUpdatesBox=jq("#massUpdatesMsgBox"),userFilterBox=jq("#userFilterBox"),muLoadingMsg=jq("#massUpdateButtons span.muLoading"),oldPageSizeValue=jq("#parentHeaderTable select.pageSizeSelect option:selected"),oldFilterValue=jq(".gbPage select.filterOptions option:selected"),lastChecked;function isWindows(){return navigator.platform.indexOf("Win")>-1}function addPageLevelErrorMessage(b){var c=jq("#pageWarnings");try{if(c.length<=0){jq("div.gbPage").prepend('<div class="msgBox warningMsg" id="pageWarnings">'+b+"</div>")}else{jq("#pageWarnings").append("<br/>"+b)}}catch(a){}}function GridInfo(h,g,l,n,r,p,b,m,q,e,o,k,a,j,f,c,d){this.gridId=h;this.rowCnt=g;this.gridName=l;this.gridPluralName=n;this.fullyQualifiedObjectName=r;this.concatViewColHeader=d;this.requiredColumns=null;this._setGridApiName=function(t){var s=t.fullyQualifiedObjectName.indexOf(":");if(s>-1){if(t.fullyQualifiedObjectName.indexOf("-")>-1){t.gridApiName=t.fullyQualifiedObjectName.split("-")[0]}else{t.gridApiName=t.fullyQualifiedObjectName.substring(0,s)}}else{t.gridApiName=t.fullyQualifiedObjectName}}(this);this.objectNameWithoutFk=(this.fullyQualifiedObjectName.indexOf(":")>-1?this.fullyQualifiedObjectName.substring(0,this.fullyQualifiedObjectName.indexOf(":")):this.fullyQualifiedObjectName);this.metaColumns=[];this.columnToIndex={};this.requiredColumnsForCreateCount=0;this.isParentInfo=this.gridId=="p";this.objId=(this.isParentInfo?this.gridId:"c"+this.gridId);this.childRowKey=(this.isParentInfo?"":"c"+(this.gridId*1-1));this.sortFields=p.toLowerCase().split(",");this.sortDirs=b.split(",");this.defaultSortFields=m.toLowerCase().split(",");this.isDeletable=q;this.isCreatable=e;this.isUpdateable=o;this.isConcatenatedView=(f=="concatenated"?true:false);this.isDenormalizedView=(f=="denormalized"?true:false);this.supportsUDF=k;this.hasAnyUpdateableFields=false;this.hasAnyCreateableFields=false;this.canCreateChildRecords=function(){return(this.createableChildInfos.length>0)};this.createableChildInfos=[];this.allChildInfos=[];this.isLinkableObject=(jq.inArray(this.gridApiName,notLinkableObjects)==-1&&!GBGridInfoHelper.isHistoryObject(this.gridApiName));this.groupByFields=a||[];this.objectDotFkNameInGWFormat=j;this.hasFlatViewChildren=false;this.flatViewFieldOrder=c||{};this.hasDataCardFields=false;this.filterCriteria;this.fiscalYearStartMonth;this.initRequiredColumns=function(){if(this.requiredColumns==null){this.requiredColumns=[];var u=this.metaColumns.length;for(var s=0;s<u;s++){var t=this.metaColumns[s];if(t.valRequired==true&&t.requiredForCreate==false){this.requiredColumns.push(t.colIndex)}}}};this.setProps=function(s){try{this.filterCriteria=JSON.parse(s.filterCriteria)}catch(t){this.filterCriteria={}}this.fiscalYearStartMonth=s.fiscalYearStartMonth;this.groupByColumnInfos=s.groupByColumnInfos||[];if(this.groupByColumnInfos.length>0){this.isPivotedGrid=true}};this.addCreateableChildInfo=function(s){this.createableChildInfos.push(s)};this.addChildInfo=function(s){this.allChildInfos.push(s)};this.addMetaCol=function(F,u,N,G,J,H,s,x,v,y,A,I,Q,w,t,E,L,C,P,K,B,O,M,z){var D=new MetaCol(F,u,N,G,J,H,s,x,v,false,y,A,I,Q,w,t,E,L,C,P,K,B,O,M,z);this.metaColumns.push(D);if(this.hasAnyUpdateableFields==false&&D.updateable==true){this.hasAnyUpdateableFields=true;gridHasUpdateableFields=true}if(this.hasAnyCreateableFields==false&&D.createable==true&&this.isCreatable==true){this.hasAnyCreateableFields=true;gridHasCreateableFields=true}this.registerMetaCol(D);this.updateGroupByMetaData(D);return D};this.addRequiredMetaCol=function(v,w,A,B,u,D,C,H,s,G,x,F,E,I,z,y){var t=new MetaCol(v,w,A,B,u,D,C,H,s,true,G,x,F,E,I,z,y);this.metaColumns.push(t);this.requiredColumnsForCreateCount++;this.registerMetaCol(this.metaColumns[this.metaColumns.length-1]);if(this.hasAnyCreateableFields==false&&t.createable==true&&this.isCreatable==true){this.hasAnyCreateableFields=true;gridHasCreateableFields=true}return t};this.registerMetaCol=function(s){this.columnToIndex[s.fieldId]=this.metaColumns.length-1};this.updateGroupByMetaData=function(v){if(this.getHasGroupByFields()){var w=this.fullyQualifiedObjectName,s=jq.inArray(v.fieldName,this.groupByFields);if(s>-1){var u=(GBGroupBy.objectToGroupByMetaCols[w]||[0,0,0]);u.splice(s,1,v);GBGroupBy.objectToGroupByMetaCols[w]=u}if(v.aggregable&&s<0){var t=(GBGroupBy.objectToAggregateFieldIds[w]||{});t[v.fieldId]=v;GBGroupBy.objectToAggregateFieldIds[w]=t}}};this.getMetaColByFieldId=function(s){return this.metaColumns[this.columnToIndex[s]]};this.getFkFieldName=function(){var s=this.fullyQualifiedObjectName.split(":");if(s.length==1){return null}return s[s.length-1]};this.getNumHiddenFields=function(){var t=0;for(var s=0;s<this.metaColumns.length;s++){if(this.metaColumns[s].isHidden){t++}}return t};this.getNumDataCardFields=function(){var t=0;for(var s=0;s<this.metaColumns.length;s++){if(this.metaColumns[s].isDataCardField&&!this.metaColumns[s].isHidden){t++}}return t};this.getHasGroupByFields=function(){return(this.groupByFields&&this.groupByFields.length>0)};this.isExternalObject=function(){return this.gridApiName.endsWith("__x")};this.isJunctionParent=function(){return(this.fullyQualifiedObjectName.indexOf("-")>-1)};this.getQuickFilters=function(){var t=[];for(var u=0;u<this.metaColumns.length;u++){var x=this.fullyQualifiedObjectName;if(this.metaColumns[u].isQuickFilter=="true"){var w="";if(this.gridId!="p"){if(GBUnrelated.isChildUnrelated(this)){w=";:;unrelated"}}else{if(this.hasFlatViewChildren){var s=this.metaColumns[u].gridInfoGridId;if(s!=this.gridId){var v=gridInfoMap[s];x=v.fullyQualifiedObjectName;if(GBUnrelated.isChildUnrelated(v)){w=";:;unrelated"}}}}x=x.replace(":",";:;");t.push(x+";:;"+this.metaColumns[u].fieldName+";:;"+this.metaColumns[u].fieldLabel+w)}}return t}}function MetaCol(o,c,w,p,s,q,a,f,d,j,g,k,r,z,e,b,n,u,m,y,t,l,x,v,h){this.colIndex=o;this.fieldName=c;this.fieldLabel=w;this.colDataType=p;this.readOnly=s;this.createable=g;this.defaultedOnCreate=(k==true&&this.fieldName!="Name");this.updateable=r;this.sortable=z;this.valRequired=a;this.fieldLength=f;this.fieldId=("v"+this.colIndex);this.referenceToObjects=d;this.refToObjectsArr=(d?d.split(","):[]);this.maxTextValueLength=20;this.requiredForCreate=j;this.htmlFormatted=e;this.filterable=b;this.anyPicklistDisplayed=false;this.hasCustomLabel=false;this.hideObjectLabel=false;this.picklistBucket=new PicklistBucket(q);this.getPicklistValueToLabelMap=function(){return this.picklistBucket.getValueToLabelMap()};this.getPicklistLabelToValueMap=function(){return this.picklistBucket.getLabelToValueMap()};this.getOrderedPicklistOptions=function(){return this.picklistBucket.getOrderedOptions()};this.resetMaxTextValueLength=function(){this.maxTextValueLength=20};this.showTextInput=function(){return textInputDataTypes.indexOf("|"+this.colDataType+"|")>-1};this.isTypeID=function(){return this.colDataType=="ID"};this.isTypeBoolean=function(){return this.colDataType=="BOOLEAN"};this.isTypeText=function(){return this.colDataType=="STRING"};this.isTypeTextArea=function(){return this.colDataType=="TEXTAREA"};this.isTypeCombobox=function(){return this.colDataType=="COMBOBOX"};this.isTypeURL=function(){return this.colDataType=="URL"};this.isTypeMultiPicklist=function(){return this.colDataType=="MULTIPICKLIST"};this.isTypeSinglePicklist=function(){return this.colDataType=="PICKLIST"};this.isTypePicklist=function(){return this.isTypeMultiPicklist()||this.isTypeSinglePicklist()};this.isTypeCurrency=function(){return this.colDataType=="CURRENCY"};this.isTypeDouble=function(){return this.colDataType=="DOUBLE"};this.isTypeInteger=function(){return this.colDataType=="INTEGER"};this.isTypePercent=function(){return this.colDataType=="PERCENT"};this.isTypeEmail=function(){return this.colDataType=="EMAIL"};this.isTypePhone=function(){return this.colDataType=="PHONE"};this.isTypeDate=function(){return this.colDataType=="DATE"};this.isTypeDateTime=function(){return this.colDataType=="DATETIME"};this.isTypeTime=function(){return this.colDataType=="TIME"};this.isTypeReference=function(){return this.colDataType=="REFERENCE"};this.isNumeric=function(){return this.isTypeCurrency()||this.isTypeDouble()||this.isTypeInteger()||this.isTypePercent()};this.dataTypeHasLength=function(){return this.isTypeText()||this.isTypeURL()||this.isTypeEmail()||this.isTypePhone()||this.isTypeTextArea()};this.getFieldSize=function(){if(isNaN(this.fieldLength)==false&&this.fieldLength>0){return this.fieldLength}return null};this.getFieldMaxLength=function(){if(this.getFieldSize()!=null&&this.dataTypeHasLength()==true){return this.getFieldSize()}return null};this.isWhoIdField=function(){return this.fieldName=="WhoId"};this.isWhoOrWhatIdField=function(){return this.isWhoIdField()||this.fieldName=="WhatId"};this.getWhoOrWhatIdLookupObjects=function(){return(this.isWhoIdField()?whoIdActivityObjects:whatIdActivityObjects)};this.isReadOnly=function(){return(readOnlyGrid||this.readOnly)};this.isRecordTypeField=function(){return this.fieldName=="RecordTypeId"};this.isOwnerField=function(){return this.fieldName=="OwnerId"};this.isHidden=n;this.isQuickFilter=h;this.colWidth=u;this.summaryType=m;this.aggregateAlias=y;this.groupByAlias=t;this.groupingFunctionAlias=l;this.scale=(x?(x*1):0);this.aggregable=v;this.gridInfoGridId;this.renderByDefault=function(){return this.requiredForCreate==false&&!this.isHidden};this.isReferenceToParent=function(B,A){if(this.isTypeReference()){if(jq.inArray(B,this.refToObjectsArr)>-1&&this.fieldName==A.getFkFieldName()){return true}}return false};this.isReferenceToExternalObject=function(){if(this.isTypeReference()){if(this.referenceToObjects.endsWith("__x")){return true}}return false};this.isUnrelatedReferenceToParent=function(A){return GBUnrelated.isChildUnrelated(A)&&this.fieldName==A.getFkFieldName()};this.showHiddenColumnOnCreate=function(B){var A=this.valRequired&&this.isHidden&&!this.isSpecialDefaultedField(B);return A};this.isSpecialDefaultedField=function(B){var D=(B.gridId!="p");if(D==true&&(this.isReferenceToParent(parentGridApiName,B)||this.isUnrelatedReferenceToParent(B))){return true}else{if(D==false&&filterParentField!=""&&this.fieldName.toLowerCase()==filterParentField.toLowerCase()&&filterParentFieldOperator=="equals"){var A=decodeURIComponent(GBHelpers.getParamValue("fpv")),E=(A!=null&&A.length>0&&A.indexOf(",")>-1),C=this.isTypeDate()||this.isTypeDateTime();if(E==false&&C==false){return true}}}return false};this.resizeTextInputField=function(){return this.isTypeText()||this.isTypeCombobox()||this.isTypeEmail()||this.isTypeURL()};this.renderForMassUpdates=function(){return this.updateable==true||this.requiredForCreate==true};this.renderForMassCreates=function(A){return(this.createable==true||this.requiredForCreate==true)&&this.isHidden==false&&this.isSpecialDefaultedField(A)==false};this.getPicklistTemplateHtml=function(D,F,B,A,C,G,E){return getEditablePicklistHtml(this,D,F,A,B,false,"",C,true,G,E)};this.hasColWidth=function(){return this.colWidth&&this.colWidth>0};this.isNameField=function(A){if(this.fieldName=="Name"||this.fieldName==objectNameToNameField[A]){return true}return false};this.getObjectDotField=function(C){var D=C.gridApiName,B=C.getFkFieldName(),A;if(D!==null&&D!==undefined&&this.fieldName!==null&&this.fieldName!==undefined){if(B!==null&&B!==undefined&&B!="null"&&B!=""&&B!=" "){A=D+":"+this.fieldName+":"+B}else{A=D+":"+this.fieldName}}return A};this.getIsDependentField=function(D){var F=(dependentToControlling[this.fieldName]!==undefined),E=false,A=GBRowHelper.getRecordTypeDependentFields(D),B;for(var C=0;C<A.length;C++){B=A[C];if(B.fieldName==this.fieldName){E=true}}return(F||E)};this.fieldLabelForDisplay=function(A){var B=this.fieldLabel;if(A&&A.isDenormalizedView&&!this.hideObjectLabel){if(this.fieldLabel.startsWith(A.gridName)){B=this.fieldLabel}else{if(this.hasCustomLabel){B=this.fieldLabel}else{B=A.gridName+" "+this.fieldLabel}}}return B+(this.valRequired?'<span class="star">*</span>':"")};this.setProps=function(A){this.gridInfoGridId=A.gridInfoGridId;this.isDataCardField=A.isDataCardField;this.textAreaHeight=A.textAreaHeight;this.hasCustomLabel=A.hasCustomLabel;this.hideObjectLabel=A.hideObjectLabel;if(this.isDataCardField&&gridInfoMap[this.gridInfoGridId].hasDataCardFields==false){gridInfoMap[this.gridInfoGridId].hasDataCardFields=true}this.rightAlignValue=GBRowHelper.rightAlignValue(this.colDataType,this.isDataCardField)};this.getCellContainer=function(){if(gridInfoMap&&gridInfoMap[this.gridInfoGridId].isPivotedGrid){return".pgc"}if(this.isDataCardField){return".cardItem"}return"td"};this.hasTextAreaHeight=function(){return this.textAreaHeight&&this.textAreaHeight>0}}function PicklistBucket(b){this.valueToLabelMap={};this.labelToValueMap={};for(var c=0,a=b.length;c<a;c++){this.valueToLabelMap[b[c].v]={l:b[c].l,i:c};this.labelToValueMap[b[c].l]={v:b[c].v,i:c}}this.getOrderedOptions=function(){return b};this.getValueToLabelMap=function(){return this.valueToLabelMap};this.getLabelToValueMap=function(){return this.labelToValueMap}}function buildDependentPickListObjects(a){dependentPickListInfo={};dependentToControlling={};jq.each(a,function(e,j){var h=j.controllingField;var d={};d[j.dependentField]=j.dependentValues;dependentToControlling[j.dependentField]=h;if(!dependentPickListInfo[h]){dependentPickListInfo[h]=[{parent:j.parentObjectName,dependentFields:d}]}else{var f=dependentPickListInfo[h];var g=f.length;var k=false;for(var c=0;c<g;c++){var b=f[c];if(j.parentObjectName==b.parent){b.dependentFields[j.dependentField]=j.dependentValues;k=true;break}}if(!k){f.push({parent:j.parentObjectName,dependentFields:d})}}})}function setupDelegatedGridFieldEvents(){setupDatePickerForDateFields();GBUndo.initEventHandlers();trackDataChanges();setupHighlightForDeleteAction();setupHighlightForMouseoverAction();GBTextArea.setupLongTextDescFields();setupCurrentDateTimeLinks();setupPicklistTriggerEvents();setEventsForChildSection()}function initializeGridFields(a){setupActivityLookupFields(a,false);setupWhatIdFields(a);addAutocompleteToLookupFields(a,false);makeTextareasResizable(a);GBKeyNavigation.initFieldsArrowNavigation(a)}function initializeGridFieldsForMassUpdates(a){setupActivityLookupFields(a,true);setupWhatIdFields(a);addAutocompleteToLookupFields(a,true);setEventsForWidgetCells(a)}function setEventsForWidgetCells(a){var d=(a.find(".dataCard").length>0);var b=(d?a.find("tr.dr"):a.find("tr.dr, .dataCard"));var c=b.find("input,span.gbdt,span.gbdtt,select,textarea");c.on("click change",function(f){showMassUpdateFieldAsEdited(f,this)});GBFormulaMassUpdate.setupFxIcons()}function makeTextareasResizable(b){if(readOnlyGrid==false){var a=(b?b.find("textarea:visible"):jqFrozenAndUnfrozenTables.find("textarea:visible"));if(GBHelpers.isIE()){a.resizable({handles:"s",minHeight:71,minWidth:206,stop:function(){if(!isIE7){GBFreezeHeaders.initiateFreezeHeaders(false,jq(mainTableJqueryId))}if(GBFreezeCols.isFreezeColsEnabled()){jq(window).trigger("gbFreeze")}else{GBFreezeCols.updateHeightOfTablesWithNoFrozenCols()}}})}else{a.data("y",a.outerHeight());a.mouseup(function(){if(GBFreezeCols.isFreezeColsEnabled()||GBFreezeHeaders.isFreezeHeadersEnabled()){var d=jq(this);var c=d.outerHeight();if(c!=d.data("y")){jq(window).trigger("gbFreeze");GBFreezeHeaders.initiateFreezeHeaders(false,jq(mainTableJqueryId))}d.data("y",c)}else{if(!GBFreezeCols.isFreezeColsEnabled()){GBFreezeCols.updateHeightOfTablesWithNoFrozenCols()}}});a.mouseleave(function(){if(GBFreezeCols.isFreezeColsEnabled()){var c=jq(this);if(c.outerWidth()!=c.data("x")||c.outerHeight()!=c.data("y")){jq(window).trigger("gbFreeze")}}else{GBFreezeCols.updateHeightOfTablesWithNoFrozenCols()}})}}}function setupActivityLookupFields(a,c){var b=(a?a.find("select.wId"):jq("select.wId"));b.change(function(){var j=jq(this),h=getGridInfo(j),k=getMetaCol(j,h),l=j.parents("div.ui-widget").find("input.rf"),f=j.val(),e=(j.closest("#fastFilter").length>0),d=(j.closest("#massUpdatesTable").length>0),g=(j.closest("#relatedColumnWidget").length>0);addAutocompleteToLookupField(l,k.referenceToObjects,f,c);if(e||d||g){handleWhatIdField(j,f,false,g)}else{handleWhatIdField(j,f,true)}})}function setupWhatIdFields(a){var b=(a?a.find("select.whoId"):jq("select.whoId"));b.each(function(){var d=jq(this),c=d.val();handleWhatIdField(d,c,false)})}function handleWhatIdField(m,f,k,o){if(m.hasClass("whoId")){var q=m.parents("tr.dr"),l=getGridInfo(m),g,b;g=q.find("select.whatId");if(l.hasDataCardFields&&!g.length){if(q.hasClass("dataCard")){g=q.prev().find("select.whatId")}else{g=q.next(".dataCard").find("select.whatId")}}if(k&&GBFreezeCols.isFreezeColsEnabled()){var n;if(GBFreezeCols.isElementInFrozenTable(m)){n=jq(mainTableJqueryId)}else{n=jq(mainFrozenTableContainerJqueryId)}var e=m.parents("tr.dr").attr("name");g=g.add(n.find('tr.dr[name="'+e+'"]').find("select.whatId"));GBFreezeCols.syncFrozenAndUnfrozenTable(m)}else{if(!k&&o){var e=m.parents("tr.dr").attr("name"),h=m.closest("#relatedColumnWidget").attr("data-parent-id"),j=jq(mainTableJqueryId).find("tr.dr#"+h).not(".ur"),c=m.closest(".childTable").attr("name"),p;j.nextAll("tr.cr").each(function(){var r=jq(this);if(r.find('.childTable[name="'+c+'"]').length>0){p=r.find('.childTable[name="'+c+'"]');return false}});if(p){var a=p.find('tr.dr[name="'+e+'"]');a.find("select.whoId").val(m.val());g=g.add(a.find("select.whatId"))}}}if(g.length>0){var d=(f=="Lead"),b=g.parents("div.ui-widget").find("input.rf");if(d){g.prop("disabled",true);b.prop("disabled",true);b.val("")}else{g.prop("disabled",false);b.prop("disabled",false)}}}}function addAutocompleteToLookupFields(a,c){var b=(a?a.find("input.rf"):jq("input.rf"));b.each(function(){var f=jq(this),e=getGridInfo(f),g=getMetaCol(f,e),d=g.referenceToObjects;if(g.isWhoOrWhatIdField()==true){d=f.parents("div.ui-widget").find("select.wId").val()}addAutocompleteToLookupField(f,g.referenceToObjects,d,c)});b.click(function(){jq(this).select()}).mouseup(function(){jq(this).select()})}function addAutocompleteToLookupField(h,j,b,f){var d=h,c=h.closest(".ui-widget"),g=getGridInfo(d),k=g.gridApiName,e=b,l=getMetaCol(d,g);c.find(".rfIcon").click(function(){var n=jq(this).closest(".ui-widget").find(".rf"),m=n.val();if(n.hasClass("ui-autocomplete-input")){n.focus();n.catcomplete("search",m)}else{n.focus();setTimeout(function(){n.trigger("keydown")},0)}});d.focus(function(){if(!d.hasClass("ui-autocomplete-input")){d.catcomplete({minLength:0,delay:100,position:{my:"left top",at:"left bottom",collision:"fit none"},source:function(n,m){GBLookupHelper.getLookupAjaxFn(n,m,e,k,j,d,l,g,f)},select:function(m,n){d.val(n.item.value);d.attr("name",n.item.id);d.change();GBRowHelper.handleProductSalesPrice(n,g,d)},open:function(m,n){a()},close:function(m,n){d.removeData("ignoreFilter")},messages:{noResults:"",results:function(){}}})}else{d.catcomplete({source:function(n,m){GBLookupHelper.getLookupAjaxFn(n,m,e,k,j,d,l,g,f)},open:function(m,n){a()}})}});function a(){var n=jq(".ui-autocomplete:visible"),m=n.offset().top-jq("div.gbPage").offset().top+jq("div.gbPage").scrollTop();if(GBHelpers.isGridInIframe()){m-=(jq(".gridBtns.top").outerHeight()+50)}if(!GBHelpers.isScrolledIntoView(n)){jq("html,body").animate({scrollTop:m},200)}}}function trackDataChanges(){jqFrozenAndUnfrozenTables.on("change","input:not(.dl, .selectAllChk, .grpChk), textarea",function(a,b){registerValueChange(a,jq(this),b)})}function registerValueChange(k,d,m,n,o,s,c){var f,r;if(m&&m.hasOwnProperty("gridInfo")&&d.parent().hasClass("dvc")==false){f=m.gridInfo}else{f=getGridInfo(d)}if(m&&m.hasOwnProperty("metaCol")){r=m.metaCol}else{r=getMetaCol(d,f)}var q=d.closest("tr"),h=q.hasClass("nr"),j=q.hasClass("ur"),g=dependentPickListInfo[r.fieldName],b=(jq("#relatedColumnWidget:visible").length>0)&&!c,l=false;if(m&&m.hasOwnProperty("isFreezeColsEnabled")){l=m.isFreezeColsEnabled}else{l=GBFreezeCols.isFreezeColsEnabled()}var a=(h==false&&l);s=s||false;updateModifiedDataMap(d,f,h);validateField(d,f,h);if(h==false){var p;if(r.isDataCardField){p=d.parents("div.cardItem:first")}else{p=d.parents("td:first")}if(p.hasClass("mod")==false){p.addClass("mod")}if(!m||(m.changeType!="undo")){GBMixpanel.addEditedFieldsSeq(f,r,q);GBUndo.addUndoIconToField(d,q,f,r,l)}}if(a){if(!m||(m&&!m.isFrozenUpdate)){GBFreezeCols.syncFrozenAndUnfrozenTable(d)}}if(g){if(m&&m.isFrozenUpdate){updateDependentPickLists(d,g,r,f,true)}else{updateDependentPickLists(d,g,r,f)}}validateRemainingRequiredRowFields(d,f,h,o);if(j&&!s){GBRowHelper.updateRecords(k,d,f,r,true)}if(b){GBRowHelper.updateRecords(k,d,f,r,false)}if(f.isDenormalizedView&&GBUnrelated.isChildUnrelated(f)&&!s){GBRowHelper.updateRecords(k,d,f,r,true,true)}if(f.isParentInfo&&getParentGridInfo().hasFlatViewChildren&&!c){if(m&&m.changeType=="dependentPicklistChange"){return}GBRowHelper.updateRecords(k,d,f,r,false,false,true)}if(r.summaryType&&r.summaryType!=""){GBSummary.updateSummaryValue(d)}GBHelpers.updateGridChart();GBColorCode.updateColor(d,r,f);if(a&&r.isTypePicklist()&&!g&&(!m||(m&&!m.isFrozenUpdate))){jq(window).trigger("gbFreeze")}}function selectNextRow(c,a,f,b){f?c.addClass("selected"):c.removeClass("selected");c.find("input.dl").prop("checked",f);var e=(b!="up")?c.prevAll("tr.dr:first"):c.nextAll("tr.dr:first");if(c.attr("id")==e.attr("id")){f?e.addClass("selected"):e.removeClass("selected")}if(c.attr("id")==a.attr("id")){return false}else{var d=(b=="up")?c.prevAll("tr.dr:first"):c.nextAll("tr.dr:first");return selectNextRow(d,a,f,b)}}function setupHighlightForDeleteAction(){jq(mainTableJqueryId+" input.dl").click(function(b){var g=jq(this),m=g.parents("tr.dr:first"),o,e,f,k,l,j,d,c,n=g.is(":checked"),h,a;if(n){m.addClass("selected");m.next(".dataCard").addClass("selected")}else{m.removeClass("selected");m.next(".dataCard").removeClass("selected")}if(b.shiftKey&&lastChecked){o=lastChecked.parents("tr.dr:last");e=m.parents("tr.cr");f=o.parents("tr.cr");k=e.find("table").attr("name");l=f.find("table").attr("name");j=e.length>0?true:false;d=f.length>0?true:false;if(o!=m&&((j==false&&d==false)||((j==true&&d==true)&&k==l&&e.attr("name")==f.attr("name")))){c=m.parents(".mainTable tbody");dir=c.children().index(m)>c.children().index(o)?"down":"up";lastChecked=g;if(!selectNextRow(o,m,n,dir)){return}}}else{lastChecked=g}});jqFrozenAndUnfrozenTables.on("click","input.selectAllChk",function(){var a=jq(this);toggleObjectTypeRecordsForDelete(a)})}function setupHighlightForMouseoverAction(){var a=mainTableJqueryId+" tr.dr:not(.nd)",b=mainTableJqueryId+" tr.dr.dataCard";if(GBFreezeCols.isFreezeColsEnabled(true)){a+=(", "+mainFrozenTableContainerJqueryId+" tr.dr:not(.nd)")}jq("div.gbPage").on("mouseover",a,function(){var c=jq(this);c.add(c.next(".dataCard")).addClass("highlightRow");GBFreezeCols.addOrRemoveRowHighlight(true,c)});jq("div.gbPage").on("mouseleave",a,function(){var c=jq(this);c.add(c.next(".dataCard")).removeClass("highlightRow");GBFreezeCols.addOrRemoveRowHighlight(false,c)});jq("div.gbPage").on("mouseover",b,function(){jq(this).addClass("highlightRow");jq(this).prev(jq(a)).addClass("highlightRow")});jq("div.gbPage").on("mouseleave",b,function(){jq(this).removeClass("highlightRow");jq(this).prev(jq(a)).removeClass("highlightRow")})}function setupDatePickerForDateFields(){jq("div.gbPage").on("focus","input.gbd",function(c){var d=jq(this);if(!d.hasClass("hasDatepicker")){var b=getMetaCol(d,getGridInfo(d)),a=b.isTypeDate();enableDatePicker(b.colDataType,d,a)}});jq("div.gbPage").on("blur","input.gbt",function(a){var c=jq(this),b=c.parent().find("input.gbd");if(b.length>0&&b.val().trim()==""){b.val(currentDate);b.change()}})}function setupCurrentDateTimeLinks(){jq("div.gbPage").on("click","span.gbdt",function(){var a=jq(this),b=a.parent().find("input.gbd");b.val(currentDate);b.change()});jq("div.gbPage").on("click","span.gbdtt",function(){var b=jq(this),c=b.parent().find("input.gbd"),a=b.parent().find("input.gbt");c.val(currentDate);a.val(currentTime);a.change();c.change()});jq("div.gbPage").on("mouseover","span.gbdt, span.gbdtt",function(){var a=jq(this);a.attr("title",currentDate+(a.hasClass("gbdtt")?(" "+currentTime):""))})}function getFirstSubmitButton(b){var a=jq("input."+b);if(a.length>0){return a[0]}return a}function beforeFormSubmit(){var n=true;if(btnClick=="default"){if(stayOnPageForUnsavedChanges(true,false)==true){return false}showProcessingMsg(lang.loading)}else{if(btnClick=="save"){if(GBHelpers.isIE()){var o=jq(mainTableJqueryId+" .gbrq"),d;o.change();jq(mainTableJqueryId+" tr.nr").each(function(){d=jq(this).find("input,select:not(.wId),textarea").first();if(d.length==1){d.change()}})}var a=processNextRequiredField();if(a){return false}var j=GBRowHelper.processOppProdFields();if(j){return false}var g=GBHelpers.processHiddenDataPanelFields();if(!g){return false}GBMixpanel.onGridSave.track();try{var m=getModifiedData(),h=getNewData(),c=(jq.trim(m).length>0),k=(jq.trim(h).length>0);if(c==false&&k==false){alert(lang.noChange);return false}if(c==true){jq(modDataHidden).val(m)}if(k==true){jq(newDataHidden).val(h)}}catch(l){}showProcessingMsg(lang.saving);n=false}else{if(btnClick=="delete"){try{if(confirm(lang.delWarn)){var f=processRecordsMarkedForDelete();if(!f){if(objectsWithNoDeletePerms.length>0){var b=new String(lang.noDelPerm);if(objectsWithNoDeletePerms.length==1){b+=": "+objectsWithNoDeletePerms[0];b+=lang.deselectRec}else{b+="s: "+objectsWithNoDeletePerms.join(", ");b+=lang.deselectRecMulti}alert(b)}else{alert(lang.noRecForDel)}return false}}else{return false}}catch(l){}showProcessingMsg(lang.deleting)}else{if(btnClick=="deleteAll"){try{if(confirm(lang.delAllWarn)){if(!confirm(lang.delAllWarn2)){return false}}else{return false}}catch(l){}showProcessingMsg(lang.deleting)}else{if(btnClick=="edit"){GBMixpanel.track("Change Grid Display",{"Display Control":"Edit",Option:"",State:""});showProcessingMsg(lang.loading)}else{if(btnClick=="cancel"){if(stayOnPageForUnsavedChanges(false,false)==true){return false}showProcessingMsg(lang.loading);GBMixpanel.track("Change Grid Display",{"Display Control":"Read Only Button",Option:"",State:""})}else{if(btnClick=="refresh"){if(stayOnPageForUnsavedChanges(false,false)==true){return false}showProcessingMsg(lang.refreshing)}else{if(btnClick=="rocRevertBtn"){showProcessingMsg(lang.reverting)}else{if(btnClick=="rocSaveBtn"){if(!GBUserDefinedCols.validateUdc()){return false}showProcessingMsg(lang.saving);GBUserDefinedCols.buildJSONForSave()}}}}}}}}}unbindFormFields(n);showSubmitInProgress();jq(document.body).css("cursor","progress");return true}function stayOnPageForUnsavedChanges(j,d,g,h){var e=getModifiedData(true),b=getNewData(true),a=(jq.trim(e).length>0),c=(jq.trim(b).length>0),f=GBFF.filterChangesExist();if(a==true||c==true||f==true){if(d==true){if(!confirm(lang.filterNavWarn)){return true}else{return false}}else{if(g==true){if(!confirm(lang.reorderColsNavWarn)){return true}else{return false}}else{if(!confirm(lang.navWarn)){if(j==true){oldPageSizeValue.prop("selected",true)}if(h==true){oldFilterValue.prop("selected",true)}return true}}}}return false}function anyParentRecordsModified(){if(modDataSize>0){var c=getParentObjectName();for(var a in modData){var b=modData[a]["nm"];if(b==c){return true}}}return false}function getParentObjectName(){return getParentGridInfo().fullyQualifiedObjectName}function showProcessingMsg(a){jq("#gridStatus .msgText").text(a);jq("#gridStatus").center();jq("#gridStatus").show()}function hideProcessingMsg(){jq("#gridStatus").hide()}function toggleButtonState(b){var c=jq("input[type=submit]:not(.gbMenuBtn), input[type=button]:not(.gbBtnDisabled, .gbMenuBtn), button[type=button]:not(.gbBtnDisabled), span.editBtn, span.refreshBtn"),d=jq("input.gbBtnDisabled:not(.massUpdatesDisabled,.hidden), button.gbBtnDisabled"),a=(isIE6==false&&gridHasUpdateableFields==true&&getParentGridInfo().rowCnt>0)?jq("button.massUpdatesDisabled"):null;if(b==true){c.addClass("none");d.removeClass("none");if(a!=null){a.removeClass("none")}}else{c.removeClass("none");d.addClass("none");if(a!=null){a.addClass("none")}}}function showSubmitInProgress(){toggleButtonState(true)}function toggleObjectTypeRecordsForDelete(f){var b=(f.is(":checked")==true);var d=getGridInfo(f);var h=f.closest("table");var c;if(d.objId=="p"){var e=jq(f).parents("tr.gradientHeader");var a=jq(e).siblings(":not(.gradientHeader, .cr)");toggleSelectAllRecords(a,b)}else{var g=h.closest("table");c=g.find("tr.dr");toggleSelectAllRecords(c,b)}}function toggleSelectAllRecords(b,a){jq(b).each(function(){var c=jq(this).find("input.dl");if(a){c.prop("checked",true).trigger("change");jq(this).addClass("selected")}else{c.prop("checked",false).trigger("change");jq(this).removeClass("selected")}})}function showMassUpdateFieldAsEdited(h,d){var b;if(jq(d).closest("td").hasClass("dataCardCell")){b=jq(d).closest(".cardItem")}else{b=jq(d).closest("td")}var c=b.find("div.spanLink"),f=getGridInfo(b),l=getMetaColByCellName(b.attr("name"),f),k=b.find("select"),g=dependentPickListInfo[l.fieldName],a=b.hasClass("ca");if(k.length>0){var j=k.val();if(l.isTypeMultiPicklist()){if(j!=null){j=j.join(";")}}b.data("lastVal",j)}if(g&&h.type=="change"&&!a){updateDependentPickLists(k,g,l,f)}b.addClass("mu");if(c.length>0){c.show()}else{b.append('<div class="spanLink">'+lang.clear+"</div>");b.find("div.spanLink").click(function(){var m=b.find("select");b.find("input").not(".gbBtn").prop("disabled",false).val("").prop("checked",false);b.find("textarea").val("");if(b.find(".valueToCalculate").length>0){b.find(".valueToCalculate").val("1")}if(b.find("input.rtf").length===1){GBRowHelper.updateRecordTypePicklists(jq(d),true)}if(m.length>0){m.find("option:selected").prop("selected",false);if(m.attr("multiple")==false){m.find("option:first").prop("selected",true)}var n=l.fieldName,e=dependentPickListInfo[n];if(e){disableAndClearDependentFields(b,f,l,e)}if(m.hasClass("wId")){m.prop("disabled",false);m.trigger("change",true)}}if(b.parents("#massUpdatesMsgBox").length>0){b.removeClass("mu")}jq(this).hide()})}}function disableAndClearDependentFields(d,b,c,a){jq.each(a,function(l,q){if(q.parent==b.gridApiName){var k=q.dependentFields,n,h,p,m,j,o,g,e;for(fieldName in k){o=k[fieldName];n=getMetaColByFieldName(b,fieldName);if(n){p=n.getCellContainer();if(b.isDenormalizedView){m=p+'.dvc[name="'+n.fieldId+'"]'}else{m=p+'[name="'+n.fieldId+'"]:not(.dvc)'}j=GBRowHelper.getRelatedElement(d,c,n,m);e=j.find("select");g=j.find("div.spanLink");e.html("<option>"+lang.none+"</option>");e.prop("disabled",true);j.removeClass("mu");g.hide();var f=dependentPickListInfo[n.fieldName];if(f){disableAndClearDependentFields(j,b,n,f)}}}return false}})}function processRecordsMarkedForDelete(){var parentIds="",child1Ids="",child2Ids="",child3Ids="",child4Ids="";objectsWithNoDeletePerms=[];var idsByObjectTypeMap={};jq("td input.dl:checked").each(function(){var rowId=jq(this).parents("tr").attr("id");var gridInfo=getGridInfo(jq(this));if(gridInfo.isDeletable==false&&jq.inArray(gridInfo.gridName,objectsWithNoDeletePerms)<0){objectsWithNoDeletePerms.push(gridInfo.gridName)}else{var mapKey=gridInfo.gridId;var existingGrids=idsByObjectTypeMap[mapKey];if(existingGrids==null){existingGrids=[];idsByObjectTypeMap[mapKey]=existingGrids}existingGrids.push(rowId)}});if(objectsWithNoDeletePerms.length>0){return false}for(mapKey in idsByObjectTypeMap){var fieldName=(mapKey=="p")?"parentIds":("child"+mapKey+"Ids");eval(fieldName+" = idsByObjectTypeMap[mapKey].join(',')")}if(parentIds==""&&child1Ids==""&&child2Ids==""&&child3Ids==""&&child4Ids==""){return false}jq(parentIdsHidden).val(parentIds);jq(child1IdsHidden).val(child1Ids);jq(child2IdsHidden).val(child2Ids);jq(child3IdsHidden).val(child3Ids);jq(child4IdsHidden).val(child4Ids);GBMixpanel.track("Delete Records",{"# of Records":jq("td input.dl:checked").length,"# of Objects":GBHelpers.getDeletedRecordObjectsLength([parentIds,child1Ids,child2Ids,child3Ids,child4Ids])});return true}function addGridRowsForMassUpdates(c){var d=jq("#massUpdatesContent");var a=getRowDataHtmlForMassUpdates(getParentGridInfo(),c);d.append('<table class="mainTable" id="massUpdatesTable" name="p" cellspacing="0" cellpadding="0" border="0"><tbody>'+getRowHeaderHtmlForMassUpdates(getParentGridInfo(),c,a.existDataCardFields)+a.htmlStr+"</tbody></table>");if(getParentGridInfo().hasFlatViewChildren){jq("#massUpdatesTable").attr("data-childGridId",GBFlatView.flatViewObjects[0].gridId)}if(getParentGridInfo().hasDataCardFields){d.find(".dataCard").each(function(){var e=jq(this).prev();var f=e.find("td").not(":eq(0)").filter(function(){return !jq(this).hasClass("none")});if(f.length==0){e.hide();e.prev().hide();e.next(".dataCard").removeClass("none")}})}if((c=="massCreate")&&(d.find(".crDataContainer").length>0)){var b=d.find(".crDataContainer .childTable").length;if(b===0){jq("#massCreateRelated").addClass("none")}}}function addGridRows(a){try{if(gridData&&gridInfoMap){var b=jq(a);GBUserDefinedCols.setupCustomCSS();GBActions.processCustomActions();b.append("<tbody>"+getRowHeaderHtml(getParentGridInfo(),true,false)+getRowDataHtml(getParentGridInfo())+"</tbody>");if(getParentGridInfo().hasFlatViewChildren){b.attr("data-childGridId",GBFlatView.flatViewObjects[0].gridId)}GBGrid.completeGridLoading(b);setTimeout(function(){if(GBFreezeCols.isFreezeColsEnabled()){var d=getParentGridInfo().metaColumns;for(var e=0;e<d.length;e++){if(d[e].isTypeTextArea()){jq(window).trigger("gbFreeze");break}}}},500)}}catch(c){addPageLevelErrorMessage("<div>"+lang.getUnableToLoad(c)+"</div>");hideGBLoader()}}function populateUnsavedRows(){if(!jq.isEmptyObject(updatedRecs)){jq.each(updatedRecs,function(l,k){var n=k.nm,j=GBGridInfoHelper.getGridInfoByFullObjectName(n),m=(j.isDenormalizedView?jq('tr.dr[data-childId="'+l+'"]'):jq("#"+l));jq.each(e(k,j),function(p,o){d(m,k,o.index,j,o.value)});g(m)})}if(!jq.isEmptyObject(insertedRecs)){var a=jq("#gbMainTable"),h=[],c,f,b;jq.each(insertedRecs,function(k,j){h[-k-1]=j});jq.each(h,function(k,m){if(m===undefined){return}if(m.pId!==undefined){m.pId=m.pId.split(":")[0];var n=jq("#gbMainTable tbody > #"+m.pId).first();if(n.length===0&&parseInt(m.pId)<0&&h[-m.pId-1]===undefined){c=insertNewRow(getDataTable("p"));h[-m.pId-1]={};n=jq("#"+m.pId)}if(n.length===0){return}GBActions.addNewRelatedObjects(n);var l=getChildGridInfo(m.nm),j=n.nextUntil(".dr:not(.dataCard)").find('.childTable[name="'+(l&&l.objId)+'"]');if(l.isDenormalizedView){c=n;f=l;if(parseInt(n.attr("id"))>0){}}else{c=insertNewRow(j);f=getGridInfo(c)}jq(c).closest(".cr").prevUntil(".dr",".cr").andSelf().nextUntil(".dr",".cr").andSelf().addClass("unsaved");g(j)}else{c=insertNewRow(a);f=getGridInfo(c);jq(c).nextUntil(".dr",".cr").addClass("unsaved")}b=c.attr("id");jq.each(e(m,f),function(p,o){d(c,m,o.index,f,o.value)});g(c);if(m.cl){newData[b]["cl"]=m.cl}})}function e(l,o){var p=[],j=[];jq.each(l,function(t,v){var u={index:t,value:v};if(t.startsWith("v")&&!t.endsWith("v")){var s=getMetaColByCellName(t,o);if(dependentToControlling[s.fieldName]!==undefined){u.fieldName=s.fieldName;j.push(u)}else{if(s.isRecordTypeField()){p.splice(0,0,u)}else{p.push(u)}}}else{if("whoId,whatId".indexOf(t)>-1){p.splice(0,0,u)}}});var r=p.length,k=0;while(j.length>0){var q=j[k];p.splice(r,0,q);j.splice(k,1);var n=dependentToControlling[q.fieldName];for(var m=0;m<j.length&&j[m].fieldName!==n;m++){}if(m<j.length){k=m}else{k=0;r=p.length}}return p}function d(m,o,s,v,u){var n=getMetaColByCellName(s,v),z=(n?n.isDataCardField:false),w;if(z){if(v.isPivotedGrid){var p=m.attr("id");if(GBPivoted.firstRecordIdWithError==p){if(!GBDataPanel.isDataPanelPresent()){GBDataPanel.showDataPanel(m,p)}}else{if(!modData[p]){modData[p]={nm:v.fullyQualifiedObjectName}}modData[p][s]=u;return}w=jq("#dataPanel")}else{w=m.next().find(".cardTable")}}else{if(v.isPivotedGrid){var p=m.attr("id");w=jq(mainTableJqueryId).find("#"+p)}else{w=m}}if("whoId,whatId".indexOf(s)>-1){w.find("select."+s).val(u).change();return}var q=n.getCellContainer(),B=(!v.isDenormalizedView?q+'[name="'+s+'"]:not(.dvc)':q+'.dvc[name="'+s+'"]'),j=w.find(B),r=j.find(":input").filter(":not(.wId)");if(r.length===0){setupPicklistBehavior(null,j);r=j.find(":input")}var t=r.parent().find("input.gbd"),l=r.parent().find("input.gbt");if(n.isTypeBoolean()){r.prop("checked",(u==="true"))}else{if(n.isTypePicklist()){r.val("");var A=(u.length>0?u.split(";"):[]),y=n.getPicklistValueToLabelMap();jq(A).each(function(C,D){A[C]=y[htmlEscape(D)].l});setSelectedPicklistOptions(A,r)}else{if(n.isTypeReference()&&o[s+"v"]!==undefined){r=r.filter("input");r.attr("name",u).val(o[s+"v"])}else{if(n.isTypeDateTime()&&t.length>0&&l.length>0){if(u.indexOf(" ")>0&&!(u.indexOf(" ")==u.indexOf(" A")||u.indexOf(" ")==u.indexOf(" P"))){var x=u.substring(0,u.indexOf(" ")).trim(),k=u.substring(u.indexOf(" ")+1).trim();t.val(x);l.val(k)}else{if(u.indexOf(" ")>0||u.indexOf(":")>0){t.val("");l.val(u)}else{t.val(u);l.val("")}}t.change();l.change()}else{r.val(u)}}}}r.change();if(z){GBDataCard.openDataCard(j)}}function g(j){var k=j.closest("td.crDataContainer").find(".toggleData");if(k.hasClass("collapsed")){GBExpandCollapseHelper.expandChildData(k)}}}function cacheLookupIds(k,g,n,q){var r;for(var p=0;p<k.length;p++){var h=k[p],b=h.value,o=h.id;if(b!=q){r=h;break}}var a=k.concat();if(r){a.push({id:r.id,value:q})}var s=g+"_"+n;var f=lookupIds[s];if(f==null){lookupIds[s]={};f=lookupIds[s]}for(var p=0;p<a.length;p++){var e=a[p],c=e.id,l=e.value,m=f[l];if(m&&m.length>0){var d=false;for(var j=0;j<m.length;j++){if(m[j]==c){d=true;break}}if(d==false){m.push(c)}}else{f[l]=[c]}}}function hideGBLoader(){jq("div.gbLoading").addClass("none")}function childDataExists(){var b;var c;for(var a=1;a<gridInfoMapLen;a++){c=a+"";b=gridInfoMap[c];if(b!=null&&b.rowCnt>0){return true}}return false}function getRowHeaderHtmlForMassUpdates(g,a,c){var f=g.objId=="p"?"gradientHeader":"childHeaderRow",j,l,e,k=[],b;if((filteringByParent==true||g.hasAnyUpdateableFields==false)&&g.objId=="p"){f+=" none"}j='<tr class="'+f+'">';if(c){j+="<td></td>"}for(var d=0,h=g.metaColumns.length;d<h;d++){l=g.metaColumns[d];e="";k=[];if(l.gridInfoGridId!=g.gridId){b=gridInfoMap[l.gridInfoGridId];k.push("dvc")}else{b=g}if(!l.isDataCardField){if(a=="massUpdate"&&l.renderForMassUpdates()){if(!l.renderByDefault()){k.push("nc none")}if(k.length>0){e=' class="'+k.join(" ")+'"'}j+="<td"+e+">"+l.fieldLabelForDisplay(b)+"</td>"}else{if(a=="massCreate"&&l.renderForMassCreates(b)){j+="<td>"+l.fieldLabelForDisplay(b)+"</td>"}}}}j+="</tr>";return j}function getRowHeaderHtml(e,d,a){var b;if(e.rowCnt>0||(!e.isPivotedGrid)){var c=e.objId=="p"?"gradientHeader":"childHeaderRow";if(e.objId=="p"){if(filteringByParent==true||((!repeatParentHeader||expandAll=="Hide_Related")&&!d)){c+=" none"}if(!repeatParentHeader&&d){c+=" firstHeader"}}b='<tr class="'+c+'">';if(a==false&&e.rowCnt>0){b+=GBRowHelper.getSelectColHeader(d)}b+=GBRowHelper.getRowHeaderCells(e,a);b+=GBRowHelper.getConcatenatedViewColHeaderHtml(e,a);b+='<td class="lastCol">&nbsp;</td></tr>'}return b}function insertNewRow(r,G){var B=[],O=getGridInfoByName(r.attr("name")),p=O.metaColumns,I=getFirstDataRow(r),y=(I==null||I.length==0?"":I.attr("id"))||"",x=r.hasClass("mainTable")==true,l=(x?r.find("tr.gradientHeader"):r.find("tr.childHeaderRow")),b="",s,a,L,g,D,u,q=[],h=[],e=(y.length==0||isNaN(y)==true),C,F="",f="",E=0,j,m,K=[],o=G?jq(G).find("td span.icon-wrap").hasClass("on"):true;showGridTable(r);jq(".gbPage .gbBtnGroup .saveBtn").addClass("savePending");if(e){if(I.hasClass("nd")){I.addClass("none")}var w="",z=0;if(!G){for(var J=0,t=O.metaColumns.length;J<t;J++){s=O.metaColumns[J];if((s.requiredForCreate==true||s.showHiddenColumnOnCreate(O))&&!s.isDataCardField){m=s.fieldLabelForDisplay(O);j=["nc"];if(s.gridInfoGridId!=O.gridId){m=s.fieldLabelForDisplay(gridInfoMap[s.gridInfoGridId]);j.push("dvc")}l.find("td.lastCol").before('<td class="'+j.join(" ")+'">'+m+"</td>");l.first().next(".summaryRow:not(.grandTotal)").find("td.lastCol").before('<td class="nc"></td>');if(x){jq(".groupByRow").find("td.lastCol").before('<td class="nc"></td>')}z++}}}if(l.find("input.selectAllChk").length==0){l.find("td:first").before('<td class="minusCol nc">&nbsp;</td>');r.children("tbody").children("tr.dr").children("td:first-child").before('<td class="nc">&nbsp;</td>');z++}if(z>0){r.children("tbody").children("tr.dr:not(.nr)").find("td.lastCol").attr("colspan",z+1).addClass("bl");if(x){var v=jq("td.crDataContainer");if(v.length>0){var n=v.first().attr("colspan")*1;v.attr("colspan",n+z)}}}}if(x&&O.hasFlatViewChildren&&!GBFlatView.flatViewObjects[0].isJunctionParent()){f=(currentNewRowId-1),F="data-childId="+f;E=1}B.push('<tr id="'+currentNewRowId+'" name="r'+currentNewRowId+'" class="dr nr" '+F+">");B.push('<td class="chk firstCol"><span class="minus">&nbsp;</span>');if(O.hasDataCardFields){if(o){B.push('<span class="icon-wrap on"></span>')}else{B.push('<span class="icon-wrap"></span>')}}B.push("</td>");for(var N=0,t=p.length;N<t;N++){s=p[N];if(s.gridInfoGridId!=O.gridId){if(gridInfoMap[s.gridInfoGridId].isJunctionParent()){if(!s.isDataCardField){B.push(GBRowHelper.getEmptyCell(s,["dvc"]))}else{K=K.concat(GBDataCard.getDataCardCellHtml(pGridInfo,s,"&nbsp","dvc"))}continue}}if(!s.isHidden&&!s.requiredForCreate){H(s,O)}else{if((s.showHiddenColumnOnCreate(O)||(s.requiredForCreate&&!G))&&!s.isDataCardField){q.push(s)}}}B.push(GBRowHelper.getConcatenatedViewColDataHtml(O,null));for(var M=0,t=q.length;M<t;M++){s=q[M];H(s,O)}function H(d,c){if(G&&d.isTypeTextArea()){u=getCellProperties(d,b,null,c,false,false,false,false,G)}else{u=getCellProperties(d,b,null,c,false)}D=getCellClassForContent(d,b,u.readOnly,c);g=(D.length>0?'class="'+D+'"':"");if(!d.isDataCardField){B.push('<td name="'+d.fieldId+'" '+g+">"+u.cellHtml+"</td>")}else{K=K.concat(GBDataCard.getDataCardCellHtml(c,d,u.cellHtml,D))}}B.push(GBRowHelper.getLastColHtml(O,true)+"</tr>");if(K.length>0){var A="r"+currentNewRowId;B.push(GBDataCard.getDataCardRowHtml(O,currentNewRowId,A,["dr","nr"],K,o,f))}currentNewRowId=(currentNewRowId-1-E);if(G){var k=G.next(".dataCard").length>0?G.next(".dataCard"):G;if(k.next(".cr").length>0){a=jq(B.join("")).insertAfter(k.nextUntil(":not(.cr)").last())}else{a=jq(B.join("")).insertAfter(k)}}else{a=jq(B.join("")).insertBefore(I)}if(K.length>0){L=a.filter(".dataCard");L.find(".plTxt").click();setEventsForNewRow(L);a=a.not(".dataCard");a.find("td.chk").addClass("borderBottomNone")}setEventsForNewRow(a);if(x){GBActions.addNewRelatedObjects(a)}if(e){GBSummary.initSummaryRow()}GBDraggableResizeColumns.reinitOnNewRow();if(!x){GBResizableChildColumns.reinitOnNewRow(r.attr("name"))}return a}function setEventsForNewRow(b){initializeGridFields(b);var a=b.find("div.plTxt, input, textarea").first();if(a.length==1&&!b.hasClass("dataCard")){a.focus()}b.find("div.plTxt").each(function(){var c=jq(this);if(c.html().length>0){registerValueChange(null,c,null,false,true)}else{var g=c.parent();if(g.length==0){return true}var f=getMetaCol(c,getGridInfo(c));if(f.valRequired==true&&f.defaultedOnCreate==false){var d=f.getCellContainer(),e=c.parents(d+":first");setupCellPicklist(e,false);showCellPicklist(e,f)}}});b.find("input,select:not(.wId),textarea").each(function(){var c=jq(this);if((c.is(":checkbox")&&c.is(":checked")==true)||(c.is(":checkbox")==false&&c.val()!=null&&c.val().length>0)){c.change()}if(getParentGridInfo().allChildInfos.length==0){var d=c.prop("nodeName");var e=c.closest("tr").next(".dr").find('td[name="'+c.closest("td").attr("name")+'"] '+d).attr("style");if(e!=undefined){c.attr("style",e)}}});b.find("span.minus").click(function(){var o=b,g=o.attr("id"),d=jq('tr.dataCard[id="'+g+'"]'),m=b.parents("table:first"),e=m.hasClass("mainTable")==true,t=m.children("tbody").children("tr.nr:not(.dataCard)").length==1,u=m.hasClass("mainTable")==false,r=m.children("tbody").children("tr.dr:not(.nd, .dataCard)").length==1,k=m.children("tbody").children("tr.nd"),s=(m.hasClass("mainTable")?m.find("tr.gradientHeader"):m.find("tr.childHeaderRow")),v,p=getGridInfo(o);if(t){var h=[],c=s.find("td.nc"),l=jq("#relatedColumnWidget .nc");newColHeadersForSummary=s.next(".summaryRow").find("td.nc"),newColHeadersInFirstRow=s.first().children("td.nc"),minusColHeader=s.find("td.minusCol"),isFromRelatedColWidget=b.closest("#relatedColumnWidget").length>0;if(isFromRelatedColWidget){var n=jq('tr[name="r'+g+'"]');c=c.add(n.prev(".childHeaderRow").find("td.nc"));m=m.add(n.closest("table.childTable"))}newColHeadersInFirstRow.each(function(){h.push(jq(this).index())});c.remove();newColHeadersForSummary.remove();l.remove();if(e){jq(".groupByRow").find("td.nc").remove()}m.children("tbody").children("tr.dr").children("td.lastCol").attr("colspan",1).removeClass("bl");if(minusColHeader.length>0){m.children("tbody").children("tr.dr").children("td.nc").remove()}if(e){var q=jq("td.crDataContainer");if(q.length>0){var f=q.first().attr("colspan")*1-newColHeadersInFirstRow.length;q.attr("colspan",f)}}}if(newData[o.attr("id")]!=null){delete newData[g];newDataSize--;if(u==false){for(var j in newData){if(newData[j].pId==g){delete newData[j];newDataSize--}}}}if(u==false){m.find('tr.cr[name="r'+g+'"]').remove()}o.remove();jq('.childTable tr[id="'+g+'"]').remove();if(d.length>0){d.remove()}if(r){k.removeClass("none");GBSummary.removeSummaryRow(m)}else{GBSummary.initSummaryRow()}hideInvalidFieldsMessage();hideInvalidOppProdFieldsMessage();if(GBFreezeHeaders.isFreezeHeadersEnabled()){jq(window).trigger("gbScroll",{refreshHeader:true})}if(GBHelpers.isChartValid()){GBCharts.gridChart.updateChart(modData,newData)}if(m.find(".nr").length===0&&!GBHelpers.areRelatedRecordsShown()){GBFreezeCols.freezeColumnsIfEnabled()}if(e){GBFreezeCols.enableOrDisableFreezeAndUnfreezeLinks()}if(!GBFreezeCols.isFreezeColsEnabled()){GBFreezeCols.updateHeightOfTablesWithNoFrozenCols()}})}function getDataTable(a){return jq('form.gbForm table[name="'+a+'"]')}function getFirstDataRow(a){return a.find("tr:not(.gradientHeader,.childHeaderRow,.summaryRow):first")}function addChildObjectSections(d,l){var h=GBRowHelper.getColCount(getParentGridInfo(),true),e,s=(filteringByParent==true?getParentGridInfo().allChildInfos:GBHelpers.getChildObjectsToAdd()),q=jq('tr.cr[name="'+d.attr("name")+'"] .crDataContainer'),x=q.children(".branch").find(".toggleData:not(.fixed) span.createNew").length,u=(filteringByParent==true?q.length:x),c=jq('tr.dataCard[id="'+d.attr("id")+'"]'),a,m=0,o,r,v;if(s.length==u){return}if(c.length>0){a=c}else{a=d}for(var t=0;t<s.length;t++){r=s[t];o=(l==null?null:GBRowHelper.getChildData(l,r));if(o!=null){a=a.next();continue}var b=(r.isCreatable==true||filteringByParent==true);if(b==false){continue}e=GBRowHelper.getColCount(r);v='<tr class="cr" name="'+d.attr("name")+'"><td colspan="'+h+'" class="crDataContainer"><div class="branch">';v+=GBHelpers.addChildGridNameAndCount("collapsed","",r,m);if(GBFreezeHeaders.isFreezeHeadersEnabled()){v+=GBHelpers.addChildGridNameAndCount("expanded fixed none","",r,m)}v+='<div class="childData"><div class="childDataContainer"><table width="100%" cellspacing="0" cellpadding="0" border="0" class="childTable" name="'+r.objId+'">'+getRowHeaderHtml(r,true,true)+'<tr class="dr nd">'+GBRowHelper.getNoDataCell(e)+"</tr></table></div></div></div></td></tr>";a.after(v);a=a.next()}var p=jq('tr.cr[name="'+d.attr("name")+'"] .crDataContainer'),k=p.find(".branch"),w=k.find(".leaf").next("span"),f=(d.nextAll("tr.dr:not(.nd,.nr)").length==0);p.removeClass("firstChildGrid").removeClass("lastChildGrid");p.first().addClass("firstChildGrid");k.removeClass("lastBranch");w.removeClass("leafTitle");if(f){var n=p.last(),j=n.find(".branch");n.addClass("lastChildGrid");j.addClass("lastBranch");j.find(".leaf").next("span").addClass("leafTitle")}}function setEventsForChildSection(){jq("div.gbPage").on("click",mainTableJqueryId+" h3.toggleData, #massUpdatesTable h3.toggleData",function(){var a=jq(this);if(a.hasClass("collapsed")){GBExpandCollapseHelper.expandChildData(this)}else{GBExpandCollapseHelper.collapseChildData(this)}});jq(mainTableJqueryId).on("click","h3.toggleData .createNew",function(b){jq(".gbPage .gbBtnGroup .saveBtn").addClass("savePending");var a=jq(this).parents(".branch").find(".childTable");if(GBFreezeHeaders.isFreezeHeadersEnabled()&&a.is(":visible")){GBHelpers.scrollTo(a.closest(".crDataContainer"),function(){insertNewRow(a);jq(window).trigger("gbScroll",{refreshHeader:true})})}else{insertNewRow(a)}b.stopPropagation()});jq(mainTableJqueryId).on("mouseover","h3.toggleData .createNew",function(){var a=jq(this),b=a.parents(".branch").find(".childTable").attr("name");a.attr("title",lang.getCreateNew(getGridInfoByName(b).gridName))})}function getRowDataHtmlForMassUpdates(e,m){var s=[],k=e.metaColumns,h=GBRowHelper.getColCountForMassUpdate(e),b=gridInfoMapLen-1,p,f;var a=renderRowDataHtmlForMassUpdates(e,true,m);s.push(a.htmlStr);var u=true,c=true,l,r,n;for(var t=0;t<b;t++){l=t+1;r=gridInfoMap[l];n=(t==b-1);if(r.isDenormalizedView){continue}var q="crDataContainer";var d="branch";var j="";if(c){q+=" firstChildGrid";c=false}if(u&&n){q+=" lastChildGrid";d+=" lastBranch";j=' class="leafTitle"'}s.push('<tr class="cr" name="r0"><td colspan="'+h+'" class="'+q+'"><div class="'+d+'">');if(m=="massUpdate"){if(r.hasAnyUpdateableFields==true){s.push('<h3 class="toggleData collapsed"><span class="leaf"></span><span'+j+'><span class="icon-arrow toggleCtrl">&nbsp;</span>'+r.gridPluralName+'</span></span></h3><div class="childData">');var o=renderRowDataHtmlForMassUpdates(r,false,m);s.push('<div class="childDataContainer"><table cellspacing="0" cellpadding="0" border="0" class="childTable" name="'+r.objId+'">'+getRowHeaderHtmlForMassUpdates(r,m,o.existDataCardFields)+o.htmlStr+"</table></div></div>")}else{s.push('<h3 class="noData"><span class="leaf"></span><span'+j+'><span class="icon-arrow toggleCtrl">&nbsp;</span>'+r.gridName+' <span class="noDataCol">'+lang.noFieldsToUpdate+"</span></span></span></h3>")}}else{if(m=="massCreate"){if(r.hasAnyCreateableFields==true){s.push('<h3 class="toggleData collapsed"><span class="leaf"></span><span'+j+'><span class="icon-arrow toggleCtrl">&nbsp;</span>'+r.gridPluralName+'</span></span></h3><div class="childData">');var o=renderRowDataHtmlForMassUpdates(r,false,m);s.push('<div class="childDataContainer"><table cellspacing="0" cellpadding="0" border="0" class="childTable" name="'+r.objId+'">'+getRowHeaderHtmlForMassUpdates(r,m,o.existDataCardFields)+o.htmlStr+"</table></div></div>")}else{s.push('<h3 class="noData"><span class="leaf"></span><span'+j+'><span class="icon-arrow toggleCtrl">&nbsp;</span>'+r.gridName+' <span class="noDataCol">- No creatable fields available.</span></span></span></h3>')}}}s.push("</div></td></tr>")}return{htmlStr:s.join(""),existDataCardFields:a.existDataCardFields}}function getRowDataHtml(k){var m=[];var d=[];var h=k.rowCnt;var f=k.metaColumns;var p=GBRowHelper.getColCount(k,true);var n;if(h>0){if(readOnlyGrid==false){GBRowHelper.calcMaxLengthForTextFields(f,gridData)}var c=((filteringByParent==true||GBGroupBy.getShouldHideGridRows())?"none":"");for(var g=0;g<h;g++){var l=(g+1==h);n="r"+g;var b=gridData[n];if(k.hasFlatViewChildren){var o;for(var e=0;e<GBFlatView.flatViewObjects.length;e++){o=GBFlatView.flatViewObjects[e];childData=GBRowHelper.getChildData(b,o);d=GBRowHelper.getParentRowDataHtml(b,c,k,f,n,g,l,p,childData)}}else{d=GBRowHelper.getParentRowDataHtml(b,c,k,f,n,g,l,p)}m=m.concat(d);d=[]}}else{var a=(filteringByParent?lang.getNoMatch(getParentGridInfo().gridName):lang.noRec);if(k.isPivotedGrid){GBPivoted.hideAndRemoveExtraMenuOptions();GBPivoted.hideExtraMenuOptions();m.push("<tr>")}else{m.push('<tr class="dr nd pnd">')}m.push('<td colspan="'+p+'" class="noDataCol">'+a+"</td></tr>")}return m.join("")}function selectRow(a){var b=a.parents("tr.dr");if(b.length>0&&b.hasClass("selected")==false){b.addClass("selected")}}function deselectRow(b){if(b.length>0){var a=jq("tr#"+b);if(a.length>0&&a.hasClass("selected")){a.removeClass("selected")}}}function getChildRowCount(b){var a=0;if(b){for(childRows in b){a++}}return a}function initRelatedChildObjects(){var a=getParentGridInfo(),b;for(var c in gridInfoMap){if(c!="p"){b=gridInfoMap[c];if(b.isCreatable==true){a.addCreateableChildInfo(b)}a.addChildInfo(b)}}}function renderRowDataHtmlForMassUpdates(a,n,g){var m=[],h,j,l,e=[],d,b=a.metaColumns,p,r="dr",f=[],t="",k="mu_"+a.gridId+"_0";if(n==true&&filteringByParent==true){r="none"}if(g=="massUpdate"){if(a.hasAnyUpdateableFields==true){for(var q=0,o=b.length;q<o;q++){h=b[q];l="";e=[];if(h.renderForMassUpdates()){if(h.gridInfoGridId!=a.gridId){e.push("dvc")}if(!h.renderByDefault()){e.push("nc none")}if(e.length>0){l=' class="'+e.join(" ")+'"'}j=' name="'+h.fieldId+'"';d=getCellProperties(h,null,null,a,true,false);if(!h.isDataCardField){m.push("<td"+j+l+">"+d.cellHtml+"</td>")}else{t=GBDataCard.getDataCardCellHtml(a,h,d.cellHtml,e).join("");f.push(t)}}}}else{if(n==true){r+=" nd pnd";m.push('<td class="noDataCol"><h3>'+a.gridName+"</h3><span>"+lang.noFieldsToUpdate+"</span></td>")}}}else{if(g=="massCreate"){if(a.hasAnyCreateableFields==true){for(var q=0,o=b.length;q<o;q++){h=b[q];l="";e=[];if(h.gridInfoGridId!=a.gridId){e.push("dvc")}if(e.length>0){l=' class="'+e.join(" ")+'"'}if(h.renderForMassCreates(a)){j=' name="'+h.fieldId+'"';d=getCellProperties(h,null,null,a,false,true);if(!h.isDataCardField){m.push("<td"+j+l+">"+d.cellHtml+"</td>")}else{t=GBDataCard.getDataCardCellHtml(a,h,d.cellHtml,e).join("");f.push(t)}}}}else{if(n==true){r+=" nd pnd";m.push('<td class="noDataCol"><h3>'+a.gridName+"</h3><span>- No creatable fields available.</span></td>");jq("#massCreateParents").addClass("none")}}}}m.push("</tr>");p='<tr id="'+k+'" class="'+r+'" name="r0">';if(f.length>0){var s;p+='<td class="firstCol">'+GBDataCard.getDataCardIcon(a)+"</td>";s=GBDataCard.getDataCardRowHtml(a,k,"r0",r.split(),f,false);m.push(s)}m.unshift(p);return{htmlStr:m.join(""),existDataCardFields:f.length>0}}function getCellClassForContent(e,a,c,d){var b=[];if(e.rightAlignValue==true&&c){b.push("n");if(e.isTypePercent()&&a!=null){b.push("np")}}if(c&&(e.htmlFormatted==false||e.isTypeTextArea())){if(a!=null&&a.length>50){if(htmlUnescape(a).length>50){if(e.htmlFormatted){b.push("wn-nmw")}else{b.push("wn")}}}}else{if(c==false){if(e.isTypePicklist()){b.push("pl")}else{if(e.isTypeTextArea()&&e.getFieldMaxLength()>255){b.push("lt")}}}}if(d&&e.gridInfoGridId!=d.gridId){b.push("dvc")}return b.join(" ")}function htmlEscape(b){if(b&&typeof(b)==typeof("anystring")){var a=b.replace(/&/g,"&amp;");a=a.replace(/'/g,"&#39;");a=a.replace(/"/g,"&#34;");a=a.replace(/</g,"&lt;");a=a.replace(/>/g,"&gt;");return a}return b}function htmlUnescape(b){if(b){var a=b.replace(/&#39;/g,"'");a=a.replace(/&#34;/g,'"');a=a.replace(/&lt;/g,"<");a=a.replace(/&gt;/g,">");a=a.replace(/&amp;/g,"&");return a}return b}function getDefaultValueForField(h,f){var l="";if(h.isReadOnly()==true){return l}var j=jq('table[name="new_'+f.gridId+'"]');if(j.length>0){var k=j.find('td[name="'+h.fieldId+'"]');if(h.isTypeReference()){if(h.isWhoOrWhatIdField()==false){if(h.isRecordTypeField()){var c=k.find("select option:selected");if(c.length>0){l=c.text()}var a=[];k.find("select option").each(function(){var r=jq(this).val(),q="";for(longRecordTypeId in objectRecordTypeIdToNames){if(longRecordTypeId.startsWith(r)){q=longRecordTypeId;break}}a.push({id:q,value:jq(this).text()})});cacheLookupIds(a,f.gridApiName,h.referenceToObjects,"")}else{if(h.isOwnerField()){l=ownerValue;var n=[{id:ownerId,value:l}];cacheLookupIds(n,f.gridApiName,h.referenceToObjects,"")}else{var e=k.find('input[type="text"]');if(e.length>0){l=e.val()}}}}}else{if(h.isTypePicklist()){var m=k.find("select"),o=m.find("option"),b=m.find("option:selected");if(m.length>0&&o.length>1&&b.length>0){var g=[];for(var d=0;d<b.length;d++){g.push(b[d].value)}l=g.join(";")}}else{if(h.showTextInput()){var e=k.find('input[type="text"]');if(e.length>0){l=e.val()}}else{if(h.isTypeBoolean()){var p=k.find('input[type="checkbox"]');l=p.is(":checked")+""}}}}}return l}function getCellProperties(d,q,y,j,B,L,J,W,l){var f=q==null?"":q,G=f,V=(y==null||y==undefined)&&B==false,b=false;if(d.gridInfoGridId!=j.gridId){j=gridInfoMap[d.gridInfoGridId]}if(d.isReadOnly()){b=true}else{if(V==false&&d.updateable==false){b=true}else{if(V==true){if(d.createable==false){b=true}else{if(d.isSpecialDefaultedField(j)){b=true}}}}}if(b){if(d.isNameField(j.gridApiName)){if(J){G=(j.isLinkableObject?'<span class="gbName" title="'+f+'">':"")+f+(j.isLinkableObject?"</span>":"")}else{G=(j.isLinkableObject?'<span class="gbName">':"")+f+(j.isLinkableObject?"</span>":"")}}else{if(d.isTypeBoolean()){G=GBRowHelper.getReadOnlyBooleanValueMarkup(f)}else{if(d.isTypeURL()){if(J){G='<span class="gbUrl" title="'+f+'">'+f+"</span>"}else{G='<span class="gbUrl">'+f+"</span>"}}else{if(d.isTypeID()){if(J){G=(j.isLinkableObject?'<span class="gbId" title="'+f+'">':"")+f+(j.isLinkableObject?"</span>":"")}else{G=(j.isLinkableObject?'<span class="gbId">':"")+f+(j.isLinkableObject?"</span>":"")}}else{if(d.isTypeReference()){var T=d.fieldId+"Id",D=(y?y[T]:null);if(D!=null){var N=I("gbRf",d);if(J){G='<span class="'+N+'" name="'+D+'" title="'+f+'">'+f+"</span>"}else{G='<span class="'+N+'" name="'+D+'">'+f+"</span>"}}}else{if(d.isTypeSinglePicklist()){var S=getReadOnlySinglePicklistHtml(d,f);G='<span title="'+S+'">'+S+"</span>"}else{if(d.isTypeMultiPicklist()){G=getReadOnlyMultiPicklistHtml(d,getSelectedPicklistValuesAsList(f),true)}else{if(d.isTypeTextArea()){G=GBRowHelper.getReadOnlyLongTextCellValue(d,f)}else{if(d.htmlFormatted==true){G=htmlUnescape(f)}else{if(d.isTypeCurrency()&&f.length>0){var m=(y.isoCode||""),r=(multiCurrency?(m.length>0?(m+" "):""):GBRowHelper.getCurrencySymbol(m));G='<span title="'+r+f+'">'+r+f+"</span>"}else{G='<span title=" '+f+'">'+f+"</span>"}}}}}}}}}}}else{var E=(V==true);var t=(E?getDefaultValueForField(d,j):"");if(d.showTextInput()){var C="",a="",R=d.getFieldMaxLength(),v=d.getFieldSize(),K="txt";if(R!=null){C=' maxLength="'+R+'"'}if(d.resizeTextInputField()){if(d.hasColWidth()){}else{if(v!=null&&v<20){a=' size="'+v+'"'}else{a=' size="'+(d.maxTextValueLength>50?50:d.maxTextValueLength)+'"'}}}else{if(d.isTypeDate()||d.isTypeDateTime()){K="gbd";a=' size="10"'}else{if(d.isTypeReference()){if(d.hasColWidth()){}else{a=' size="20"'}K="rf";if(d.fieldName==="RecordTypeId"){K+=" rtf"}}else{if(d.isTypeTime()){K="time";a=' size="8"'}else{a=' size="'+(v!=null&&v<20?v:20)+'"'}}}}if(V&&d.valRequired==true&&t.length==0&&(d.defaultedOnCreate==false||(j.gridApiName=="Opportunity"&&d.fieldName=="Pricebook2Id"&&d.defaultedOnCreate==true))){K+=" gbrq"}if(d.rightAlignValue){K+=" n"}if(K.length>0){K='class="'+K+'"'}G='<input type="text" value="'+(E?t:f)+'" '+C+" "+a+" "+K+">";if(d.isTypeDate()){if(B){G="<nobr>"+G+'<span class="fx-icon-container formulaDate"><span class="fx-icon" title="'+lang.fxIconTooltip+'">fx<span class="ui-icon ui-icon-triangle-1-s">&nbsp;</span></span></span></nobr>'}else{G="<nobr>"+G+'<span class="gbdt icon-calendar"></span></nobr>'}}else{if(d.isTypeDateTime()){var g=f.substring(0,f.indexOf(" ")),F=f.substring(f.indexOf(" ")+1),c=t.substring(0,t.indexOf(" ")),w=t.substring(t.indexOf(" ")+1);if(B){G='<input type="text" value="'+(E?c:g)+'" '+C+" "+a+" "+K+'><input type="text" value="'+(E?w:F)+'" '+C+' size="8" class="gbt">';G="<nobr>"+G+'<span class="fx-icon-container formulaDateTime"><span class="fx-icon" title="'+lang.fxIconTooltip+'">fx<span class="ui-icon ui-icon-triangle-1-s">&nbsp;</span></span></span></nobr>'}else{G='<input type="text" value="'+(E?c:g)+'" '+C+" "+a+" "+K+'><input type="text" value="'+(E?w:F)+'" '+C+' size="8" class="gbt">';G="<nobr>"+G+'<span class="gbdtt icon-calendar"></span></nobr>'}}else{if(d.isTypeTime()){G='<input type="text" value="'+(E?t:f)+'" '+C+" "+a+" "+K+">";G="<nobr>"+G+"</nobr>"}else{if(B&&(d.isTypeDouble()||d.isTypeInteger()||d.isTypePercent())){G="<nobr>"+G+'<span class="fx-icon-container formulaNum"><span class="fx-icon" title="'+lang.fxIconTooltip+'">fx<span class="ui-icon ui-icon-triangle-1-s">&nbsp;</span></span></span></nobr>'}else{if(d.isTypeCurrency()){var r;if(B||L||V){r=(multiCurrency?"":GBRowHelper.getCurrencySymbol(m))}else{var m=(y.isoCode||"");r=(multiCurrency?(m.length>0?(m+" "):""):GBRowHelper.getCurrencySymbol(m))}if(r.length>0){r="<span>"+r+"</span>"}if(B){G="<nobr>"+r+G+'<span class="fx-icon-container formulaNum"><span class="fx-icon" title="'+lang.fxIconTooltip+'">fx<span class="ui-icon ui-icon-triangle-1-s">&nbsp;</span></span></span></nobr>'}else{G="<nobr>"+r+G+"</nobr>"}}else{if(d.isTypeReference()){var h="";var x=false;if(d.isWhoOrWhatIdField()){var X=d.getWhoOrWhatIdLookupObjects(),p=(y==null?"":y[d.fieldId+"Type"]),P=false,A=(d.isWhoIdField()?"whoId":"whatId"),h='<select class="wId '+A+'">';for(var Q=0;Q<X.length;Q++){P=X[Q].value==p;h+='<option value="'+X[Q].value+'" '+(P?"selected=true":"")+">"+X[Q].text+"</option>"}h+="</select>";x=true}var T=d.fieldId+"Id",D=(y?y[T]:null),H="";if(D!=null){var N=I("gbRfl icon-circle-arrow-right",d);H='<span id="gbRfl" class="'+N+'" name="'+D+'"></span>';x=true}var z='<span class="rfIcon"></span>';G='<div class="ui-widget">'+(x?"<nobr>":"")+h+G+z+H+(x?"</nobr>":"")+"</div>"}}}}}}}else{if(d.isTypeBoolean()){var o;if(E){o=t=="true"}else{o=f.toLowerCase()=="true"}G='<input type="checkbox" '+(o?"checked":"")+">"}else{if(d.isTypePicklist()){if(B==true||L==true){G=getEditablePicklistHtml(d,j,y,false,"",false,"",false,false)}else{if(W==true){var k=y[d.fieldId]||"";G=getEditablePicklistHtml(d,j,y,false,k,false,"",true,false)}else{var e;if(d.isTypeMultiPicklist()){e=E?getSelectedPicklistValuesAsList(t):getSelectedPicklistValuesAsList(f)}else{e=E?new Array(t):new Array(f)}var S=d.isTypeSinglePicklist()?getReadOnlySinglePicklistHtml(d,e[0]):getReadOnlyMultiPicklistHtml(d,e,false);G='<div class="plTxt" tabindex="0" title="'+S+'">'+S+"</div>"}}}else{if(d.isTypeTextArea()){if(B==true||L==true){G='<textarea wrap="soft"></textarea>'}else{var n="";var s=d.getFieldMaxLength();var M=false;var u=f.replace(/<br>/g,"\n");if(l){var U;if(d.isDataCardField){U=l.next(".dataCard")}else{U=l}if(U.find('[name="'+d.fieldId+'"] textarea').hasClass("truncated")){M=true}}else{if(!V){M=(y["v"+d.colIndex+"Truncated"]=="true")}}if(s>255){n+="ltTa"}if(V&&d.valRequired==true){n+=" gbrq"}if(M){n+=" truncated"}var O=('class="'+n+'" maxlength="'+s+'" onclick="GBTextArea.setMaxLengthForLongTextDescFields(event, this)" onkeydown="GBTextArea.setMaxLengthForLongTextDescFields(event, this)" onkeyup="GBTextArea.setMaxLengthForLongTextDescFields(event, this)" onmousedown="GBTextArea.setMaxLengthForLongTextDescFields(event, this)"');if(M){G=("<textarea "+O+' readonly="true">'+u+'</textarea><span class="icon-pencil lt"></span>')}else{G=("<textarea  "+O+">"+u+"</textarea>")}}}}}}}if(G==""){G="&nbsp;"}return{cellHtml:G,readOnly:b};function I(Z,ab){var Y=Z;for(var aa=0;aa<ab.refToObjectsArr.length;aa++){if(jq.inArray(ab.refToObjectsArr[aa],notLinkableObjects)==-1){Y=Z;break}else{Y=""}}return Y}}function setupPicklistTriggerEvents(){jqFrozenAndUnfrozenTables.on("click","td.pl, div.cardItem.pl",function(a){setupPicklistBehavior(a,jq(this),false)}).on("change","td.pl select, div.cardItem.pl select",function(c,d){var b=jq(this),a=b.parents("#massUpdatesTable").length>0;registerValueChange(c,b,d,a,false,false)}).on("change","input.rtf",function(a){GBRowHelper.updateRecordTypePicklists(jq(this),false)}).on("focus","td.pl div.plTxt",function(a){setupPicklistBehavior(a,jq(this).parents("td:first"),true)})}function setupPicklistBehavior(h,k,c,g){var b=k.find("div.plTxt").html(),l=setupCellPicklist(k,false,null,false,false,g);if(l==null){return}var m=getMetaColByCellName(k.attr("name"),getGridInfo(k)),d=m.isTypeMultiPicklist()?b.split(/<br>/i):[b];var f=setSelectedPicklistOptions(d,l);showCellPicklist(k,m,c);if(m.valRequired&&!f){var a=k.find("select"),j=a.find("option:first").val();if(j!=""){a.change()}}if(GBFreezeCols.isFreezeColsEnabled()&&!k.closest("tr.dr").hasClass("nr")&&(k.closest(".cardItem").length===0)){GBFreezeCols.triggerScrollOnGbMainTable()}GBFreezeHeaders.initiateFreezeHeaders(false,jq(mainTableJqueryId))}function setSelectedPicklistOptions(d,b){var a=0,e=jq(d).length,c=false;jq(d).each(function(f,h){var g=htmlUnescape(h);b.find("option").each(function(){var j=jq(this);if(j.text()==g){j.prop("selected",true);c=true;a++;if(a==e){return false}}})});return c}function setupCellPicklist(k,ac,z,H,c,Z,D,ai,x){var K=k.find("select");if(K.length>0){return null}if(ai==null){ai=getGridInfo(k)}if(x==null){x=getMetaColByCellName(k.attr("name"),ai)}var P=ai.isParentInfo,J=k.hasClass("dvc"),U=(k.closest("#dataPanel").length!==0),ak=k.is(":visible"),N=k.parents("#massUpdatesTable").length>0,G=P?"":k.parents("table.childTable:first").parents("tr.cr").attr("name"),al=false,r,g,aa;if(D==null){D=GBFreezeCols.isFreezeColsEnabled()}if(U){var aj=jq("#dataPanelContent"),p=aj.attr("data-recordid");r=aj;g=jq(mainTableJqueryId).find('td.dc[id="'+p+'"]').attr("data-rowname")}else{if(k.parents("tr.dr:first").is("tr.dr")){r=k.parents("tr.dr:first")}else{r=k.closest("td.dc")}if(J){g=r.attr("data-childRowName")}else{if(r.attr("name")){g=r.attr("name")}else{g=r.attr("data-rowname")}}al=r.hasClass("nr")}if(G==undefined){if(k.closest("#relatedColumnWidget").length>0){G=k.closest("#relatedColumnWidget").attr("data-parent-row-name")}else{G=k.closest("tr.dr").attr("name")}}if(N||al){aa=null}else{if(P){aa=gridData[g]}else{var V=GBRowHelper.getChildData(gridData[G],ai);if(GBUnrelated.isChildUnrelated(ai)){var O=GBRowHelper.getOrderedRowKeys(V),j=g.replace("r",""),q=O[j];aa=V[q]}else{aa=V[g]}}}var I;if(aa){if(U){I=aa[k.attr("name")]}else{I=aa["v"+x.colIndex]}}else{I=""}var f=I==null?"":I,C=dependentToControlling[x.fieldName],W=rtPicklistMap[ai.gridApiName+"."+x.fieldName]!==undefined,ah;if(ac){if(N){var L=k.data("lastVal")||"";f=htmlEscape(L)}else{var Q=r.attr("id"),o=al?newData[Q]:modData[Q];if(o){var T=o[k.attr("name")];if(T!=null&&T!=undefined){f=htmlEscape(o[k.attr("name")])}}}}k.addClass("none").find("div.plTxt").remove();if(C){var ab=getMetaColByFieldName(ai,C);if(ab){var u=ab.fieldId,A=ab.getCellContainer(),M,ag,Y;var F=A+'[name="'+u+'"]:not(.dvc):first';if(ai.isDenormalizedView){F=A+'.dvc[name="'+u+'"]:first'}M=GBRowHelper.getRelatedElement(k,x,ab,F);var af=M.find("select");var E="";if(M.find("div.plTxt").length>0){E=M.find("div.plTxt").html()}else{E=M.html()}if(E){E=E.replace(/'/g,"&#39;");E=E.replace(/"/g,"&#34;")}var v="";if(E){var d=ab.getPicklistLabelToValueMap()[E];if(d){v=d.v}}var ad=ai.gridId+u;var a=z?z[ad]:null;if(af.length>0||v||a){var y=dependentPickListInfo[C];var n=a?htmlEscape(a):v?v:htmlEscape(af.val());if(n){if(n.indexOf("&#34;")>-1){n=n.replace(/&#34;/g,'"')}if(n.indexOf("&amp;")>-1){n=n.replace(/&amp;/g,"&")}jq.each(y,function(an,ao){if(ao.parent==ai.gridApiName){var ap=ao.dependentFields;var am=ap[x.fieldName];ah=am[n];if(ah==null||ah==undefined){ah=[]}return false}})}else{ah=[]}}else{ah=[]}}}if(W){var e=defaultRecordTypeIds[ai.gridApiName];if(al||N){aa={};if(N){e=""}}var ae=getMetaColByFieldName(ai,"RecordTypeId"),S,R,h,m,b;if(ae){var w=ae.getCellContainer(),s=(J?(w+".dvc input.rtf"):(w+":not(.dvc) input.rtf"));S=GBRowHelper.getRelatedElement(k,x,ae,s);R=S.val();h=getLookupIdByValue(ai,ae,S,R);if(h==null&&S.attr("name")){h=S.attr("name")}}m=objectRecordTypeIdToNames[h];b=objectRecordTypeIdToNames[e];if(ae&&R===""){m=b}aa.rtdev=m||aa.rtdev||b}K=x.getPicklistTemplateHtml(ai,aa,f,al,ac,ah,H);var t=k.find("div.spanLink"),X=k.find(".icon-undo"),B=((x.isDataCardField&&!U)?k.find(".cardCell"):k);if(t.length>0||X.length>0){K.prependTo(B)}else{var l=document.createDocumentFragment();l.appendChild(jq(K)[0]);B[0].appendChild(l)}if(D){if(ak||x.isDataCardField){k.removeClass("none")}if(ak&&!c&&!Z){jq(window).trigger("gbFreeze")}}else{k.removeClass("none")}GBKeyNavigation.initNavigationEventHandler(K);return K}function showCellPicklist(g,f,c){var a=g.find("select");g.addClass("plOn");a.show();f.anyPicklistDisplayed=true;if(c){if(a.is(":disabled")){var e=g.next().find(":tabbable");if(e.length>0){e.focus()}else{a.closest("tr").next().find(":tabbable").eq(0).focus()}}else{a.focus()}}if(g.closest("#relatedColumnWidget").length>0){var b=jq("#relatedColumnWidget .body table"),d=jq("#relatedColumnWidget .frozenTableHeader table");GBRowHelper.setWidthsForRelatedWidgetFrozenHeader(b,d)}}function getReadOnlySinglePicklistHtml(b,a){if(b.getPicklistValueToLabelMap()[a]){return b.getPicklistValueToLabelMap()[a].l}return a}function getReadOnlyMultiPicklistHtml(h,e,g){var f=[],c=h.getPicklistValueToLabelMap(),d;for(var b=0,a=e.length;b<a;b++){d=e[b];if(c[d]){if(g){f.push('<span title="'+c[d].l+'">'+c[d].l+"</span>")}else{f.push(c[d].l)}}else{f.push(d)}}return f.join("<br/>")}function getEditablePicklistHtml(j,d,k,r,q,J,u,G,g,F,E){var n=j.isTypeSinglePicklist(),x=n==false,p=(F!=null&&F.length==0)?true:false,e=[];var t,B={};if(x){t=J?getSelectedPicklistValuesAsList(u):getSelectedPicklistValuesAsList(q)}else{t=J?new Array(u):new Array(q)}for(var A=0,C=t.length;A<C;A++){B[t[A]]=1}var m,w,l,z=0,b=false,o=j.getOrderedPicklistOptions(),I=d.gridApiName+"."+j.fieldName,y=rtPicklistMap[I],v=false;if(k&&y){var D=k.rtdev;if(D&&D.length>0){var a=y[D];if(a){if(!a.orderedOptions){a.orderedOptions=getOrderedSubListOptions(j,a)}o=a.orderedOptions;v=true}else{}}}if(!p&&F){var c;if(v){c=o}o=getOrderedSubListOptions(j,F,c);p=o.length==0}if(!p){for(var A=0,C=o.length;A<C;A++){m=o[A].v;w=o[A].l;l=B[m]==1;if(l){z++;b=true}e.push('<option value="'+m+'" '+(l&&G?"selected=true":"")+'title="'+w+'" >'+w+"</option>");delete B[m]}if(!E&&t.length>0&&z<t.length){for(selectedVal in B){if(selectedVal.length>0){e.push('<option value="'+selectedVal+'" selected=true>'+selectedVal+"</option>");b=true}}}}var s=false;if(p){s=true}else{if(n){if(j.valRequired==false){s=true}else{if(e.length>1&&!b){s=true}}}}if(s){e.splice(0,0,'<option value="">'+lang.none+"</option>")}var H=false;if(!p&&j.valRequired==true){if(!r){if(s&&!b){H=true}}}var f=(n?1:4),h=(p==true?'disabled="disabled"':"");multipleHtml=(x==true?'multiple="multiple"':"");selectClassHtml=(H?' class="gbrq"':""),selectListHtml='<select size="'+f+'" '+multipleHtml+" "+selectClassHtml+" "+h+">",endSelectTag="</select>";if(g){return jq(selectListHtml+endSelectTag).append(e.join(""))}return selectListHtml+e.join("")+endSelectTag}function getSelectedPicklistValuesAsList(e){var b=[];var d=htmlUnescape(e);b=d.split(";");for(var c=0,a=b.length;c<a;c++){b[c]=htmlEscape(b[c])}return b}function getPicklistDisplayText(c,e){var b=e.getPicklistValueToLabelMap(),d="",f=c.val();if(e.isTypeMultiPicklist()){var a=[];jq(f).each(function(g,h){a.push(b[htmlEscape(h)].l)});d=a.join("<br/>")}else{d=b[htmlEscape(f)].l}return d}function getOrderedSubListOptions(j,a,e){var m=[],k,p,d,l=j.getPicklistValueToLabelMap(),g=e?e.length:null;for(var f=0,h=a.length;f<h;f++){if(a[f].indexOf("&#39;")>-1){a[f]=a[f].replace(/&#39;/g,"'")}if(a[f].indexOf("&lt;")>-1){a[f]=a[f].replace(/&lt;/g,"<")}if(a[f].indexOf("&gt;")>-1){a[f]=a[f].replace(/&gt;/g,">")}p=htmlEscape(unescape(a[f]));if(l[p]){k=l[p].i;d=l[p].l}else{k=(1000+f);d=p}if(e){for(var c=0;c<g;c++){var o=e[c];if(o.v==p){m.push({v:p,l:d,i:k});break}}}else{m.push({v:p,l:d,i:k})}}if(m.length<1&&j.isTypeMultiPicklist()){m.push({v:"",l:lang.none,i:0})}return m.sort(function b(q,n){return q.i-n.i})}function isDivForPicklistField(a){return(a.get(0).tagName.toLowerCase()=="div"&&a.hasClass("plTxt"))}function updateDependentPickLists(e,a,c,b,d){jq.each(a,function(m,t){if(t.parent==b.gridApiName){var l=t.dependentFields,n,g,p,h,q=e.parents("#massUpdatesTable").length>0,k,o=GBFreezeCols.isFreezeColsEnabled();for(fieldName in l){n=getMetaColByFieldName(b,fieldName);if(n&&!n.readOnly&&!n.isHidden){g=n.fieldId;p=n.getCellContainer();k=p+'[name="'+g+'"]:not(.dvc):first';if(b.isDenormalizedView){k=p+'.dvc[name="'+g+'"]:first'}h=GBRowHelper.getRelatedElement(e,c,n,k);if(!d&&o){var s=e.closest("tr"),f=s.attr("id"),r,j;if(GBFreezeCols.isElementInFrozenTable(e)){j=jq(mainTableJqueryId)}else{j=jq(mainFrozenTableContainerJqueryId)}r=GBFreezeCols.getRowToUpdate(s,f,j);dependentCellFromOtherTable=r.find(k);if(dependentCellFromOtherTable.length>0){processDependentCell(dependentCellFromOtherTable,c,n,q,o,true)}}processDependentCell(h,c,n,q,o)}}return false}})}function processDependentCell(d,f,c,b,e,g){var h={changeType:"dependentPicklistChange"},a=d.find("select");if(g){h.isFrozenUpdate=true}if(a.length>0){a.remove()}setupCellPicklist(d,true,null,true,g);a=d.find("select");if(b){a.on("click change",function(j){showMassUpdateFieldAsEdited(j,this)})}else{showCellPicklist(d,f)}if(!e&&c.isDataCardField){GBDataCard.openDataCard(d)}if(!g){a.trigger("change",h)}}function getParentGridInfo(){return gridInfoMap.p}function getChildGridInfo(c){for(var b in gridInfoMap){var a=gridInfoMap[b];if(!a.isParentInfo&&a.fullyQualifiedObjectName==c){return a}}return null}function hideMessage(a){if(a){var b=a.parents("div.msgBox");if(b.attr("id")=="fastFilter"||b.attr("id")=="fastFilterPivotGrid"){GBFF.hideFastFilter(b.attr("id"));return}b.hide();if(jq("div.msgBox #rowId").length>0){deselectRow(jq("div.msgBox #rowId").val())}}else{hideInvalidFieldsMessage();hideInvalidOppProdFieldsMessage();hideDescriptionBox();GBMassUpdateHelper.hideMassUpdatesBox();toggleFilterBox(false);GBExportWidget.toggleExportBox(false);GBFF.hideFastFilter();GBActions.hideActionBox();GBUserDefinedCols.toggleReorderColsBox(false);jq("#relatedColumnWidget").hide();GBActions.deactivateRecordMenu();GBDataPanel.hideDataPanel("Escape Key")}if(readOnlyGrid==true){jq(".createNew").hide()}}function hideInvalidFieldsMessage(){if(jq("#invalidFieldsWarning").is(":visible")==true){jq("#invalidFieldsWarning").hide()}}function hideInvalidOppProdFieldsMessage(){if(jq("#invalidOppProdFieldsWarning").is(":visible")==true){jq("#invalidOppProdFieldsWarning").hide()}}function hideDescriptionBox(){if(descBox.is(":visible")==true){descBox.hide();deselectRow(descBoxRowId.val())}}function overlayIsVisible(){return jq("#gbOverlay").is(":visible")==true}function toggleFilterBox(a){if(a==true){jq("#gbOverlay").show();toggleButtonState(true);userFilterBox.center();userFilterBox.show()}else{userFilterBox.hide();jq("#gbOverlay").hide();toggleButtonState(false)}}function getEscapedJSONString(a){var b=JSON.stringify(a);b=unescape(b.replace(/\\u/g,"%u"));return b}function getModifiedData(b){if(modDataSize>0){try{if(b!==true){associateLookupIds(modData)}}catch(a){}var c=getEscapedJSONString(modData);c=c.substring(1,c.length-1);c=c.split('"},"').join('"},-"');return c}return""}function unbindField(b){try{b.removeAttr("name").removeAttr("id");if(b.attr("name").length>0){b.attr("name","")}if(b.attr("id").length>0){b.attr("id","")}}catch(a){}}function unbindFormFields(b){var a=jq(mainTableJqueryId+" textarea");if(b==true){a.each(function(){unbindField(jq(this))})}else{a.each(function(){var j=jq(this),c=j.parents("td").hasClass("dvc"),d=j.parents("tr"),h=d.hasClass("nr"),g=(c?d.attr("data-childId"):d.attr("id")),f=j.parents("td").attr("name"),e=(h?newData[g]:modData[g]);if(!e||e==null||e==undefined){unbindField(j)}})}jq("#newFieldInfo table.apexFields").remove()}function getNewData(b){if(newDataSize>0){try{if(b!==true){associateLookupIds(newData)}}catch(a){}var c=getEscapedJSONString(newData);c=c.substring(1,c.length-1);c=c.split('"},"').join('"},-"');return c}return""}function getLookupIdByValue(c,k,f,b){var j=f.attr("name"),g=c.gridApiName+"_"+k.referenceToObjects,e=lookupIds[g],a=null;if(e&&b in e){var d=e[b];if(d!=null&&d.length>0){if(j&&j.length>0){for(var h=0;h<d.length;h++){if(d[h]==j){a=j;break}}}if(!a){a=d[0]}}}return a}function associateLookupIds(a){for(var j in a){var m=a[j],o=m.nm,r=GBGridInfoHelper.getGridInfoByFullObjectName(o),w,f,d,l,s,g,c,u,q;for(var p in m){if(isFieldCell(p)){f=getMetaColByCellName(p,r);l=f.getCellContainer();if(r.isParentInfo||!r.isDenormalizedView){if(r.isPivotedGrid){d=jq('table[name="'+r.objId+'"] td.dc[id="'+j+'"]')}else{d=jq('table[name="'+r.objId+'"] tr#'+j)}s=l+'[name="'+p+'"]:not(.dvc)'}else{d=jq('table[name="p"] tr[data-childId="'+j+'"]');s=l+'.dvc[name="'+p+'"]'}g=(f.isDataCardField?d.next().find(s):d.find(s));w=r.gridApiName;if(f.isTypeReference()){var e=g.find("input.rf"),k=e.attr("name");c=m[p];u=w+"_"+f.referenceToObjects;q=lookupIds[u];if(q&&c.trim()!==""&&c in q){var t=q[c];if(t!=null&&t.length>0){var h=null;if(k&&k.length>0){for(var n=0;n<t.length;n++){if(t[n]==k){h=k;break}}}if(!h){h=t[0]}m[p+"v"]=m[p];m[p]=h}}else{var b;if(f.isWhoOrWhatIdField()){b=e.parents("div.ui-widget").find("select").val()}else{b=f.referenceToObjects}e.catcomplete({source:function(x,v){jq.ajax({url:lookupAjaxResponderPageURL+"?reqtype=lookup&lon="+b+"&lpn="+w+"&if=1&esr="+enforceSharingRules,dataType:"json",data:x,async:false,success:function(z){var y=z.results;if(!y.length){}else{if(e.val().length>0){cacheLookupIds(y,w,f.referenceToObjects,e.val())}}}})}});e.catcomplete("search");q=lookupIds[u];if(q&&c.trim()!==""&&c in q){var t=q[c];if(t!=null&&t.length>0){var h=null;if(k&&k.length>0){for(var n=0;n<t.length;n++){if(t[n]==k){h=k}}}if(!h){h=t[0]}m[p+"v"]=m[p];m[p]=h}}}}}}}}function showGridTable(a){var b=(jq(a).get(0).tagName.toLowerCase()=="table"?a:jq(a).parents("table"));if(b.hasClass("childTable")){var c=b.parents(".branch").find("h3.toggleData");if(c.hasClass("collapsed")){c.get(0).click()}}}function processNextRequiredField(){var e=jq(mainTableJqueryId+", #dataPanel").find(".gbrq");if(e.length>0){e.each(function(){showGridTable(this)});var g=e.first(),j=(g.closest(".dataCard").length>0?".cardItem":"td"),r=g.closest(j).hasClass("dvc"),t=g.parents("tr.dr:first"),h=(r?t.attr("data-childId"):t.attr("id"));if(t.hasClass("nr")){if(newData[h]==null||newData[h]==undefined){g=null;for(var n=1;n<e.length;n++){g=jq(e[n]);j=(g.closest(".dataCard").length>0?".cardItem":"td");r=g.closest(j).hasClass("dvc");t=g.parents("tr.dr:first");h=(r?t.attr("data-childId"):t.attr("id"));if(t.hasClass("nr")){if(newData[h]!=null){break}}else{break}g=null}}}if(g==null){return false}var k=g.position(),m=jq(".gridBtns.top"),b=m.height(),l=false,s=GBHelpers.getInfoMsgHeight(),d=GBHelpers.getPageWarningsHeight(),f=jq("#invalidFieldsWarning"),a=jq(window).scrollTop();if(k.top==0&&k.left==0){k=g.parent().position()}var o=(k.top*1+23),p=(k.left*1+10),c=(((a+25)<k.top)&&(o<(jq(window).height()+(a-200)))),q=((k.top-5)>(GBHelpers.getSalesforceHeaderHeight()+s+d));hideInvalidOppProdFieldsMessage();if(m.hasClass("fixed")){l=true}if(l){if(!q){o+=b}}else{if(q){o-=b}}f.css("top",o).css("left",p).show();g.focus();if(!c){if(l){jq(window).scrollTop(o-b)}else{jq(window).scrollTop(o)}}return true}return false}function getRowId(d){var b=jq(d),c=(b.closest(".dvc").length>0),a=(b.closest("#massUpdatesTable").length>0),e;if(b.closest(".dc").length>0){e=b.closest(".dc").attr("id")}else{if(b.closest("#dataPanelContent").length>0){e=b.closest("#dataPanelContent").attr("data-recordid")}else{if(c&&!a){e=b.closest("tr").data("childid")}else{e=b.parents("tr").attr("id")}}}return e}function validateField(b,c,a){var d=getMetaCol(b,c);if(d.valRequired==true){if(isDivForPicklistField(b)==false){if(GBRowHelper.markFieldAsRequired(b,a,d)){b.addClass("gbrq")}else{if(d.isTypeDateTime()){b.parent().find("input.gbd").removeClass("gbrq")}b.removeClass("gbrq");hideInvalidFieldsMessage()}}}}function validateRemainingRequiredRowFields(f,e,j,h,g){if(e.requiredColumns.length==0){return}var a,l=getMetaCol(f,e),d="";if(e.hasDataCardFields){a=f.parents("tr.dr:first");if(l.isDataCardField){a=a.add(f.parents("tr.dr:first").prev(".dr"))}else{a=a.add(f.parents("tr.dr:first").next(".dataCard"))}}else{a=f.parents("tr.dr:first")}if(!h){GBRowHelper.displayRowPicklistWidgets(a,j,e)}if(e.isDenormalizedView){d="td.dvc, .cardItem.dvc"}else{var k=e.requiredColumns;var b=k.length;for(var c=0;c<b;c++){d+='td[name="v'+k[c]+'"]:not(.dvc, .dataCardCell),';if(e.hasDataCardFields){d+='div[name="v'+k[c]+'"]:not(.dvc),'}}d=d.substring(0,d.length-1)}a.find(d).find("input:not(.dl, .selectAllChk),select:not(.wId),textarea").each(function(){var m=jq(this),n=getMetaCol(m,e);if(l.fieldName!=n.fieldName&&n.valRequired==true){if(GBRowHelper.markFieldAsRequired(m,j,n)){m.addClass("gbrq");if(n.isDataCardField){GBDataCard.openDataCard(m)}}}})}function isFieldCell(a){return a.indexOf("v")==0&&!a.endsWith("v")}function getMetaCol(b,c){var e=b.parents("td").attr("name");if(b.closest(".dataCard").length>0){e=b.closest(".cardItem").attr("name")}if(b.closest(".pgc").length>0){e=b.closest(".pgc").attr("name")}if(GBPivoted.renderPivotedGrid()){var a=b.closest("td").hasClass("fieldCol")?"pgl":"pgc";e=b.parents("div."+a).attr("name")}var d=getMetaColByCellName(e,c);return d}function getMetaColByCellName(a,b){var d=a.substring(1);var c=getMetaColByColIdx(b,d);return c}function getMetaColByColIdx(c,d){var e;for(var b=0,a=c.metaColumns.length;b<a;b++){e=c.metaColumns[b];if(e.gridInfoGridId!=c.gridId){continue}if(e.colIndex==d){return e}}return null}function getMetaColByFieldName(c,e){var d;var a=c.metaColumns.length;for(var b=0;b<a;b++){d=c.metaColumns[b];if(d.fieldName==e){return d}}return null}function getGridInfo(f,h){var j,a=(f.closest(".dataCard").length>0),c=(f.closest("#dataPanel").length>0),b=(a?f.closest(".cardItem"):f.closest("td")),d=b.hasClass("flatViewHeader"),e=b.hasClass("dvc");if(c){return getParentGridInfo()}if(e){j=b.parents("table.mainTable").attr("data-childGridId")}else{if(h&&d){return gridInfoMap[b.attr("name").charAt(1)]}else{if(GBFreezeHeaders.isFreezeHeadersEnabled()&&h){var g=f.closest(".childHeaderRow.fixedHeaderClone");if(g.length>0){j=g.attr("name")}else{j=f.parents("table").attr("name")}}else{j=f.parents("table").attr("name")}}}return getGridInfoByName(j)}function getGridInfoByName(b){if(b.indexOf("c")>-1){b=b.substring(1,2)}var a=gridInfoMap[b];return a}function getGridInfoByApiName(a){for(var c in gridInfoMap){var b=gridInfoMap[c];if(b.gridApiName==a){return b}}return null}function scrubFieldValue(d,e,c){var f=getMetaCol(d,e);var b=d.val();if(isDivForPicklistField(d)){b=d.html();if(b.length>0){b=b.replace(/'/g,"&#39;");b=b.replace(/"/g,"&#34;");var g=f.isTypeMultiPicklist()?b.split(/<br>/i):[b],a=[];jq(g).each(function(h,j){a.push(htmlUnescape(f.getPicklistLabelToValueMap()[j].v))});b=a.join(";")}}else{if(f.isTypeMultiPicklist()){if(b!=null){b=b.join(";")}}else{if(f.isTypeDateTime()){b=d.parent().find("input.gbd").val()+" "+d.parent().find("input.gbt").val();b=b.trim()}}}return b}function updateModifiedDataMap(h,c,q){if(q&&h.is("textarea")&&h.hasClass("truncated")){return}var j=h.closest(".dc").length>0,t=h.closest("#dataPanelContent").length>0,u=h.closest(".dataCard").length>0,p,d,o;if(j){p=h.closest(".dc")}else{if(t){p=h.closest("#dataPanelContent")}else{p=h.parents("tr")}}d=(u?h.parents(".cardItem").hasClass("dvc"):h.parents("td").hasClass("dvc"));if(d){o=p.attr("data-childId")}else{if(t){o=p.attr("data-recordId")}else{o=p.attr("id")}}var m=p.hasClass("nr"),e=(m?newData:modData),n=e[o],l=getMetaCol(h,c),v=l.fieldId,s;if(n==null||(Object.keys(n).length==1&&n.cl)){e[o]=e[o]?e[o]:new Object();n=e[o];n.nm=c.fullyQualifiedObjectName;if(m){newDataSize++;if(c.objId!="p"){var f=p.parents("tr.cr"),k=f.prev(),g;if(f.length==1){var r=0;while(k.hasClass("cr")){k=k.prev();r++;if(r>4){break}}if(k.hasClass("dr")){g=k.attr("id");if(GBUnrelated.isChildUnrelated(c)){g=GBUnrelated.getParentIdentifierForChildData(c,g,k)}n.pId=g}}else{if(d){g=p.attr("id");if(GBUnrelated.isChildUnrelated(c)){g=GBUnrelated.getParentIdentifierForChildData(c,g,p)}}else{g=p.closest("#relatedColumnWidget").attr("data-parent-id")}n.pId=g}}}else{modDataSize++}}if(c.objId=="p"&&GBUnrelated.fieldIsCrossRefForeignKey(l.fieldName)){GBUnrelated.updateUnrelatedChildData(p,l.fieldName)}if(h.is(":checkbox")){s=(h.is(":checked")==true)+""}else{s=scrubFieldValue(h,c,m);if(l.isWhoIdField()){var b=h.parents("div.ui-widget").find("select.wId").val();n.whoId=b}else{if(l.isWhoOrWhatIdField()){var a=h.parents("div.ui-widget").find("select.wId").val();n.whatId=a}}}if(s==null){s=""}if(m==true&&s==""&&l.defaultedOnCreate==true&&!n.cl){delete n[v]}else{n[v]=s}}var GBSortHelper=(function(b,a,d){function c(f,e){if(f.gridId=="p"){d(sortParentHidden).val(e)}else{if(f.gridId==1){d(sortChild1Hidden).val(e)}else{if(f.gridId==2){d(sortChild2Hidden).val(e)}else{if(f.gridId==3){d(sortChild3Hidden).val(e)}else{if(f.gridId==4){d(sortChild4Hidden).val(e)}}}}}getFirstSubmitButton("refreshBtn").click()}return{doSort:c}})(window,document,jq);var GBQuickFilter=(function(N,c,d){var E={},t,G,R,Z,l=0,h={},ab={},m={},B={},L={},g;ab.CURRENCY=["browse:0","search:equals"];ab.DOUBLE=["browse:0","search:equals"];ab.INTEGER=["browse:0","search:equals"];ab.PERCENT=["browse:0","search:equals"];ab.STRING=["browse:0","search:contains"];ab.COMBOBOX=["browse:0","search:contains"];ab.EMAIL=["browse:0","search:contains"];ab.URL=["browse:0","search:contains"];ab.PHONE=["browse:0","search:contains"];ab.ID=["browse:0","search:equals,includes"];ab.REFERENCE=["browse:0","search:contains"];ab.DATE=["browse:equals","search:equals"];ab.DATETIME=["browse:equals","search:equals"];ab.PICKLIST=["browse:includes","search:contains"];ab.MULTIPICKLIST=["browse:includes","search:equals"];ab.BOOLEAN=["browse:equals","search:0"];ab.RECORDTYPE=["browse:includes","search:contains"];ab.TIME=["browse:0","search:equals"];m.Today="TODAY";m.Yesterday="YESTERDAY";m.Tomorrow="TOMORROW";m["This Week"]="THIS_WEEK";m["This Month"]="THIS_MONTH";m["Next Month"]="NEXT_MONTH";m["Last Month"]="LAST_MONTH";m["This Fiscal Quarter"]="THIS_FISCAL_QUARTER";m["This Calendar Quarter"]="THIS_QUARTER";m["Next Fiscal Quarter"]="NEXT_FISCAL_QUARTER";m["Next Calendar Quarter"]="NEXT_QUARTER";m["Last Fiscal Quarter"]="LAST_FISCAL_QUARTER";m["Last Calendar Quarter"]="LAST_QUARTER";m["This Fiscal Year"]="THIS_FISCAL_YEAR";m["This Calendar Year"]="THIS_YEAR";L.TODAY="Today";L.YESTERDAY="Yesterday";L.TOMORROW="Tomorrow";L.THIS_WEEK="This Week";L.THIS_MONTH="This Month";L.NEXT_MONTH="Next Month";L.LAST_MONTH="Last Month";L.THIS_FISCAL_QUARTER="This Fiscal Quarter";L.THIS_QUARTER="This Calendar Quarter";L.NEXT_FISCAL_QUARTER="Next Fiscal Quarter";L.NEXT_QUARTER="Next Calendar Quarter";L.LAST_FISCAL_QUARTER="Last Fiscal Quarter";L.LAST_QUARTER="Last Calendar Quarter";L.THIS_FISCAL_YEAR="This Fiscal Year";L.THIS_YEAR="This Calendar Year";B.True="true";B.False="false";function H(){var ak,an,ac=[],ag=[],ap=getParentGridInfo(),ad=quickFiltersString.split(","),ai,am=false;E[ap.objectNameWithoutFk]=ap;var ao=ap.getQuickFilters();for(var ah=0;ah<ao.length;ah++){var af=ao[ah],ae=af.split(";:;"),aj,al,ar;if(ae.length==5){var aq=ae.pop();ae.splice(1,1,aq)}if(ae[0].indexOf("-")!=-1){objName=ae[0].split("-")[0];junctionParts=["unrelated"];junctionParts=junctionParts.concat(ae[0].split("-").slice(1,3));al=junctionParts.join("-");ar=ae[2]}else{if(ae.length==4){objName=ae[0];al=ae[1];ar=ae[2]}else{objName=ae[0];al="";ar=ae[1]}}if(ad.indexOf(objName+ar+al)!==-1){ac.push(af)}}for(var ah=1;ah<gridInfoMapLen;ah++){an=ah+"";ak=gridInfoMap[an];E[ak.fullyQualifiedObjectName]=ak;if(ak.isDenormalizedView==true){continue}if(am==false&&(ai==ak.objectNameWithoutFk||ak.objectNameWithoutFk==ap.objectNameWithoutFk)){am=true}ai=ak.objectNameWithoutFk;ag=ag.concat(ak.getQuickFilters())}if(am==true){for(var ah=0;ah<ag.length;ah++){var af=ag[ah],ae=af.split(";:;"),aj,al;if(ae.length==5){var aq=ae.pop();ae.splice(1,1,aq)}if(ae[0].indexOf("-")!=-1){objName=ae[0].split("-")[0];junctionParts=["unrelated"];junctionParts=junctionParts.concat(ae[0].split("-").slice(1,3));al=junctionParts.join("-")}else{objName=ae[0];al=ae[1]}if(ad.indexOf(objName+ae[2]+al)!==-1){ac.push(af)}}}else{ac=ac.concat(ag)}return ac}function T(){var ad=H(),aj="";for(var ag=0;ag<ad.length;ag++){var af=ad[ag].split(";:;"),ah,ak,ac,ai="",ae;if(af.length>=4){ah=af[0]+":"+af[1];ak=af[2];ac=af[3];if(af.length==5){ai=' chilrelationship="unrelated"'}}else{ah=af[0];ak=af[1];ac=af[2]}metaCol=getMetaColByFieldName(E[ah],ak),dataType=metaCol.colDataType;ae=K(ah);if(dataType=="REFERENCE"&&metaCol.referenceToObjects=="RecordType"){dataType="RECORDTYPE"}aj+='<span class="quickFiltersContainer" name="'+ah+'" id="'+ak+'"><button type="button" class="gbBtn quickFiltersBtn none" name="'+ah+'" id="'+ak+"-"+dataType+'"'+ai+' ><span class="icon-filter"></span>'+ac+'<span class="ui-icon ui-icon-triangle-1-s">&nbsp;</span></button><button type="button" class="gbBtnDisabled quickFiltersBtn" name="'+ah+'" id="'+ak+"-"+dataType+'"'+ai+'><span class="icon-filter"></span>'+ac+'<span class="ui-icon ui-icon-triangle-1-s">&nbsp;</span></button></span>'}d(".gbBtnGroup:eq(2)").after(aj)}function V(ac){d("body").click(function(ae){var ad=d(ae.target);if(ad.hasClass("quickFiltersContainer")||ad.closest(".quickFiltersContainer").length>0||ad.hasClass("ui-autocomplete")||ad.closest(".ui-autocomplete").length>0){return}k()});d(".quickFiltersContainer").each(function(af){var ae=d(this).find("button.quickFiltersBtn.gbBtn"),ag=d(this).find("button.quickFiltersBtn.gbBtnDisabled"),ad=ae.attr("id").split("-");onLoadFilterInfo=n(ae.attr("name"),ad[0],ad[1].toUpperCase());onLoadFilterState=S(onLoadFilterInfo.objState,onLoadFilterInfo.filterField);if(onLoadFilterState!=null){ae.addClass("qfHasFilterState")}ae.removeClass("none");ag.addClass("none")});d("button.quickFiltersBtn.gbBtn").click(function(ah){var al=d(this);if(al.hasClass("btn-active")){k();return}d("button.quickFiltersBtn.gbBtn").removeClass("btn-active");k();al.addClass("btn-active");var ak,ae=al.attr("name"),aj=al.attr("id");fieldParts=aj.split("-"),fieldName=fieldParts[0],dataType=fieldParts[1].toUpperCase(),filterDefaults=ab[dataType],browseParts=filterDefaults[0].split(":"),searchParts=filterDefaults[1].split(":"),filterInfo=n(ae,fieldName,dataType),filterState=S(filterInfo.objState,filterInfo.filterField),showBrowseOnly=D(searchParts),showSearchOnly=r(browseParts),browseOptions=h[ae+":"+fieldName],makingAjaxCall=false,lockedFilters=ac[ae];if(lockedFilters!=null&&(lockedFilters.indexOf(fieldName)!==-1)){R=al.parent().find("div.qfLockedFilter");if(R.length>0){R.removeClass("none")}else{al.after('<div class="qfLockedFilter">'+lang.lockedFilterTxt+"</div>");R=al.parent().find("div.qfLockedFilter");R.position({my:"left top-1",at:"left bottom",of:al,collision:"fit"})}}else{var ad=al.parent().find("div.qfBrowseFilter"),ai=K(ae),af;if(Q(dataType)){af='<span class="lookupArrow fvPl" title="Click to see all values, or type in the value field and matching values will appear." data-fielddata="'+ai+":"+fieldName+":"+dataType+'"></span>'}else{af=""}if(ad.length<1){var ag='<div class="qfBrowseFilter none" name="'+ae+'" id="'+fieldName+"-"+dataType+'"></div><div class="qfSearchFilter none" name="'+ae+'" id="'+fieldName+"-"+dataType+'"><div class="qfToggleBtnContainer none"><button class="qfActionBtn qfBrowseBtn gbBtn ldsWhiteBtn" type="button">Browse</button><button class="qfActionBtn qfSearchBtn gbBtn ldsWhiteBtn" type="button">Search</button></div><div class="qfSearchOperator"></div><input class="qfSearchTxt" type="text" size="15"/>'+af+'<div class="qfPopupFooter cf"><a href="#" class="qfSearchMore">More Options</a><a href="#" class="qfSearchHide none">Hide Options</a><div class="rightAlignBtns"><button class="qfActionBtn qfSearchApplyBtn gbBtn ldsWhiteBtn" type="button">Apply</button><button class="qfActionBtn qfSearchClearBtn gbBtn ldsWhiteBtn" type="button">Clear</button></div></div></div>';al.after(ag)}if(filterState!=null){ak=y(filterState.v)}GBFF.modifiedState=d.extend(true,{},GBFF.originalState);if(dataType=="BOOLEAN"){browseOptions=["True","False"];h[ae+":"+fieldName]=browseOptions}else{if(j(dataType)){browseOptions=["Today","Yesterday","Tomorrow","This Week","This Month","Next Month","Last Month","This Fiscal Quarter","This Calendar Quarter","Next Fiscal Quarter","Next Calendar Quarter","Last Fiscal Quarter","Last Calendar Quarter","This Fiscal Year","This Calendar Year"];h[ae+":"+fieldName]=browseOptions}}if(browseOptions==null){o(ae,fieldName,dataType,al,ak,filterInfo);browseOptions=h[ae+":"+fieldName]}if(!showSearchOnly){F(ae,fieldName,dataType,al,ak,aj,filterInfo,W(dataType),J(dataType))}if(!showBrowseOnly){e(al,aj,dataType,filterInfo,J(dataType))}b(al,filterState,browseParts[1],fieldName,dataType,browseOptions)}GBMixpanel.track("Filter Grid",{Source:"Quick Filter",Action:"View"})})}function k(){z();x();I()}function o(ag,af,ac){var ae=E[ag];metaCol=getMetaColByFieldName(ae,af),picklistBucket=metaCol.picklistBucket,cleanObjName=K(ag),filterValues=[];if(ac=="RECORDTYPE"){filterValues=objectRecordTypeLabels[cleanObjName];h[ag+":"+af]=filterValues}else{for(var ad in picklistBucket.labelToValueMap){filterValues.push(ad)}h[ag+":"+af]=filterValues}}function S(ad,ac){return GBFF.getFilterState(ad,ac)}function n(ac,ai,ah){var ad=E[ac],ak=getMetaColByFieldName(ad,ai),ag=GBFF.originalState[GBFF._getGWFkNamingConvention(ad.fullyQualifiedObjectName)],af=GBFF.getFilterFieldName(ad,ak),aj=S(ag,af),ae={gridInfo:ad,metaCol:ak,objState:ag,filterState:aj,filterField:af};return ae}function q(ah,ad,af,ag){var ac,ae=false;if(r(ab[af][0].split(":"))){return"search"}if(D(ab[af][1].split(":"))){return"browse"}if(ah==null){return"browse"}else{ac=y(ah.v)}if(ac!=null&&ah.o==ad){ae=P(ag,ac)}if(ae){return"browse"}return"search"}function b(ak,aj,ai,ah,ag,ac){X(ak);var af=q(aj,ai,ag,ac);var ad=ak.parent().find("div.qfBrowseFilter#"+ah+"-"+ag);var ae=ak.parent().find("div.qfSearchFilter#"+ah+"-"+ag);if(af=="browse"){ad.removeClass("none").find(".qfBrowseKeywordSearch").focus();ae.addClass("none")}else{ad.addClass("none");ae.removeClass("none").find(".qfSearchTxt").focus()}}function e(ak,ai,aj,af,ac){G=d("div.qfSearchFilter#"+ai);G.removeClass("none");G.css({"min-width":ak.width()});G.position({my:"left top-1",at:"left bottom",of:ak,collision:"fit"});G.addClass("none");var ag=G.find("input.qfSearchTxt"),ad=G.find("span.lookupArrow");enableDatePicker(aj,ag,false);var aj=ai.split("-")[1];if(Q(aj)){ag.off("keyup").on("keyup",function(){var am=K(G.attr("name")),an=G.attr("id").split("-"),ao=an[0],al=an[1];GBFF._enableAutoComplete(am,ao,al,ag,false)});ad.off("click").on("click",function(){var am=K(G.attr("name")),an=G.attr("id").split("-"),ao=an[0],al=an[1];GBFF._enableAutoComplete(am,ao,al,ag,true)})}var ah=G.find("a.qfSearchMore"),ae=G.find("a.qfSearchHide");ah.off("click").on("click",function(al){C(af,ai,d(this),true);al.preventDefault();al.stopPropagation();return false});ae.off("click").on("click",function(al){G.find(".qfSearchOperator").addClass("none");ah.removeClass("none");ae.addClass("none");al.preventDefault();al.stopPropagation();return false});if(af!=null&&af.filterState!=null){ag.val(af.filterState.v);C(af,ai,ah,false)}if(ac){G.find("div.qfToggleBtnContainer").removeClass("none");G.find(".qfSearchBtn").addClass("qfActive");G.find(".qfBrowseBtn").removeClass("qfActive")}s(ak,ai)}function C(ah,ae,ac,ag){var af=G.find(".qfSearchOperator"),ai,ad=ab[ae.split("-")[1]][1].split(":")[1];af.html(GBFF.getOperatorsForField(ah));if(ah.filterState!=null){ai=ah.filterState.o}else{ai=ad}if(ag||ai!=ad){af.removeClass("none");G.find("a.qfSearchHide").removeClass("none");ac.addClass("none")}else{if(ai==ad){af.addClass("none")}}d('div.qfSearchOperator option[value="'+ai+'"]').prop("selected",true)}function X(ag){var ac=ag.parent().find("div.qfBrowseFilter .qfBrowseBtn"),af=ag.parent().find("div.qfBrowseFilter .qfSearchBtn"),ae=ag.parent().find("div.qfSearchFilter .qfBrowseBtn"),ad=ag.parent().find("div.qfSearchFilter .qfSearchBtn");af.off("click").on("click",function(ah){if(d(this).hasClass("qfActive")){return}ac.removeClass("qfActive");ad.addClass("qfActive");ag.parent().find("div.qfBrowseFilter").addClass("none");ag.parent().find("div.qfSearchFilter").removeClass("none").find(".qfSearchTxt").focus()});ae.off("click").on("click",function(ah){if(d(this).hasClass("qfActive")){return}ad.removeClass("qfActive");ac.addClass("qfActive");ag.parent().find("div.qfSearchFilter").addClass("none");ag.parent().find("div.qfBrowseFilter").removeClass("none").find(".qfBrowseKeywordSearch").focus()})}function v(){var ac=d(".quickFiltersBtn.btn-active");if(ac.length===0){return}if(t&&t.is(":visible")){t.position({my:"left top-1",at:"left bottom",of:ac,collision:"fit"})}else{if(G&&G.is(":visible")){G.position({my:"left top-1",at:"left bottom",of:ac,collision:"fit"})}else{if(R&&R.is(":visible")){R.position({my:"left top-1",at:"left bottom",of:ac,collision:"fit"})}}}}function F(ag,al,aj,am,ak,ai,ah,ac,ad){var ae=h[ag+":"+al],af="";af=Y(ag,al,ae,ak,ac,ad,M(aj));t=d("div.qfBrowseFilter#"+al+"-"+aj);t.removeClass("none");t.html(af);t.off("click").on("click",".gbQuickFilter li",function(an){d(this).find('input[type="checkbox"], input[type="radio"]').click()}).on("click",'.gbQuickFilter li input[type="checkbox"], input[type="radio"]',function(an){an.stopPropagation()});t.find(".qfSearchBtn").removeClass("qfActive");t.find(".qfBrowseBtn").addClass("qfActive");t.css({"min-width":am.width()});t.position({my:"left top-1",at:"left bottom",of:am,collision:"fit"});p(t);a(am,aj);w(am)}function Y(ah,an,af,al,ac,ae,ad){var ai="",ao="",ak;if(ae){ai+=('<div class="qfToggleBtnContainer"><button class="qfActionBtn qfBrowseBtn gbBtn ldsWhiteBtn" type="button">Browse</button><button class="qfActionBtn qfSearchBtn gbBtn ldsWhiteBtn" type="button">Search</button><button class="qfActionBtn qfBrowseBtn gbBtnDisabled ldsWhiteBtn none" type="button">Browse</button><button class="qfActionBtn qfSearchBtn gbBtnDisabled ldsWhiteBtn none" type="button">Search</button></div>')}ai+='<input class="qfBrowseKeywordSearch" type="text" size="15"/><span class="gbMagnifyingGlass"></span><ul class="gbQuickFilter">';if(ac){ai+='<li class="qfTxt ui-menu-item"><input class="qfSelectAllChk" type="checkbox">Select All</input></li>'}if(ad){ak="radio";ao=' name="ForQFBrowseRadio"'}else{ak="checkbox"}for(var ag=0;ag<af.length;ag++){var am="",aj=af[ag];filterVal=af[ag];if(dataType=="BOOLEAN"){filterVal=B[aj]}else{if(j(dataType)){filterVal=m[aj]}}if(al!=null&&aa(al,filterVal)){am=" checked"}ai+='<li class="qfItemTxt ui-menu-item"><input class="qfItemTxt"'+ao+' type="'+ak+'" value="'+filterVal+'"'+am+'><span class="qfItemLabel">'+aj+"</span></li>"}ai+='</ul><div class="noSearchResults" style="display:none;"><div class="noFieldsFound">Please enter a different keyword.</div><div class="noFieldsFound">No fields were found.</div><div class="showAllFields">Show all fields.</div></div><div class="qfPopupFooter"><button class="qfActionBtn qfApplyBtn gbBtn ldsWhiteBtn" type="button">Apply Selection</button><button class="qfActionBtn qfClearBtn gbBtn ldsWhiteBtn" type="button">Clear</button></div>';return ai}function p(ac){ac.find(".qfBrowseKeywordSearch").off("keyup").on("keyup",function(ak){var ah=d(this).val().toLowerCase(),ag=ac.find("ul.gbQuickFilter"),ae=ac.find(".noSearchResults");var ad=ag.find(".qfTxt"),ai=ag.find("li.qfItemTxt"),al=ai.find(".qfItemLabel"),aj;if(ah.length>0){var af=false;ag.show();ai.hide();al.each(function(){var am=d(this);if(am.text().toLowerCase().indexOf(ah)>-1){am.closest("li.qfItemTxt").show();if(!af){af=true}}});if(af){ad.show();ae.hide()}else{ad.hide();ag.hide();ae.show()}}else{O(ad,ai,ag,ae)}});ac.find(".showAllFields").off("click").on("click",function(ah){var ai=d(this).closest(".qfBrowseFilter"),ag=ai.find("ul.gbQuickFilter"),ad=ai.find(".noSearchResults");var ae=ag.find(".qfTxt"),af=ag.find("li.qfItemTxt");ai.find(".qfBrowseKeywordSearch").val("");O(ae,af,ag,ad)})}function O(ad,ae,af,ac){ad.show();ae.show();af.show();ac.hide()}function a(ad,ac){ad.parent().find("button.qfApplyBtn").off("click").on("click",function(ae){if(GBFF.stayOnPageForUnsavedChanges(false,true,false)==true){return false}if(f(ad,ab[ac][0].split(":")[1],U(ad.parent().find("input.qfItemTxt:checked")))){ad.parent().find("div.qfBrowseFilter").addClass("none");GBFF.save()}});ad.parent().find("button.qfClearBtn").off("click").on("click",function(ai){if(!ad.hasClass("qfHasFilterState")){z();return}if(stayOnPageForUnsavedChanges(false,true,false)==true){return false}var ah=ad.attr("name"),al=ad.attr("id").split("-")[0],af=E[ah],am=getMetaColByFieldName(af,al),ag=ad.attr("chilrelationship"),aj=GBFF.getFilterFieldName(af,am);if(ag!=null){ak=ah.split(":");ah=ak[0]+":"+ag}if(A(af)){var ae=ah.split(":")[0],ak=ae.split("-"),ah=ak[0]+":unrelated-"+ak[1]+"-"+ak[2]}if(GBFF._clearFilter(true,ah,aj)){ad.parent().find("div.qfBrowseFilter").addClass("none");GBFF.save("Clearing...")}})}function s(ac,ad){ac.parent().find("button.qfSearchApplyBtn").off("click").on("click",function(af){if(GBFF.stayOnPageForUnsavedChanges(false,true,false)==true){return false}var ae=ac.parent().find("option:selected").val();if(ae==null){ae=ab[ad.split("-")[1]][1].split(":")[1]}if(f(ac,ae,ac.parent().find("input.qfSearchTxt").val())){ac.parent().find("div.qfSearchFilter").addClass("none");GBFF.save()}GBMixpanel.track("Filter Grid",{Source:"Quick Filter",Action:"Apply"})});ac.parent().find("button.qfSearchClearBtn").off("click").on("click",function(ai){if(!ac.hasClass("qfHasFilterState")){x();return}if(stayOnPageForUnsavedChanges(false,true,false)==true){return false}var ah=ac.attr("name"),al=ad.split("-")[0],af=E[ah],am=getMetaColByFieldName(af,al),ag=ac.attr("chilrelationship"),aj=GBFF.getFilterFieldName(af,am);if(ag!=null){ak=ah.split(":");ah=ak[0]+":"+ag}if(A(af)){var ae=ah.split(":")[0],ak=ae.split("-"),ah=ak[0]+":unrelated-"+ak[1]+"-"+ak[2]}if(GBFF._clearFilter(true,ah,aj)){ac.parent().find("div.qfSearchFilter").addClass("none");GBFF.save("Clearing...")}GBMixpanel.track("Filter Grid",{Source:"Quick Filter",Action:"Clear"})})}function f(ae,ac,aj){var ah=ae.attr("name"),al=ae.attr("id").split("-")[0],af=E[ah],am=getMetaColByFieldName(af,al),ag=ae.attr("chilrelationship"),ai=GBFF.getFilterFieldName(af,am);if(ag!=null&&ag!=""){ak=ah.split(":");ah=ak[0]+":"+ag}if(A(af)){var ad=ah.split(":")[0],ak=ad.split("-"),ah=ak[0]+":unrelated-"+ak[1]+"-"+ak[2]}return GBFF.trackFilterChange(false,true,ah,ai,ac,aj)}function w(ac){d("div.qfBrowseFilter ul.gbQuickFilter input.qfSelectAllChk").off("click").on("click",function(ah){var ad=d(this),af,ag=ad.parent().parent().find("input.qfItemTxt:visible");if(ad.hasClass("allSelected")){ad.removeClass("allSelected");af=false}else{ad.addClass("allSelected");af=true}for(var ae=0;ae<ag.length;ae++){d(ag[ae]).prop("checked",af)}})}function U(ae){var ad="";for(var ac=0;ac<ae.length;ac++){ad+=d(ae[ac]).attr("value")+","}if(ad.lastIndexOf(",")!=-1){ad=ad.substring(0,(ad.length-1))}return ad}function y(af){var ae=af.split(","),ad=[];for(var ac=0;ac<ae.length;ac++){ad.push(ae[ac].trim())}return ad}function W(ac){if(Q(ac)){return true}return false}function J(ac){var af=ab[ac],ae=af[0],ad=af[1];if(D(ae.split(":"))||r(ad.split(":"))){return false}return true}function Q(ac){return(ac=="PICKLIST"||ac=="MULTIPICKLIST"||ac=="RECORDTYPE")}function j(ac){return(ac=="DATE"||ac=="DATETIME")}function K(ac){return(ac.indexOf("-")!==-1?ac.split("-")[0]:ac.split(":")[0])}function M(ac){if(ac=="BOOLEAN"||j(ac)){return true}return false}function A(ac){return(ac.fullyQualifiedObjectName.indexOf("-")>-1)}function aa(ac,ad){ac=u(ac);ad=ad.toLowerCase();if(ac.indexOf(ad)!==-1){return true}return false}function u(ac){var ae=[];for(var ad=0;ad<ac.length;ad++){ae.push(ac[ad].toLowerCase())}return ae}function P(ae,ac){for(var ad=0;ad<ac.length;ad++){var af=ac[ad];if(j(dataType)){af=L[ac[ad]]}if(aa(ae,af)==false){return false}}return true}function r(ac){if(ac[1]=="0"){return true}return false}function D(ac){if(ac[1]=="0"){return true}return false}function z(){if(t){t.addClass("none");d("button.quickFiltersBtn.gbBtn").removeClass("btn-active")}}function x(){if(G){G.addClass("none");d("button.quickFiltersBtn.gbBtn").removeClass("btn-active")}}function I(){if(R){R.addClass("none");d("button.quickFiltersBtn.gbBtn").removeClass("btn-active")}}return{buildQuickFilterBtns:T,hideQuickFilter:k,repositionQuickFilter:v,setupQuickFilters:V}})(window,document,jq);function initKeyUpDownActions(){jq(document).keyup(function(a){if(a.keyCode==27){hideMessage();GBQuickFilter.hideQuickFilter()}});jq(document).keydown(function(a){var b;if(!a){a=window.event}if(a){if(overlayIsVisible()==false){if(a.keyCode==83&&(a.ctrlKey||a.metaKey)){b=getFirstSubmitButton("saveBtn");GBMixpanel.onGridSave.source="Shortcut";if(b!=null){try{jq(document.activeElement).change()}catch(c){}b.click();a.preventDefault()}}else{if(a.keyCode==82&&(a.ctrlKey||a.metaKey)){b=getFirstSubmitButton("refreshBtn");b.click();a.preventDefault()}else{if(exportEnabled&&a.keyCode==69&&((a.ctrlKey&&!a.altKey)||a.metaKey)){jq("li.exportItem").click();a.preventDefault();GBMixpanel.track("Grid Export",{Source:"Shortcut"})}}}}}})}function toggleFilterStatusMsg(c,b){var a=jq("#filterStatus");if(b==true){if(c){a.find(".msgText").text(c)}a.show()}else{a.hide()}}function addBrowserSpecificClasses(){var b=jq("div.gbPage");if(GBHelpers.isIE()){var a=GBHelpers.getIEVersion();b.addClass("ie");if(a==8){b.addClass("ie8")}else{if(a==9){b.addClass("ie9")}else{if(a==10){b.addClass("ie10")}}}jq(".frameScrollFix").removeClass("frameScrollFix")}else{if(jq.browser.mozilla==true){jq("div.gbPage").addClass("moz")}else{if(jq.browser.webkit==true){jq("div.gbPage").addClass("webkit");if(GBHelpers.isIpad()){jq("div.gbPage").addClass("ipad")}}}}if(isWindows()){jq("div.gbPage").addClass("win")}if(GBHelpers.isIE()){outerTableContainer.addClass("mb27")}else{outerTableContainer.addClass("mb25")}}function cout(b){try{if(console){console.log(b)}}catch(a){}}jq(document).ready(function(){GBHelpers.initRequiredColumns();GBMixpanel.init(mpToken);GBButtons.updateAndShowCertainButtons("input[type=submit].gbBtn.editBtn, input[type=submit].gbBtn.refreshBtn, input[type=submit].gbBtn.cancelBtn");GBHelpers.createJqueryCenterFunction();if(GBPivoted.renderPivotedGrid()){GBGrid.initBeforeGridBuilt();parentGridApiName=getParentGridInfo().gridApiName;GBActions.processCustomActions();GBPivoted.init();addBrowserSpecificClasses();GBGrid.completeGridLoading(jq(mainTableJqueryId));populateUnsavedRows();GBStickyHeader.init();addAutocompleteToLookupFields(null,false);GBTextArea.setupLongTextDescFields();GBLookupHelper.setupLookupResultsFilterLinks();var a=getParentGridInfo().groupByColumnInfos[0],b=a.fieldInfo.split(":");GBColorCode.init();var c=GBHelpers.getUrlParamForMixpanel();GBMixpanel.track("Grid View",{"# Hidden Fields":GBHelpers.getHiddenFieldsLength(),"# Visible Fields":GBHelpers.getVisibleFieldsLength(),"# Parent Fields":GBHelpers.getParentFieldsLength(),"# Child Fields":GBHelpers.getVisibleFieldsLength()-GBHelpers.getParentFieldsLength(),"All Fields":GBHelpers.getDisplayedFieldsList(),"Embed Param":c,"# Page Records":jq("#parentHeaderTable").find(".pageSizeSelect").val(),"Flat View Object":GBHelpers.getFlatViewObjApiName(),"Editable Related Column":GBHelpers.getEditableRelatedColObjApiName(),"Custom Theme":GBCustomStyles.getIsThemesOnheGrid(),"Group Sorted By":GBGroupBy.getGroupSortedBy(),"Forecast View Enabled":true,"Column Grouping Field":b[0]+"."+b[1]+"."+b[2],"Column Grouping Format":b[2]=="PICKLIST"?"n/a":a.format,"# Formatting Rules":colorCodingRulesJson.length,"Embed Operator":GBHelpers.getFPOParams(c)});if(!showGroupingsExpanded||!showRecordDetailsInGroup){jq(window).trigger("gbGroupByPivotFreeze")}}else{if(!getParentGridInfo()){return}GBGrid.initBeforeGridBuilt();parentGridApiName=getParentGridInfo().gridApiName;initRelatedChildObjects();GBHelpers.setGlobalDefaultValuesForCreates();GBFlatView.init();addGridRows(mainTableJqueryId);GBDataCard.init();setupDelegatedGridFieldEvents();initializeGridFields();populateUnsavedRows();GBExpandCollapseHelper.initEventsForMassUpdate();jq(mainTableJqueryId+" .errorMsg").each(function(){errorRecs.push(getRowId(jq(this)))});GBActions.initRecordActions();GBLookupHelper.setupLookupResultsFilterLinks();GBHelpText.init();GBExpandCollapseHelper.init();GBDraggableResizeColumns.init();if(childDataExists()){GBResizableChildColumns.init()}GBMassUpdateHelper.init();GBStickyHeader.init();addBrowserSpecificClasses();GBSummary.initSummaryRow();GBGroupBy.init();GBFreezeHeaders.initiateFreezeHeaders(true,jq(mainTableJqueryId));GBColorCode.init();var c=GBHelpers.getUrlParamForMixpanel();GBMixpanel.track("Grid View",{"# Hidden Fields":GBHelpers.getHiddenFieldsLength(),"# Visible Fields":GBHelpers.getVisibleFieldsLength(),"# Parent Fields":GBHelpers.getParentFieldsLength(),"# Child Fields":GBHelpers.getVisibleFieldsLength()-GBHelpers.getParentFieldsLength(),"All Fields":GBHelpers.getDisplayedFieldsList(),"Embed Param":c,"# Page Records":jq("#parentHeaderTable").find(".pageSizeSelect").val(),"Flat View Object":GBHelpers.getFlatViewObjApiName(),"Editable Related Column":GBHelpers.getEditableRelatedColObjApiName(),"Custom Theme":GBCustomStyles.getIsThemesOnheGrid(),"Group Sorted By":GBGroupBy.getGroupSortedBy(),"Forecast View Enabled":false,"Column Grouping Field":"n/a","Column Grouping Format":"n/a","# Formatting Rules":colorCodingRulesJson.length,"Embed Operator":GBHelpers.getFPOParams(c),"# Charts":hasCharts?chartsJson.length:0});GBMixpanel.peopleIncrement("Grid View");GBGrid.initRegularGridEventHandlers();setTimeout(function(){GBFreezeCols.init();setTimeout(function(){jq(window).trigger("gbFreeze")},10)},10);GBGrid.initZebraStriping()}initKeyUpDownActions();GBGrid.initAfterGridBuilt();GBGrid.initEventHandlers();GBUserDefinedFilters.initEventHandlers();GBActions.initGWConfigureAction();GBUserDefinedCols.init();GBExportWidget.init();GBMetadataPanel.initFilterInfo();GBHelpers.createMessageListener();GBGrid.toggleFavoriteGridIcon();if(!usageTrackingDisabled){GBTracking.init()}window.setTimeout(function(){jq(".infoMsg").fadeOut("slow")},6000)});if(jq.ui&&jq.widget&&jq.ui.autocomplete){jq.widget("custom.catcomplete",jq.ui.autocomplete,{_create:function(){this._super();this.widget().menu("option","items","> :not(.ui-autocomplete-message, .ui-autocomplete-category)");this._off(this.menu.element,"mousedown");this._on(this.menu.element,{mousedown:function(b){if(!jq(b.target).hasClass("matchType")){b.preventDefault()}this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var a=this.menu.element[0];jq(b.target).closest(".ui-menu-item").length||this._delay(function(){var c=this;this.document.one("mousedown",function(d){d.target===c.element[0]||d.target===a||jq.contains(a,d.target)||c.close()})})}})},_renderMenu:function(q,s){var r=this,g="",b,j,c,p=false,o=false,w=false;if(isIE7&&!q.hasClass("ie7")){q.addClass("ie7")}if(s.length>5){q.addClass("ui-autocomplete-scrollable")}else{q.removeClass("ui-autocomplete-scrollable")}if(s.length>0){var u={};if(s[0].rfInputKey){u=s.splice(0,1)[0];c=u.rfInputKey;p=u.isSOSLConfigured;b=u.settings;j=u.layoutMeta;q.attr("name",c)}if(s.length>0){GBLookupHelper.addSearchFieldTypeMarkup(q,c,p)}}if(s.length>0&&b){var l=s[0];if(l.label==defaultLookupData[0].label&&l.id==defaultLookupData[0].id){w=true}if(b.infoMessage.length>0){if(!q.hasClass("ui-autocomplete-scrollable")){q.addClass("ui-autocomplete-scrollable")}q.append("<li class='ui-autocomplete-message lfInfoMsg'><span class='gbInfoIcon'></span>"+b.infoMessage+"</li>")}if(b.optional){if(!q.hasClass("ui-autocomplete-scrollable")){q.addClass("ui-autocomplete-scrollable")}var h=(b.ignoreFilter?"Results are not filtered. ":"Results are filtered. "),n=(b.ignoreFilter?(w?null:"Show filtered results"):"Show all results"),e=b.ignoreFilter?"lfShowFiltered":"lfShowAll";q.append("<li class='ui-autocomplete-message lfOptional'><span class='gbInfoIcon'></span>"+h+(n?"<span class='"+e+" spanLink' name='"+c+"'>"+n+"</span>":"")+"</li>")}}if(s.length==lookupResultSizeMax){q.append("<li class='ui-autocomplete-message firstXMatches'>"+showingFirstXMatchesMsg+"</li>")}if(s.length>0&&j){o=GBLookupHelper.setupLookupLayout(j,q,s)}var m=jq("#gbLayoutHelper"),d=m.find("tr.lookupData");var f=[];jq.each(s,function(z,B){if(B.cat!=g&&B.cat!=undefined){f.push(jq("<li class='ui-autocomplete-category'>"+B.cat+"</li>")[0]);g=B.cat}var A=false,x=s[z+1],y=s[z-1];if((x&&x.value&&x.value==B.value)||(y&&y.value&&y.value==B.value)){A=true}f.push(r._renderItem(q,B,A,o,j,m,jq(d[z]))[0])});q.append(f);var k=jq(q);if(k.find("li.lookupData").length>0){k.addClass("overflowX")}else{k.removeClass("overflowX")}if(s.length>0&&o){GBLookupHelper.resizeResultsWithLookupLayout(q,j)}if(w&&b&&b.errorMessage.length>0){if(!q.hasClass("ui-autocomplete-scrollable")){q.addClass("ui-autocomplete-scrollable")}q.append("<li class='ui-autocomplete-message lfErrorMsg'>"+b.errorMessage+"</li>")}if(s.length>0&&j&&j.sortField&&j.keepScrollPosition=="true"){var v=q.find("li.layoutHeader").find("span.sorted"),t=0,a=0;if(v.length>0){t=v.position().left-2;a=v.position().top}k.scrollLeft(t);k.scrollTop(a)}else{k.scrollLeft(0);k.scrollTop(0)}},_renderItem:function(c,h,b,d,a,e,g){var j=(h.id.length>0&&d?"lookupData":h.id.length>0?"":"ui-autocomplete-message"),f="";if(h.label!=undefined){if(b==true&&!d){f='<span class="gbRfl spanLink" name="'+h.id+'">'+h.id+"</span>"}if(!d){return GBLookupHelper.getBasicLookupResultRow(c,h,j,f)}return GBLookupHelper.getLookupResultRowWithLayout(c,h,j,a,e,g)}}})}if(jq.ui&&jq.widget&&jq.ui.menu){jq.widget("ui.menu",jq.ui.menu,{activate:function(e,d){try{this.deactivate();if(this.hasScroll()){var f=d.offset().top-this.element.offset().top,a=this.element.attr("scrollTop"),c=this.element.height();if(f<0){this.element.attr("scrollTop",a+f)}else{if(f>=c){this.element.attr("scrollTop",a+f-c+d.height())}}}this.active=d.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end();this._trigger("focus",e,{item:d})}catch(b){}}})}jq(window).load(function(){var a=jq("#userFilterFrame");if(a.length>0){GBFF.initFilterIcons();a.attr("src",userFilterURL).load(function(){var b=GBFF.init();toggleFilterStatusMsg(null,false);GBQuickFilter.setupQuickFilters(b)})}else{GBFF.initWithUDFDisabled()}GBDraggableResizeColumns.initResizable();if(childDataExists()){GBResizableChildColumns.initResizable()}if(GBFreezeHeaders.isFreezeHeadersEnabled()){GBFF.addWindowScrollListener()}jq("body.sfdcBody").addClass("gridFrame")});var GBGrid=(function(f,n,o){var c,r,l,h;function a(w){h=w.currencyConversionRateInfo;GBGrid.conversionRates=w.currencyConversionRates}function v(){if(dependentInfoArray&&dependentInfoArray.length>0){buildDependentPickListObjects(dependentInfoArray)}if(o("table#bodyTable").hasClass("outerNoSidebar")){o("table#bodyTable").find("td:first").attr("valign","top")}if(gridHasEditableDates){o.datepicker.setDefaults(o.datepicker.regional[currentLocale]);currentDate=getCurrentDateFormatted();currentTime=getCurrentTimeFormatted()}e()}function d(){o(".gbForm").attr("autocomplete","off");o(n).on("mouseover","span.gbRfl",function(y){o(this).attr("title",lang.referenceNewWindow)});if(errorRecs.length>0){var w=errorRecs.join(",#");w="#"+w;o(w).each(function(){o(this).addClass("gbRecErr");if(o(this).next().hasClass("dataCard")){o(this).next(".dataCard").addClass("gbRecErr")}showGridTable(o(this))})}if(isInMobileDevice){var x=o("#gridFooterControls");if(isInMobileView){x.after('<span onclick="GBHelpers.toggleDesktopView('+isInMobileView+')" class="spanLink desktopView">Show Desktop View</span>')}else{x.after('<span onclick="GBHelpers.toggleDesktopView('+isInMobileView+')" class="spanLink desktopView">Show Mobile View</span>')}}}function p(){o("div.closeX, span.closeX").click(function(){hideMessage(o(this))});o(".infoMsg").on("click","#closeSaveToast",function(){o(".infoMsg").remove()});outerTableContainer.on("click","span.gbUrl",function(){var x=o(this).text();if(x&&o.trim(x)!=""){var w=o.trim(x);if(w.indexOf("://")==-1){w="http://"+w}f.open(w)}});o("#invalidFieldsWarning, #invalidOppProdFieldsWarning").click(function(w){w.stopPropagation()});g();m();k()}function j(){descBox.draggable({cancel:"div.descContent"});o("#relatedColumnWidget").draggable({handle:"div.header"});o(mainTableJqueryId).on("click",".flatViewCell",function(){GBRowHelper.positionRelatedWidget(o(this))})}function q(B){var w=o("#parentHeaderTable"),y=getParentGridInfo(),x=y.rowCnt,z=o(".gridBtns.top"),A=o("#gridFooter"),C=o(".gbPage").find("span.savedFilterOpts");hideGBLoader();B.removeClass("none");o("button.launchUDF").removeClass("none");o("span.refreshBtn").removeClass("none");o("span.editBtn").removeClass("none");if(filteringByParent==false){z.find("span.headerSeparator, h2.parentName").removeClass("none")}if(x>0&&filteringByParent==false){A.find("span.hideIfNoItems").removeClass("none")}if(x>0||(isCreateable==true&&y.isCreatable==true)){if(filteringByParent==false||y.rowCnt>0){o("input.saveBtn:not(.gbMenuBtn)").removeClass("none");if(isIE6==false&&gridHasUpdateableFields==true&&x>0){o("button.massUpdates").removeClass("none gbBtnDisabled hidden")}}if(filteringByParent==false){o("div.pagination.bottom").removeClass("none")}}GBActions.validateStandardPageActions();if(x==0&&!isInMobileView){A.hide()}if(gridHasCreateableFields==true&&!getParentGridInfo().hasFlatViewChildren){o(".standardPageActions .massCreateItem").removeClass("none")}GBHelpers.showCreateNewOption(z,y,function(){var D=GBFreezeCols.isFreezeColsEnabled();if(D){GBFreezeCols.unfreezeColumns(false,GBFreezeCols.newAndCloneMsg)}insertNewRow(getDataTable("p"));if(!D){GBFreezeCols.updateHeightOfTablesWithNoFrozenCols()}});if(C.find(".filterOptionsContainer").length>0){C.removeClass("none");GBStickyHeader.wrapBtnsParentHeaderRight()}}function b(){var w=0;o.each(o(mainTableJqueryId+" > tbody > tr"),function(x,y){var A=o(y);if(A.hasClass("groupByRow")){w=0}else{if(A.hasClass("dr")&&!A.hasClass("nd")){if(!A.hasClass("dataCard")){w++}if(w%2==1){A.addClass("zebra")}}else{if(A.hasClass("cr")){var z=0;o.each(A.find("td > div > div > div > table > tbody > tr"),function(D,C){var B=o(C);if(B.hasClass("dr")){if(!B.hasClass("dataCard")){z++}if(z%2==0){B.addClass("zebra")}}})}}}})}function e(){if(multiCurrency){if(!o.isEmptyObject(h)){GBGrid.defaultCurrencySymbol=h.isoCode+" ";GBGrid.conversionRate=h.conversionRate}else{GBGrid.defaultCurrencySymbol=defaultIsoCodeForOrg+" "}}else{GBGrid.defaultCurrencySymbol=GBRowHelper.getCurrencySymbol(defaultIsoCodeForOrg)}}function m(){var w=n.forms[o("form.gbForm").attr("name")];w.nativeSubmit=w.submit;w.submit=function(){if(beforeFormSubmit()){w.nativeSubmit()}else{btnClick="default"}};o(w).submit(function(){var x=beforeFormSubmit();if(x==false){btnClick="default"}return x});o("form.gbForm input[type=submit]").click(function(){if(o(this).hasClass("saveBtn")){btnClick="save"}else{if(o(this).hasClass("delBtn")){btnClick="delete"}else{if(o(this).hasClass("delAllBtn")){btnClick="deleteAll"}else{if(o(this).hasClass("editBtn")){btnClick="edit";GBMixpanel.track("Change Grid Display",{"Display Control":"Edit Button",Option:"",State:""})}else{if(o(this).hasClass("refreshBtn")){btnClick="refresh"}else{if(o(this).hasClass("cancelBtn")){btnClick="cancel"}else{if(o(this).hasClass("rocRevertBtn")){btnClick="rocRevertBtn"}else{if(o(this).hasClass("rocSaveBtn")){btnClick="rocSaveBtn"}}}}}}}}})}function k(){outerTableContainer.on("click","span.gbId",function(){var w=o(this).text();GBHelpers.navigateToRecord(this,w);GBMixpanel.track("Record Detail Action",{Source:"ID"})});outerTableContainer.on("click","span.gbName",function(){var w=(o(this).closest(".dataCard").length>0),z=(w?o(this).closest(".cardItem"):o(this).closest("td")),y=z.hasClass("dvc"),x=(y?o(this).closest("tr.dr").attr("data-childId"):getRowId(this));GBHelpers.navigateToRecord(this,x);GBMixpanel.track("Record Detail Action",{Source:"Name"})});o(n).on("click","span.gbRf, span.gbRfl",function(y){var z=o(this).attr("name"),w=baseRelativeURL;if(o(this).hasClass("gbRf")){GBMixpanel.track("Record Detail Action",{Source:"Reference"})}else{GBMixpanel.track("Record Detail Action",{Source:"Reference Icon"})}if(z&&o.trim(z)!=""){var x=getMetaCol(o(this),getGridInfo(o(this)));if(x.isReferenceToExternalObject()){w+="x/"+x.referenceToObjects+"/"}GBWindowsUtil.openWindow(w+o.trim(z),undefined,true);if(o(this).hasClass("spanLink")){y.preventDefault();y.stopPropagation()}}})}function u(){var w=GBHelpers.getCookie("favoriteGrids");if(!w){w="[]"}var x=JSON.parse(w);if(x.indexOf(gridNameForUDF)!=-1){t(o(".favoriteGridIcon"),false)}else{o(".favoriteGridIcon").prop("title","Add to your Favorites folder in the Grids tab.")}}function g(){o(".favoriteGridIcon").click(function(){var w=o(this).hasClass("icon-star1");t(o(this),w);s(!w);GBMixpanel.track("Favorite",{Selected:!w})})}function t(x,w){if(w){x.removeClass("icon-star1").addClass("icon-star");x.prop("title","Add to your Favorites folder in the Grids tab.")}else{x.removeClass("icon-star").addClass("icon-star1");x.prop("title","Remove from your Favorites folder in the Grids tab.")}}function s(z){var y=GBHelpers.getCookie("favoriteGrids");if(!y){y="[]"}var A=JSON.parse(y);if(z){var w=false;for(var x=0;x<A.length;x++){if(A[x]==gridNameForUDF){w=true;break}}if(!w){A.push(gridNameForUDF)}}else{A.splice(A.indexOf(gridNameForUDF),1)}GBHelpers.setCookie("favoriteGrids",JSON.stringify(A.sort()));if(parent.document){parent.FavoriteGrid.updateFavoriteGridsList(A)}}return{setGridProps:a,initBeforeGridBuilt:v,initAfterGridBuilt:d,initEventHandlers:p,initRegularGridEventHandlers:j,completeGridLoading:q,initZebraStriping:b,defaultCurrencySymbol:c,conversionRate:r,conversionRates:l,toggleFavoriteGridIcon:u}})(window,document,jq);var GBUserDefinedFilters=(function(c,a,d){function b(){d("button.launchUDF").click(function(){GBMixpanel.track("Filter Grid",{Source:"Button",Action:"View"});if(stayOnPageForUnsavedChanges(false,true)==true){return false}else{hideMessage();toggleFilterBox(true);return true}});d("select.filterOptions").change(function(){if(stayOnPageForUnsavedChanges(false,false,false,true)==true){return false}showProcessingMsg(lang.loading);var e=d(this).val();refreshGridAfterUDFSaveJS(e);GBMixpanel.track("Change Data Set",{"Data Control":"My Filter",Source:""})});userFilterBox.draggable({handle:"div.header",cancel:"#userFilterBoxContent, #filterStatus",start:function(){d("#userFilterFrame").hide();toggleFilterStatusMsg(lang.loading,true)},stop:function(){d("#userFilterFrame").show();toggleFilterStatusMsg(null,false)}});d("#filterBoxResizeDiv").resizable({handles:"se",alsoResize:"#userFilterBox, #userFilterBoxContent, #userFilterFrame",cancel:"#userFilterBoxContent",minHeight:200,minWidth:500,start:function(){d("#userFilterFrame").hide();toggleFilterStatusMsg(lang.loading,true)},stop:function(){d("#userFilterFrame").show();toggleFilterStatusMsg(null,false)}});d("#userFilterBox span.closeX").click(function(){toggleFilterBox(false)})}return{initEventHandlers:b}})(window,document,jq);var GBExpandCollapseHelper=(function(k,l,c){function p(){if(expandAll=="Show_Related_Expanded"){GBExpandCollapseHelper.expandAllRecords("gbMainTable",true)}else{if(expandAll=="Hide_Related"){GBExpandCollapseHelper.hideRelatedObjects("gbMainTable",true);GBExpandCollapseHelper.showUnsavedRelatedObjects()}else{if(expandAll=="Show_Related_Collapsed"){GBExpandCollapseHelper.showRelatedObjects("gbMainTable",true)}else{GBExpandCollapseHelper.showSpecificRelatedObjects("gbMainTable",true)}}}}function b(){c("#expandAllMassUpdate").click(function(){if(c(this).hasClass("expanded")){d("massUpdatesTable")}else{g("massUpdatesTable")}})}function g(r,q){c("#"+r+" h3.toggleData:not(.fixed)").each(function(){m(this)});if(r=="massUpdatesTable"){c("#expandAllMassUpdate").val(lang.collAllBtn).attr("title",lang.collAllHover).addClass("expanded")}else{if(!q&&GBFreezeCols.isFreezeColsEnabled()&&GBHelpers.isMultiObjectGrid()){GBFreezeCols.unfreezeColumns(false,GBFreezeCols.relatedRecordsCollapsedMsg)}else{if(GBFreezeCols.isFreezeColsEnabled(true)&&!GBGroupBy.getShouldHideGridRows()&&GBHelpers.isMultiObjectGrid()){GBFreezeCols.unfreezeColumns(false)}else{GBFreezeCols.unfreezeColumns()}}}}function d(q){c("#"+q+" h3.toggleData:not(.fixed)").each(function(){a(this)});if(q=="massUpdatesTable"){c("#expandAllMassUpdate").val(lang.expAllBtn).attr("title",lang.expAllHover).removeClass("expanded")}}function a(s){var q=c(s);var r=c(s).parent().find(".childData");q=q.add(q.siblings(".toggleData"));if(r.length>0){q.removeClass("expanded").addClass("collapsed");r.hide().removeClass("expanded")}if(!GBFreezeCols.isFreezeColsEnabled()){GBFreezeCols.updateHeightOfTablesWithNoFrozenCols()}}function m(s){var q=c(s);var r=c(s).parent().find(".childData");q=q.add(q.siblings(".toggleData"));if(r.length>0){q.removeClass("collapsed").addClass("expanded");r.show().addClass("expanded");makeTextareasResizable(r)}if(!GBFreezeCols.isFreezeColsEnabled()){GBFreezeCols.updateHeightOfTablesWithNoFrozenCols()}}function o(s,q){var r=c("#"+s);r.find(".dr .chk .icon-arrow").removeClass("right");r.find(".cr").show();if(repeatParentHeader){r.find(".gradientHeader:not(:first,.fixed), .fixedSummaryClone").removeClass("none")}if(!q&&GBFreezeCols.isFreezeColsEnabled(true)&&GBHelpers.isMultiObjectGrid()){GBFreezeCols.unfreezeColumns(false,GBFreezeCols.relatedRecordsCollapsedMsg)}else{if(GBFreezeCols.isFreezeColsEnabled(true)&&!GBGroupBy.getShouldHideGridRows()&&GBHelpers.isMultiObjectGrid()){GBFreezeCols.unfreezeColumns(false)}else{GBFreezeCols.unfreezeColumns()}}}function f(s,q){var r=c("#"+s);r.find(".dr .chk .icon-arrow").addClass("right");r.find(".cr").not(".unsaved").hide();if(repeatParentHeader){r.find(".gradientHeader:not(:first,.fixed), .fixedSummaryClone").addClass("none")}GBDraggableResizeColumns.init();if(!q){GBFreezeCols.freezeColumnsIfEnabled(true)}}function n(u,q){o(u,q);var s=decodeURIComponent(expandAll).toLowerCase().split(",");for(var t in gridInfoMap){if(!gridInfoMap[t].isParentInfo){var r=gridInfoMap[t];if(s.indexOf(r.gridApiName.toLowerCase())>-1){j(r.objId)}}}}function j(q){c('.childTable[name="'+q+'"]').closest("div.branch").find(".toggleData.collapsed:not(.fixed)").find(".icon-arrow").trigger("click");if(!GBFreezeCols.isFreezeColsEnabled()){GBFreezeCols.updateHeightOfTablesWithNoFrozenCols()}}function e(q){c('.childTable[name="'+q+'"]').closest("div.branch").find(".toggleData.expanded:not(.fixed)").find(".icon-arrow").trigger("click");if(!GBFreezeCols.isFreezeColsEnabled()){GBFreezeCols.updateHeightOfTablesWithNoFrozenCols()}}function h(){c(".cr.unsaved").prev(".dr").find(".icon-arrow").trigger("click")}return{init:p,initEventsForMassUpdate:b,expandAllRecords:g,collapseAllRecords:d,collapseChildData:a,expandChildData:m,showRelatedObjects:o,hideRelatedObjects:f,showSpecificRelatedObjects:n,showSingleRelatedObject:j,hideSingleRelatedObject:e,showUnsavedRelatedObjects:h}})(window,document,jq);var GBMassUpdateHelper=(function(k,t,w){var r={},C={},o=false,y={};function z(){w("#massCreateParents").val(lang.enableCreatesLabel+" "+htmlUnescape(gridInfoMap.p.gridPluralName));w("#massUpdateSelected").click(function(){B();GBMixpanel.track("Mass Update Records",{Source:"Button",Action:"Apply to Selected"})});w("#massUpdateAll").click(function(){j();GBMixpanel.track("Mass Update Records",{Source:"Button",Action:"Apply to All"})});w("#fastFilter").on("click",".muApplyAll",function(){GBMixpanel.track("Mass Update Records",{Source:"Column Menu",Action:"Apply to All"});j(w(this).parents("#muBody").find("td"))});w("#fastFilter").on("click",".muApplySel",function(){GBMixpanel.track("Mass Update Records",{Source:"Column Menu",Action:"Apply to Selected"});B(false,w(this).parents("#muBody").find("td"))});w("#massCreateParents").click(function(){GBMixpanel.track("Mass Create Records",{Action:"Create Parent","# of Records":w("#massCreateNumber").val()});D("parent")});w("#massCreateRelated").click(function(){GBMixpanel.track("Mass Create Records",{Action:"Create Related","# of Records":w("#massCreateNumber").val()});D("related")});w("#clearAllMassUpdate").click(function(){A();GBMixpanel.track("Mass Update Records",{Source:"Button",Action:"Clear All"})});w("#massUpdatesMsgBox span.closeX").click(function(){F()});w("#massUpdatesMsgBox .muHelpLink").click(v);massUpdatesBox.draggable({handle:"div.header",cancel:"div.massUpdtContent, #muResizeDiv div#massUpdateButtons, #muResizeDiv div#massUpdateMsg, #muResizeDiv div#massUpdateHelp"});w("button.massUpdates").click(function(){u("massUpdate")});w(t).on("click",".gbPageActionsMenu .massCreateItem",function(){u("massCreate")})}function v(I){var H=(w("#massUpdatesMsgBox").hasClass("massUpdate")==true)?w("#massUpdateHelp"):w("#massCreateHelp");if(!H.hasClass("none")||I==true){H.addClass("none");w("#massUpdatesMsgBox .muHelpLink").html(lang.help)}else{H.removeClass("none");H.addClass("msgBox helpMsg");w("#massUpdatesMsgBox .muHelpLink").html(lang.hideHelp)}}function u(M){var N=w("#massUpdatesContent"),J,L,I=w("#expandAllMassUpdate");if(M=="massCreate"){GBMixpanel.track("Mass Create Records",{Action:"View","# of Records":""})}GBFF.hideFastFilter();N.empty();addGridRowsForMassUpdates(M);initializeGridFieldsForMassUpdates(N);N.css("max-height",(k.innerHeight/2)+"px");var K=w("#massUpdatesTable h3.toggleData");if(K.length>0){GBExpandCollapseHelper.collapseAllRecords("massUpdatesTable");if(K.length>1){N.css("min-height","180px")}w("#expandAllMassUpdate:first").removeClass("none");w("#massUpdateButtons input.eaMuDis").removeClass("hidden")}var H=w("#massUpdatesTable");H.find("select").each(function(){var O=w(this);var P=getMetaCol(O,getGridInfo(O));if(dependentToControlling[P.fieldName]){O.html("<option>"+lang.none+"</option>").prop("disabled",true)}});H.find("input.rtf").change(function(){GBRowHelper.updateRecordTypePicklists(w(this),true)});if(H.find(".icon-wrap").length>0){GBDataCard.addEventHandlerForMassUpdate()}v(true);if(M=="massCreate"){E("massCreate")}else{GBMixpanel.track("Mass Update Records",{Source:"Button",Action:"View"});E("massUpdate")}massUpdatesBox.center();massUpdatesBox.show();w("#muResizeDiv").resizable({handles:"se",alsoResize:"#massUpdatesMsgBox .massUpdtContent, #massUpdatesMsgBox",minHeight:200,minWidth:500});makeTextareasResizable(N);w(".gbLightning #massUpdatesTable").find("tr").find("td:visible:last").addClass("last-visible-col")}function E(H){if(H=="massCreate"){w("#massUpdatesMsgBox .massUpdateType").hide();w("#massUpdatesMsgBox .massCreateType").show();w("#massCreateNumber").val(1);if(gridInfoMapLen==1){w("#massCreateRelated").hide()}w("#massUpdatesMsgBox").addClass("massCreate");w("#massUpdatesMsgBox").removeClass("massUpdate")}else{w("#massUpdatesMsgBox .massUpdateType").show();w("#massUpdatesMsgBox .massCreateType").hide();w("#massUpdatesMsgBox").addClass("massUpdate");w("#massUpdatesMsgBox").removeClass("massCreate")}}function F(){massUpdatesBox.hide();if(!w("#massUpdateMsg").hasClass("none")){w("#massUpdateMsg").addClass("none")}A()}function B(K,M,L,H){var I;if(p(M)){if(K){if(L&&!H){I=w(mainTableJqueryId+" td.massCreate").slice(0,L)}else{I=w(mainTableJqueryId+" td.massCreate")}}else{I=w(mainTableJqueryId+" td input.dl:checked")}if(I.length>0){e(M);f(true,M);var N=GBFreezeCols.isFreezeColsEnabled();x(I.get(),G,d,M,N)}else{var J=(K?lang.noRecSelectedMassCreate:lang.noRecSelected);b(J,"warning",M)}}else{b(lang.noValuesSpec,"warning",M)}}function j(I){if(p(I)){f(true,I);e(I);var H=w(mainTableJqueryId+" tr.dr:not(.nr)"),J=GBFreezeCols.isFreezeColsEnabled();x(H.get(),h,a,I,J)}else{b(lang.noValuesSpec,"warning",I)}}function D(N){var P,K=[],M,L=true,H=true,J=false;if(p()){P=Object.keys(r);for(var I=0;I<P.length;I++){M=P[I].charAt(0);if(K.indexOf(M)==-1){K.push(M)}}var O=w("#massCreateNumber").val();if(O==""){O=1}else{if((O*1)<0){b("The number of records to create has to be greater than 0","warning");return}}if(N=="parent"){if(K.indexOf("p")!=-1){L=c(O,K);if(L==true&&K.length>1){H=m(1,K,true)}}else{b("Please enter mass create values in the "+gridInfoMap.p.gridName+" fields","warning")}}else{if(N=="related"){J=true;if(K.length>=1){H=m(O,K)}else{b("Please enter mass create values in the related object fields","warning")}}}if(L&&H){B(true,null,O*K.length,J)}}}function c(H,I){if(gridInfoMap.p.isCreatable==false){b("You don't have create privileges on the "+gridInfoMap.p.gridName+" object. Please remove the mass create values from that object or change your privileges.","warning");return false}if(GBFreezeCols.isFreezeColsEnabled()){GBFreezeCols.unfreezeColumns(false,GBFreezeCols.newAndCloneMsg)}for(var J=0;J<H;J++){newRow=insertNewRow(getDataTable("p"));newRow.find("td.chk").addClass("massCreate");newRow.addClass("massCreate")}return true}function m(J,L,O){var I=true,K=[],H=O?mainTableJqueryId+" > tbody > tr.massCreate":mainTableJqueryId+" > tbody > tr.selected:not(.dataCard)";w(H).each(function(){var P;w(this).nextUntil(".gradientHeader, .dr:not(.dataCard)",".cr").find(".childTable").each(function(){var Q=w(this),R=Q.attr("name").charAt(1);if(L.indexOf(R)!=-1){if(gridInfoMap[R].isCreatable==false){b("You don't have create privileges on the "+gridInfoMap[R].gridName+" object. Please remove the mass create values from that object or change your privileges.","warning");I=false}else{K.push(Q)}}})});if(I==true){for(var M=0;M<K.length;M++){if(J===1&&K[M].find(".dr.nr.massCreate").length>0){continue}for(var N=0;N<J;N++){newRow=insertNewRow(K[M]);newRow.find("td.chk").addClass("massCreate");newRow.addClass("massCreate")}}}return I}function f(H,I){if(I){s(H);return}if(H){muLoadingMsg.removeClass("none")}else{muLoadingMsg.addClass("none")}}function s(H){if(H){w(".muApplyAll, .muApplySel").removeClass("gbBtn").addClass("gbBtnDisabled")}else{w(".muApplyAll, .muApplySel").removeClass("gbBtnDisabled").addClass("gbBtn")}}function p(K){var I=false,H;if(!K){var J=w("#massUpdatesMsgBox").find(".dataCard");H=w("#massUpdatesMsgBox tr.dr td.mu");if(J.length>0){H=w.merge(H,J.find("td.dataCardCell").find(".cardItem.mu"))}}else{H=w("#fastFilter tr.dr td.mu")}r={};C={};H.each(function(){var Y=w(this),Z=Y.find("input"),O=Y.find("input.gbd"),L=Y.find("input.gbt"),U=Y.find("select:not(.wId)"),Q=Y.find("textarea"),R=getGridInfo(Y),T=R.gridId,S=T+Y.attr("name");if(Z.length>0){var V=Z.prev("select.wId"),N;if(V.length>0){N=V.find("option:selected").index();if(N>-1){var X=[];r[S]=X;X.push(N);X.push(Z.val())}}else{if(Z.attr("type")=="checkbox"){r[S]=Z.prop("checked")}else{if(O.length>0&&L.length>0){r[S]=O.val()+" "+L.val()}else{r[S]=Z.val();if(Z.hasClass("rf")){var M=Z.attr("name");if(M){r[S+"-rfId"]=M}}}}}I=true}else{if(Q.length>0){r[S]=Q.val();I=true}else{if(U.length>0){var X=r[S],P=U.find("option:selected"),W=getMetaCol(U,R).fieldName;if(dependentPickListInfo[W]){C[S]=U.val()}if(X==null){X=[];r[S]=X}if(P.length>0){P.each(function(){X.push(w(this).text())})}I=true}}}});return I}function x(H,J,M,K,L){var I=H.concat();setTimeout(function(){var P=+new Date();var N=50;var O=0;do{J(I.shift(),K,L);O++;if(O>1){N=500}}while(I.length>0&&(+new Date()-P<N));if(I.length>0){setTimeout(arguments.callee,25)}else{M(K)}},25)}function G(H,K,M){var H=w(H),I=getGridInfo(H),L=H.parents("tr.dr:first"),J=n(L,K,I);if(L.next().hasClass("dataCard")){w.merge(J,L.next().find(".cardItem"))}if(l(L)==true){q(J,I,M)}}function h(H,K,M){var L=w(H),J=getGridInfo(L),I=n(L,K,J);if(L.next().hasClass("dataCard")){w.merge(I,L.next().find(".cardItem"))}if(l(L)==true){q(I,J,M)}}function n(O,M,L){var K;if(M){K=O.find('td[name="'+M.attr("name")+'"]')}else{var N=w("#massUpdatesTable #mu_"+L.gridId+"_0 td.mu");var I=N.length;var H="";for(var J=0;J<I;J++){H+='td[name="'+w(N[J]).attr("name")+'"],'}H=H.substring(0,H.length-1);K=O.find(H)}return K}function l(H){var I=!H.hasClass("ur");if(H.hasClass("ur")){if(!y[H.attr("id")]){y[H.attr("id")]=1;I=true}}return I}function q(H,L,I){var P,O,N,J;for(var K=0,M=H.length;K<M;K++){P=w(H[K]);if(P.closest(".dataCard").length>0){O=".cardItem"}else{O="td"}if(P.closest(O).hasClass("dvc")){J=P.parents("table.mainTable").attr("data-childGridId")}else{J=L.gridId}N=g(P,J,L,I);o=o==true||N==true}}function d(H){if(o){if(H){}else{if(w("#massUpdatesMsgBox").hasClass("massUpdate")){b(lang.compMassUpdate,"info")}else{b(lang.compMassCreate)}}}else{b(lang.noFieldsUpdated,"warning",H)}o=false;y={};f(false,H)}function a(H){b(lang.compMassUpdate,"info");o=false;y={};f(false,H)}function g(am,an,au,ae){var I=false,ac=am.attr("name");if(ac!=""){var W=am.find("input"),J=am.hasClass("pl"),T=am.find("textarea"),N=an+ac,K={isFreezeColsEnabled:ae,gridInfo:au,isMassUpdate:true};if(r[N]!=null){if(W.length>0){var Y=am.find("input.gbd"),ar=am.find("input.gbt");if(W.is(":disabled")==false){var U=W.prev("select.wId");if(U.length>0){var Q=r[N];if(Q.length==2){U.find("option:selected").prop("selected",false);w(U.find("option")[Q[0]]).prop("selected",true);U.change()}W.val(Q[1]);W.change()}else{if(W.is(":checkbox")){W.prop("checked",r[N]);W.trigger("change",K,true)}else{if(r[N].indexOf("{value}")>-1){if(!W.val()){return I}var O=W.val(),Z=r[N];var R=Z.split(" ");var aq=R[1],S=R[2];var M=/^(?:\d*\.\d{1,2}|\d+)$/;var ab=/^\d+[d,m,y]/,at=ab.test(S);if(S==""||S==0||(!M.test(S)&&!at)){return I}if(at){moment.locale(currentLocale);var ai=dateFormat.toUpperCase().replace("YY","YYYY"),al=O.split(" ")[0],ao=moment(al,ai,true);var aj={d:function(av,aw){av.date(av.date()+aw);return av},m:function(av,aw){av.month(av.month()+aw);return av},y:function(av,aw){av.year(av.year()+aw);return av}};var V={d:function(av,aw){av.date(av.date()-aw);return av},m:function(av,aw){av.month(av.month()-aw);return av},y:function(av,aw){av.year(av.year()-aw);return av}};var ag=S.replace(/[0-9]/g,"");var ad;if(aq=="+"){ad=aj[ag](ao,parseInt(S))}else{ad=V[ag](ao,parseInt(S))}ad=ad.format(ai);if(W.next("span").hasClass("gbdtt")){W=W.parent().find("input.gbd")}W.val(ad);W.change()}else{var P={"+":function(av,aw){return av+aw},"-":function(av,aw){return av-aw},"*":function(av,aw){return av*aw},"/":function(av,aw){return av/aw}};var X=getMetaColByCellName(ac,getGridInfo(am));if(X.colDataType=="DATE"){return I}var H=GBRowHelper.getCleanNumericValue(am,X.colDataType);var ad=P[aq](H.cleanValue,parseFloat(S));W.val(GBHelpers.formatNumber(ad));W.change()}}else{if(W.hasClass("gbd")&&ar.length>0&&Y.length>0){var L=r[N].substring(0,r[N].indexOf(" ")),ah=r[N].substring(r[N].indexOf(" ")+1);Y.val(L.trim());ar.val(ah.trim());Y.change();ar.change()}else{if(W.hasClass("rf")){var aa=r[N+"-rfId"];if(aa){W.attr("name",aa)}}W.val(r[N]);W.change()}}}}I=true}}else{if(T.length>0){if(!T.hasClass("truncated")){T.val(r[N]);T.change();I=true}}else{if(J==true){var ak=am.find("select"),af=r[N],ap,X=getMetaColByCellName(ac,getGridInfo(am));K.metaCol=X;if(ak.length>0&&dependentToControlling[X.fieldName]){ak.remove();ak=am.find("select")}if(ak.length<1){ak=setupCellPicklist(am,true,C,true,null,null,ae,au,X);showCellPicklist(am,X)}ap=ak.find("option:selected");ak.find("option").prop("selected",false);if(af.length>0){if(setSelectedPicklistOptions(r[N],ak)==true){ak.trigger("change",K);I=true}else{ap.prop("selected",true)}}else{ak.trigger("change",true);I=true}}}}}}return I}function A(){var H=w("#massUpdatesMsgBox tr.dr td");H.each(function(){var J=w(this),I=J.find("div.spanLink");if(I.length>0){I.click()}else{J.find("select.wId").prop("disabled",false);J.find("input").prop("disabled",false)}});w("#massUpdateMsg").attr("class","none")}function b(K,I,J){var L=(J?w("#caMassUpdateMsg"):w("#massUpdateMsg")),H=w("#muResizeDiv div.massUpdtContent");L.html(K);if(I=="warning"){L.attr("class","msgBox warningMsg")}else{L.attr("class","msgBox infoMsg")}H.scrollLeft(0);H.scrollTop(0)}function e(H){if(H){w("#caMassUpdateMsg").removeClass("msgBox warningMsg infoMsg").html("")}}return{init:z,hideMassUpdatesBox:F,massUpdateCheckedRecords:B,massUpdateAllRecords:j}})(window,document,jq);var GBGridInfoHelper=(function(d,a,f){var b=["LeadHistory","OpportunityFieldHistory","AccountHistory"];function c(h){for(var j in gridInfoMap){var g=gridInfoMap[j];if(g.fullyQualifiedObjectName==h){return g}}return null}function e(g){if(b.indexOf(g)>=0||g.endsWith("__History")){return true}return false}return{getGridInfoByFullObjectName:c,isHistoryObject:e}})(window,document,jq);var GBLookupHelper=(function(k,p,t){var h,v=0,c={};function g(C,A,B,H,G,y,I,E,D){if(h){h.abort()}var z=t.extend({},C,{reqtype:"lookup",lon:B,lpn:H});t.extend(z,{lfn:I.fieldName,ef:u(y,I,E,D),"if":(y.data("ignoreFilter")==true?1:0),lsf:y.data("lsf"),lsd:y.data("lsd"),keepScrollPosition:y.data("keepScrollPosition"),lsft:I.searchFieldType,lsmt:I.matchType,esr:enforceSharingRules});y.removeData("keepScrollPosition");var F=++v;h=t.ajax({type:"POST",url:lookupAjaxResponderPageURL,data:z,dataType:"json",success:function(N){h=null;if(F!=v){return}if(!N){return}var O=N.results,S=N.settings,J=N.layoutMeta,R=N.isSOSLConfigured,Q,P,T,L=E.objId+"_"+getRowId(y)+"_"+I.fieldId;if(S){Q=S.infoMessage.length>0;P=S.errorMessage.length>0;T=S.optional}var K={rfInputKey:L};K.isSOSLConfigured=R==true;if(S&&(Q||T)){K.settings=S}if(O.length&&J){K.layoutMeta=J}if(!O.length){var M=defaultLookupData.concat();M.splice(0,0,K);A(M)}else{if(y.val().length>0||I.isRecordTypeField()){cacheLookupIds(O,H,G,y.val())}O.splice(0,0,K);A(O)}t(".ui-autocomplete:visible").css("zIndex",(D&&(y.closest("#massUpdatesMsgBox").length==0))?2052:2051);y.removeClass("ui-autocomplete-loading")}})}function u(K,D,Q,N){var U={},O=GBRowHelper.getParentRow(K),M=(Q.isDenormalizedView?O.attr("data-childId"):O.attr("id")),C,G=O.hasClass("nr"),X=false;if(modData[M]){U.id=M;C=modData[M]}else{if(newData[M]){U.id=M;C=newData[M]}else{if(N){C={};O.find("td.mu").each(function(){var Y=t(this).find(":input"),Z=Y.val();if(Y.is(":checkbox")){Z=(Y.is(":checked")==true)+""}C[t(this).attr("name")]=Z})}}}if(C==null){U.id=M}else{X=C.hasOwnProperty("cl");for(var W in C){if(isFieldCell(W)&&W!=D.fieldId){var L=Q.getMetaColByFieldId(W),B=L.fieldName,I=C[W],P=O.find('td[name="'+W+'"] input');if(L.filterable){if(L.isTypeReference()){I=getLookupIdByValue(Q,L,P,I);if(I==null&&P.attr("name")){I=P.attr("name")}}U[B]=I}}}if(X){U.id=C.cl}}if(G==true){var z=GBRowHelper.getParentRowForChildRow(O);if(z!=null&&(z.length==1||z.length==2)&&!z.hasClass("nr")){var R=Q.getFkFieldName();if(GBUnrelated.isChildUnrelated(Q)){var T=GBUnrelated.getFkOnParent(Q);if(T!=null){var V=GBUnrelated.getFkValueOnParent(T,z);if(z.length!=1){V=V.substring(V.indexOf("*")+1)}U[R]=V}}else{U[R]=z.attr("id")}}if(!Q.isParentInfo&&Q.objectNameWithoutFk=="OpportunityLineItem"&&getParentGridInfo().objectNameWithoutFk=="Opportunity"){if(Q.isDenormalizedView&&(z===null)){z=O}var H=getMetaColByFieldName(getParentGridInfo(),"Pricebook2Id");if(H){var E=H.fieldId;var S=z.find('td[name="'+E+'"] input').attr("name");U.PriceBookId=S}var A=getMetaColByFieldName(getParentGridInfo(),"CurrencyIsoCode");if(A){var F=A.fieldId;var J=z.find('td[name="'+F+'"] select option:selected');if(J&&J.length>0&&J[0].value!=""){var y=J[0].value;U.CurrencyIsoCode=y}}}}if(G==true||N==true){if(filterParentField!=""&&Q.isParentInfo==true){U[filterParentField]=GBHelpers.getParamValue("fpv")}if(filteringByParent==true&&N==true&&Q.isParentInfo==false){var R=Q.getFkFieldName();U[R]=GBHelpers.getParamValue("id")}}return getEscapedJSONString(U)}function l(A){var P=A.split("_"),L=(P.length>3),E=P[0],K=P[1],M=P[2],O=getGridInfoByName(E).isDenormalizedView,N;if(L){E=P[0];K=P[1]+"_"+P[2]+"_"+P[3];M=P[4]}if(O){if(L){N=P[2];E=(N=="p"?N:("c"+N))}else{E="p"}}var G=t('table[name="'+E+'"]').not(mainFrozenTableHeaderJqueryId).not("#gbMainTableFrozenHeader"),y=G.children("tbody"),J,z,B,D=false,H=false,F,C,I;if(O&&!L){J=y.children('tr.dr[data-childid="'+K+'"]:not(.dataCard)');z=y.children('tr.dr.dataCard[data-childid="'+K+'"]')}else{J=y.children('tr.dr[id="'+K+'"]:not(.dataCard)');z=y.children('tr.dr.dataCard[id="'+K+'"]')}B=(z.length>0);H=(J.closest("#fastFilter").length>0);if(!B){F=y.find('td.dc[id="'+K+'"]');D=(F.length>0)}if(B){if(!O){C=J.children('td[name="'+M+'"]:not(.dvc)');if(C.length==0){C=z.find('div.cardItem[name="'+M+'"]:not(.dvc)')}}else{C=J.children('td[name="'+M+'"].dvc');if(C.length==0){C=z.find('div.cardItem[name="'+M+'"].dvc')}}}else{if(D){C=F.find('div.pgc[name="'+M+'"]')}else{if(!O){C=J.children('td[name="'+M+'"]:not(.dvc)')}else{if(H){C=J.children('td[name="'+M+'"]')}else{C=J.children('td[name="'+M+'"].dvc')}}}}C=C.filter(":visible");I=C.find("input.rf");return I}function n(){t(p).on("click","span.lfShowAll, span.lfShowFiltered",function(z){var y=t(this).attr("name"),A=l(y);if(t(this).hasClass("lfShowFiltered")){A.removeData("ignoreFilter")}else{A.data("ignoreFilter",true)}A.catcomplete("search")});t(p).on("change","li.lsFieldType input, li.lsFieldType select",function(C){var A=t(this),y=A.parents("ul").attr("name"),E=l(y);var z=getGridInfo(E),B=getMetaCol(E,z);if(A.prop("name")=="fieldType"){var D=A.attr("id").split("__")[1].split("fieldType").join("").toLowerCase();B.searchFieldType=D}else{if(A.prop("name")=="matchType"){B.matchType=A.find("option:selected").val()}}E.catcomplete("search")});if(t.browser.msie==true&&t.browser.version<9){t(p).on("click",'li.lsFieldType input[name="fieldType"]',function(y){t(this).change()})}}var f="lf",m="label";function r(y){return y.indexOf(f)>-1}function a(y){return y==m||r(y)}function x(y){return(y==m?0:(y.split(f).join("")*1)+1)}function d(y,z){return(y==z)}function o(E,K,M){E.lookupColumnCount=0;var I=false,N=t("#gbLayoutHelper");if(N.length>0){N.remove()}for(var T in E){if(r(T)){E.lookupColumnCount++}}if(E.lookupColumnCount>0){I=true;var z=[],A=[],L=E.label,D=E.lookupColumnCount;for(var T in E){if(a(T)){var R=x(T),P=d(R,D),G=(T==m?htmlEscape(L):htmlEscape(E[T].label)),H=(T==m?E.name:E[T].name),Q=(T==m?E.sortable:E[T].sortable),C=[],B,O="";if(P){C.push("last")}if(Q){C.push("s");O="sfn_"+H;if(H.toLowerCase()==E.sortField.toLowerCase()){C.push("sorted");G+='<span class="sort'+E.sortDir+'">&nbsp;</span>'}}B='<td id="'+O+'" name="'+T+'"'+(C.length>0?' class="'+C.join(" ")+'"':"")+">"+G+"</td>";z[R]=B}}t.each(M,function(aa,ae){var ac=[];for(var ab in ae){if(a(ab)){var X=(ae[ab]||""),U=x(ab),Y=[];if(U==0){Y.push("first");if(E.name.toLowerCase()==E.sortField.toLowerCase()){Y.push("sorted")}}else{var V=E[ab],Z=V.dataType;if(d(U,D)){Y.push("last")}if(V.name.toLowerCase()==E.sortField.toLowerCase()){Y.push("sorted")}if(Z=="BOOLEAN"){X=GBRowHelper.getReadOnlyBooleanValueMarkup(X)}else{if(Z=="MULTIPICKLIST"){X=getSelectedPicklistValuesAsList(X).join("<br/>")}else{if(V.htmlFormatted){X=htmlUnescape(X)}else{if(Z=="CURRENCY"){if(X.length>0){var ad=(ae.isoCode||""),W=(E.multiCurrency?(ad.length>0?(ad+" "):""):GBRowHelper.getCurrencySymbol(ad));X=W+X}}}}}}ac[U]='<td name="'+ab+'"'+(Y.length>0?(' class="'+Y.join(" ")+'"'):"")+">"+X+"</td>"}}A.push('<tr class="lookupData">'+ac.join("")+"</tr>")});var J='<table id="gbLayoutHelper" cellpadding="0" cellspacing="0" border="0"><tr class="layoutHeader">'+z.join("")+"</tr>"+A.join("")+"</table>";t(J).appendTo(t("body"));var S=[],F=t("#gbLayoutHelper").find("tr.layoutHeader");F.find("td").each(function(){var V=t(this),U=V.hasClass("last"),Y=GBHelpers.getElemClasses(V),X=Y.length>0,W=GBLookupHelper.getLookupLayoutColumnWidth(V);S.push('<span name="'+V.attr("name")+'" id="'+V.attr("id")+'" style="height:'+V.height()+"px; width:"+W+'px;"'+(X?' class="'+Y+'"':"")+">"+V.html()+"</span>")});var y=K.attr("name");K.append('<li class="ui-autocomplete-message layoutHeader" name="'+y+'">'+S.join("")+"</li>");e(K)}return I}function e(y){y.find("li.layoutHeader").find("span.s").click(function(){var C=t(this),z=C.parent("li").attr("name"),D=l(z),B="";if(C.find("span").hasClass("sortasc")){B="desc"}else{B="asc"}var A=C.attr("id").replace("sfn_","");D.data("lsf",A);D.data("lsd",B);D.data("keepScrollPosition",true);D.catcomplete("search")})}function j(z,A,B,y){return t("<li class='"+B+"'></li>").data("ui-autocomplete-item",A).append(A.id.length>0?(A.label+y):A.label)}function b(G,M,z,C,E,H){var y,K=[],B=C.lookupColumnCount;for(var O in M){if(a(O)){var J=H.find('td[name="'+O+'"]'),I=J.height(),L=GBLookupHelper.getLookupLayoutColumnWidth(J),A=C[O],P=[],N=x(O);P=P.concat(GBHelpers.getElemClasses(J).split(" "));if(N!=0){var D=A.dataType;if(GBRowHelper.rightAlignValue(D)){P.push("n")}}K[N]='<span name="'+O+'"'+(P.length>0?' class="'+P.join(" ")+'"':"")+' style="height:'+I+"px; width:"+L+'px;">'+J.html()+"</span>";if(!y){y=I}}}var F=t("<li class='"+z+"' "+(M.id.length>0?"style='height:"+y+"px;'":"")+"></li>").data("ui-autocomplete-item",M);return F.append(K.join(""))}function w(A,C){var B=t(A),y=t("#gbLayoutHelper").width()+(C.lookupColumnCount*10)+((C.lookupColumnCount+1)*2)+30;var z="li";if(B.hasClass("lookup-with-searchable-results")&&y<=500){z="li:not(.ui-autocomplete-message)"}B.find(z).css({"max-width":y,width:y})}function q(y){return y.width()+2}function s(K,B,L){var E=l(B),I=getGridInfo(E),O=getMetaCol(E,I),H=O.refToObjectsArr,F="<b>all keywords</b> = will show records containing every specified keyword within the selected Name or Searchable Fields.<br/><b>any keywords</b> = will show records containing any of the specified keywords within the selected Name or Searchable Fields.<br/><b>exact phrase</b> = will show records where the selected Name or any of the Searchable Fields equal the phrase exactly.<br/>";var A=["Group","RecordType"];if(O.isReferenceToExternalObject()){A.push(O.referenceToObjects)}for(var G=0;G<A.length;G++){if(t.inArray(A[G],H)>-1){return}}var N=O.searchFieldType;if(!N){N="name"}if(O.isWhoOrWhatIdField()){H=[E.parents("div.ui-widget").find("select.wId").val()]}var J=B+"__fieldTypeAll",z=B+"__fieldTypeName",D=B+"__matchType",M=H[0],C=lang.nameLbl,y=(O.matchType||"all_keywords");if(GBLookupHelper.objectToNameFieldLabel[M]){C=GBLookupHelper.objectToNameFieldLabel[M]}K.append("<li class='ui-autocomplete-message lsFieldType"+(L==true?" none":"")+"'>"+lang.searchLbl+": <input type='radio' name='fieldType' value='name' id='"+z+"' "+(N=="name"?"checked='checked'":"")+"/><label for='"+z+"'>"+C+"</label> <input type='radio' name='fieldType' value='all' id='"+J+"' "+(N=="all"?"checked='checked'":"")+"/><label for='"+J+"' title='Layout or admin-defined fields of type: text, picklist, email, phone, URL'>"+lang.searchableFieldsLbl+"</label><label class='matchTypeLbl' for='"+D+"'>"+lang.matchLbl+": </label><select name='matchType' id='"+D+"' class='matchType' size='1'><option value='all_keywords' "+(y=="all_keywords"?"selected='selected'":"")+">"+lang.allKeywordsOp+"</option><option value='any_keyword' "+(y=="any_keyword"?"selected='selected'":"")+">"+lang.anyKeywordsOp+"</option><option value='exact' "+(y=="exact"?"selected='selected'":"")+">"+lang.exactPhraseOp+"</option></select><span class='gbInfoIcon tooltip'></span></li>");K.addClass("lookup-with-searchable-results");K.find(".tooltip").tooltipster({content:t(F),position:"top"})}return{getLookupAjaxFn:g,setupLookupResultsFilterLinks:n,setupLookupLayout:o,getBasicLookupResultRow:j,getLookupResultRowWithLayout:b,resizeResultsWithLookupLayout:w,getLookupLayoutColumnWidth:q,addSearchFieldTypeMarkup:s,objectToNameFieldLabel:c}})(window,document,jq);var GBRowHelper=(function(P,e,m){var q={};function h(X,W){return'<td class="lastCol"></td>'}function c(W){return'<td colspan="'+W+'" class="noDataCol">'+lang.noRec+"</td>"}function M(Y){var W=[];for(var X=0;X<Y;X++){W.push("<td></td>")}return W.join("")}function C(W,Z,aa,Y){var X,ac,ab;if(Z.isDataCardField){X=W.parents("tr.dataCard").prev("tr");ac=W.parents("tr:first")}else{X=W.parents("tr:first");ac=W.parents("tr:first").next("tr.dataCard")}if(aa.isDataCardField){ab=ac.find(Y)}else{ab=X.find(Y)}return ab}function O(ag,ak,W,aa,ah,Z,X,Y,ai){var aj=[],ae=[];var af,ad,au,aq,ap,an,ac,ab=[],al="",av;if(ai==null){aj.push('<tr id="'+ag.id+'" class="dr '+ak+'" name="'+ah+'">');aj.push(GBRowHelper.getSelectColHtml(W,false));for(var at=0,ao=aa.length;at<ao;at++){af=aa[at];if(af.renderByDefault()){if(W.hasFlatViewChildren&&af.gridInfoGridId!=W.gridId){if(!af.isDataCardField){aj.push(d(af,["dvc"]))}else{ae=ae.concat(GBDataCard.getDataCardCellHtml(W,af,"&nbsp","dvc"))}continue}an=ag["v"+af.colIndex];ac=getCellProperties(af,an,ag,W,false);ab=getCellClassForContent(af,an,ac.readOnly);al=(ab.length>0?'class="'+ab+'"':"");if(!af.isDataCardField){aj.push('<td name="'+af.fieldId+'" '+al+">"+ac.cellHtml+"</td>")}else{ae=ae.concat(GBDataCard.getDataCardCellHtml(W,af,ac.cellHtml,ab))}}}aj.push(GBRowHelper.getConcatenatedViewColDataHtml(W,ag));aj.push(GBRowHelper.getLastColHtml(W,false)+"</tr>");if(ae.length>0){aj.push(GBDataCard.getDataCardRowHtml(W,ag.id,ah,["dr",ak],ae,false))}av=w(ag,Z,X,Y);aj=aj.concat(av.childHtmlArr);if(X==false&&av.anyChildData){aj.push(getRowHeaderHtml(getParentGridInfo(),false,false))}}else{ad=GBRowHelper.getOrderedRowKeys(ai);for(var am=0;am<ad.length;am++){au=ad[am];aq=ai[au];ae=[];if(am==1){ak+=" dup"}aj.push('<tr id="'+ag.id+'" class="dr '+ak+'" name="'+ah+'" data-childId="'+aq.id+'" data-childRowName="r'+am+'">');aj.push(GBRowHelper.getSelectColHtml(W,false));for(var at=0,ao=aa.length;at<ao;at++){af=aa[at];ab=[];al="";if(af.renderByDefault()){if(af.gridInfoGridId!=W.gridId){ap=aq}else{ap=ag}an=ap["v"+af.colIndex];ac=getCellProperties(af,an,ap,W,false);ab.push(getCellClassForContent(af,an,ac.readOnly,W));al=(ab.length>0?'class="'+ab.join(" ")+'"':"");if(!af.isDataCardField){aj.push('<td name="'+af.fieldId+'" '+al+">"+ac.cellHtml+"</td>")}else{ae=ae.concat(GBDataCard.getDataCardCellHtml(W,af,ac.cellHtml,ab))}}}aj.push(GBRowHelper.getConcatenatedViewColDataHtml(W,ag));aj.push(GBRowHelper.getLastColHtml(W,false)+"</tr>");if(ae.length>0){var ar="r"+am;aj.push(GBDataCard.getDataCardRowHtml(W,ag.id,ah,["dr",ak],ae,false,aq.id,ar))}if(am==0){av=w(ag,Z,X,Y);aj=aj.concat(av.childHtmlArr);if(X==false&&av.anyChildData){aj.push(getRowHeaderHtml(getParentGridInfo(),false,false))}}}}return aj}function d(X,W){return'<td name="'+X.fieldId+'" class="'+W.join(" ")+'"></td>'}function w(ag,ac,aa,ab){var am=[];var W=true;var ai;var ae;var al;var ah;var af;var ao=false;var X=gridInfoMapLen-1;for(var an=0;an<X;an++){ae=an+1;al=gridInfoMap[ae];if(al.isDenormalizedView){continue}ai=GBRowHelper.getChildData(ag,al);ao=true;ah=getChildRowCount(ai);af=(an==(X-1));var ak="crDataContainer";var Y="branch";var ad="";var aj="cr";if(W){ak+=" firstChildGrid";W=false}if(aa&&af){ak+=" lastChildGrid";Y+=" lastBranch";ad=' class="leafTitle"'}if(ai&&readOnlyGrid==false){GBRowHelper.calcMaxLengthForTextFields(al.metaColumns,ai)}if(GBGroupBy.getShouldHideGridRows()){aj+=" none"}am.push('<tr class="'+aj+'" name="r'+ac+'"><td colspan="'+ab+'" class="'+ak+'"><div class="'+Y+'">');am.push(GBHelpers.addChildGridNameAndCount("collapsed",ad,al,ah));if(GBFreezeHeaders.isFreezeHeadersEnabled()){am.push(GBHelpers.addChildGridNameAndCount("expanded fixed none",ad,al,ah))}if(ai!=null){am.push('<div class="childData"><div class="childDataContainer"><table width="100%" cellspacing="0" cellpadding="0" border="0" class="childTable" name="'+al.objId+'">'+getRowHeaderHtml(al,true,false)+GBRowHelper.getChildRowDataHtml(al,ai,ah)+"</table></div></div></div></td></tr>")}else{var Z=GBRowHelper.getColCount(al);am.push('<div class="childData"><div class="childDataContainer"><table width="100%" cellspacing="0" cellpadding="0" border="0" class="childTable" name="'+al.objId+'">'+getRowHeaderHtml(al,true,true)+'<tr class="dr nd">'+GBRowHelper.getNoDataCell(Z)+"</tr></table></div></div></div></td></tr>")}}return{childHtmlArr:am,anyChildData:ao}}function l(ac,af){var aa=ac.metaColumns.length,X=ac.getNumHiddenFields(),ae=ac.getNumDataCardFields(),ad=1,Y=(af?1:0),W=0,ab;if(ac.isParentInfo){for(var Z in gridInfoMap){if(gridInfoMap[Z].isConcatenatedView){W++}}}return aa+ad+W+Y-X-ae}function D(X){var Y=X.metaColumns.length,W=X.getNumHiddenFields();return Y-W}function j(X){var W='<td class="selectAllChk">';if(X){W+='<input class="selectAllChk" type="checkbox"/>'}W+="</td>";return W}function I(X,W){return'<td class="chk">'+f(X)+'<input type="checkbox" class="dl"/>'+GBActions.getActionsButtonMarkup(X,W)+GBDataCard.getDataCardIcon(X)+"</td>"}function f(W){if(W.isParentInfo&&(W.allChildInfos.length-GBFlatView.flatViewObjects.length)>0){return'<span class="icon-arrow"></span>'}return""}function k(W){return W.parents("td:first")}function u(W){return W.parents("tr.dr:first")}function F(W){var X=W.parents("tr.cr"),Y=null;if(X.length>0){Y=m(mainTableJqueryId+' > tbody > tr.dr[name="'+X.attr("name")+'"]')}return Y}function U(W){return W.hasClass("nr")}function t(W){return W.parents("table:first")}function n(W){return'<span class="'+(W.toLowerCase()=="true"?"":"un")+'chkd">&nbsp;</span>'}function y(X,W){return((X=="INTEGER"||X=="DOUBLE"||X=="CURRENCY"||X=="PERCENT")&&!W)}function A(X,W,Z){var Y=X.val();if(m.trim(Y?Y.toString():Y).length==0&&X.is(":disabled")==false){if(W==false||(W==true&&Z.defaultedOnCreate==false)){return true}}return false}function v(Y,W,Z){if(!Y.hasClass("pldisplayed")){var X=Z,aa;Y.find("div.plTxt").each(function(){var ac=m(this),ae=ac.parent(),ab=false;if(ae.length==0){return true}var ad=ac.html();ab=ac.closest("td").hasClass("dvc");if(!ab&&Z.isDenormalizedView){return true}if(ab){X=gridInfoMap[m(mainTableJqueryId).attr("data-childGridId")]}else{X=Z}aa=getMetaCol(ac,X);if(aa.valRequired&&ad.length==0&&(W==false||(W==true&&aa.defaultedOnCreate==false))){ac.click()}});Y.addClass("pldisplayed")}}function B(ac,aa,ae){var ab=ac.item.UnitPrice,Z=ae.closest("td").hasClass("dvc")?".dvc":"";if(ab&&ab.length>0){var W=getMetaColByFieldName(aa,"UnitPrice"),Y=getMetaColByFieldName(aa,"ListPrice");if(W){var X=GBRowHelper.getParentRow(ae).find("td"+Z+'[name="'+W.fieldId+'"]'),af=X.find("input");if(af.length>0){af.val(ab).change()}}if(Y){var ad=GBRowHelper.getParentRow(ae).find("td"+Z+'[name="'+Y.fieldId+'"]');if(ad.length>0){ad.text(ab)}}}}function z(){var X="OpportunityLineItem";for(var Y in gridInfoMap){if(gridInfoMap[Y].gridApiName==X){var W=false;if(Y=="p"){W=true}return b(gridInfoMap[Y],W)}}return false}function b(ac,X){var af="TotalPrice",W="UnitPrice";if(ac.metaColumns.length>0){var Y=null,ae,ah="",ab="";for(var ad=0;ad<ac.metaColumns.length;ad++){if(ah&&ab){break}var ag=ac.metaColumns[ad];if(ag.isHidden==false){if(ag.fieldName==af){ah=ag.fieldId}else{if(ag.fieldName==W){ab=ag.fieldId}}}}if(X){ae=m(mainTableJqueryId).find("tr.dr.nr")}else{ae=m(mainTableJqueryId+' .childData .childTable[name="'+ac.objId+'"] .dr.nr')}ae.each(function(){var al=m(this).find('td[name="'+ah+'"] input'),ai=m(this).find('td[name="'+ab+'"] input'),ak=(al.length==1),aj=m.trim(al.val()),an=(ai.length==1),am=m.trim(ai.val());if(ak&&an){if(aj&&am){Y=ai;return false}else{if(!aj&&!am){Y=ai;return false}}}else{if(ak){if(!aj){Y=al;return false}}else{if(an){if(!am){Y=ai;return false}}}}});if(Y){var aa=Y.position(),Z=m("#invalidOppProdFieldsWarning");Z.css("top",(aa.top*1+23)).css("left",(aa.left*1+10)).show();Y.focus();m(P).scrollTop(aa.top);return true}}return false}function R(Z){var aa=[],ac=[],ab=Z.gridApiName;m.each(rtPicklistMap,function(af){if(af.startsWith(ab)){var ah=af.substring(ab.length+1);var ag=getMetaColByFieldName(Z,ah);if(!ag){return true}if(dependentToControlling[ah]!==undefined){ac.push(ag)}else{aa.push(ag)}}});var ae=aa.length,W=0;while(ac.length>0){var ad=ac[W];aa.splice(ae,0,ad);ac.splice(W,1);var Y=dependentToControlling[ad.fieldName];for(var X=0;X<ac.length&&ac[X].fieldName!==Y;X++){}if(X<ac.length){W=X}else{W=0;ae=aa.length}}return aa}function a(ab,ad){var ae=(ab.closest(".dataCard").length>0?ab.closest("div.cardItem"):ab.closest("td")),Y=ae.closest("tr"),aa=getGridInfo(ae),W=getMetaCol(ab,aa),X=ae.hasClass("dvc"),ac,Z;m.each(R(aa),function(ai,aj){if(!aj.isHidden){ac=aj.getCellContainer();if(X){Z=ac+'.dvc[name="'+aj.fieldId+'"]'}else{Z=ac+'[name="'+aj.fieldId+'"]:not(.dvc)'}var ah=GBRowHelper.getRelatedElement(ab,W,aj,Z),ag=ah.find(":input, .plTxt");var af=[{parent:aa.gridApiName,dependentFields:{}}];af[0].dependentFields[aj.fieldName]=[];updateDependentPickLists(ag,af,aj,aa)}});if(GBFreezeCols.isFreezeColsEnabled()&&!ae.closest("tr.dr").hasClass("nr")&&(ae.closest(".cardItem").length===0)){m(P).trigger("gbFreeze");GBFreezeCols.triggerScrollOnGbMainTable()}}function S(X){X=X||defaultIsoCode;var W=q[X]?q[X]:"";return W}function K(W){q=W}function Q(W,X){if(GBUnrelated.isChildUnrelated(X)){return GBUnrelated.getUnrelatedChildData(W,X)}return W[X.childRowKey]}function E(X){var W=[];for(rowKey in X){if(rowKey.startsWith("r")){W.push(rowKey)}}W.sort(function Y(aa,Z){var ab=aa.replace("r","")*1,ac=Z.replace("r","")*1;return ab-ac});return W}function g(W,ac,ap){var ag=GBUnrelated.isChildUnrelated(W),ah=[];if(ap>0){var ad,af,aj,Z,ai,ae,X=W.metaColumns,Y,aa=E(ac),an;for(var ak=0;ak<aa.length;ak++){ae=ac[aa[ak]];an="r"+ak;var ao=["dr"],ab=[];if(ag){ao.push("ur")}ah.push('<tr id="'+ae.id+'" class="'+ao.join(" ")+'" name="'+an+'">');ah.push(GBRowHelper.getSelectColHtml(W,false));for(var am=0,al=X.length;am<al;am++){ad=X[am];if(ad.renderByDefault()){aj=ae["v"+ad.colIndex];af=' name="'+ad.fieldId+'"';Y=getCellProperties(ad,aj,ae,W,false),Z=getCellClassForContent(ad,aj,Y.readOnly);ai=(Z.length>0?'class="'+Z+'"':"");if(!ad.isDataCardField){ah.push("<td"+af+" "+ai+">"+Y.cellHtml+"</td>")}else{ab=ab.concat(GBDataCard.getDataCardCellHtml(W,ad,Y.cellHtml,Z))}}}ah.push(GBRowHelper.getLastColHtml(W,false)+"</tr>");if(ab.length>0){ah.push(GBDataCard.getDataCardRowHtml(W,ae.id,an,ao,ab,false))}}}return ah.join("")}function G(Y,X){var W=Y.htmlFormatted?m("<div></div>").append(htmlUnescape(X)).html():X;if(X.lastIndexOf("...")>-1&&X.lastIndexOf("...")==X.length-3){return'<div class="lt">'+W+' <span class="spanLink">'+lang.more+"</span></div>"}return W}function p(ag,aa,ac,ah,ad,ab,ae){var Z=aa.closest("tr"),X=(ab?Z.attr("data-childId"):Z.attr("id")),af=ah.getCellContainer(),Y=af+'[name="'+ah.fieldId+'"]',W;if(ad){if(ab){W=jqFrozenAndUnfrozenTables.find('tr.dr[data-childId="'+X+'"]');Y=af+'.dvc[name="'+ah.fieldId+'"]'}else{W=jqFrozenAndUnfrozenTables.find('tr.ur[id="'+X+'"]')}}else{if(ae){if(aa.closest("td").hasClass("dvc")||aa.closest(".cardItem").hasClass("dvc")){return}W=jqFrozenAndUnfrozenTables.find('tr[id="'+X+'"]');Y=af+'[name="'+ah.fieldId+'"]:not(.dvc)'}else{W=m('.childTable tr[id="'+X+'"]')}}if(ah.isDataCardField){W=W.filter(".dataCard")}else{W=W.not(".dataCard")}W.each(function(){if(this!==Z.get(0)){var ai=m(this).closest("tr").find(Y),ak=ai.find("input"),am=aa.val();if(ah.isWhoOrWhatIdField()){var ao=ah.isDataCardField?aa.closest(".cardCell"):aa.closest("td");ai.find("select.wId").val(ao.find("select.wId").val());ak=ai.find("input").val(ao.find("input").val())}else{if(ah.isTypeBoolean()){ak.prop("checked",aa.prop("checked"))}else{if(ah.isTypePicklist()){if(ak.length===0){setupPicklistBehavior(null,ai,false,true);ak=ai.find("select")}ak.val("");var aj=am;if(ah.isTypeMultiPicklist()){aj=(am?am:[])}else{aj=(am&&am.length>0?[am]:[])}var an=aj,al=ah.getPicklistValueToLabelMap();m(an).each(function(ap,aq){an[ap]=al[htmlEscape(aq)].l});setSelectedPicklistOptions(an,ak)}else{if(ah.isTypeReference()){ak.attr("name",aa.attr("name")).val(am)}else{if(ah.isTypeTextArea()&&ak.length==0){return true}else{ak.val(am)}}}}}registerValueChange(ag,ak,null,false,false,true,true)}})}function J(ab,ac){var ad=[];if(!compactView){for(var Y=0,Z=ab.length;Y<Z;Y++){if(ab[Y].readOnly==false&&ab[Y].resizeTextInputField()&&!ab[Y].hasColWidth()){ad.push(ab[Y]);ab[Y].resetMaxTextValueLength()}}}if(ad.length>0){var aa=E(ac);for(var Y=0;Y<aa.length;Y++){var X=ac[aa[Y]],ag,af,ae;for(var W=0,Z=ad.length;W<Z;W++){ag=ad[W];af=X["v"+ag.colIndex];ae=(af==null?"":htmlUnescape(af));if(ae.length>ag.maxTextValueLength){ag.maxTextValueLength=ae.length}}}}}function x(aa,ac,ae){var af=aa,W=(af.find("input").length==0)?af.find("select"):af.find("input"),ab,ad={},Z="",X=[];if(W.length>0){ab=W.val()}else{if(ae&&ae.isDataCardField){ab=af.find(".cardCell").text()}else{ab=af.text()}}if(ab&&ab.length){ab=m.trim(ab);if(ac=="CURRENCY"){ad.hasCurrencySymbol=true;if(W.length==0){X=ab.split("");for(var Y=0;Y<X.length;Y++){if(isNaN(X[Y])&&X[Y]!="-"){Z+=X[Y]}else{break}}ab=ab.replace(Z,"")}else{if(W.length>0){Z=aa.text()}}}ab=ab.split(localeDigitSep).join("");ab=ab.replace(localeDecimalSep,".");ab=(isNaN(ab))?0:ab;if(ab.length>0){ad.cleanValue=(ab*1);ad.currencySymbol=Z;return ad}}return ad}function T(){if(m.isEmptyObject(newData)){return 0}var X=0;for(var W in newData){if(newData[W].cl){X++}}return X}function N(af,ai){var ah="",aj,ab=[],Z,X,aa;for(var ad=0,ag=af.metaColumns.length;ad<ag;ad++){aj=af.metaColumns[ad];if(aj.renderByDefault()&&!aj.isDataCardField){ab=[];Z="";X=aj.fieldLabelForDisplay(af);if(af.hasFlatViewChildren&&aj.gridInfoGridId!=af.gridId){ab.push("dvc");aa=gridInfoMap[aj.gridInfoGridId];X=aj.fieldLabelForDisplay(aa)}else{aa=af}if(ab.length>0){Z='class="'+ab.join(" ")+'" '}var ac=aj.sortable,W=(ai==false&&filterEnabled&&aa.supportsUDF&&aj.filterable),Y=(massUpdatesEnabled&&aj.updateable&&aj.renderForMassUpdates());ah+='<td name="'+aj.fieldId+'" '+Z+">";ah+='<span class="icon-cog gbff gbff-inactive" >&nbsp;</span>';ah+='<span class="fieldLabel">'+X+"</span>";var ae=m.inArray(aj.fieldName.toLowerCase(),aa.sortFields);if(ae>-1){ah+='<span class="sort'+aa.sortDirs[ae]+'"><div class="arrow"></div></span>'}ah+="</td>"}}return ah}function H(aa,X){var W=[],Y="";if(aa.objId!="p"){return""}for(var Z=1;Z<=4;Z++){if(gridInfoMap[Z]==undefined){break}if(gridInfoMap[Z].isConcatenatedView==true){Y='<td class="flatViewHeader" name="'+gridInfoMap[Z].objId+'">';if(X==false&&filterEnabled&&aa.supportsUDF&&aa.metaColumns[0].filterable){Y+='<span class="icon-cog gbff gbff-inactive">&nbsp;</span>'}Y+='<span class="fieldLabel">'+gridInfoMap[Z].concatViewColHeader+"</span>";Y+="</td>";W.push(Y)}}return W.join("")}function s(Z,ac){var ab=[],ad=[],ae,aa="",W=compactView?120:150;if(Z.objId!="p"){return""}for(var Y=1;Y<=4;Y++){if(gridInfoMap[Y]==undefined){break}if(ac!=null){ae=Q(ac,gridInfoMap[Y])}if(gridInfoMap[Y].isConcatenatedView==true){if(ae!=undefined){ad=[];for(var X in ae){if(ae!=undefined&&ae[X].v0!=undefined&&ae[X].v0!=""){ad.push(ae[X].v0)}}aa=ad.join(", ");if(aa.length>W){aa=aa.substring(0,W).trim()+"..."}ab.push('<td class="flatViewCell" name="'+gridInfoMap[Y].objId+'">'+aa+'<div class="spanLink">more</div></td>')}else{ab.push("<td></td>")}}}return ab.join("")}function V(Y){var aj=gridInfoMap[Y.attr("name").charAt(1)];if(m("#relatedColumnWidget").closest("#gbMainTable").length==0){var an=m("<tr/>"),ak=m("<td/>");ak.append(m("#relatedColumnWidget").detach());an.append(ak);m("#gbMainTable").children("tbody").append(an);m("#gbMainTable").on("change",".childTable input.dl",function(){var aq=m(this).closest("tr"),ao=aq.attr("id"),ap=m(this).prop("checked");m('.childTable tr[id="'+ao+'"]').each(function(){if(this!==aq.get(0)){var at=m(this),ar=at.find("input.dl");if(ap){ar.prop("checked",true);at.addClass("selected")}else{ar.prop("checked",false);at.removeClass("selected")}}})});m("#gbMainTable").on("click","#relatedColumnWidget span.closeX",function(){m("#relatedColumnWidget").resizable("destroy")})}var aa;var am=Y.closest("tr");if(am.hasClass("dup")){aa=am.prevUntil(".dr:not(.dup)",".cr").find('.childTable[name="'+Y.attr("name")+'"]')}else{aa=am.nextUntil(".gradientHeader",".cr").find('.childTable[name="'+Y.attr("name")+'"]')}var ab=m("#relatedColumnWidget");var X=ab.find(".header");var ah=ab.find(".frozenTableHeader");var Z=ab.find(".body");ah.empty();Z.empty();var ac=gridData[Y.closest("tr").attr("name")];var af=GBRowHelper.getChildData(ac,aj);var ae=getChildRowCount(af);var ag=aa.clone().addClass("copy").removeAttr("width");var ad=aa.clone().addClass("copy").removeAttr("width");var ai=m("#sidebarCell").hasClass("sideBarCollapsed")||!m("#sidebarCell").length;aa.find("td select").each(function(){var ar=m(this),av=getMetaCol(ar,aj),aq=av.getCellContainer(),at=ar.parents(aq+":first"),au=at.attr("name"),ao=at.closest("tr.dr").attr("name"),ap;if(at.hasClass("dvc")){ap=ad.find('tr.dr[name="'+ao+'"] '+aq+'[name="'+au+'"].dvc select')}else{ap=ad.find('tr.dr[name="'+ao+'"] '+aq+'[name="'+au+'"]:not(.dvc) select')}ap.val(ar.val());if(ar.is(":disabled")){ap.prop("disabled",true)}});ab.attr("data-parent-id",Y.closest("tr").attr("id"));ab.attr("data-parent-row-name",Y.closest("tr").attr("name"));X.find(".title").html("Related "+aj.gridPluralName+"&nbsp;");X.find(".count").text("("+ae+")");ah.append(ag.find(".dr").remove().end());ah.find(".summaryRow").remove();Z.append(ad);ab.find("div.actionsBtn").addClass("flatViewMenuButton");setupActivityLookupFields(ab);addAutocompleteToLookupFields(ab);m("#gbMainTable").on("change",".childTable input.selectAllChk",function(){var ar=m(this),aq=ar.prop("checked"),ap=m("#relatedColumnWidget .body td.chk input.dl"),ao=(ar.closest("#relatedColumnWidget").length==1);if(ao){aa.find("input.selectAllChk").prop("checked",aq)}else{ab.find("input.selectAllChk").prop("checked",aq)}ap.prop("checked",aq);ap.change()});if(GBFreezeCols.isFreezeColsEnabled(true)){Z.find("td.none").removeClass("none")}Z.find("tr.nr").each(function(){newRow=m(this);setEventsForNewRow(newRow)});m("#relatedColumnWidget").resizable({handles:"se",alsoResize:"#relatedColumnWidget .body",minHeight:160,minWidth:200,resize:function(at,au){var ar=au.element.find(".frozenTableHeader");var aq=ar.width();var ap=ar.find(".childTable");var ao=ap.width();if(aq>ao){ap.width(aq)}}});var al=(Y.find(".spanLink").length>0)?Y.find(".spanLink").position():Y.position(),W=ai?al.left-ab.outerWidth():al.left-Y.outerWidth()+m("#sidebarCell").width();pageY=al.top+Y.find(".spanLink").outerHeight();ab.css({left:W,top:pageY,display:"block"});Z.scrollLeft(0).scrollTop(0);ad.css("margin-top",-(ad.find(".childHeaderRow").height()));r(ad,ag);o(Z,ad,ag)}function r(W,X){X.width(W.width()+m.position.scrollbarWidth());W.find(".childHeaderRow td").each(function(Z){var Y=m(this);if(Y.hasClass("selectAllChk")){X.find(".childHeaderRow td.selectAllChk").width(Y.width())}else{if(Y.hasClass("nc")){X.find(".childHeaderRow td:eq("+Z+")").width(Y.width())}else{X.find(".childHeaderRow td[name="+Y.attr("name")+"]").width(Y.width())}}})}function o(Y,W,X){Y.scroll(function(){var Z=m(this).scrollLeft();X.css("margin-left",-(Z))});L(W,X)}function L(W,X){var Y=W.find("textarea");Y.data("x",Y.outerWidth());Y.data("y",Y.outerHeight());Y.mouseup(function(){var Z=m(this);if(Z.outerWidth()!=Z.data("x")||Z.outerHeight()!=Z.data("y")){r(W,X)}Z.data("x",Z.outerWidth());Z.data("y",Z.outerHeight())})}return{getLastColHtml:h,getNoDataCell:c,getEmptyTableCells:M,getParentRowDataHtml:O,getEmptyCell:d,getColCount:l,getColCountForMassUpdate:D,getSelectColHeader:j,getSelectColHtml:I,getParentCol:k,getParentRow:u,getParentRowForChildRow:F,getParentTable:t,isNewRow:U,getReadOnlyBooleanValueMarkup:n,rightAlignValue:y,markFieldAsRequired:A,displayRowPicklistWidgets:v,handleProductSalesPrice:B,processOppProdFields:z,updateRecordTypePicklists:a,getCurrencySymbol:S,getChildData:Q,getChildRowDataHtml:g,getReadOnlyLongTextCellValue:G,updateRecords:p,getOrderedRowKeys:E,calcMaxLengthForTextFields:J,getCleanNumericValue:x,getRecordTypeDependentFields:R,getConcatenatedViewColDataHtml:s,getConcatenatedViewColHeaderHtml:H,positionRelatedWidget:V,setWidthsForRelatedWidgetFrozenHeader:r,getClonedRecordsLength:T,getRowHeaderCells:N,setCurrencySymbolMap:K,getRelatedElement:C}})(window,document,jq);var GBKeyNavigation=(function(l,s,t){var d="UP",v="DOWN",q="LEFT",n="RIGHT",m="td input:not(.dl):not(.selectAllChk):not(.grpChk), td textarea:not(.truncated), td.pl div.plTxt, td.plOn select, td select.wId.whoId, div.pl select",o="input:not(.selectAllChk):not(.chk), textarea:not(.truncated), div.plTxt, select",u="div.cardItem:visible",A="td:not(.lastCol):not(.chk):not(.selectAllChk):not(.fixedHeaderContainer):not(.noDataCol):visible",z="div.cardCell:visible",b="tr.dr:not(.nd):not(.groupByRow):not(.gradientHeader):not(.summaryRow):not(.childHeaderRow):visible, tr.cr:visible:not(.groupByRow):not(.gradientHeader):not(.summaryRow):not(.childHeaderRow)",c="table.childTable tr.dr:not(.nd):visible";function k(D){var E=D?t(D).find(m):t("#gbMainTable").find(m);j(E)}function j(D){t(D).keydown(function(E){if(!E||E.shiftKey){return}if(E.keyCode=="38"){h(E,this,d)}else{if(E.keyCode=="40"){h(E,this,v)}else{if(E.keyCode=="37"){h(E,this,q)}else{if(E.keyCode=="39"){h(E,this,n)}}}}})}function C(F){var G=t(F).closest("tr").hasClass("dataCard"),E=G?t(F).closest("div.cardItem"):t(F).closest("td");F.click();var D=t(E).find("select");j(D);D.focus()}function h(G,F,J){var I=f(F),E=t(F).is("select"),D;if(I.isTypePicklist()||E){if(J==d||J==v){return}G.preventDefault()}if(I.isTypeReference()){if(J==d||J==v){return}}if(!I.isTypeBoolean()&&!I.isTypeSinglePicklist()&&!I.isTypeMultiPicklist()&&!I.isTypePicklist()&&!E){var H=B(F,I);if((J==q&&H.indexOf("START")<0)||(J==n&&H.indexOf("END")<0)){return}}switch(J){case d:D=p(F,false);break;case v:D=p(F,true);break;case q:D=w(F,false);break;case n:D=w(F,true);break}if(D!==F){a(F);r(D)}}function B(F,H){var G="";if(H.isTypeBoolean()){return"START:MIDDLE:END"}if(H.isTypePicklist()){return G}var D=F.value.length,E=F.selectionStart?F.selectionStart:0;if(E==0&&D==0){G+="START:END"}else{if(E==0){G+="START"}else{if(E==D){G+="END"}else{if(E>0&&E<D){G+="MIDDLE"}}}}return G}function p(G,J){var O=f(G),E;var N=t(G).closest("td").attr("name"),K=t(G).closest("tr.dr"),M;if(J){M=e(K,false)}else{M=x(K,false)}if(!M){return G}var L=t(K).closest("table").attr("name"),D=t(M).closest("table").attr("name"),H=t(G).closest("td").hasClass("dvc")?true:false,F;if(t(M).hasClass("dataCard")){F=t(M).find(z).has(o)[0]}else{if(L==D&&!O.isDataCardField){var I=H?".dvc":"";F=t(M).find("td"+I+'[name^="'+N+'"]')[0]}else{F=t(M).find(A).has(o)[0]}}if(F&&H&&t(F).children().length==0){F=t(M).find(A)[0]}if(F){E=t(F).find(o)}if(!E||E.length==0){return G}else{E=E[0]}return E}function w(G,J){var H=f(G),I=H.isDataCardField?t(G).closest("div.cardItem"):t(G).closest("td"),F,D;if(H.isTypeDateTime()||H.isWhoIdField()||H.isWhoOrWhatIdField()){if(J){D=t(G).next("input")[0]}else{D=t(G).prev("input, select")[0]}if(D){return D}}if(H.isDataCardField){if(J){F=t(I).nextAll(u).has(o)[0]}else{F=t(I).prevAll(u).has(o)[0]}}else{if(J){F=t(I).nextAll(A).has(o)[0]}else{F=t(I).prevAll(A).has(o)[0]}}if(F){D=t(F).find(o)}else{var E=t(G).closest("tr.dr");if(J){cellInNextRow=g(E)}else{cellInNextRow=y(E)}if(!cellInNextRow){return G}D=t(cellInNextRow).find(o)}if(D.length>0){if(J){D=D[0]}else{D=D[D.length-1]}}return D}function g(F){var G=e(F,true),E;if(G){var D=t(G).find(A).has(o);if(D.length>0){E=D[0]}else{E=g(G)}}return E}function e(E,I){var H=t(E).prop("id"),F=t(E).closest("table#gbMainTableClone").length>0,G;if(F&&I){return t("#gbMainTable tr#"+H+":visible")[0]}var J=t("#gbMainTableClone").length>0;if(J&&I){return t("#gbMainTableClone tr#"+H).nextAll("tr.dr:visible")[0]}G=t(E).nextAll(b)[0];if(!G){var D=t(E).closest("table").hasClass("childTable");if(D){G=t(E).closest("table.childTable").closest("tr.cr").nextAll(b)[0]}}if(G){if(t(G).hasClass("cr")){nextChildRow=t(G).find(c)[0];if(nextChildRow){return nextChildRow}else{G=e(G,I)}}}return G}function y(E){var G=x(E,true),F;if(G){var D=t(G).find(A).has(o);if(D.length>0){F=D[D.length-1]}else{F=y(G,true)}}return F}function x(F,D){var I=t(F).prop("id"),G=t(F).closest("table#gbMainTableClone").length>0,K;if(G&&D){return t("#gbMainTable tr#"+I+":visible").prevAll("tr.dr:visible")[0]}var J=t("#gbMainTableClone").length>0;if(J&&D){return t("#gbMainTableClone tr#"+I)[0]}K=t(F).prevAll(b)[0];if(!K){var E=t(F).closest("table").hasClass("childTable");if(E){K=t(F).closest("table.childTable").closest("tr.cr").prevAll(b)[0]}}if(K){if(t(K).hasClass("cr")){prevChildRow=t(K).find(c);var H=prevChildRow.length;if(H>0){return prevChildRow[H-1]}else{K=x(K,D)}}}return K}function f(E){var D=getGridInfo(t(E)),F=getMetaCol(t(E),D);return F}function r(D){var E=f(D);if(E.isTypePicklist()){C(D)}else{D.focus();if(!E.isTypeBoolean()&&D.setSelectionRange){l.setTimeout(function(){D.setSelectionRange(0,0)},0)}}}function a(D){var E=f(D);D.blur();if(E.isTypeReference()&&t(D).hasClass("ui-autocomplete-input")){t(".ui-autocomplete").hide()}else{if(E.isTypeDate()||E.isTypeDateTime()){t("#ui-datepicker-div").hide()}}}return{initFieldsArrowNavigation:k,initNavigationEventHandler:j}})(window,document,jq);var GBUnrelated=(function(j,k,f){var h,n,a={};function o(p,q){h=p||{};n=q}function d(p){if(n){var q=n[p.objectNameWithoutFk];if(q&&q.unrelatedField==p.getFkFieldName()){return true}}return false}function g(p){if(n){var q=n[p.gridApiName];if(q&&q.unrelatedField==p.getFkFieldName()){return q.parentField}}return null}function e(v,A){var z=getParentGridInfo(),u=getMetaColByFieldName(z,v);if(z.hasDataCardFields&&!u.isDataCardField&&A.hasClass("dataCard")){A=A.prev()}var q=u.getCellContainer(),r=A.find(q+'[name="'+u.fieldId+'"]:not(.dvc)'),y=r.find(":input"),w=y.length>0?y.val():r.text().trim();if(u.isTypeReference()){var x=null;if(y.length>0){x=getLookupIdByValue(z,u,y,w)}if(x==null){var p=u.fieldId+"Id",t=gridData[A.attr("name")],s=(t?t[p]:null);if(s){w=s}}else{w=x}}return w}function m(p,r,q){var s=g(p);return r+":"+e(s,q)}function l(y,p){var v=y.id,t=h[v],w=gridData[p.childRowKey],q={},r=false,x=v+"_"+p.childRowKey;if(a.hasOwnProperty(x)){return a[x]}if(t&&t.length){for(var u=0;u<t.length;u++){for(rowCounter in w){var s=w[rowCounter];if(s.id==t[u]){q[rowCounter]=s;r=true;break}}}}if(r==false){q=null}a[x]=q;return q}function c(x,t){var u=x.attr("name"),p=x.attr("id"),w=false,r,s,y,q,v;for(r in newData){s=newData[r];if(s.nm!=getParentObjectName()){if(s.pId.startsWith(p)){y=s.nm;q=GBGridInfoHelper.getGridInfoByFullObjectName(y);if(GBUnrelated.isChildUnrelated(q)&&GBUnrelated.getFkOnParent(q)==t){s.pId=GBUnrelated.getParentIdentifierForChildData(q,p,x)}}}}}function b(q){for(var p in n){if(n[p].parentField&&n[p].parentField==q){return true}}return false}return{init:o,isChildUnrelated:d,getUnrelatedChildData:l,getFkOnParent:g,getFkValueOnParent:e,getParentIdentifierForChildData:m,updateUnrelatedChildData:c,fieldIsCrossRefForeignKey:b}})(window,document,jq);var GBActions=(function(az,T,v){var f={SINGLE:"single",MULTI:"multi",BATCH:"batch",GLOBAL:"global"},B={IN_GRID:"ingrid",WINDOW_OVERLAY:"windowoverlay",NEW_WINDOW:"newwindow",REPLACE_GRID:"replacegrid",BACKGROUND:"background"},P={CONGA_COMPOSER:"composer",CONGA_CONDUCTOR:"conductor",BUTTON:"button",FORMULA:"formula",URL:"url",PAGE:"page",GRID:"grid"},z={MENU:"Menu",BUTTON:"Button"},L={RETURN_URL:"retURL"},M="Feed",aG=["Report","Profile","ContentVersion","Partner","AccountPartner","OpportunityPartner","CaseTeamMember","LeadHistory","ProcessInstanceHistory","OpportunityFieldHistory","ProcessInstance"],l=["Community","EventRelation","EventAttendee","Report","OpportunityFeed","AccountFeed","CaseFeed","ContactFeed","LeadFeed","OpportunitySplit"],aA=null,n=null,s=null,av=null,ag={},C={},X,h;function e(aP){try{h=JSON.parse(aP)}catch(aO){h={}}}function ao(){v(T).click(function(aY,aZ){aE();aB();if(isInMobileView){aH();q()}});if(gridData&&gridInfoMap){var aT={};for(var aQ=0,aW=h.length;aQ<aW;aQ++){var aO=h[aQ],aV=aO.objectApiName;if(!aT[aV]){aT[aV]=[]}aT[aV].push(aO);C[aO.id]=aO}Z();var aR=false;var aX=v("ul.standardPageActions li");if(aX.length>0){aR=true}for(var aU in gridInfoMap){var aS=gridInfoMap[aU],aV=aS.gridApiName;if(aU=="p"&&filteringByParent==true){continue}if(aT[aV]&&!aS.customActions){aS.customActions=aT[aV].sort(function aP(a0,aY){var aZ=aY.actionLabel.toLowerCase(),a1=a0.actionLabel.toLowerCase();if(aZ<a1){return 1}return -1});if(!aR&&k(aS)){aR=true}}}if(aR){aa()}else{at()}A();p();ah()}else{at()}}function A(){var aO=getParentGridInfo(),aT=gridInfoMapLen-1,aP="";if(filteringByParent==false&&aO.customActions){aP+=j(aO.customActions,aO)}for(var aR=0;aR<aT;aR++){var aS=aR+1,aQ=gridInfoMap[aS];if(aQ.customActions){aP+=j(aQ.customActions,aQ)}}if(aP.length>0){v(".gridBtnsContainer").append(aP)}if(filterEnabled){GBQuickFilter.buildQuickFilterBtns()}}function j(aQ,aS){var aV="";for(var aR=0,aW=aQ.length;aR<aW;aR++){var aX=aQ[aR],aO=["gbBtn","pageActionsBtn","customBtn"],aT=["gbBtnDisabled","none","pageActionsBtn","customBtn"],aU="",aP=aX.actionType.toLowerCase();if(aP!=f.SINGLE&&aX.actionLocation==z.BUTTON&&(aS.isPivotedGrid!=true||(aS.isPivotedGrid==true&&aP!=f.BATCH))){if(aS.isDenormalizedView){aO.push("dvcAction");aT.push("dvcAction");aU='data-childGridId="'+aS.gridId+'"'}aV+='<button type="button" class="'+aO.join(" ")+'" name="'+aX.id+'" '+aU+">"+htmlEscape(aX.actionLabel)+'</button><button type="button" class="'+aT.join(" ")+'" name="'+aX.id+'" '+aU+">"+htmlEscape(aX.actionLabel)+"</button>"}}return aV}function aB(){if(aA){aA.hide();v(".mainTable").find("div.actionsBtn, .pdr .pgc .icon-ellipses").removeClass("btn-active")}}function q(){if(av){av.hide();v("button.groupingsBtn.gbBtn").removeClass("btn-active")}}function aE(){if(n){n.hide();v("button.pageActionsBtn.gbBtn").removeClass("btn-active")}}function aH(){if(s){s.hide();v("button.showBtn.gbBtn").removeClass("btn-active")}}function p(){v("div.gbPage").on("click","ul.gbActionsMenu li.a-custom, .gridBtnsCell .customBtn",function(){var aU=v(this),aO=aU.attr("name"),aT=C[aO],a3=aT.contentSource.toLowerCase(),aR=aT.actionType.toLowerCase();GBMixpanel.track("Grid Custom Action",{Type:aT.actionType,Source:aT.actionLocation||"",Level:aT.objectApiName==getParentObjectName()?"Parent":"Child"});if(aT.confirmAction==true){var aY=aT.confirmMessage||lang.simpleConfirmMsg;if(!confirm(aY)){return}}var aS=af(aT.content);if(!aS){alert(lang.getActionFailed(aT.actionLabel));return}if(aR==f.SINGLE){var aX=F(aU),aQ=(aU.hasClass("dvcAction")?aX.attr("data-childId"):aX.attr("id")),aZ=aO+"_"+aQ;if(aX.find("td.chk input").prop("checked")==true){}else{aX.find("td.chk input").click()}if(ag[aZ]){var a1=ag[aZ];V(aT,a1)}else{if(a3==P.BUTTON||a3==P.CONGA_COMPOSER||a3==P.FORMULA){var aV=aT.displayBehavior.toLowerCase(),a0;if(aV==B.NEW_WINDOW){a0=c(aT)}else{if(aV==B.WINDOW_OVERLAY){a0=aF(aT)}else{v(T.body).css("cursor","progress")}}b(aT,aQ,function(a7){var a6,a8=false;if(a7.length>0){a6=a7[0].value;var a5=af(a6);if(a5==true){ag[aZ]=a6}else{a8=true;alert("Failed to launch "+aT.actionLabel+". No content was returned by the formula field. Check the formula value for this record try again.")}}else{a8=true;alert("Failed to launch "+aT.actionLabel+". No content was returned by the formula field. Check the formula or action configuration and try again.")}if(a8){v(T.body).css("cursor","");if(aV==B.NEW_WINDOW||aV==B.WINDOW_OVERLAY){a0.close()}return}if(aV==B.NEW_WINDOW||aV==B.WINDOW_OVERLAY){ap(a0,a6)}else{v(T.body).css("cursor","");V(aT,a6)}},function(a5,a7,a6){v(T.body).css("cursor","");if(a7=="error"||a7=="abort"||a7=="parsererror"){if(aV==B.NEW_WINDOW||aV==B.WINDOW_OVERLAY){a0.close()}alert(lang.getActionFailed(aT.actionLabel))}})}else{var a4;switch(a3){case P.URL:a4=U;break;case P.PAGE:a4=al;break;case P.GRID:a4=N;break}if(v.isFunction(a4)){var a1=d(aT,aQ,false,aZ,a4);V(aT,a1)}}}}else{if(aR==f.BATCH){var aW=aJ(aT.objectApiName,aU);if(aW.length==0){var a2=getGridInfoByApiName(aT.objectApiName).gridName;alert(lang.getSelectRecordsForObject(a2));return}var aP=aW.join(","),a1;switch(a3){case P.CONGA_CONDUCTOR:a1=w(aT,aP);break;case P.URL:a1=U(aT,aP);break;case P.PAGE:a1=al(aT,aP);break;case P.GRID:a1=N(aT,aP);break}if(a1){V(aT,a1)}}else{if(aR==f.GLOBAL){var aZ=aO,a4;switch(a3){case P.URL:a4=U;break;case P.PAGE:a4=al;break;case P.GRID:a4=N;break}if(v.isFunction(a4)){var a1=d(aT,null,true,aZ,a4);V(aT,a1)}}}}})}function af(aO){return(aO&&aO.length>0)}function J(aQ,aR,aW){var aO=aQ.id,aU,aP,aV;for(var aS=0,aT=aR.length;aS<aT;aS++){aP=aR[aS];aU=aO+"_"+aP;aV=d(aQ,aP,true,aU,aW);V(aQ,aV)}}function d(aT,aQ,aO,aR,aS){var aP;if(aO){aP=ag[aR]}if(aP){return aP}aP=aS(aT,aQ);ag[aR]=aP;return aP}function aJ(aQ,aT){var aP=v(mainTableJqueryId+" td input.dl:checked"),aS=[],aR=false,aO;if(aT&&aT.hasClass("dvcAction")){aR=true;aO=aT.attr("data-childGridId")}if(aP.length>0){aP.each(function(){var aV=GBRowHelper.getParentRow(v(this)),aW=(aR?aV.attr("data-childId"):aV.attr("id")),aU=(aR?gridInfoMap[aO].gridApiName:getGridInfo(aV).gridApiName);if(aU==aQ&&aW){aS.push(aW)}})}return aS}function w(aS,aQ){var aR="https://conductor.appextremes.com/apps/Conga/Conductor/LaunchCC.aspx",aP="MOID";if(!aS.idParamName||aS.idParamName!=aP){aS.idParamName=aP}var aO=y(aS,aR,aQ)+"&SessionId="+sId+"&ServerUrl="+serverUrl160+"&UrlFieldName="+aS.content;return aO}function Y(aO){return aO.replace(/\{(.*?)\}/gi,function(aP,aQ){return GBHelpers.getParamValue(aQ)})}function N(aQ,aP){var aO=baseRelativeURLForVFManaged+"Grid?gname="+aQ.content;aO=y(aQ,aO,aP);if((aQ.displayBehavior.toLowerCase()==B.IN_GRID)||(aQ.displayBehavior.toLowerCase()==B.REPLACE_GRID&&az!=top)){if(aO.indexOf("&sh=0")==-1){aO+="&sh=0"}if(aO.indexOf("&ssb=0")==-1){aO+="&ssb=0"}}return Y(aO)}function al(aQ,aP){var aX=inCommunities?"gblite__":"gblite.",aT=inCommunities?"GBLite__":"GBLite.",aS=aQ.content,aO=aS.split("__"),aV="c.",aW=aS;if(aO.length>1){aV=aO[0]+".";aW=aO[1]}var aU=pageURL=az.location.href,aR=(aU.indexOf(aX)>-1)||(aU.indexOf(aT)>-1);if(!inCommunities){pageURL=aU.replace(aX,aV).replace(aT,aV);pageURL=pageURL.substring(0,pageURL.toLowerCase().indexOf("grid?"));if(!aR){pageURL+=aS}else{pageURL+=aW}}else{if(aR){pageURL=pageURL.substring(0,pageURL.toLowerCase().indexOf("gblite__grid?"))}else{pageURL=pageURL.substring(0,pageURL.toLowerCase().indexOf("grid?"))}pageURL+=aS}pageURL=y(aQ,pageURL,aP);return Y(pageURL)}function y(aS,aW,aR){var aO=(aS.idParamName?aS.idParamName.split(","):[]),aT=aW;if(aO.length>0){for(var aU=0,aP=aO.length;aU<aP;aU++){var aV=v.trim(aO[aU]),aQ=aR;if(aV==L.RETURN_URL){aQ=encodeURIComponent(baseRelativeURL+aR)}aT=aq(aS,aT,aV,aQ)}}return aT}function aq(aU,aQ,aR,aS){var aP=aQ;if(aS&&aS.length>0){var aO="?"+aR+"=",aT="&"+aR+"=";if(aP.indexOf(aO)>-1||aP.indexOf(aT)>-1){aP=aP.split(aO).join(aO+aS);aP=aP.split(aT).join(aT+aS)}else{aP+=(aP.indexOf("?")>-1?"&":"?")+aR+"="+aS}}return aP}function U(aQ,aP){if(aQ.content.startsWith("/")&&!aQ.content.startsWith(baseRelativeURL)){aQ.content=aQ.content.replace(aQ.content.charAt(0),baseRelativeURL)}var aO=aQ.content;aO=y(aQ,aO,aP);return Y(aO)}function b(aU,aT,aO,aS){var aQ=aU.contentSource.toLowerCase(),aR=aU.actionType.toLowerCase(),aP=((aQ==P.BUTTON)?"actionButton":"actionFormula");v.ajax({url:lookupAjaxResponderPageURL+"?reqtype="+aP+"&id="+aT+"&dfn="+aU.content+"&don="+aU.objectApiName,dataType:"json",success:function(aV){if(!aV||!aV.url){cout("no data returned for button/link: "+aU.objectApiName+"."+aU.content)}else{v.each(aV.url,function(aX,aW){if(aW.value.startsWith("/")&&!aW.value.startsWith(baseRelativeURL)){aW.value=aW.value.replace(aW.value.charAt(0),baseRelativeURL)}aW.value=Y(aW.value)});aO(aV.url)}},error:function(aV,aX,aW){aS(aV,aX,aW)}})}function c(aP){var aO=az.open("");aO.document.write("Launching "+htmlEscape(aP.actionLabel)+"...");aO.document.close();return aO}function aF(aP){var aO=aC("",aP);aO.document.write("Launching "+htmlEscape(aP.actionLabel)+"...");aO.document.close();return aO}function aC(aX,aQ){var aP=az.screen.width,aR=az.screen.height,aO=Math.round(aP*0.75),aS=Math.round(aR*0.65),aT=Math.round((aR-aS)/3),aU=Math.round((aP-aO)/2);if(aQ){if(!isNaN(aQ.overlayHeight)&&aQ.overlayHeight!=""){if(aQ.overlayHeightUnit=="px"){aS=aQ.overlayHeight}else{aS=aR*(aQ.overlayHeight/100)}}if(!isNaN(aQ.overlayWidth)&&aQ.overlayWidth!=""){if(aQ.overlayWidthUnit=="px"){aO=aQ.overlayWidth}else{aO=aP*(aQ.overlayWidth/100)}}if(!isNaN(aQ.overlayTopOffset)&&aQ.overlayTopOffset!=""){if(aQ.overlayTopOffsetUnit=="px"){aT=aQ.overlayTopOffset}else{aT=aR*(aQ.overlayTopOffset/100)}}if(!isNaN(aQ.overlayLeftOffset)&&aQ.overlayLeftOffset!=""){if(aQ.overlayLeftOffsetUnit=="px"){aU=aQ.overlayLeftOffset}else{aU=aP*(aQ.overlayLeftOffset/100)}}}var aV="resizable=yes,scrollbars=yes,status=yes,menubar=no,toolbar=no,directories=no,height="+aS+",width="+aO+",top="+aT+",left="+aU;var aW=az.open(aX,"",aV);return aW}function ap(aO,aP){aO.location.href=aP}function V(aR,aQ){var aP=aR.displayBehavior.toLowerCase();switch(aP){case B.IN_GRID:var aO=O();X.data("actionDef",aR);hideMessage();v("#actionsFrameBox .header .title").text(aR.actionLabel);D(false);aO.attr("src",aQ).load(function(){D(true)});ai(true,aR);break;case B.WINDOW_OVERLAY:aC(aQ,aR);break;case B.NEW_WINDOW:az.open(aQ);break;case B.REPLACE_GRID:az.location.href=aQ;break}}function x(aQ,aO){var aP=v("#actionsFrameBox div.loaderStatus");if(aO==true){aP.show()}else{aP.hide()}}function ai(aQ,aP){if(aQ==true){v("#gbOverlay").show();toggleButtonState(true);if(X.hasClass("resized")==false){var aV=v(az).width(),aS=v(az).height();var a0=aS*0.85,aU=aV*0.85;if(aP){if(!isNaN(aP.overlayHeight)&&aP.overlayHeight!=""){a0=(aP.overlayHeight+aP.overlayHeightUnit)}if(!isNaN(aP.overlayWidth)&&aP.overlayWidth!=""){aU=(aP.overlayWidth+aP.overlayWidthUnit)}}X.css({height:a0,width:aU})}X.show();X.center();if(aP){if(!isNaN(aP.overlayTopOffset)&&aP.overlayTopOffset!=""){var aX=(aP.overlayTopOffset+aP.overlayTopOffsetUnit);X.css({top:aX,"margin-top":"0px"})}if(!isNaN(aP.overlayLeftOffset)&&aP.overlayLeftOffset!=""){var aZ=(aP.overlayLeftOffset+aP.overlayLeftOffsetUnit);X.css({left:aZ,"margin-left":"0px"})}}var aY=v("#actionsBoxResizeDiv"),aW=aY.height(),aT=aY.find("div.header").height(),aR=v("#actionsBoxContent, #actionsFrame"),aO=10;aR.css({height:(aW-aT-aO)})}else{X.hide();v("#gbOverlay").hide();toggleButtonState(false)}}function D(aO){if(aO){v("#actionsFrame").show();x(null,false)}else{v("#actionsFrame").hide();x(null,true)}}function ac(){if(X){ai(false)}}function O(){var aO=v("div.gbPage #actionsFrame");if(aO.length>0){X=v("#actionsFrameBox");return aO}v(aM()).appendTo("div.gbPage");aO=v("div.gbPage #actionsFrame");X=v("#actionsFrameBox");X.find("span.closeX").click(function(){ai(false)});X.find("span.closeRefresh").click(function(){ai(false);getFirstSubmitButton("refreshBtn").click()});X.find(".header span.ui-icon-extlink").click(function(){var aR=X.data("actionDef"),aQ=v("#actionsFrame").attr("src"),aP=aR.contentSource.toLowerCase();if(aP==P.GRID){aQ=aQ.replace("&sh=0","");aQ=aQ.replace("&ssb=0","")}ai(false);az.open(aQ)});v("#actionsFrameBox").draggable({handle:"div.header",cancel:"#actionsBoxContent, .loaderStatus",start:function(){D(false)},stop:function(){D(true)}});v("#actionsBoxResizeDiv").resizable({handles:"se",alsoResize:"#actionsFrameBox, #actionsBoxContent, #actionsFrame",cancel:"#actionsBoxContent",minHeight:200,minWidth:500,start:function(){D(false)},stop:function(){D(true);if(X.hasClass("resized")==false){X.addClass("resized")}}});return aO}function aM(){return'<div id="actionsFrameBox" class="msgBox actionsFrameBox boxShadow"><div id="actionsBoxResizeDiv"><div class="header"><span class="title"></span><span class="ui-icon ui-icon-white ui-icon-extlink" title="'+lang.openInNewWindow+'"></span><span class="closeX">'+lang.closeLabel+'</span><span class="closeRefresh">'+lang.closeRefreshLabel+'&nbsp;|&nbsp;</span><br clear="all"/></div><div id="actionsBoxContent" class="boxContent frameScrollFix"><div class="msgBox boxShadow loaderStatus"><div class="msgBody"><span class="icon-spinner"></span><span class="msgText">'+lang.loading+'</span></div></div><iframe src="" id="actionsFrame" scrolling="auto" height="100%" width="100%" frameborder="0"></iframe></div></div></div>'}function at(){v("button.pageActionsBtn").remove();v("ul.standardPageActions").remove()}function aL(){v("ul.standardPageActions li.invalid").remove();var aO=v("ul.standardPageActions");var aP=v("input.saveBtn:not(.gbMenuBtn,.none)");if(aP.length==0){aO.find("li.saveReturnItem").remove()}if(getParentGridInfo().rowCnt==0){aO.find("li.deleteItem, li.deleteAllItem").remove()}}function ah(){if(!getParentGridInfo().getHasGroupByFields()||getParentGridInfo().rowCnt<1){return}var aO=v(".groupingsBtnContainer"),aP=aO.find("button.groupingsBtn.gbBtn");aP.removeClass("none");aP.click(function(aQ){aQ.stopPropagation()});aO.mouseleave(function(aR){var aQ=v(this).find("button.groupingsBtn.gbBtn");if(aQ.hasClass("btn-active")){q();return}});aO.mouseenter(function(aV){var aU=v(aV.target);if((aU.hasClass("gbBtnDisabled"))||(aU.closest("button").hasClass("gbBtnDisabled"))){return}var aT=v(this).find("button.groupingsBtn.gbBtn");v("button.groupingsBtn.gbBtn").removeClass("btn-active");aT.addClass("btn-active");var aS;if(v(this).find("div.groupingsMenu").length==0){v('<div class="groupingsMenu"/>').appendTo(v(this));aS=aI();if(aS.length>0){v(this).find("div.groupingsMenu").html(aS)}}else{aS=v(this).find("div.groupingsMenu").html()}if(aS.length>0){av=v(this).find("div.groupingsMenu ul").menu({select:function(aY,aX){if(aY&&aY.originalEvent&&aY.originalEvent.target&&v(aY.originalEvent.target).hasClass("groupingsItemTxt")){return}aY.stopPropagation()}});av.css({"min-width":aP.width()});var aQ=v(this).parents("div.gridBtns"),aR=aQ.hasClass("top")?"fit":"fit flip",aW="0";topAddition=((v.browser.webkit===true)?"7":"5");av.show().position({my:"left-"+aW+" top+"+topAddition,at:"left bottom",of:this,collision:aR})}});ad()}function aa(){var aP=v(".pageActionsBtnContainer");var aO=v("button.pageActionsBtn.gbBtn");aO.removeClass("none");aO.click(function(aQ){aQ.stopPropagation()});aP.mouseleave(function(aR){var aQ=v(this).find("button.pageActionsBtn.gbBtn");if(aQ.hasClass("btn-active")){aE();return}});aP.mouseenter(function(aW){var aV=v(aW.target);if((aV.hasClass("gbBtnDisabled"))||(aV.closest("button").hasClass("gbBtnDisabled"))){return}var aT=v(this).find("button.pageActionsBtn.gbBtn");v("button.pageActionsBtn.gbBtn").removeClass("btn-active");aT.addClass("btn-active");var aX;if(v(this).find("div.pageActionsMenu").length==0){v('<div class="pageActionsMenu"/>').appendTo(v(this));aX=aj();if(aX.length>0){v(this).find("div.pageActionsMenu").html(aX);var aU=v("ul.standardPageActions").children().clone(true);if(aU.length>0){v(this).find("div.pageActionsMenu").find("li.obj-header:first").removeClass("obj-header").addClass("obj-header-secondary").addClass("ui-state-disabled");v(this).find("div.pageActionsMenu .gbPageActionsMenu").prepend(aU)}}}else{aX=v(this).find("div.pageActionsMenu").html()}if(aX.length>0){n=v(this).find("div.pageActionsMenu ul").menu();n.css({"min-width":aO.width()});var aQ=v(this).parents("div.gridBtns"),aR=aQ.hasClass("top")?"fit":"fit flip",aS="0";topAddition=((v.browser.webkit==true)?"7":"5");n.show().position({my:"left+"+aS+" top+"+topAddition,at:"left bottom",of:this,collision:aR})}});ar()}function ar(){v("li.saveReturnItem").click(function(aO){v("tr[name=r0]").find("td.chk").find("input.dl").focus();getFirstSubmitButton("saveReturnBtn").click();aO.preventDefault()});v("li.deleteItem").click(function(aO){if(getParentGridInfo().hasFlatViewChildren&&v(mainTableJqueryId).find('> tbody > tr.dr .chk input[type="checkbox"]:checked').length>0){alert("Delete is not yet supported in a flat view on the parent or on flat view child objects.");return}getFirstSubmitButton("delBtn").click();aO.preventDefault()});v("li.deleteAllItem").click(function(aO){getFirstSubmitButton("delAllBtn").click();aO.preventDefault()});GBExportWidget.setupActionMenuClickEvent();GBUserDefinedCols.setupActionMenuClickEvent()}function Z(){var aP=v(".showBtnContainer"),aO=aP.find("button.showBtn.gbBtn"),aQ=aP.find("button.showBtn.gbBtnDisabled"),aR=(getParentGridInfo().allChildInfos.length-GBFlatView.flatViewObjects.length);if((aR>0==true&&filteringByParent==false)||(filteringByParent==true&&getParentGridInfo().rowCnt>0&&aR>1)){aO.removeClass("none")}else{aO.remove();aQ.remove();if(GBHelpers.isGroupByEnabled()){v(".gbBtnGroup.lastBtnGroup").addClass("standaloneGroupingsBtn")}else{v(".gbBtnGroup.lastBtnGroup").addClass("none")}}aO.click(function(aS){aS.stopPropagation()});aP.mouseleave(function(aT){var aS=v(this).find("button.showBtn.gbBtn");if(aS.hasClass("btn-active")){aH();return}});aP.mouseenter(function(aX){var aW=v(aX.target);if((aW.hasClass("gbBtnDisabled"))||(aW.closest("button").hasClass("gbBtnDisabled"))){return}var aV=v(this).find("button.showBtn.gbBtn");v("button.showBtn.gbBtn").removeClass("btn-active");aV.addClass("btn-active");var aY;if(v(this).find("div.showMenu").length==0){v('<div class="showMenu"/>').appendTo(v(this));aY=aN();if(aY.length>0){v(this).find("div.showMenu").html(aY)}}else{aY=v(this).find("div.showMenu").html()}if(aY.length>0){s=v(this).find("div.showMenu ul").menu({select:function(a0,aZ){if(a0&&a0.originalEvent&&a0.originalEvent.target&&v(a0.originalEvent.target).hasClass("showMenuItemTxt")){return}a0.stopPropagation()}});s.css({"min-width":aO.width()});var aS=v(this).parents("div.gridBtns"),aT=aS.hasClass("top")?"fit":"fit flip",aU="0";topAddition=((v.browser.webkit==true)?"7":"5");s.show().position({my:"left+"+aU+" top+"+topAddition,at:"left bottom",of:this,collision:aT})}});E()}function E(){v(".showBtnContainer").on("click",".showMenu .showMenuItemTxt",function(aP){var aO=v(this).siblings('input[type="checkbox"]');aO.prop("checked",!aO.prop("checked")).trigger("change");if(isInMobileView){aP.stopPropagation()}}).on("change",".showMenu input[type=checkbox]",function(aU){var aV=v(this),aR,aO=v(".groupingsBtnContainer .groupingsMenu");if(aO.length==0){v(".groupingsBtnContainer").first().trigger("mouseenter");v(".groupingsBtnContainer").first().trigger("mouseleave")}var aX=v(".groupingsBtnContainer").find(".showRecordDetails").first();if(!aX.is(":checked")){aX.trigger("click")}if(aV.closest("li").hasClass("relatedObjectsItem")){aR=".relatedObjectsItem input";if(aV.is(":checked")){GBExpandCollapseHelper.showRelatedObjects("gbMainTable");v(expandAllHidden).val("c")}else{GBExpandCollapseHelper.hideRelatedObjects("gbMainTable");var aQ=aV.closest("li").next(".relatedRecordsItem").find("input[type=checkbox]");if(aQ.is(":checked")){aQ.trigger("click")}v(expandAllHidden).val("h")}GBMixpanel.track("Change Grid Display",{"Display Control":"Show Button",Option:"Related Objects",State:""})}else{if(aV.closest("li").hasClass("relatedRecordsItem")){aR=".relatedRecordsItem input";if(aV.is(":checked")){var aS=aV.closest("li").prev(".relatedObjectsItem").find("input[type=checkbox]");if(!aS.is(":checked")){aS.prop("checked",true)}GBExpandCollapseHelper.showRelatedObjects("gbMainTable");var aP=aV.closest("li").nextAll(".childItem").find("input[type=checkbox]");aP.each(function(){if(!v(this).is(":checked")){v(this).prop("checked",true);var aY='.childItem input[data-obj-id="'+v(this).attr("data-obj-id")+'"]';Q(aY,v(this),true)}});GBExpandCollapseHelper.expandAllRecords("gbMainTable");v(expandAllHidden).val("e")}else{var aP=aV.closest("li").nextAll(".childItem").find("input[type=checkbox]");aP.each(function(){if(v(this).is(":checked")){v(this).prop("checked",false);var aY='.childItem input[data-obj-id="'+v(this).attr("data-obj-id")+'"]';Q(aY,v(this),false)}});GBExpandCollapseHelper.collapseAllRecords("gbMainTable");v(expandAllHidden).val("c")}GBMixpanel.track("Change Grid Display",{"Display Control":"Show Button",Option:"Related Records",State:""})}else{if(aV.closest("li").hasClass("childItem")){var aW=aV.attr("data-obj-id");aR='.childItem input[data-obj-id="'+aW+'"]';if(aV.is(":checked")){var aS=aV.closest("li").prevAll(".relatedObjectsItem").find("input[type=checkbox]");if(!aS.is(":checked")){aS.trigger("click")}var aQ=aV.closest("li").prevAll(".relatedRecordsItem").find("input[type=checkbox]");if(!aQ.is(":checked")){aQ.prop("checked",true);var aT=".relatedRecordsItem input";Q(aT,v(this),true)}GBExpandCollapseHelper.showSingleRelatedObject(aW);v(expandAllHidden).val(aD())}else{if(aV.closest("li").siblings(".childItem").find("input[type=checkbox]:checked").length==0){var aQ=aV.closest("li").prevAll(".relatedRecordsItem").find("input[type=checkbox]");aQ.prop("checked",false);var aT=".relatedRecordsItem input";Q(aT,v(this),false);v(expandAllHidden).val("c")}else{v(expandAllHidden).val(aD())}GBExpandCollapseHelper.hideSingleRelatedObject(aW)}GBMixpanel.track("Change Grid Display",{"Display Control":"Show Button",Option:"Specific Object",State:""})}}}Q(aR,aV,aV.prop("checked"));v(az).trigger("gbScroll",{refreshHeader:true})})}function aD(){var aO=[];v(".showMenu .childItem").find("input[type=checkbox]").each(function(){if(v(this).is(":checked")){var aP=getGridInfoByName(v(this).attr("data-obj-id")).gridApiName;aO.push(aP)}});return aO.join(",")}function ad(){v(".groupingsBtnContainer").on("click",".groupingsItemTxt",function(aP){var aO=v(this).siblings('input[type="checkbox"]');aO.prop("checked",!aO.prop("checked")).trigger("change");if(isInMobileView){aP.stopPropagation()}});v(".groupingsBtnContainer").on("change",".showRecordDetails",function(aR){var aO=v(this),aS=aO.prop("checked"),aQ=(aS?"e":"c");if(aS){var aP=aO.parents("ul.gbGroupingsMenu").find("input.showGroupings");aP.prop("checked",true).trigger("change")}a(aO,aS);Q(".showRecordDetails",aO,aS);v(showRecordDetailsHidden).val(aQ);if(GBFreezeCols.isFreezeColsEnabled(true)&&GBHelpers.areRelatedRecordsShown()){GBFreezeCols.unfreezeColumns(false,GBFreezeCols.relatedRecordsCollapsedMsg)}v(az).trigger("gbGroupByPivotFreeze")});v(".groupingsBtnContainer").on("change",".showGroupings",function(aR){var aP=v(this),aS=aP.prop("checked"),aQ=(aS?"e":"c");if(!aS){var aO=aP.parents("ul.gbGroupingsMenu").find("input.showRecordDetails");aO.prop("checked",false).trigger("change")}aK(aP,aS);Q(".showGroupings",aP,aS);v(expandGroupingsHidden).val(aQ);v(az).trigger("gbFreeze");v(az).trigger("gbGroupByPivotFreeze")})}function aK(aU,aS){var aR=v("tr.grp2, tr.grp3"),aT=v("tr.grp1, tr.grp2, tr.grp3"),aO=thisGridInfo.groupByFields.length==3?v("tr.grp1, tr.grp2"):v("tr.grp1"),aQ=v(aU).parents("ul.gbGroupingsMenu").find("input.showRecordDetails"),aP=aQ.prop("checked");if(aP){aR=aR.add(r(aS))}GBMixpanel.track("Change Grid Display",{"Display Control":"Groupings Button",Option:"Expand",State:""});if(aS){aR.removeClass("none");if(aP){aT.removeClass("off")}else{aO.removeClass("off")}}else{aR.addClass("none");aT.addClass("off")}}function r(aP){var aO=v("tr.dr, tr.cr, tr.pdr").not("#massUpdatesTable tr, tr.nd, .childTable tr");if(aP){aO=GBDataCard.removeCollapsedDataCards(aO)}return aO}function Q(aO,aQ,aP){v(aO).not(aQ).prop("checked",aP)}function a(aR,aP){var aQ=r(aP),aO;GBMixpanel.track("Change Grid Display",{"Display Control":"Groupings Button",Option:"Show Details",State:""});if(aP){aO=v("tr.grp1, tr.grp2, tr.grp3");aQ.removeClass("none");aO.removeClass("off")}else{aO=v("tr.grp"+thisGridInfo.groupByFields.length);aQ.addClass("none");aO.addClass("off")}}function u(){v("li.gwConfigure").click(function(){var aO=v(this),aP;if(aO.hasClass("gw3")){aP=gw3URL;GBMixpanel.track("Configure Grid Action",{Step:"Filters"})}else{if(aO.hasClass("gw2")){aP=gw2URL;GBMixpanel.track("Configure Grid Action",{Step:"Fields"})}else{aP=gw1URL;GBMixpanel.track("Configure Grid Action",{Step:"Settings"})}}V({displayBehavior:B.IN_GRID,actionLabel:"Grid Wizard",contentSource:P.GRID,overlayHeight:90,overlayWidth:96,overlayWidthUnit:"%",overlayHeightUnit:"%"},aP+"&sh=0")})}function o(){v(mainTableJqueryId+" .dr .icon-arrow").click(function(){var aO=v(this);parentTr=aO.closest("tr");if(aO.hasClass("right")){aO.removeClass("right");if(parentTr.next().hasClass("dataCard")){parentTr.next().nextUntil(".gradientHeader").not("tr.dup").show()}else{parentTr.nextUntil(".gradientHeader").not("tr.dup").show()}if(repeatParentHeader){parentTr.nextAll(".gradientHeader:first").removeClass("none")}GBMixpanel.track("Change Grid Display",{"Display Control":"Parent Row",Option:"",State:"Expand"});if(!GBFreezeCols.isFreezeColsEnabled()){GBFreezeCols.updateHeightOfTablesWithNoFrozenCols()}}else{aO.addClass("right");if(parentTr.next().hasClass("dataCard")){parentTr.next().nextUntil(".gradientHeader").not("tr.dup").hide()}else{parentTr.nextUntil(".gradientHeader").not("tr.dup").hide()}if(repeatParentHeader){parentTr.nextAll(".gradientHeader:first").addClass("none")}if(!GBHelpers.areRelatedRecordsShown()){GBFreezeCols.freezeColumnsIfEnabled(true)}GBMixpanel.track("Change Grid Display",{"Display Control":"Parent Row",Option:"",State:"Collapse"})}});v(mainTableJqueryId+" div.actionsBtn").button({text:false}).attr("tabindex",0);jqFrozenAndUnfrozenTables.on("keydown","div.actionsBtn",g);jqFrozenAndUnfrozenTables.on("click","div.actionsBtn",W);t()}function t(){v("div.gbPage").on("click","li.a-open, li.a-open-same-win, li.a-clone, li.a-open-data-panel",function(){var aP=v(this),aR=F(aP),aQ=(aP.hasClass("dvcAction")?aR.attr("data-childId"):aR.attr("id"));if(aP.hasClass("a-open")){GBHelpers.navigateToRecord(aR,aQ);GBMixpanel.track("Record Detail Action",{Source:"Open"})}else{if(aP.hasClass("a-open-same-win")){var aO=GBHelpers.getRecordDetailURL(aR,aQ);V({displayBehavior:B.WINDOW_OVERLAY},aO);GBMixpanel.track("Record Detail Action",{Source:"View"})}else{if(aP.hasClass("a-clone")){m(aR)}else{if(aP.hasClass("a-open-data-panel")){GBDataPanel.showDataPanel(aR,aQ,"Action Menu")}}}}if(aR.find("td.chk input").prop("checked")==true){}else{aR.find("td.chk input").click()}})}function F(aP){var aQ=aP.parents("ul:first").data("actionsBtn"),aO=GBRowHelper.getParentCol(aQ);if(getParentGridInfo().isPivotedGrid){return aO}else{var aR=GBRowHelper.getParentRow(aO);return aR}}function I(aQ){var aO=GBRowHelper.isNewRow(aQ),aP=(aO?null:gridData[aQ.attr("name")]);addChildObjectSections(aQ,aP)}function G(aO){m(aO)}function m(aV){var aS=aV.closest("table"),aX,aU,aQ=getGridInfoByName(aS.attr("name")),aT=0;if(GBFreezeCols.isElementInFrozenTable(aV)){aS=v(mainTableJqueryId);aV=aS.find('tr.dr[name="'+aV.attr("name")+'"]')}if(GBFreezeCols.isFreezeColsEnabled()){GBFreezeCols.unfreezeColumns(false,GBFreezeCols.newAndCloneMsg)}aX=insertNewRow(aS,aV);aU=aX.attr("id");aX.find(".gbrq").removeClass("gbrq");if(!newData[aU]){newData[aU]={cl:aV.attr("id")}}else{newData[aU]["cl"]=aV.attr("id")}function aO(a7,a3){var bb,ba,a0,be,a1=false,a4=false,a8=v(a3).hasClass("cardItem"),a9,a2,aY;if(a3.hasAttribute("name")){ba=v(a3).find("input, textarea");picklist=v(a3).find("select");a0=v(a3).find("div.plTxt");be=v(a3).attr("name");newField=a8?aX.next(".dataCard").find('div[name="'+be+'"]'):aX.find('td[name="'+be+'"]');a4=ba.attr("type")=="checkbox"?true:false;a9=newField.find("input");a2=v(a3).find("input.gbd");aY=v(a3).find("input.gbt");if(newField.hasClass("pl")&&!newField.hasClass("plOn")){newField.click()}a1=newField.find("select").attr("multiple")?true:false;if(ba.length==1&&!a4){bb=ba.val();if(picklist.length==1&&picklist.hasClass("wId")){aT++;S([picklist.val()],newField.find("select"))}if(ba.hasClass("rf")&&ba.siblings(".gbRfl").length>0){var aZ=ba.siblings(".gbRfl").attr("name");newField.find("input").attr("name",aZ);var bd=getMetaCol(ba,aQ),a6=[{id:aZ,value:bb}];cacheLookupIds(a6,aQ.gridApiName,bd.referenceToObjects,"")}newField.find("input, textarea").val(bb).change()}else{if(picklist.length==1){aT++;bb=picklist.val();if(typeof bb=="string"){bb=[bb]}S(bb,newField.find("select"))}else{if(a0.length==1){aT++;if(a1){bb=v(a3).find("div.plTxt").html().split(/<br>/i)}else{bb=v(a3).find("div.plTxt").html();bb=[bb]}S(bb,newField.find("select"))}else{if(a4){bb=ba.prop("checked");newField.find("input").prop("checked",bb)}else{if(a9!=undefined&&a9.is("input:text")&&a3.innerHTML!=null&&a3.innerHTML!=undefined&&a3.innerHTML.length>0){bb=v(a3).find("span, div").text();if(bb==null||bb==""){bb=v(a3).text()}a9.val(bb);if(v(a3).find("span").hasClass("gbRf")){var a5=v(a3).find("span.gbRf"),bc=getMetaCol(a5,aQ),aZ=a5.attr("name");if(bc!=null&&aZ.length>0){var a6=[{id:aZ,value:bb}];cacheLookupIds(a6,aQ.gridApiName,bc.referenceToObjects,"")}}}}}}}if(a2.length>0&&aY.length>0){newField.find("input.gbd").val(a2.val());newField.find("input.gbt").val(aY.val());newField.find("input.gbd").change();newField.find("input.gbt").change()}newField.find("select, input").change()}}v.each(aV.find("td"),aO);var aP=aT-1;for(var aR=0;aR<aP;aR++){v.each(aV.find("td.pl"),aO)}aT=0;if(aV.next(".dataCard").length){v.each(aV.next(".dataCard").find(".cardItem"),aO);aP=aT-1;var aW=aV.next(".dataCard").find(".cardItem.pl");for(var aR=0;aR<aP;aR++){v.each(aW,aO)}}}function S(aP,aO){if(v(aP).length==1&&aP[0]==""){aP[0]=lang.none}return setSelectedPicklistOptions(aP,aO)}function R(aP,aO){var aS=(aP.gridId=="p"?isCreateable==true&&aP.canCreateChildRecords():false),aR=aP.isLinkableObject,aQ=au(aP);if(aS||aR||aQ){return'<div class="actionsBtn icon-ellipses" title="'+lang.actionsLbl+'">&nbsp;</div>'}return""}function aw(aP){if(aP){var aO=aP.displayBehavior.toLowerCase();switch(aO){case B.IN_GRID:return"ui-icon-calculator";case B.WINDOW_OVERLAY:return"ui-icon-newwin";case B.NEW_WINDOW:return"ui-icon-extlink";case B.REPLACE_GRID:return"ui-icon-arrow-4-diag";case B.BACKGROUND:return"ui-icon-bullet"}}return""}function au(aO){return K(aO,f.SINGLE)}function k(aO){return K(aO,f.BATCH)||K(aO,f.GLOBAL)}function K(aS,aP){if(aS.customActions){for(var aR=0,aO=aS.customActions.length;aR<aO;aR++){var aQ=aS.customActions[aR];if(aQ.actionType.toLowerCase()==aP){if(aQ.actionType.toLowerCase()==f.SINGLE){return true}else{if(aQ.actionLocation==z.MENU){return true}}}}}return false}function an(aR){if(aR.customActions){for(var aQ=0,aO=aR.customActions.length;aQ<aO;aQ++){var aP=aR.customActions[aQ];if(aP.actionType.toLowerCase()!=f.SINGLE&&aP.actionLocation==z.BUTTON){return true}}}return false}function ae(aP,aO){return aP.indexOf(aO,aP.length-aO.length)!==-1}function ax(aO){if(ae(aO,M)||v.inArray(aO,aG)>-1||ae(aO,"__History")){return false}return true}function ab(aO){if(v.inArray(aO,l)>-1){return false}return true}function ak(aO,aW,a3,a8){var aY=(aO.gridId=="p"?isCreateable==true&&aO.canCreateChildRecords():false),a0=aO.isLinkableObject,aU=au(aO),a7=(aO.isParentInfo&&aO.hasFlatViewChildren),aR=(aO.isCreatable&&isCreateable==true&&ab(aO.gridApiName)&&!a7),aT,aS;if(a3.closest("#relatedColumnWidget").length>0){aR=false}if(aY||a0||aU||aR||a8){var a4=['<ul id="gbActionsMenu" class="gbActionsMenu ui-menu-icons boxShadow">'];if(a7){aT=a3.parents("tr.dr").attr("name");aS=gridData[aT];a4.push('<li class="obj-header-secondary ui-state-disabled parentHeader">'+aO.gridName+"</li>")}a4.push(ay(aO));if(a8){if(aO.hasDataCardFields){a4.push('<li class="a-open-data-panel"><span class="icon-wrap"></span>'+lang.openDetailPanelTxt+"</li>")}}else{if(aR){a4.push('<li class="a-clone"><span class="ui-icon ui-icon-copy"></span>'+lang.clone+"</li>")}}if(aU){for(var a1=0,a6=aO.customActions.length;a1<a6;a1++){var a5=aO.customActions[a1];if(a5.actionType.toLowerCase()==f.SINGLE){a4.push(H(a5))}}}if(a7){var aX,aV,aQ;for(var a1=0,a2=GBFlatView.flatViewObjects.length;a1<a2;a1++){aX=GBFlatView.flatViewObjects[a1];aV=GBRowHelper.getChildData(aS,aX);if(aV==null){continue}a4.push('<li class="obj-header-secondary ui-state-disabled">'+aX.gridName+"</li>");a4.push(ay(aX));if(aX.customActions){for(var aZ=0,aP=aX.customActions.length;aZ<aP;aZ++){aQ=aX.customActions[aZ];if(aQ.actionType.toLowerCase()==f.SINGLE){a4.push(H(aQ,["dvcAction"]))}}}}}a4.push("</ul>");return a4.join("")}return""}function ay(aQ){var aP=[],aO=(aQ.isDenormalizedView?"dvcAction":"");if(aQ.isLinkableObject){if(ax(aQ.gridApiName)&&!isInMobileView){aP.push('<li class="a-open-same-win '+aO+'"><span class="ui-icon ui-icon-newwin"></span>'+lang.detailOverlay+"</li>")}if(!GBHelpers.isLightningExperienceOrSalesforce1()||isInMobileView){aP.push('<li class="a-open '+aO+'"><span class="ui-icon ui-icon-extlink"></span>'+lang.detailNewWin+"</li>")}}return aP.join("")}function aN(){var aZ=['<ul class="gbActionsMenu gbShowMenu ui-menu-icons boxShadow">'],a2=false,aQ=false,aY=false,aP=false,aT=null,aX=v(".showBtnContainer .relatedObjectsItem input"),aU=v(".showBtnContainer .relatedRecordsItem input");if(filteringByParent){aQ=true;aP=(aU.length>0?aU.prop("checked"):true)}else{if(expandAll=="Show_Related_Expanded"){a2=true;aQ=true;aY=(aX.length>0?aX.prop("checked"):true);aP=(aU.length>0?aU.prop("checked"):true)}else{if(expandAll=="Hide_Related"){a2=true;aQ=true;aY=(aX.length>0?aX.prop("checked"):false);aP=(aU.length>0?aU.prop("checked"):false)}else{if(expandAll=="Show_Related_Collapsed"){a2=true;aQ=true;aY=(aX.length>0?aX.prop("checked"):true);aP=(aU.length>0?aU.prop("checked"):false)}else{a2=true;aQ=true;aY=(aX.length>0?aX.prop("checked"):true);aP=(aU.length>0?aU.prop("checked"):true);aT=decodeURIComponent(expandAll).toLowerCase().split(",")}}}}if(a2){var aW=('<li class="relatedObjectsItem ui-menu-item" title="When checked, related object sections will be displayed, otherwise they will be hidden and only parent records will be visible."><input '+(aY?'checked="checked" ':"")+'type="checkbox"/><span class="showMenuItemTxt"> '+lang.relatedObjectsLbl+"</span></li>");aZ.push(aW)}if(aQ){var a1=('<li class="relatedRecordsItem ui-menu-item" title="When checked, related records will be displayed. Otherwise, they will be hidden and only the related object sections will be visible."><input '+(aP?'checked="checked" ':"")+'type="checkbox"/><span class="showMenuItemTxt"> '+lang.relatedRecordsLbl+"</span></li>");aZ.push(a1)}aZ.push('<li class="menuDivider"></li>');if(aT){for(var a0 in gridInfoMap){if(!gridInfoMap[a0].isParentInfo&&!gridInfoMap[a0].isDenormalizedView){var aO=gridInfoMap[a0],aV=v('.childItem input[data-obj-id="'+aO.objId+'"]'),aR=(aT.indexOf(aO.gridApiName.toLowerCase())>-1),a3="",aS;if(aV.length>0&&aV.prop("checked")){a3='checked="checked" '}else{if(aV.length==0&&aR){a3='checked="checked" '}}aS=('<li class="childItem ui-menu-item"><input '+a3+'type="checkbox" data-obj-id="'+aO.objId+'"/><span class="showMenuItemTxt"> '+aO.gridPluralName+"</span></li>");aZ.push(aS)}}}else{for(var a0 in gridInfoMap){if(!gridInfoMap[a0].isParentInfo&&!gridInfoMap[a0].isDenormalizedView){var aO=gridInfoMap[a0],aV=v('.childItem input[data-obj-id="'+aO.objId+'"]'),a3="",aS;if(aV.length>0&&aV.prop("checked")){a3='checked="checked" '}else{if(aV.length==0&&expandAll=="Show_Related_Expanded"){a3='checked="checked" '}}aS=('<li class="childItem ui-menu-item"><input '+a3+'type="checkbox" data-obj-id="'+aO.objId+'"/><span class="showMenuItemTxt"> '+aO.gridPluralName+"</span></li>");aZ.push(aS)}}}aZ.push("</ul>");return aZ.join("")}function aI(){var aP=['<ul class="gbActionsMenu gbGroupingsMenu ui-menu-icons boxShadow">'],aO=(showGroupingsExpanded?'checked="checked"':""),aS=(showRecordDetailsInGroup?'checked="checked"':""),aQ=v(".groupingsBtnContainer .showGroupings"),aR=v(".groupingsBtnContainer .showRecordDetails");if(aQ.length>0){aO=(aQ.prop("checked")?'checked="checked"':"")}if(aR.length>0){aS=(aR.prop("checked")?'checked="checked"':"")}aP.push('<li class="ui-menu-item"><input class="showGroupings"'+aO+' type="checkbox"/><span class="groupingsItemTxt"> '+lang.expandGroupingsLbl+"</span></li>");aP.push('<li class="ui-menu-item"><input class="showRecordDetails"'+aS+' type="checkbox"/><span class="groupingsItemTxt"> '+lang.showRecordDetailsLbl+"</span></li>");aP.push("</ul>");return aP.join("")}function aj(){var aQ=['<ul class="gbActionsMenu gbPageActionsMenu ui-menu-icons boxShadow">'],aU=0;var aP=getParentGridInfo(),aV=gridInfoMapLen-1;if(filteringByParent==false&&aP.customActions&&k(aP)){am(aP,aQ,aU);aU++}for(var aS=0;aS<aV;aS++){var aT=aS+1,aR=gridInfoMap[aT],aO=aR.gridApiName;if(aR.customActions&&k(aR)){am(aR,aQ,aU);aU++}}return aQ.join("")}function am(aU,aV,aS){var aO="obj-header"+(aS>0?"-secondary":""),aQ=["ui-menu-item",aO],aW=[],aY="";if(aU.isDenormalizedView){aW.push("dvcAction");aY="data-childGridId="+aU.gridId}aV.push('<li class="'+aQ.join(" ")+'">'+aU.gridName+"</li>");var aT=0;for(var aR=0,aZ=aU.customActions.length;aR<aZ;aR++){var a0=aU.customActions[aR],aP=a0.actionType.toLowerCase(),aX=a0.actionLocation;if(aX==z.MENU&&(aP==f.MULTI||(aP==f.BATCH&&aU.isPivotedGrid!=true)||aP==f.GLOBAL)){aV.push(H(a0,aW,aY));aT++}}if(aT==0){aV.pop()}}function H(aQ,aP,aO){aP=(aP||[]);aO=(aO||"");aP.push("a-custom");return'<li title="'+htmlEscape(aQ.descr)+'" class="'+aP.join(" ")+'" name="'+aQ.id+'" '+aO+'><span class="ui-icon '+aw(aQ)+'"></span>'+htmlEscape(aQ.actionLabel)+"</li>"}function g(aO){if(aO.keyCode==13||aO.keyCode==32){v(this).click()}}function W(aR,aT){aR.preventDefault();aR.stopPropagation();var aV=v(this),aW=aV.parents("td:first"),aP,aQ,aS;if(aT){aP=getParentGridInfo();aQ=null}else{aP=getGridInfo(aW);aQ=aW.parents("tr.dr:first").hasClass("nr")}if(aV.hasClass("btn-active")){aB();return}else{v(mainTableJqueryId+" div.actionsBtn").removeClass("btn-active");aV.addClass("btn-active")}aS=ak(aP,aQ,aV,aT);if(aS.length>0){if(v("div.gbPage div.actionsMenu").length==0){v('<div class="actionsMenu"/>').prependTo("div.gbPage")}v("div.gbPage div.actionsMenu").html(aS);aA=v("div.gbPage div.actionsMenu ul").menu();aA.data("actionsBtn",aV);if(aV.hasClass("flatViewMenuButton")){aA.addClass("flatViewMenu")}if(isInMobileView){var aO;if(aT){aO="right+7 top-2"}else{aO="left+7 top-2"}var aU="left bottom";aA.show().position({my:aO,at:aU,of:this,collision:"flip"})}else{var aO;if(aT){aO="right top+5"}else{aO="left top+5"}var aU="right bottom";aA.show().position({my:aO,at:aU,of:this,collision:"flip"})}}}return{getActionsButtonMarkup:R,getActionsMenuMarkup:ak,initRecordActions:o,initRecordActionsMenuItems:t,initGWConfigureAction:u,addNewRelatedObjects:I,setCustomActions:e,processCustomActions:ao,hideActionBox:ac,deactivateRecordMenu:aB,validateStandardPageActions:aL,cloneRecord:G,actionsBtnClick:W}})(window,document,jq);var GBHelpText=(function(c,a,e){var b="";function d(){var f=[];outerTableContainer.on("mouseover","tr.gradientHeader td:not(.lastCol),tr.childHeaderRow td:not(.lastCol,.selectAllChk)",function(k){var h=e(this),l=h.attr("name"),g,j=h.closest("table");if(l==undefined){return}if(j.attr("name")=="p"){g=h.closest(".gradientHeader td[name="+l+"]")}else{g=j.find(".childHeaderRow td[name="+l+"]")}f.push(setTimeout(function(){if(isFieldCell(l)&&h.closest("body").length===1){var m=getGridInfo(h),n=getMetaColByCellName(l,m),o=m.gridApiName+"_"+n.fieldName;b=o;if(n.helpText==null||n.helpText==undefined){if(!n.retrievingHelpText){n.retrievingHelpText=true;e.ajax({url:lookupAjaxResponderPageURL+"?reqtype=helpText&dfn="+n.fieldName+"&don="+m.gridApiName,dataType:"json",success:function(p){if(p){n.helpText=p.helpText||"";if(n.helpText==""||n.helpText==null||n.helpText==undefined){g.removeClass("tooltip");return}if(n.helpText.length>0&&b==o){g.addClass("tooltip").tooltipster({content:n.helpText}).tooltipster("show")}}}})}}else{if(n.helpText.length>0){g.addClass("tooltip").tooltipster({content:n.helpText}).tooltipster("show")}}}},750))});outerTableContainer.on("mouseleave","tr.gradientHeader td,tr.childHeaderRow td",function(l){if(e(this).attr("name")==undefined){return}var j=e(this),m=j.attr("name")||"",g,k=j.closest("table");if(k.attr("name")=="p"){g=j.closest(".gradientHeader td[name="+m+"]")}else{g=k.find(".childHeaderRow td[name="+m+"]")}if(g.hasClass("tooltip")&&g.hasClass("tooltipstered")){g.tooltipster("hide");g.removeClass("tooltip, tooltipstered")}for(var h=0;h<f.length;h++){clearTimeout(f[h])}f=[]})}return{init:d}})(window,document,jq);var GBFF=(function(ak,L,p){var f=false,s={},e={},aA={},m,ab=p("#fastFilter"),S=p("#fastFilterPivotGrid"),B=null,b,h=[],u="saved",j="mod",o=10,ae={},ac={},an,V,C={},N=false;function U(aB){N=aB}function v(aB){return ac[aB]}function c(aB){return ae[aB]}function Y(){if(f){return}m=L.getElementById("userFilterFrame");var aB=getParentObjectName();l().each(function(aH){var aE=p(this),aN=p.trim(aE.find("input.lockedAdvFilter").val()),aM=p.trim(aE.find("input.unlockedAdvFilter").val()),aG=aE.attr("name"),aD=aE.attr("data-fullFK"),aK=aE.find("select.filterByField"),aL=aE.find("select.filterOperator"),aC=aE.find("input.filterValue"),aJ=aE.find("input.advFilter"),aF=(aG==aB);h.push(aG);ae[aG]=aD;ac[aD]=aG;s[aG]={advFilter:aJ.val(),filters:[],status:u};aK.each(function(aR){var aQ=p(this),aO=aQ.val();if(aO!="--No Field Selected--"){var aP=p(aL.get(aR)).val(),aS=p(aC.get(aR)).val();g(s[aG],aO,aP,aS,u);if(aQ.parent("div.filter").hasClass("lockedRow")){H(aG,aO,aF,"lockedFilter");if(C[aG]==null){C[aG]=[]}C[aG].push(aO.split(":")[1])}else{H(aG,aO,aF,"savedFilter")}}});aA[aG]={subqueries:null,groupByFields:[],sortFields:[],recordLimit:null,lockedAdvancedFilters:"",unlockedAdvancedFilters:""};var aI=aE.find("select.filterByOption");if(aI.length>0){aA[aG].subqueries=[];aI.each(function(){aA[aG].subqueries.push(p(this).val())})}aE.find("div.groupRow, div.groupByRowDisabled").each(function(){aA[aG].groupByFields.push({field:p(this).find("select.groupByFieldValue").val(),order:p(this).find("select.groupBySortOrderValue").val()})});aE.find("div.sortByRow, div.sortByRowDisabled").each(function(){aA[aG].sortFields.push({field:p(this).find("select.orderByFieldValue").val(),order:p(this).find("select.sortOrderValue").val()})});aA[aG].recordLimit=aE.find("input.recordLimitValue").val();if(aN.length>0){aA[aG].lockedAdvancedFilters=aN;if(aM.length>0){aA[aG].unlockedAdvancedFilters=aM}}});e=p.extend(true,{},s);F();if(gridHasAnyDates){p.datepicker.setDefaults(p.datepicker.regional[currentLocale])}q();return C}function ax(){at();q()}function q(){y(af());K();M();an=GBHelpers.getSalesforceHeaderHeight();V=GBHelpers.getCommunitiesHeaderHeight();f=true}function O(aE,aH,aG){var aC,aB;if(aE.isParentInfo){aB=aE.gridApiName+":"+aH.fieldName+":"+aH.colDataType}else{var aF=aE.objectDotFkNameInGWFormat.split(":"),aI=aF[0],aD=aF[1];aB=aI+":"+aH.fieldName+":"+aD+":"+aH.colDataType}ab.find("#ff-obj").val(aE.objectDotFkNameInGWFormat);ab.find("#ff-obj-grid-format").val(aE.fullyQualifiedObjectName);ab.find("#ff-field-api-name").val(aB);if(aE.isParentInfo||aG.closest("td").hasClass("dvc")){aG.closest(".gradientHeader").find("td:not(.selectAllChk) .gbff").each(function(aJ){if(p(this).is(aG)){aC=p(this).closest("td").prevAll("td").length;return false}})}if(aC){ab.find("#ff-col-index").val(aC)}else{ab.find("#ff-col-index").val("")}}function F(){ab.find("input.ffClearBtn").click(function(){if(stayOnPageForUnsavedChanges(false,true,false)==true){return false}var aB=P();if(aB){GBMixpanel.track("Filter Grid",{Source:"Column Menu",Action:"Clear"});Z();GBFreezeHeaders.initiateFreezeHeaders(false,p(mainTableJqueryId));x("Clearing...")}Z()});ab.find("input.ffCancelBtn").click(function(){Z()});ab.find("input.ffApplyNowBtn").click(function(){if(stayOnPageForUnsavedChanges(false,true,false)==true){return false}if(z(false)){x()}GBMixpanel.track("Filter Grid",{Source:"Column Menu",Action:"Apply"})});ab.on("keyup","#ff-value input.filterVal",function(){var aF=p(this).siblings("span.lookupArrow");if(aF.length>0){var aE=aF.attr("data-fieldData").split(":"),aB=aE[0],aD=aE[1],aC=aE[2];a(aB,aD,aC,p(this),false)}});ab.on("click","span.lookupArrow",function(){var aE=p(this).attr("data-fieldData").split(":"),aB=aE[0],aD=aE[1],aC=aE[2],aF=p(this).prev("input");a(aB,aD,aC,p(aF),true)});ab.on("autocompleteopen","input.filterVal",function(){B=p(this).fvlcomplete("widget")});ab.on("autocompleteclose","input.filterVal",function(){B=null})}function K(){ab.on("click",".caHeader",function(aC){if(p(aC.target).hasClass("gbBtn")||p(aC.target).hasClass("gbBtnDisabled")){return}var aB=p(this).next(".caContent");if(aB.hasClass("none")){aB.removeClass("none")}else{aB.addClass("none")}})}function a(aC,aE,aD,aF,aB){m.contentWindow.GBFilterLookupHelper.enableAutocomplete(aC,aE,aD,aF,aB)}function au(){return m.contentWindow?m.contentWindow.document:m.contentDocument}function at(){outerTableContainer.on("click","tr.gradientHeader td span.gbff, tr.childHeaderRow td span.gbff, tr.gradientHeader td span.gbff-pivoted, .pivotedGrid .pdr span.gbff-pivoted",function(aB){aB.preventDefault();aB.stopPropagation();if(!p(this).hasClass("gbff-inactive")&&!p(this).hasClass("gbff-inactive-pivoted")){aq(p(this))}})}function y(aB){aB.removeClass("gbff-inactive gbff-inactive-pivoted").mouseover(function(aC){p(this).attr("title","Field Actions").addClass("gbff-hover");aC.stopPropagation()}).mouseleave(function(){p(this).removeClass("gbff-hover")})}function af(){var aB=p(mainTableJqueryId).add(mainTableHeaderJqueryId).add(frozenColsContainerJqueryId).find("tr.gradientHeader td span.gbff, tr.childHeaderRow td span.gbff, tr.gradientHeader td span.gbff-pivoted, tr.pdr td span.gbff-pivoted");return aB}function A(aC,aE,aH){var aF="",aB=aC.split(":"),aD=aB[aB.length-1].toUpperCase();var aG="|equals|not equal to|";if((aD=="DATE"||aD=="DATETIME")&&(aG.indexOf("|"+aE+"|")==-1)&&(aH==""||aH==null||aH=="null")){return lang.filtDate}return aF}function z(aS,aI,aF,aB,aJ,aP){var aG,aE,aN,aQ,aO=ab.find("#ff-operator select option:selected");if(aI){aG=aF;aE=aB;aN=aJ;aQ=aP}else{aG=ab.find("#ff-obj").val();aE=ab.find("#ff-field-api-name").val();aN=aO.val();aQ=ab.find("#ff-value input.filterVal").val()}var aM=e[aG];if(aM&&(aO.index()>0||aI)){var aL=A(aE,aN,aQ);if(aL.length>0){ab.find("#ff-msg").html(aL).addClass("msgBox warningMsg").show();return false}var aH=ar(aM,aE);if(aH==null){g(aM,aE,aN,aQ,j);var aK=s[aG],aC=aK.advFilter,aR=aM.advFilter;if(aC.length>0&&aR.length>0){var aD=aM.filters.length;aM.advFilter="("+aM.advFilter+") AND "+aD}if(aA[aG].lockedAdvancedFilters.length>0){var aD=aM.filters.length;if(aA[aG].unlockedAdvancedFilters.length>0){aA[aG].unlockedAdvancedFilters="("+aA[aG].unlockedAdvancedFilters+") AND "+aD}else{aA[aG].unlockedAdvancedFilters=aD+""}}}else{av(aM,aE,aN,aQ)}if(aS){ad()}}Z();return true}function P(aD,aJ,aF){var aG,aK;if(aD){aG=aJ;aK=aF}else{aG=ab.find("#ff-obj").val();aK=ab.find("#ff-field-api-name").val()}if(!aA&&aA[aG].unlockedAdvancedFilters.length>0){var aC=s[aG].filters;for(var aI=0;aI<aC.length;aI++){var aM=aC[aI].f;if(aM==aK){alert("This filter is being used in this object's Advanced Filters. To clear this filter, make your changes using the User-Defined Filter widget.");return false}}}var aL=e[aG];if(aL){var aH=am(aL,aK);if(aH!=null){var aE=aL.advFilter.length>0,aB=!aE||confirm("Removing this filter will remove this object's Advanced Filters. To avoid this click Cancel and make your changes using the User-Defined Filter widget.");if(aB){n(aL,aH);if(aE){aL.advFilter=""}if(aD!=true){ad()}return true}}}}function ar(aC,aB){var aE;for(var aD=0;aD<aC.filters.length;aD++){aE=aC.filters[aD];if(aE.f==aB){return aE}}return null}function am(aC,aB){var aE;for(var aD=0;aD<aC.filters.length;aD++){aE=aC.filters[aD];if(aE.f==aB){return aD}}return null}function H(aD,aH,aJ,aI){var aG=aJ?getParentGridInfo():getChildGridInfo(c(aD)),aM=w(aG,aH);if(aM!=null){var aF=aG.isDenormalizedView,aL=aG.objId,aK=aM.fieldId,aB=(aL=="p"?"gradientHeader":"childHeaderRow"),aC='td[name="'+aK+'"]',aE;if(aJ){aC='td[name="'+aK+'"]:not(.dvc)'}else{if(aF){aL=getParentGridInfo().objId;aB="gradientHeader";aC='td.dvc[name="'+aK+'"]'}}aE=p('form.gbForm table[name="'+aL+'"]').children("tbody").children("tr."+aB).children(aC).find("span.gbff");if(aG.isConcatenatedView&&aM.colIndex==0){aE=aE.add(p("#gbMainTable").children("tbody").children("tr.gradientHeader").children('td[name="'+aG.objId+'"]').find("span.gbff"))}if(GBPivoted.renderPivotedGrid()){aE=aE.add(p('form.gbForm table[name="'+aL+'"] tr.pdr td div[name="'+aK+'"] span.gbff-pivoted'))}if(aI=="savedFilter"&&!aE.hasClass("gbff-locked")){aE.addClass("gbff-saved")}else{if(aI=="lockedFilter"){aE.addClass("gbff-locked");if(aE.hasClass("gbff-saved")){aE.removeClass("gbff-saved")}}}}}function ad(){var aC;if(GBFreezeHeaders.isFreezeHeadersEnabled()){var aF=b.closest("tr.fixedHeaderClone");if(aF.length>0){aC=aF}}if(!aC){aC=b.closest("table")}var aB=aC.attr("name"),aD=(aB=="p"?"gradientHeader":"childHeaderRow"),aE=p('form.gbForm table[name="'+aB+'"]').children("tbody").children("tr."+aD).children('td[name="'+b.attr("name")+'"]').find("span.gbff:not(.gbffmod)");aE.addClass("gbffmod")}function I(aD){var aB=(aD=="p"?"gradientHeader":"childHeaderRow"),aC=p('form.gbForm table[name="'+aD+'"]').children("tbody").children("tr."+aB).children("td").find("span.gbffmod");if(GBFreezeHeaders.isFreezeHeadersEnabled()){aC=aC.add('.fixedHeaderClone[name="'+aD+'"] span.gbffmod')}aC.removeClass("gbffmod")}function g(aE,aB,aD,aF,aC){aE.filters.push({f:aB,o:aD,v:aF,status:aC});aE.status=aC}function av(aD,aB,aC,aG){var aF;for(var aE=0;aE<aD.filters.length;aE++){aF=aD.filters[aE];if(aF.f==aB){aF.o=aC;aF.v=aG;aF.status=j;break}}aD.status=j}function n(aB,aC){aB.filters.splice(aC,1);aB.status=j}function G(aB,aC){return aC==null&&aB.filters.length==o}function aq(aK){var aJ=aK.closest("td").hasClass("fieldCol"),aM=aK.closest("div").hasClass("pgl");Z();al();b=aK.parents("td:first");aK.addClass("gbff-active");if(!aJ){var aG=p("#freezeColBody"),aL=getGridInfo(aK,true),aN=aK.closest("td").hasClass("flatViewHeader"),aH=aK.closest("tr.gradientHeader").length>0,aD=aK.closest("tr.childHeaderRow").length>0,aR=(aN)?aL.metaColumns[0]:getMetaCol(aK,aL);if(GBFreezeHeaders.isFreezeHeadersEnabled()&&GBFreezeHeaders.filterIconTriggeredFromFrozenHeader(aK)){var aE=aK.closest("td").attr("name"),aP;if(aH){var aC=aK.closest("tr.gradientHeader").attr("data-next-closest-dr-row"),aP=p(mainTableJqueryId).find("tr.dr[name="+aC+"]").prev("tr.gradientHeader").find("td[name="+aE+"] span.gbff")}else{if(aD){var aF=aK.closest("tr.childHeaderRow"),aO=aF.attr("name"),aI=aF.attr("data-closest-parent"),aP=p(mainTableJqueryId).find("tr.cr[name="+aI+"] .childTable[name="+aO+"] .childHeaderRow td[name="+aE+"] span.gbff")}}if(aP){aP.addClass("gbff-active")}}O(aL,aR,aK);p("#sortBody").empty();aa(aL,aR,b);aj(aL,aR,b,aN);p("#muBody").empty();Q(aL,aR,aN);if(!freezeColumnsDisabled){if(aH){var aB=aG.find(".caContent");aG.removeClass("none");if(aB.hasClass("none")){aB.removeClass("none")}var aQ=GBFreezeCols.enableOrDisableFreezeAndUnfreezeLinks(aK);if(!aQ){if(GBHelpers.areRelatedRecordsShown()){GBFreezeCols.addOrRemoveTooltipFromFreezeLink(true)}else{GBFreezeCols.addOrRemoveTooltipFromFreezeLink()}}}else{aG.addClass("none")}}ap(ab,aK)}else{if(aM){var aL=getGridInfo(aK,true),aR=getMetaCol(aK,aL);b=aK.closest("div.pgl"),aG=p("#freezeColBody");aG.hide();O(aL,aR,aK);p("#sortBody").empty();aa(aL,aR,b);aj(aL,aR,b,false);ap(ab,aK)}else{ap(S,aK)}}}function aa(aD,aF,aG){var aE="",aC="",aB="";if(aF.sortable){if(aG.find("span.sortasc").length>0){aE=" disabledLink"}else{if(aG.find("span.sortdesc").length>0){aC=" disabledLink"}else{aB=" disabledLink"}}ab.find("#sortBody").html('<div class="caHeader" title="'+lang.ffSectionHeaderTitle+'"><span class="icon-arrows-vertical"></span>'+lang.sortSectionLbl+'</div><div class="caContent"><span class="sortAZ spanLink'+aE+'">A &rarr; Z</span><span class="sortZA spanLink'+aC+'">Z &rarr; A</span><span class="resetSort spanLink'+aB+'">'+lang.resetLink+"</span></div>")}}function M(){p("#sortBody").on("click",".spanLink:not(.disabledLink)",function(){GBMixpanel.track("Change Data Set",{"Data Control":"Sort",Source:"Column Menu"});var aD=p(this),aG=aD.parents("#fastFilter").find("#ff-obj-grid-format").val(),aF=GBGridInfoHelper.getGridInfoByFullObjectName(aG),aB=aD.parents("#fastFilter").find("#ff-field-api-name").val(),aH=aB.split(":")[1],aE=aF.gridApiName+"."+aH,aC;if(aD.hasClass("sortAZ")){aC=aE+"-1"}else{if(aD.hasClass("sortZA")){aC=aE+"-0"}else{if(aD.hasClass("resetSort")){if(aF.getHasGroupByFields()&&p.inArray(aH,aF.groupByFields)>-1){aC=aE+"-1"}else{aC=""}}}}GBSortHelper.doSort(aF,aC);Z()})}function aj(aG,aM,aD,aJ){if(filterEnabled&&aG.supportsUDF&&aM.filterable){var aF=ab.find("#ff-field, #ff-operator, #ff-value"),aE=ab.find("#ff-msg"),aK=e[v(aG.fullyQualifiedObjectName)],aI=ay(aG,aM),aL=ar(aK,aI),aC=aD!=null?aD.find(".gbff").hasClass("gbff-locked"):false,aB=ab.find("#ffBody .caContent");aF.html("");aE.removeClass("red msgBox warningMsg infoMsg");if(aB.hasClass("none")){aB.removeClass("none")}if(G(aK,aL)){aE.addClass("msgBox warningMsg").html("The maximum of "+o+" filters have already been defined for this object.").show();aF.hide();ab.find("#ffBtns").addClass("none")}else{if(aC){aE.html(lang.lockedFilterTxt).show();aF.hide();ab.find("#ffBtns").addClass("none")}else{var aH={gridInfo:aG,metaCol:aM,objState:aK,filterState:aL,filterField:aI};aE.html("").hide();aF.show();if(aJ){ab.find("#ff-field").html(aG.gridName+" "+aM.fieldLabel)}else{ab.find("#ff-field").html(aM.fieldLabel)}ab.find("#ff-operator").html(az(aH));W(aH,ab.find("#ff-value"));ab.find("#ffBtns").removeClass("none");ab.find("#ffBody").removeClass("none")}}}else{ab.find("#ffBtns").addClass("none");ab.find("#ffBody").addClass("none")}}function Q(aC,aD,aB){if(massUpdatesEnabled&&aC.rowCnt>0&&aD.updateable&&aD.renderForMassUpdates()&&!aB){ab.find("#muBody").html('<div class="caHeader" title="'+lang.ffSectionHeaderTitle+'"><span class="icon-pencil"></span>'+lang.massUpdateLbl+'</div><div class="caContent cf"><div id="caMassUpdateMsg"></div>'+ai());+"</div>";if(aD.getIsDependentField(aC)){ab.find("#muBody .muBtns, #muBody table").addClass("none");ab.find("#caMassUpdateMsg").html(lang.massUpdateDependentPicklistTxt)}else{ab.find("#muBody .caContent").prepend(E(aC,aD));initializeGridFieldsForMassUpdates(ab.find("#muBody"))}}}function E(aC,aD){var aB=aC.isParentInfo?"mainTable":"childTable";return'<div><table class="'+aB+'" name="'+aC.objId+'"><tbody><tr id="mu_'+aC.gridId+'_0" class="dr" name="r0"><td class="ca mu" name="'+aD.fieldId+'">'+getCellProperties(aD,null,null,aC,true,false).cellHtml+"</td></tr></tbody></table></div>"}function ai(){return'<div class="muBtns"><input class="gbBtn muApplyAll" title="'+lang.muAllBtnTitle+'" type="button" value="'+lang.allBtnLbl+'" />&nbsp;<input class="gbBtn muApplySel" title="'+lang.muSelectedBtnTitle+'" type="button" value="'+lang.selectedBtnLbl+'"/></div>'}function l(aD){var aC=aD?'[name="'+aD+'"]':"";var aB="table.objectFilters"+aC;return p(au()).find("#parentChildFields "+aB)}function ay(aD,aE){var aC=v(aD.fullyQualifiedObjectName),aB="";if(aC.indexOf(":")>-1){aB=aC.split(":").join(":"+aE.fieldName+":")}else{aB=aC+":"+aE.fieldName}aB+=":"+aE.colDataType.toUpperCase();return aB}function w(aC,aB){var aD=aB.split(":")[1];return getMetaColByFieldName(aC,aD)}function az(aF){var aN=ffOpts.length,aG=[],aK=aF.metaCol.colDataType.toUpperCase(),aI=aF.filterField,aO=aF.filterState,aE="",aH,aD=(aF.metaCol&&aF.metaCol.fieldName=="RecordTypeId"&&N),aL=aF.metaCol.getObjectDotField(gridInfoMap[aF.metaCol.gridInfoGridId]).split(":");objectAPIName=aL[0],fieldAPIName=aL[1];if(aO!=null){aE=aO.o}else{aE=J(aK,aD)}if(GBGridInfoHelper.isHistoryObject(objectAPIName)&&fieldAPIName=="Field"){aH="|equals|not equal to|less than|greater than|less or equal|greater or equal|includes|excludes|--No Operator Selected--|"}else{if(aK=="BOOLEAN"){aH="|equals|not equal to|--No Operator Selected--|"}else{if(aK=="ID"||aK=="MULTIPICKLIST"||aD){aH="|equals|not equal to|includes|excludes|--No Operator Selected--|"}else{if(aK=="CURRENCY"||aK=="DOUBLE"||aK=="INTEGER"||aK=="PERCENT"||aK=="DATE"||aK=="DATETIME"||aK=="TIME"){aH="|equals|not equal to|less than|greater than|less or equal|greater or equal|--No Operator Selected--|"}}}}for(var aC=0;aC<aN;aC++){var aJ=ffOpts[aC],aM=aJ.v,aB=aM==aE;if(aH==null||aH.indexOf("|"+aM+"|")>-1){aG.push('<option value="'+aM+'"'+(aB?"selected=true":"")+">"+aJ.l+"</option>")}}return p('<select size="1"/>').html(aG.join(""))}function J(aB,aC){var aD="equals";if(aB=="STRING"||aB=="COMBOBOX"||aB=="URL"||aB=="PICKLIST"||aB=="EMAIL"||aB=="PHONE"||(aB=="REFERENCE"&&!aC)){aD="contains"}return aD}function W(aE,aD){var aF="",aB;if(aE.filterState!=null){aF=aE.filterState.v}aB=p('<input class="filterVal" type="text" size="20" title="Value" />').val(aF);enableDatePicker(aE.metaCol.colDataType,aB,false);aD.html("").append(aB);if(T(aE.metaCol.colDataType,aE.metaCol.fieldName)){var aC=aE.gridInfo.gridApiName+":"+aE.metaCol.fieldName+":"+aE.metaCol.colDataType;aD.append('<span class="lookupArrow fvPl" title="'+lookupArrowHoverText+'" data-fieldData="'+aC+'"></span>')}}function T(aB,aC){return m.contentWindow.GBFilterLookupHelper.getIsFieldLookupable(aB,aC)}function Z(aB){if(f){al();if(aB){if(aB=="fastFilter"){ab.addClass("none")}else{if(aB=="fastFilterPivotGrid"){S.addClass("none")}}}else{ab.add(S).addClass("none")}if(B){B.hide();B=null}}}function al(){if(b){if(!GBPivoted.renderPivotedGrid()){outerTableContainer.find("span.gbff.gbff-active").removeClass("gbff-active")}else{outerTableContainer.find("span.gbff-pivoted.gbff-active").removeClass("gbff-active")}}}function x(aB){aB=(aB||lang.applying);Z();ao();X();showSubmitInProgress();showProcessingMsg(aB);m.contentWindow.saveFastFilters()}function X(){var aC=p(au()).find(".filterNameInput").val().trim();if(aC.length==0||isDefaultFilterLoaded){p(au()).find(".filterNameInput").val(lang.myPrefixLbl+gridNameForUDF)}else{if(isAdminFilterLoaded){var aB=p(au()).find(".filterNameInput").val();aB=aB.replace("(Admin) ","");p(au()).find(".filterNameInput").val(lang.myPrefixLbl+aB)}}}function ao(){l().each(function(){var aC=p(this),aE=aC.attr("name"),aH=aC.find("select.filterByField"),aI=e[aE],aD=aA[aE],aM=aI.filters,aJ=aC.find("select.filterOperator"),aB=aC.find("input.filterValue"),aG=aC.find("input.advFilter"),aN=[];aH.each(function(aQ){var aR=aQ,aU=p(this),aT=aI.filters[aR],aP=p(aJ[aR]),aS=p(aB[aR]),aO=aU.parent();if(aO.hasClass("filter")&&!aO.hasClass("lockedRow")){aN.push(aR+1)}if(aT){ag(aU,aT.f);ag(aP,aT.o);aS.val(aT.v)}else{aw(aU);aw(aP);aS.val("");aN=p.grep(aN,function(aV){return aV!=aR+1})}});aG.val(aI.advFilter);var aF=aC.find("select.filterByOption");if(aF.length>0){var aL=aD.subqueries;aF.each(function(aO){ag(p(this),aL[aO])})}aC.find("div.groupRow, div.groupByRowDisabled").each(function(aO){var aP=aD.groupByFields[aO];ag(p(this).find("select.groupByFieldValue"),aP.field);ag(p(this).find("select.groupBySortOrderValue"),aP.order)});aC.find("div.sortByRow, div.sortByRowDisabled").each(function(aO){var aP=aD.sortFields[aO];ag(p(this).find("select.orderByFieldValue"),aP.field);ag(p(this).find("select.sortOrderValue"),aP.order)});aC.find("input.recordLimitValue").val(aD.recordLimit);if(aA[aE].lockedAdvancedFilters.length>0){aC.find("input.lockedAdvFilter").val(aA[aE].lockedAdvancedFilters);if(aA[aE].unlockedAdvancedFilters.length>0){var aK=aA[aE].unlockedAdvancedFilters;if(aI.advFilter.length==0){aK="";for(i=0;i<aN.length;i++){aK+=aN[i]+" AND "}aK=aK.substring(0,aK.lastIndexOf("AND"));aK.trim()}aC.find("input.unlockedAdvFilter").val(aK)}}})}function R(aC,aB){return aC.find("select.filterByField:first").find('option[value="'+aB+'"]').text()}function k(aB){if(!aB||aB.length==0){return'""'}return aB}function aw(aB){aB.find("option:first").prop("selected",true)}function ag(aC,aB){aC.find('option[value="'+aB+'"]').prop("selected",true)}function ap(aQ,aT,aK){var aD=aT.offset();var aC=aD.left+12,aB,aG=p(".gridBtns").outerHeight(),aE=r(aT);var aF=(GBFreezeHeaders.isFreezeHeadersEnabled()&&GBFreezeHeaders.filterIconTriggeredFromFrozenHeader(aT));if(aF){aD=aT.position();if(GBHelpers.isGridInIframe()){aB=aD.top+p(ak).scrollTop()+aG+8;aC=aC+11}else{aB=aD.top+p(ak).scrollTop()-V-an+aG+5}if(aE>0){aB+=aE}aQ.addClass("forFrozenHeader")}else{if(GBHelpers.isGridInIframe()){aB=aD.top+8;aC=aC+11}else{aB=aD.top-V-an+5}if(GBFreezeHeaders.isFreezeHeadersEnabled()){aQ.removeClass("forFrozenHeader")}}aQ.removeClass("none");var aR=aQ.outerWidth(),aP=aC+aR+10,aS=p(ak).width()+p(L).scrollLeft();if(aP>aS){aC=aC-aR+10}var aO=aC-parseInt(aQ.css("left")),aN=aB-parseInt(aQ.css("top"));aQ.css({left:aC,top:aB,display:"block"});if(B){var aJ=parseInt(B.css("left"))+aO,aH=parseInt(B.css("top"))+aN;B.css({left:aJ,top:aH})}var aM=aG;if(GBHelpers.isGridInIframe()){aM=(aG*2)+20}if(aQ.attr("id")=="fastFilter"){var aL=p("#fastFilter"),aI=aL.offset().top-p("div.gbPage").offset().top+p("div.gbPage").scrollTop()-aM;if(!aK&&!GBHelpers.isScrolledIntoView(aL)){p("html,body").animate({scrollTop:aI})}}}function r(aD){var aB=0,aC=getGridInfo(aD,true),aE;if(!aC.isParentInfo){aE=p(".crDataContainer").find(".toggleData.expanded.fixed").not(".none");aB=(aE.length>0?aE.outerHeight():0)}return aB}function t(){if(f){for(var aB in e){if(e[aB].status==j){return true}}}return false}function ah(aB){ak.location.href=aB}function d(aB){hideProcessingMsg();toggleButtonState(false);if(p("#pageWarnings").length<=0){p("div.gbPage").prepend('<div class="msgBox warningMsg" id="pageWarnings"></div>')}p("#pageWarnings").addClass("ffError").html(aB);p("#pageWarnings").find("div.rMessages:first").css("padding-top",0)}function D(){p(ak).scroll(function(){var aC=p(mainTableJqueryId).find(".gbff-active").filter(":last"),aB=aC.parents("tr").hasClass("gradientHeader")&&aC.parents("table").hasClass("pivotedGrid")?S:ab;if(aC.length==1){ap(aB,aC,true)}})}return{init:Y,initFilterIcons:at,save:x,handleSaveError:d,refreshParent:ah,showFastFilter:aq,hideFastFilter:Z,filterChangesExist:t,originalState:s,addWindowScrollListener:D,activateFilterIcons:y,initWithUDFDisabled:ax,_getGWFkNamingConvention:v,getFilterFieldName:ay,getFilterState:ar,getOperatorsForField:az,trackFilterChange:z,stayOnPageForUnsavedChanges:stayOnPageForUnsavedChanges,_clearFilter:P,_enableAutoComplete:a,setHasTranslatedRecordTypeLabels:U,getFilterIcons:af}})(window,document,jq);var GBUserDefinedCols=(function(j,p,r){var t=r("#reorderCols"),c=r("#gbOverlay"),e=r("#rocContent"),m=false;function u(){t.draggable({handle:"div.header",cancel:"#rocBody, #rocBtns"});r("#rocResizeDiv").resizable({handles:"se",alsoResize:"#reorderCols, #rocBody",minHeight:300,minWidth:360});f()}function f(){t.find("span.closeX").click(function(){w(false)});r("input.rocRefreshBtn").click(function(){a()})}function v(){r("li.reorderColsItem").click(function(){if(stayOnPageForUnsavedChanges(false,false,true)==true){r("button.pageActionsBtn.btn-active").click();return false}g();GBMixpanel.track("Change Grid Display",{"Display Control":"Reorder Columns",Option:"",State:""})})}function g(){k();w(true)}function k(){if(m){return}var x=[];x=x.concat(d(getParentGridInfo(),true));for(var A in gridInfoMap){var y=gridInfoMap[A];if(!y.isParentInfo&&!y.isDenormalizedView){x=x.concat(d(y,false))}}e.append(x.join(""));var z=t.find("ul.udc");z.sortable({stop:function(B,C){if(C.item.attr("name").split(":").length>2&&e.find("li:first").is(C.item)){z.sortable("cancel")}}});e.find(".tooltip").tooltipster();m=true;n()}function d(E,G){var J=E.gridName,H=E.objectNameWithoutFk,C=E.getFkFieldName(),A=J+"UserDefinedFields",L=["objectSection"],y,K=[],z=[];if(G&&filteringByParent){L.push("none")}K.push('<div class="'+L.join(" ")+'">');K.push('<span class="bold objectLabel">'+J+"</span>");if(G&&getParentGridInfo().hasFlatViewChildren){K.push('<span class="gbInfoIcon tooltip" title="Only parent fields are allowed as the first item in the list."></span>')}if(E.hasDataCardFields){K.push('<div class="primaryFieldsLabel">Primary Fields</div>')}K.push('<ul id="'+A+'" class="udc">');for(var D=0,F=E.metaColumns.length;D<F;D++){var M=E.metaColumns[D],I=H+":"+M.fieldName,x=(M.isHidden?"":'checked="checked"'),B="";if(M.isDataCardField){z.push(M)}if(!M.requiredForCreate&&!M.isDataCardField){if(!G){I+=":"+C}if(G&&r.inArray(M.fieldName,E.groupByFields)>-1){B='<span class="gbInfoIcon tooltip" title="'+lang.hiddenGroupByFieldTxt+'"/>'}if(G&&M.gridInfoGridId!=E.gridId){y=(M.hideObjectLabel?"":gridInfoMap[M.gridInfoGridId].gridName+".")+M.fieldLabel;I=M.getObjectDotField(gridInfoMap[M.gridInfoGridId])}else{y=M.fieldLabel}K.push('<li class="udcField" name="'+I+'">');K.push('<span><input type="checkbox" '+x+"/></span>");K.push("<span>"+y+"</span>");K.push(B);K.push("</li>")}}K.push("</ul>");if(E.hasDataCardFields){K.push(q());for(var D=0,F=z.length;D<F;D++){var M=z[D],I=H+":"+M.fieldName,x=(M.isHidden?"":'checked="checked"'),B="";if(!G){I+=":"+C}if(G&&r.inArray(M.fieldName,E.groupByFields)>-1){B='<span class="gbInfoIcon tooltip" title="'+lang.hiddenGroupByFieldTxt+'"/>'}if(G&&M.gridInfoGridId!=E.gridId){y=(M.hideObjectLabel?"":gridInfoMap[M.gridInfoGridId].gridName+".")+M.fieldLabel;I=M.getObjectDotField(gridInfoMap[M.gridInfoGridId])}else{y=M.fieldLabel}K.push('<li class="udcField dcField" name="'+I+'">');K.push('<span><input type="checkbox" '+x+"/></span>");K.push("<span>"+y+"</span>");K.push(B);K.push("</li>")}K.push("</ul>")}K.push("</div>");return K}function q(){return'<div class="dataCardFieldsLabel">Data Card Fields</div><ul class="dataCardSection udc" id="dataCardSectionReorder">'}function w(x){if(x){r("#gbOverlay").show();t.center();t.show()}else{t.hide();r("#gbOverlay").hide()}}function n(){e.find('li input[type="checkbox"]').click(function(){var A=r(this).parents("li.udcField").attr("name"),y=o(A),z=r(this).is(":checked");var x=e.find('li.udcField[name^="'+y+'"]').not(this);x.find('input[type="checkbox"]').prop("checked",z)})}function o(z){var y=z.split(":"),x=y[0]+":"+y[1];return x}function b(){var z=r("#rocContent").find("ul.udc:not(.dataCardSection)"),x=r("#rocContent").find(".objectSection:first ul .udcField:first"),y="",A=true;r.each(z,function(){var C=r(this),B=C.find("li.udcField").length,D=C.find('input[type="checkbox"]:not(:checked)');if(B==D.length){A=false;y="One field must be visible for each object";return false}});if(x.attr("name").split(":").length>2){A=false;y="Only parent fields are allowed as the first item in the parent's list."}if(!A){alert(y)}return A}function s(){var x=[],y=r("#rocContent").find("li.udcField");r.each(y,function(){var C={},A=r(this),z=A.attr("name"),B=A.find('input[type="checkbox"]').is(":checked"),D=!B;C[z]=D;x.push(C)});r(userDefinedColumnOrderHidden).val(JSON.stringify(x))}function a(){e.html("");m=false;k()}function l(){var z=[],y,J,C,Q,G,M="table.mainTable:not(#massUpdatesTable)",I,H,E,A,P,O,R,x,B;for(var F in gridInfoMap){J=gridInfoMap[F];if(J.isDenormalizedView){continue}if(J.isParentInfo){I=M+" > tbody > tr > "}else{I=M+' table.childTable[name="'+J.objId+'"] tr '}H=J.isParentInfo?M+" > tbody > tr.dr > ":I;E=J.isParentInfo?M+" > tbody > tr.dr.dataCard > td.dataCardCell .cardTable > ":M+' table.childTable[name="'+J.objId+'"] tr.dataCard > td.dataCardCell .cardTable > ';for(var L=0,N=J.metaColumns.length;L<N;L++){C=J.metaColumns[L];Q=C.colWidth;G=C.textAreaHeight;R=false;x=Q+"px";B=G+"px";if(C.hasColWidth()){R=(C.gridInfoGridId!=J.gridId);if(!R){O='td[name="'+C.fieldId+'"]:not(.ca):not(.dvc)'}else{O='td.dvc[name="'+C.fieldId+'"]:not(.ca)'}A=I+O;z.push({ruleName:A,ruleDef:"min-width:"+x+"; white-space:normal;"});if(GBFreezeHeaders.isFreezeHeadersEnabled()){var K="td.fixedHeaderContainer "+(J.isParentInfo?"tr.gradientHeader ":'tr.childHeaderRow[name="'+J.objId+'"] ');var D=K+'td[name="'+C.fieldId+'"]';z.push({ruleName:D,ruleDef:"min-width:"+x+"; white-space:normal;"})}if(!C.isReadOnly()){if(C.resizeTextInputField()||C.isTypeReference()||C.isTypePhone()||C.isTypeCurrency()||C.isTypeInteger()||C.isTypePercent()||C.isTypeDouble()){z.push({ruleName:(A+" input:not(.grpChk):not(.valueToCalculate):not(.calculateBtn)"),ruleDef:"width:"+x+" !important;"})}else{if(C.isTypeTextArea()){A=H+'td[name="'+C.fieldId+'"]:not(.ca)';z.push({ruleName:(A+" textarea"),ruleDef:"width:"+x+"; min-width:"+x+";"});z.push({ruleName:(A+" textarea.ltTa"),ruleDef:"width:"+x+"; min-width:"+x+";"})}}}}if(!C.isReadOnly()&&C.isTypeTextArea()&&C.hasTextAreaHeight()){if(!C.isDataCardField){A=H+'td[name="'+C.fieldId+'"]:not(.ca)'}else{A=E+'div.cardItem[name="'+C.fieldId+'"]:not(.ca)'}z.push({ruleName:(A+" textarea"),ruleDef:"height:"+B+"; min-height:"+B+";"});z.push({ruleName:(A+" textarea.ltTa"),ruleDef:"height:"+B+"; min-height:"+B+";"})}}}h(z)}function h(x){var C,B,A;for(var D=0;D<p.styleSheets.length;D++){if(p.styleSheets[D].href&&p.styleSheets[D].href.indexOf("gb-jq")>0){C=p.styleSheets[D];break}}for(var z=0;z<x.length;z++){B=x[z].ruleName;A=x[z].ruleDef;if(C.addRule){C.addRule(B,A,0)}else{C.insertRule(B+" { "+A+" }",0)}}}return{init:u,toggleReorderColsBox:w,validateUdc:b,buildJSONForSave:s,setupActionMenuClickEvent:v,setupCustomCSS:l}})(window,document,jq);var GBExportWidget=(function(f,g,d){var e=d("#exportBox"),a;function c(){var m=d("#exportFrame");if(m.length>0){m.attr("src",gridExportURL)}}function l(){e.draggable({handle:"div.header",cancel:"#exportBoxContent"});d("#exportBoxResizeDiv").resizable({handles:"se",alsoResize:"#exportBox, #exportBoxContent, #exportFrame",cancel:"#exportBoxContent",minHeight:200,minWidth:350,start:function(){d("#exportFrame").hide();b(lang.loading,true)},stop:function(){d("#exportFrame").show();b(null,false)}});e.find("span.closeX").click(function(){k(false)});a=g.getElementById("exportFrame")}function j(){d("li.exportItem").click(function(){if(GBHelpers.anyNewOrModifiedRecords()){if(!confirm(lang.onlySavedDataWillBeExported)){return false}}h();k(true);showSubmitInProgress();b(lang.loading,true);c();d("#exportFrame").load(function(){initialized=true;b(null,false);a.contentWindow.GBExport.initDataForExport()});GBMixpanel.track("Grid Export",{Source:"Button"})})}function h(){var m=[];d(mainTableJqueryId+" > tbody > tr.dr input.dl:checked").each(function(){m.push(d(this).parents("tr:first").attr("id"))});exportIds.value=m.join(",")}function k(m){if(m==true){d("#gbOverlay").show();toggleButtonState(true);e.center();e.show()}else{e.hide();d("#gbOverlay").hide();toggleButtonState(false);b(null,false)}}function b(o,n){var m=d("#exportStatus");if(n==true){if(o){m.find(".msgText").text(o)}m.center();m.css("position","absolute");m.show()}else{m.hide()}}return{setFrameSource:c,init:l,setupActionMenuClickEvent:j,toggleExportBox:k,toggleExportStatusMsg:b}})(window,document,jq);var GBToastMessage=(function(e,a,f){var d=f(".gridBtns.top");function b(h){var g=f("<span/>",{id:"closeToast",text:"x"}),h=f("<div/>",{"class":"toastMessageText",text:h}),j=f("<div/>",{"class":"boxShadow",id:"gbToastMessageContainer"});g.click(function(){c()});j.append([g,h]);c();d.append(j);e.setTimeout(function(){j.fadeOut("slow")},6000)}function c(){d.find("#gbToastMessageContainer").remove()}return{showToastMessage:b}})(window,document,jq);var GBHelpers=(function(X,q){function h(ak,ah){var aj=X.location.search,al="";if(aj&&ak){var ai=aj.split("&");q.each(ai,function(ap,aq){var ao;if(ah==true){var an=aq.toLowerCase(),am=ak.toLowerCase();if(an.match(am+"=")){ao==true}}else{if(aq.match(ak+"=")){ao==true}}if(ao==true){al=aq.substring(aq.indexOf("=")+1);return false}})}return al}function u(ah){if(ah){if(h("desktopView")==""){X.location.href=X.location.href+"&desktopView=1"}else{X.location.href=X.location.href.replace("desktopView=0","desktopView=1")}}else{if(X.location.href.indexOf("&desktopView")!=-1){X.location.href=X.location.href.replace("&desktopView=1","")}else{X.location.href=X.location.href.replace("desktopView=1","")}}}function x(){q.fn.center=function(ah){return this.each(function(){var ai=q(this);ai.css({position:ah?"absolute":"fixed",left:"50%",top:"50%",zIndex:"99"}).css({marginLeft:"-"+(ai.outerWidth()/2)+"px",marginTop:"-"+(ai.outerHeight()/2)+"px"});if(ah){ai.css({marginTop:parseInt(ai.css("marginTop"),10)+q(X).scrollTop(),marginLeft:parseInt(ai.css("marginLeft"),10)+q(X).scrollLeft()})}})}}function R(){if(modDataSize>0||newDataSize>0){return true}return false}function o(ai,ak,ah){var aj;return function(){var ao=this,an=arguments;var am=function(){aj=null;if(!ah){ai.apply(ao,an)}};var al=ah&&!aj;clearTimeout(aj);aj=setTimeout(am,ak);if(al){ai.apply(ao,an)}}}function ab(al,ah,aj,ai){var ak='<h3 class="toggleData '+al+'"><span class="leaf"></span><span'+ah+'><span class="icon-arrow toggleCtrl">&nbsp;</span>'+aj.gridPluralName+' <span class="recordCnt">('+ai+")</span>"+(isCreateable==true&&aj.isCreatable==true?'&nbsp;&nbsp;<span class="createNew">'+lang.newBtn+"</span>":"")+"</span></h3>";return ak}function m(aj,ah,ai){if(isCreateable==true&&ah.isCreatable==true){aj.find("button.createNew").removeClass("none").attr("title",lang.getCreateNew(ah.gridName)).click(ai)}}function z(){return top!=self}function ad(ah,am,ai){var ak=ah.offset().top,aj=q("html").scrollTop()||q("body").scrollTop();if(aj>ak){var al=false;q("html, body").animate({scrollTop:ak},ai||500,function(){if(!al){al=true;if(am){am()}}})}else{if(am){am()}}}function M(ah){return ah.attr("class")||""}function n(){return(q(".chartCanvas").length>=1||q(".chartTile").length>=1)&&GBCharts.gridChart}function k(ak,am){if(am&&q.trim(am)!=""){var an=q(ak),aj=getGridInfo(an),ai=aj.isPivotedGrid,ah=baseRelativeURL;if(an.is("tr")||ai){return ah+q.trim(am)}else{var al=getMetaCol(an,aj);if(al!=null){if(al.fieldName=="CallCenterId"){ah+="_ui/cti/callcenter/CallCenter/d?id="}else{if(al.isReferenceToExternalObject()){ah+="x/"+al.referenceToObjects+"/"}else{if(al.fieldName=="ExternalId"){ah+="x/"+aj.gridApiName+"/"}}}}}return ah+q.trim(am)}return""}function U(ah,ai){if(ai&&q.trim(ai)!=""){GBWindowsUtil.openWindow(k(ah,ai),undefined,true)}}function H(){return q(".gbPage").hasClass("gbLightning")}function B(){return((typeof sforce!="undefined")&&sforce&&(!!sforce.one))}function Z(an){var al=function(ao){return ao.split("").reverse().join("")};var ai=function(ap){var ao=false;if(ap[0]=="-"){ap=ap.substring(1);ao=true}var ar=al(ap);var aq=ar.match(/.{1,3}/g).join(F());return(ao?"-":"")+al(aq)};var am=an.toString(),aj=am.indexOf("."),ah="",ak=am;if(aj>-1){ah=am.substring(aj,am.length);ah=ah.replace(j(),ac());ak=am.substring(0,aj)}am=ai(ak);return am+ah}function F(){return(localeDigitSep||",")}function j(){return"."}function ac(){return(localeDecimalSep||".")}function O(ai,ah){if(!ai){return ai}if("DOUBLE|INTEGER|PERCENT|CURRENCY".indexOf(ah)>-1){ai=new String(ai).split(F()).join("");ai=ai.replace(ac(),".");if(!isNaN(ai)){ai=ai*1}}else{if(ah==="DATE"){ai=e(ai,dateFormat);ai=V(ai)}}return ai}function e(ak,ao){var an="yy",ap="mm",aj="dd",am=new Date();ao=ao.toLowerCase();if(ao.indexOf("yyyy")==-1){ao=ao.replace("yy","yyyy")}var ai=ao.indexOf(an);var al=ao.indexOf(ap);var ah=ao.indexOf(aj);am.setYear(ak.substr(ai,4));am.setMonth(ak.substr(al,2)*1-1);am.setDate(ak.substr(ah,2));return am}function V(ai){var ah=("0"+ai.getDate()).slice(-2);var aj=("0"+(ai.getMonth()+1)).slice(-2);ai=ai.getFullYear()+"-"+aj+"-"+ah;return ai}function I(aj){var ah=currentLocale?currentLocale:"en-US",ai={month:"2-digit",day:"2-digit",year:"numeric"};return aj.toLocaleDateString(ah,ai)}function Y(){var al="OpportunityLineItem",an="Quantity";for(var ao in gridInfoMap){var ai=gridInfoMap[ao];if(ai.gridApiName==al){var ak=getMetaColByFieldName(ai,an);if(ak){var ah=q('table[name="new_'+ai.gridId+'"]');if(ah.length>0){var aj=ah.find('td[name="'+ak.fieldId+'"]'),am=aj.find('input[type="text"]');if(am.length>0){am.val("1")}}}}}}function J(){var aj=X.addEventListener?"addEventListener":"attachEvent",ai=X[aj],ah=aj=="attachEvent"?"onmessage":"message";ai(ah,function(al){if(al.currentTarget.frameElement==null||!al.currentTarget.frameElement.src.startsWith(al.origin)){return}if(typeof al.data=="string"){dataObject=JSON.parse(al.data)}else{if(typeof al.data=="object"){dataObject=al.data}else{return}}if(dataObject.action=="saveGrid"){var ak=getModifiedData(true),am=getNewData(true);if(ak.length!=0||am.length!=0){q(".gbBtn.saveBtn:first").click()}}else{if(dataObject.action=="refreshGrid"){q(".gbBtn.refreshBtn:first").click()}}},false)}function v(){var ai=0;for(var ah in gridInfoMap){ai+=gridInfoMap[ah].getNumHiddenFields()}return ai}function K(){var ai=0;for(var ah in gridInfoMap){ai+=gridInfoMap[ah].metaColumns.length-gridInfoMap[ah].getNumHiddenFields()}return ai}function y(){return getParentGridInfo().metaColumns.length-getParentGridInfo().getNumHiddenFields()}function L(){return q(mainTableJqueryId).find("tr.dr td.mod").length}function S(ah){return ah.filter(function(ai){return !!ai}).length}function w(){var ah="";if(filteringByParent){ah="id"}else{if(filterParentField!=""){ah="fpf";for(i=2;i<=5;i++){if(GBHelpers.getParamValue("fpf"+i).length>0){ah+=",fpf"+i}}}}return ah}function G(ah){var aj="";var ai=ah.split(",");if(GBHelpers.getParamValue("fpo").toLowerCase()=="contains"&&ai.indexOf("fpf")!=-1){aj+="fpo"}for(i=2;i<=5;i++){if(GBHelpers.getParamValue("fpo"+i).length>0&&ai.indexOf("fpf"+i)!=-1){aj+=",fpo"+i}}return aj}function c(ah){var ai="";if(ah.hasClass("prev")){ai="Previous"}else{if(ah.hasClass("next")){ai="Next"}else{ai=ah.text()}}return ai}function N(){var ak=getParentGridInfo().createableChildInfos,aj=[],ai;for(var ah=0;ah<ak.length;ah++){ai=ak[ah];if(!ai.isDenormalizedView){aj.push(ai)}}return aj}function A(){var aj=getParentGridInfo().allChildInfos,ak=[],ai;for(var ah=0;ah<aj.length;ah++){ai=aj[ah];if(ai.isConcatenatedView){ak.push(ai.gridApiName)}}return ak.join(", ")}function aa(){var aj=getParentGridInfo().allChildInfos,ak=[],ai;for(var ah=0;ah<aj.length;ah++){ai=aj[ah];if(ai.isDenormalizedView){ak.push(ai.gridApiName)}}return ak.join(", ")}function E(){if(Object.keys(gridInfoMap).length>1){return true}return false}function p(){return(q(mainTableJqueryId).find(".cr:visible").length>0)}function W(){return(getParentGridInfo().groupByFields.length>0)}function l(){return(getParentGridInfo().groupByFields.length===1)}function a(){return(navigator.userAgent.indexOf("iPad")>-1)}function r(){return q.browser.msie==true||(/Trident\/7\./).test(navigator.userAgent)}function ag(){if(r()){return parseInt(q.browser.version,10)}else{return null}}function T(){var ai=q("#AppBodyHeader"),ah=0;if(ai.length>0){ah=ai.outerHeight()}return ah}function d(){var ah=0,ai=q("#globalHeaderBar");if(ai.length>0){ah=ai.outerHeight()}return ah}function ae(){var ah=0,ai=q(".msgBox.infoMsg");if(ai.length>0){ah=ai.outerHeight(true)}return ah}function f(){var ai=0,ah=q("#pageWarnings");if(ah.length>0){ai=ah.outerHeight(true)}return ai}function b(){if(userLanguage==="iw"||userLanguage==="ar"||userLanguage.startsWith("ar_")){return true}return false}function t(aj){var al=q(X),am=al.scrollTop(),ak=am+al.height(),ah=aj.offset().top,ai=ah+aj.height();return((ai>=am)&&(ah<=ak)&&(ai<=ak))}function D(){var am=[],aj=[],an=Object.keys(gridInfoMap).length;if(gridInfoMap){var al={};al.objectGridId="p";al.objectName=gridInfoMap.p.objectNameWithoutFk;al.fieldsMetaData=gridInfoMap.p.metaColumns;aj.push(al)}if(an>1){for(var ak=1;ak<an;ak++){var ai=ak.toString(),al={};al.objectGridId=ai;al.objectName=gridInfoMap[ai].objectNameWithoutFk;al.fieldsMetaData=gridInfoMap[ai].metaColumns;aj.push(al)}}for(var ak in aj){for(var ah in aj[ak].fieldsMetaData){if(aj[ak].fieldsMetaData[ah].requiredForCreate==false&&aj[ak].fieldsMetaData[ah].gridInfoGridId==aj[ak].objectGridId){am.push(aj[ak].objectName+"."+aj[ak].fieldsMetaData[ah].fieldName+"."+aj[ak].fieldsMetaData[ah].colDataType)}}}return am.join(",")}function C(am,ah){var aq=[],ao={},al=ah?newData:modData;if(al==null||Object.keys(al).length==0){return""}for(var ap in al){var aj=Object.getOwnPropertyNames(al[ap]);for(var ak=1;ak<aj.length;ak++){var ai=al[ap].nm.indexOf(":")>=0?al[ap].nm.split(":")[0]:al[ap].nm;if(!ao.hasOwnProperty(ai)){ao[ai]=[]}if(q.inArray(aj[ak],ao[ai])<0){ao[ai].push(aj[ak])}}}for(var ak in gridInfoMap.p.metaColumns){if(ao.hasOwnProperty(gridInfoMap.p.objectNameWithoutFk)&&(q.inArray(gridInfoMap.p.metaColumns[ak].fieldId,ao[gridInfoMap.p.objectNameWithoutFk])>=0)){if(!am){aq.push(gridInfoMap.p.objectNameWithoutFk);break}else{aq.push(gridInfoMap.p.objectNameWithoutFk+"."+gridInfoMap.p.metaColumns[ak].fieldName+"."+gridInfoMap.p.metaColumns[ak].colDataType)}}}for(var ak=1;ak<Object.keys(gridInfoMap).length;ak++){for(var an in gridInfoMap[ak].metaColumns){if(ao.hasOwnProperty(gridInfoMap[ak].objectNameWithoutFk)&&(q.inArray(gridInfoMap[ak].metaColumns[an].fieldId,ao[gridInfoMap[ak].objectNameWithoutFk])>=0)){if(!am){aq.push(gridInfoMap[ak].objectNameWithoutFk);break}else{aq.push(gridInfoMap[ak].objectNameWithoutFk+"."+gridInfoMap[ak].metaColumns[an].fieldName+"."+gridInfoMap[ak].metaColumns[an].colDataType)}}}}return aq.join(",")}function Q(){var al=GBDataPanel.isDataPanelPresent(),an=q("#dataPanelContent").attr("data-recordid"),ak=true;var ao=getParentGridInfo();if(ao.isPivotedGrid&&ao.hasDataCardFields){for(var aj in modData){if(al&&(aj==an)){continue}for(var ap in modData[aj]){if(isFieldCell(ap)){var ar=ao.getMetaColByFieldId(ap);if(ar.isDataCardField&&ar.valRequired){if(modData[aj][ap]!==""){continue}var aq=q(".gbBtn.saveBtn:first").position();var am=(aq.top*1+65),ah=(aq.left*1+20);var ai=q("#invalidDataPanelFieldsWarning");ai.css("top",am).css("left",ah).show();q(mainTableJqueryId).find("#"+aj).addClass("gbRecErr");ak=false}}}}}return ak}function P(){if(gridInfoMap!=null){for(var ah in gridInfoMap){gridInfoMap[ah].initRequiredColumns()}}}function af(){if(n()){GBCharts.gridChart.updateChart(modData,newData)}}function s(ah,ai){document.cookie=ah+"="+ai+";"}function g(aj){var ai=aj+"=";var al=decodeURIComponent(document.cookie);var ah=al.split(";");for(var ak=0;ak<ah.length;ak++){var am=ah[ak];while(am.charAt(0)==" "){am=am.substring(1)}if(am.indexOf(ai)==0){return am.substring(ai.length,am.length)}}return""}return{getParamValue:h,toggleDesktopView:u,createJqueryCenterFunction:x,anyNewOrModifiedRecords:R,debounce:o,addChildGridNameAndCount:ab,showCreateNewOption:m,isGridInIframe:z,scrollTo:ad,getElemClasses:M,isChartValid:n,navigateToRecord:U,getRecordDetailURL:k,areLightningStylesEnabled:H,isLightningExperienceOrSalesforce1:B,formatNumber:Z,getThousandsSeparator:F,getDefaultDecimalSeparator:j,getDecimalSeparator:ac,unformatValue:O,parseDate:e,stringifyDateObject:V,setGlobalDefaultValuesForCreates:Y,createMessageListener:J,getHiddenFieldsLength:v,getVisibleFieldsLength:K,getParentFieldsLength:y,getEditedFieldsLength:L,getDeletedRecordObjectsLength:S,getUrlParamForMixpanel:w,getPaginationValue:c,getChildObjectsToAdd:N,getEditableRelatedColObjApiName:A,getFlatViewObjApiName:aa,isMultiObjectGrid:E,areRelatedRecordsShown:p,isGroupByEnabled:W,isOneGroupingEnabled:l,isIpad:a,isIE:r,getIEVersion:ag,getSalesforceHeaderHeight:T,getCommunitiesHeaderHeight:d,getInfoMsgHeight:ae,getPageWarningsHeight:f,isRightToLeftLanguage:b,isScrolledIntoView:t,getDisplayedFieldsList:D,getEditedObjectsFields:C,stringifyDateObjectToLocale:I,processHiddenDataPanelFields:Q,initRequiredColumns:P,getFPOParams:G,updateGridChart:af,setCookie:s,getCookie:g}})(window,jq);var GBSummary=(function(e,b){var f={SUM:"SUM",MIN:"MIN",MAX:"MAX",AVG:"AVG"};var j={},g={};function h(){for(var q in gridInfoMap){var t=gridInfoMap[q].metaColumns;var w={};if(gridInfoMap[q].getHasGroupByFields()||gridInfoMap[q].hasFlatViewChildren){continue}for(var u=0;u<t.length;u++){if(t[u].summaryType&&t[u].summaryType!=""&&t[u].isHidden==false&&t[u].isDataCardField==false){w[t[u].fieldName]={summaryType:t[u].summaryType,colDataType:t[u].colDataType}}}if(!b.isEmptyObject(w)){j[gridInfoMap[q].fullyQualifiedObjectName]=w}}for(var p in j){var s=j[p],v=GBGridInfoHelper.getGridInfoByFullObjectName(p);if(v==null||v==undefined){continue}var A=(v.isParentInfo?b("#gbMainTable"):b('table.childTable[name="'+v.objId+'"]'));if(v.isParentInfo&&(filteringByParent==true||v.hasFlatViewChildren)){continue}for(var u=0,r=v.metaColumns.length;u<r;u++){var C=v.metaColumns[u];if(s[C.fieldName]){g[C.fieldName]=C.fieldId}}for(var B in s){var x=s[B].summaryType,z=s[B].colDataType,y=g[B];if(y==null||y==undefined){continue}A.each(function(){var E=b(this),D=m(x,E,y,z);k(x,E,y,D,v)})}}}function o(q){if(b.isEmptyObject(j)){return}var r=q.parents("table:first"),t=getGridInfo(q),y=getMetaCol(q,t),v=y.fieldId,p=t.fullyQualifiedObjectName,x=y.fieldName;if(!j[p]||!j[p][x]){return}var s=j[p][x].summaryType,w=j[p][x].colDataType,u=m(s,r,v,w);k(s,r,v,u,t)}function m(t,r,q,s){var p=r.children("tbody").children("tr.dr");return l(t,p,q,s)}function l(p,D,v,x){var E=D.find('td[name="'+v+'"]'),u=[],w,q=false,C=[],s="";E.each(function(){var I=GBRowHelper.getCleanNumericValue(b(this),x),H=I.cleanValue;if(H!=null){u.push(H)}if(!q){q=(I.hasCurrencySymbol&&I.hasCurrencySymbol==true&&I.currencySymbol)}if(I.hasCurrencySymbol){if(C.indexOf(I.currencySymbol)==-1){C.push(I.currencySymbol)}}});if(q){const G=C.length==1;s=G?C[0]:GBGrid.defaultCurrencySymbol}if(p==f.SUM){w=d(u)}else{if(p==f.MIN){var B;b.each(u,function(){if(!B){B=this}else{if(this<B){B=this}}});w=B}else{if(p==f.MAX){var t;b.each(u,function(){if(!t){t=this}else{if(this>t){t=this}}});w=t}else{if(p==f.AVG){var F=d(u),A=0,r;if(u.length>0){var y=u[0],z=y.toString().split(GBHelpers.getDecimalSeparator());if(z.length>1){A=z[1].toString().length}if(F){r=(F/u.length).toFixed(A)}}w=r}}}}if(w!=null&&w!=undefined){return(q?(s+(s.length>1?" ":"")):"")+GBHelpers.formatNumber(w)}return w}function k(u,p,x,q,s){var r=p.find("tr.dr:not(.nd):first");if(r.length==0){return}var y;if(GBFreezeCols.isFreezeColsEnabled()){var v;if(p.attr("id")==="gbMainTableClone"){y=b(mainFrozenTableHeaderJqueryId).find("tbody").find("tr.summaryRow");v=b(mainTableJqueryId).find("tbody").find("tr.summaryRow")}else{y=p.children("tbody").find("tr.summaryRow");v=b(mainFrozenTableHeaderJqueryId).find("tbody").find("tr.summaryRow")}y=y.add(v)}else{y=p.children("tbody").find("tr.summaryRow[name="+p.attr("name")+"]")}if(y.length==0){var w=r.find("td"),t=b('<tr class="summaryRow bold" name="'+p.attr("name")+'"/>');w.each(function(A){var z=b(this),B=z.attr("name"),C=GBHelpers.getElemClasses(z),C=(A==w.length-1?C+" lastCell":C);t.append("<td "+(B?'name="'+z.attr("name")+'"':"")+(C?' class="'+C+'"':"")+"></td>")});t.find("td").removeClass("pl plOn mod");t.insertAfter(p.find("tr:first"));y=t}y.each(function(){var A=b(this),z=A.find('td[name="'+x+'"]');metaCol=getMetaColByCellName(x,s);if(metaCol.isTypePercent()){z.addClass("np")}z.html("<div>"+u.toUpperCase()+"</div>"+(q||""))});if(!GBFreezeCols.isFreezeColsEnabled()&&GBFreezeHeaders.isFreezeHeadersEnabled()){b(e).trigger("gbScroll",{refreshHeader:true})}}function c(p){p.children("tbody").children("tr.summaryRow").remove()}function d(r){var q=0,p=0;b.each(r,function(){var s=a(this);if(!q){q=0}if(s>p){p=s}q=n(q,this,p)});return q}function a(q){var p=q+"",r=p.indexOf(GBHelpers.getDecimalSeparator())+1;return !r?0:p.length-r}function n(s,q,r){var p=Math.pow(10,r||2);return(Math.round(s*p)+Math.round(q*p))/p}return{initSummaryRow:h,updateSummaryValue:o,removeSummaryRow:c,getSummaryValueForRows:l}})(window,jq);var GBFormulaMassUpdate=(function(e,g){var f=null;function c(){var j=g(".fx-icon-container"),h=g(".fx-icon");h.removeClass("none");h.click(function(k){k.stopPropagation()});j.mouseleave(function(l){var k=g(this).find(".fx-icon");if(l.relatedTarget==null){return}if(k.hasClass("btn-active")){b();return}});j.mouseenter(function(q){var p=g(q.target),r=g(this),o=r.closest("#fastFilter").length>0;var n=r.find(".fx-icon");g("#ui-datepicker-div").hide();g(".fx-icon").removeClass("btn-active");n.addClass("btn-active");var m;if(r.find("div.formulaMassUpdateMenu").length==0){g('<div class="formulaMassUpdateMenu"/>').appendTo(r);m=d(r);if(m.length>0){r.find("div.formulaMassUpdateMenu").html(m);a(r)}}else{m=r.find("div.formulaMassUpdateMenu").html()}if(m.length>0){f=r.find("div.formulaMassUpdateMenu .gbFormulaMassUpdateMenu");var k=r.closest("td"),l=k.hasClass("top")?"fit":"fit flip";if(o){f.show().position({my:"right-11 bottom",at:"right top",of:this,collision:l})}else{f.show().position({my:"right-10 top+2",at:"right bottom",of:this,collision:l,within:g(".massUpdtContent")})}}})}function a(h){h.find(".nowOrTodayBtn").click(function(m){m.preventDefault();var k=h.prev("input"),j=h.parent().find("input.gbd"),l=h.parent().find("input.gbt");if(h.hasClass("formulaDate")){k.val(currentDate);k.change()}else{j.val(currentDate);l.val(currentTime);j.change();l.change()}b()});h.find(".calculateBtn").click(function(p){p.preventDefault();var k=h.prev("input"),j=h.parent().find("input.gbd"),m=h.find(".operator").val(),l=h.find(".valueToCalculate").val(),n=h.find(".incrementOrDecrementBy");if(n.length>0){var o=n.val();j.val("{value} "+m+" "+l+o);j.change()}else{k.val("{value} "+m+" "+l);k.change()}b()})}function d(j){var h=['<div class="gbFormulaMassUpdateMenu boxShadow" style="display:none;">'];h.push('<div class="formulaHeader">'+lang.formulaOptionsTitle+"</div>");if(j.hasClass("formulaNum")){h.push('<select class="operator"><option value="+">+ '+lang.addOp+'</option><option value="-">- '+lang.subtractOp+'</option><option value="*">* Multiply by</option><option value="/">/ Divide by</option></select><input class="valueToCalculate" type="text" value="1"/><div class="formulaFooter"><input class="gbBtn calculateBtn" type="button" value="'+lang.calculateOp+'"/></div>')}else{h.push('<select class="operator"><option value="+">+ '+lang.addOp+'</option><option value="-">- '+lang.subtractOp+'</option></select><input class="valueToCalculate" type="text" value="1"/><select class="incrementOrDecrementBy"><option value="d">'+lang.daysOp+'</option><option value="m">'+lang.monthsOp+'</option><option value="y">'+lang.yearsOp+'</option></select><div class="formulaFooter"><input class="gbBtn calculateBtn" type="button" value="'+lang.calculateOp+'"/><span class="orTxt">'+lang.orOp+'</span><input class="gbBtn nowOrTodayBtn" title="Use today\'s date/time" type="button" value="'+lang.todayNowOp+'"/></div>')}h.push("</div>");return h.join("")}function b(){if(f){f.hide();g(".fx-icon").removeClass("btn-active")}}return{setupFxIcons:c}})(window,jq);var GBColorCode=(function(f,c){var k=[],g=["today","yesterday","tomorrow"];function l(){var o,y,x,p=false,v,q,t,n,w,s,u;k=colorCodingRulesJson;if(k.length>0){GBMetadataPanel.initColorCodingInfo(k)}for(var r=0;r<k.length;r++){q=k[r].governingField.split(":");n=q.splice(1,1);t=q.join(":");s=GBGridInfoHelper.getGridInfoByFullObjectName(t);if(s==null){s=getGridInfoByApiName(q[0])}y=getMetaColByFieldName(s,n);if(y==null){return}x=j(k[r].value,y.colDataType,k[r].value);u=y.getCellContainer();if(s.objId=="p"&&!GBPivoted.renderPivotedGrid()){o=c('table[name="'+s.objId+'"] > tbody > tr.dr '+u+'[name="'+y.fieldId+'"]:not(.dvc)')}else{if(s.objId=="p"&&GBPivoted.renderPivotedGrid()){o=c('table[name="'+s.objId+'"] > tbody > tr.pdr '+u+'[name="'+y.fieldId+'"]:not(.dvc)')}else{if(s.isDenormalizedView==true){o=c('table[name="p"] > tbody > tr.dr '+u+'.dvc[name="'+y.fieldId+'"]')}else{o=c('table[name="'+s.objId+'"] tr.dr '+u+'[name="'+y.fieldId+'"]')}}}c.each(o,function(){var z=c(this);w=h(z,y);v=w.cleanValue;v=j(v,y.colDataType,k[r].value);p=a(k[r].operator,v,x,y.colDataType);b(z,k[r],p)})}}function d(q,y,r){var x,n=false,u,w=q.closest(y.getCellContainer()),t="",s=r.fullyQualifiedObjectName.split(":"),v;if(s.length==1){t=r.fullyQualifiedObjectName+":"+y.fieldName}else{t=s[0]+":"+y.fieldName+":"+s[1]}var o=k.filter(function(z){if(z.governingField==t){return true}else{if(z.governingField.split(":").length==3&&z.governingField.split(":")[2].indexOf("unrelated")!=-1&&t.split(":")[0].indexOf(z.governingField.split(":")[0])!=-1&&z.governingField.split(":")[1]==t.split(":")[1]){return true}}});for(var p=0;p<o.length;p++){x=j(o[p].value,y.colDataType,o[p].value);v=h(w,y);u=v.cleanValue;u=j(u,y.colDataType,o[p].value);n=a(o[p].operator,u,x,y.colDataType);b(w,o[p],n)}}function h(s,w){var u=w.colDataType,x=s,n=(x.find("input").length==0)?x.find("select"):x.find("input"),t,v={},r="",p=[];if(n.length>0){t=n.val()}else{if(w.isDataCardField){t=x.find(".cardCell").text()}else{t=x.text()}}if(x.find("textarea").length>0){t=x.find("textarea").val()}if(u=="BOOLEAN"){if(n.length==0){t=s.find("span").hasClass("chkd")}else{t=n.prop("checked")}}if(t!=undefined){if(u!="BOOLEAN"){t=c.trim(t)}if(u=="DATETIME"){var q=x.find("input.gbd"),o=x.find("input.gbt");if(q.length>0&&o.length>0){v.cleanValue=q.val()+" "+o.val();return v}}if(u=="CURRENCY"){v=GBRowHelper.getCleanNumericValue(s,u,w);v.cleanValue=(v.cleanValue!=undefined)?v.cleanValue.toString():"";return v}else{if(u=="PICKLIST"){if(s.hasClass("pl")&&!s.hasClass("plOn")&&!s.hasClass("pgc")){t=s.find(".plTxt").text()}else{if(s.hasClass("plOn")){t=s.find("select option:selected").text()}else{if(w.isDataCardField){t=s.find(".cardCell").text()}else{t=s.text()}}}}}if(t!=undefined){v.cleanValue=t;v.currencySymbol=r;return v}}return v}function b(x,w,r){var q,n,o,p,t,y,v=[],u,s=GBPivoted.renderPivotedGrid();if(w.isColorRow){if(s){q=x.closest("td")}else{q=x.closest("tr")}if(x.closest("tr").next().hasClass("dataCard")){q=q.add(x.closest("tr").next(".dataCard"))}else{if(x.closest("tr").hasClass("dataCard")){q=q.add(x.closest("tr").prev(".dr"))}}}else{if(w.governingField!=w.coloredField){n=w.coloredField.split(":");p=n.splice(1,1);o=n.join(":");t=GBGridInfoHelper.getGridInfoByFullObjectName(o);if(t==null){t=getGridInfoByApiName(n[0])}y=getMetaColByFieldName(t,p);if(y==null){return}if(y.isDataCardField){if(x.closest("tr").hasClass("dataCard")){u=x.closest(".dataCard")}else{u=x.next(".dataCard")}coloredCell=u.find('.cardItem[name="'+y.fieldId+'"]');if(coloredCell.find(".cfContainer").length==0){coloredCell.find(".cardCell").wrap('<div class="cfContainer"></div>')}q=coloredCell.find(".cfContainer")}else{if(t.isDenormalizedView==true){q=x.siblings('td[name="'+y.fieldId+'"].dvc')}else{if(s){q=x.siblings('div[name="'+y.fieldId+'"]')}else{q=x.siblings('td[name="'+y.fieldId+'"]:not(.dvc)')}}}}else{if(x.closest("tr").hasClass("dataCard")){if(x.find(".cfContainer").length==0){x.find(".cardCell").wrap('<div class="cfContainer"></div>')}q=x.find(".cfContainer")}else{q=x}}}if(w.color!=undefined&&w.color!=0&&w.color!=""){if(s&&!q.hasClass("pgc")){v.push("gb-cf-brdColor-"+w.color+"-"+w.id)}else{v.push("gb-cf-bgColor-"+w.color+"-"+w.id)}}if(w.textColor!=undefined&&w.textColor!=0&&w.textColor!=""){v.push("gb-cf-txtColor-"+w.textColor+"-"+w.id)}if(w.isBold!=undefined&&w.isBold==true){v.push("gb-cf-bold-"+w.id)}if(w.isItalic!=undefined&&w.isItalic==true){v.push("gb-cf-italic-"+w.id)}if(w.isUnderline!=undefined&&w.isUnderline==true){v.push("gb-cf-underline-"+w.id)}if(r){q.addClass(v.join(" "))}else{q.removeClass(v.join(" "))}}function j(r,q,s){var p,n,o;if("DOUBLE|INTEGER|PERCENT|CURRENCY".indexOf(q)>-1){if(r==""||r==undefined){return""}else{if(!isNaN(r)){return r*1}}r=r.split(localeDigitSep).join("");r=r.replace(localeDecimalSep,".");return(isNaN(r))?0:r*1}else{if(q==="DATE"){if(r!=undefined&&r!=""){if(e(r)){r=m(r)}else{r=GBHelpers.parseDate(r,dateFormat)}r=GBHelpers.stringifyDateObject(r)}else{r="1970-01-01"}}else{if(q==="DATETIME"){if(r!=undefined&&r!=""){if(e(s)){if(e(r)){r=m(r)}else{r=GBHelpers.parseDate(r,dateFormat)}r=GBHelpers.stringifyDateObject(r)}else{p=r.split(" ");n=p.shift();o=p.join(" ");n=GBHelpers.parseDate(n,dateFormat);o=parseTime(o);n.setHours(o.split(":")[0]);n.setMinutes(o.split(":")[1]);r=n}}}}}return r}function e(n){return(g.indexOf(n.toLowerCase())!=-1)}function m(o){var n=new Date();o=o.toLowerCase();if(o=="today"){return n}else{if(o=="yesterday"){n.setDate(n.getDate()-1)}else{if(o=="tomorrow"){n.setDate(n.getDate()+1)}}}return n}function a(p,q,n,o){if(q==undefined){q=""}if(o=="PICKLIST"&&n=="0"&&q==""){return true}if(o=="STRING"||o=="TEXTAREA"){if(p=="="){return q.toLowerCase()==n.toLowerCase()}else{if(p=="c"){return q.toLowerCase().indexOf(n.toLowerCase())!=-1}else{if(p=="!="){return q.toLowerCase()!=n.toLowerCase()}else{if(p=="!c"){return q.toLowerCase().indexOf(n.toLowerCase())==-1}}}}}else{if(p=="="||p==undefined||p=="0"){return q===n}else{if(p==">"){return q>n}else{if(p=="<"){return q<n}else{if(p==">="){return q>=n}else{if(p=="<="){return q<=n}}}}}}}return{updateColor:d,init:l,convertValue:j,getCleanValue:h,evaluateValueForColorCode:a,applyColor:b}})(window,jq);var GBFreezeCols=(function(P,g,r){var e=GBHelpers.isIE(),z=r("#freezeUpToCol"),B=(gridNameForUDF+" - frozen columns"),v=r("#ff-col-index"),t=r(".gbPage"),Z=r(mainTableJqueryId),T=mainTableJqueryId.replace("#",""),N=r("#gbMainTableContainer"),u=0,a=GBHelpers.isIpad(),k=r(mainFrozenTableContainerJqueryId),S=0,G=r("#unfreezeCols");if(a){if(!N.hasClass("frameScrollFix")){N.addClass("frameScrollFix")}}var d=lang.frozenColumnsNotSupportedWithDataCardsMsg,I="Frozen columns will be shown after saving.",c=lang.collapseToSeeFrozenColumnsMsg;function ac(ae,ah){if(GBFreezeCols.isFreezeColsEnabled()){var ag,af,ad=ah.attr("id");if(ah.closest("table.mainTable").attr("id")===T){ag=r(mainFrozenTableContainerJqueryId)}else{ag=r(mainTableJqueryId)}af=aa(ah,ad,ag);if(ae){af.addClass("highlightRow")}else{af.removeClass("highlightRow")}}}function X(ad){if(ad){z.attr("title","Freezing columns will hide related records.").addClass("tooltip").tooltipster()}else{if(z.hasClass("tooltip tooltipstered")){z.removeClass("tooltip tooltipstered").tooltipster("destroy")}z.removeAttr("title")}}function b(ad){if((getParentGridInfo().rowCnt===0)||(Z.find("tr.dr.nr").length>0)){z.addClass("disabledLink");G.addClass("disabledLink");return true}var ae=GBFreezeCols.isFreezeColsEnabled();if(ad){if(ad.closest("td").is(ad.closest(".mainTable").find(".gradientHeader:first td").not(".none, .lastCol").last())){z.addClass("disabledLink")}else{z.removeClass("disabledLink")}}else{if(!ae){z.removeClass("disabledLink")}}if(ae){G.removeClass("disabledLink")}else{G.addClass("disabledLink")}}function w(ad){if(F()){Y({type:"init"})}else{if(ad){X()}}}function aa(ag,ae,af){var ad;if(ag.hasClass("dup")){ad=V(ag,ae,af)}else{ad=af.find("tr.dr#"+ae+":not(.dup)")}return ad}function W(){if(getParentGridInfo().rowCnt===0){return}w();o();if(!F()){p()}}function H(ad){if(ad.closest(".mainTable").attr("id")==="gbMainTableClone"){return true}return false}function F(ag){if(freezeColumnsDisabled){return false}var af=Z.find("> tbody > tr.dr.dataCard").not(".none").length>0,ae=localStorage.getItem(B),ad=((ae!==null)&&(ae!==0)&&(ae!=="0")),ah=Z.find("tr.dr.nr").length>0;if(ag){return ad}else{return ad&&!GBHelpers.areRelatedRecordsShown()&&!af&&!ah}}function l(af){var ai=getGridInfo(af),an=getMetaCol(af,ai),ag=af.closest("td"),ae=ag.attr("name"),al=ag.closest("tr.dr"),ad=al.attr("id"),am,ah,ak,aj;if(H(af)||af.closest("#relatedColumnWidget").length!=0){aj=r(mainTableJqueryId)}else{if(!(af.closest("table").hasClass("childTable"))){aj=r(mainFrozenTableContainerJqueryId)}else{return}}if(aj.is(":empty")){return}am=aa(al,ad,aj);if(ag.hasClass("dvc")){ah=am.find('td[name="'+ae+'"].dvc')}else{ah=am.find('td[name="'+ae+'"]').not(".dvc")}if(ah.find(".plTxt").length>0){ah.find(".plTxt").trigger("click")}ak=ah.find(af.prop("tagName"));if(!ak.hasClass("wId")){ah.addClass("mod")}ak.val(af.val());validateField(ak,ai,false);if(an.summaryType&&an.summaryType!=""){GBSummary.updateSummaryValue(af)}GBColorCode.updateColor(ah,an,ai)}function J(ak){if(!ak.is("textarea")){return}var af=ak.closest("td"),ae=af.attr("name"),ai=af.closest("tr.dr"),ah=ai.attr("id"),ag,ad,aj;if(H(ak)){aj=r(mainTableJqueryId)}else{aj=r(mainFrozenTableContainerJqueryId)}if(aj.is(":empty")){return}ag=aa(ai,ah,aj);if(af.hasClass("dvc")){ad=ag.find('td[name="'+ae+'"].dvc')}else{ad=ag.find('td[name="'+ae+'"]').not(".dvc")}ad.find(".icon-pencil.lt").click()}function h(){setTimeout(function(){N.trigger("scroll")},10)}function U(af,ae){var ad=r("#relatedColumnWidget");if(t.hasClass("hasFrozenCols")){t.removeClass("hasFrozenCols")}GBFF.hideFastFilter();if(ad.is(":visible")){ad.hide()}GBFreezeHeaders.initiateFreezeHeaders(false,r(mainTableJqueryId));if(af){localStorage.removeItem(B);S=0;v.val("");GBFreezeCols.enableOrDisableFreezeAndUnfreezeLinks()}if(ae){GBToastMessage.showToastMessage(ae)}r(mainFrozenTableHeaderJqueryId+", #gbMainTableFrozenHeaderContainer").remove();N.add(k).removeAttr("style");k.empty();Z.find("tr.gradientHeader:first td[data-width]").removeAttr("data-width");Z.find("tr.gradientHeader, tr.summaryRow, tr.groupByRow, tr.dr").css("height","").find("td.none").removeClass("none");Z.css("margin-top","");p()}function p(){Q(null,r("#gbMainTableClone"))}function K(){var ae,ad;if(r("#gbMainTableClone").length>0){ae=r("#gbMainTableClone")}else{ae=Z.clone().attr("id","gbMainTableClone");ae.find("tr.gradientHeader:gt(0), tr.cr, tr.dataCard").remove();ae.find(".groupByRow .tooltip").tooltipster({content:lang.groupRecordsSpanMultiplePages});ae.find("input.gbd.hasDatepicker").each(function(){r(this).attr("id",(r(this).attr("id")+"-clone")).removeClass("hasDatepicker")});Z.find("td select").each(function(){var ah=r(this),ai=ah.closest("td"),aj=ai.attr("name"),af=ai.closest("tr.dr").attr("name"),ag;if(ai.hasClass("dvc")){ag=ae.find('tr.dr[name="'+af+'"] td[name="'+aj+'"].dvc select')}else{ag=ae.find('tr.dr[name="'+af+'"] td[name="'+aj+'"]:not(.dvc) select')}ag.val(ah.val());if(ah.is(":disabled")){ag.prop("disabled",true)}});Z.find(".dataCard").not(".none").addClass("none")}ad=ae.add(Z);ae.find("tr.dr.highlightRow").removeClass("highlightRow");ad.find("td.chk.borderBottomNone").removeClass("borderBottomNone");ad.find("td.chk").find(".icon-wrap.on").removeClass("on");return ae}function s(ae){var ad;if(r(mainFrozenTableHeaderJqueryId).length>0){ad=r(mainFrozenTableHeaderJqueryId)}else{ad=ae.clone().attr("id",mainFrozenTableHeaderIdOnly);if(GBHelpers.isOneGroupingEnabled()){ad.find("tr").not(".gradientHeader, .summaryRow, .groupByRow:eq(0)").remove();ad.find(".groupByRow").removeAttr("title")}else{ad.find("tr").not(".gradientHeader, .summaryRow").remove()}ad.find(".summaryRow .tooltip").tooltipster({content:lang.groupByGrandTotalTxt})}return ad}function q(){r("#gbMainTableFrozenHeader").remove();var ad=Z.clone().attr("style","").attr("id","gbMainTableFrozenHeader");ad.find(".gradientHeader.none, .summaryRow.none, .groupByRow.none").removeClass("none");if(GBHelpers.isOneGroupingEnabled()){ad.find("tr").not(".gradientHeader:eq(0), .summaryRow, .groupByRow:eq(0)").remove();ad.find(".groupByRow").removeAttr("title")}else{ad.find("tr").not(".gradientHeader:eq(0), .summaryRow").remove()}return ad}function y(ad){r("#gbMainTableFrozenHeaderContainer").remove();var ae=r("<div/>",{id:"gbMainTableFrozenHeaderContainer"});ae.append(ad);ae.insertBefore(N);return ae}function A(ae){var ak=r("#relatedColumnWidget");GBFreezeHeaders.hideFrozenHeaders(r("#fixedParentHeaderTable"),r(mainTableJqueryId));GBFF.hideFastFilter();if(ak.is(":visible")&&ae.type!="gbFreeze"){ak.hide()}var al=(ae.type==="click"),ai=(ae.type==="init"),af=(al||ai);if(ai){S=localStorage.getItem(B)}else{if(al){S=v.val();localStorage.setItem(B,S);if(GBHelpers.areRelatedRecordsShown()){GBExpandCollapseHelper.hideRelatedObjects("gbMainTable",true);r('.gbActionsMenu input[type="checkbox"]').removeAttr("checked")}X()}}S=(S*1);if((S===0)||(Z.find(".gradientHeader:eq(0) td").not(".selectAllChk, .lastCol").length<(S+1))){GBFreezeCols.unfreezeColumns();return}if(!t.hasClass("hasFrozenCols")){t.addClass("hasFrozenCols")}var aj=K(),ad=s(aj);if(af){ab(aj,ad);R(ad,aj);j(aj);m(aj)}var ag=q(),ah=y(ag);C(ag);D(ad,aj,ae);if(af){E(ag)}L(ad,aj,ag);Q(ah,aj);if(af){n(aj,ad,ag);initializeGridFields(aj);if(al){GBFF.activateFilterIcons(GBFF.getFilterIcons())}}if(al){GBMixpanel.track("Freeze Column",{"# of columns":S})}M(ad,aj);C(ag);D(ad,aj,ae);f(ad,aj,ag);h()}function ab(ah,ad){var ag=ah.add(ad),af=ag.find("tr.gradientHeader, tr.summaryRow, tr.dr"),ae=ag.find("tr.groupByRow:not(.summaryRow)");af.find("td:lt("+(S+1)+")").removeClass("none");af.find("td:gt("+S+")").addClass("none");if(ae.length>0){ae.find("td:lt("+S+")").removeClass("none");ae.find("td:gt("+(S-1)+")").addClass("none")}}function V(ah,af,ag){var ad=ah.attr("data-childId"),ae;if(ad){ae=ag.find("tr.dup.dr#"+af+'[data-childId="'+ad+'"]')}else{ae=ag.find("tr.dup.dr#"+af)}return ae}function E(af){var ad=af.add(Z),ag=ad.find("tr.gradientHeader, tr.summaryRow, tr.dr"),ae=ad.find("tr.groupByRow:not(.summaryRow)");Z.find("tr.gradientHeader:first td").each(function(ai){var ah=r(this);if(ai<=S){if(ah.width()!=0){ah.attr("data-width",ah.width())}}else{ah.removeAttr("data-width")}});ag.find("td:gt("+S+")").removeClass("none");ag.find("td:lt("+(S+1)+")").addClass("none");if(ae.length>0){ae.find("td:gt("+(S-1)+")").removeClass("none");ae.find("td:lt("+S+")").addClass("none")}}function R(ad,ae){k.empty().append(ae);ad.insertBefore(k)}function Y(ad){r(P).scrollTop(0);setTimeout(function(){A(ad)},10)}function O(ae,ap,ai,aw){var ao=r("#AppBodyHeader"),aq=(ao.length===1?ao.height():0),al=r("#globalHeaderBar"),an=(al.length===1?al.height():0),ad=r(".gridBtns.top").height(),au=GBHelpers.getInfoMsgHeight(),am=GBHelpers.isGridInIframe(),ag=GBHelpers.getPageWarningsHeight(),aj=r(P).height();var ak=(aq+an+au+ag+ad);if(ae||(!ae&&(ak+Z.height())<aj)){var at=(ak+ap+ai);if(a&&am&&!isInMobileView&&!GBHelpers.isLightningExperienceOrSalesforce1()){var ar=false;try{heightToSet=(r(P.parent.document).height()-at-110)}catch(af){ar=true}if(ar){var av=GBHelpers.getParamValue("heightForIpad"),ah;if(av){ah=(av*1)}else{ah=400}heightToSet=(ah-at)}}else{heightToSet=(aj-at);if(heightToSet<190){heightToSet=190}}aw.height(heightToSet)}else{aw.css("height","")}}function j(ad){ad.off("click.dlCheckbox").on("click.dlCheckbox","input.dl",function(ai){var ae=r(this),ah=ae.closest(".dr"),ag=ah.attr("id"),af;if(ae.is(":checked")){ah.addClass("selected")}else{ah.removeClass("selected")}af=aa(ah,ag,r(mainTableJqueryId));af.find("td.chk input.dl").trigger("click")})}function o(){z.click(Y);r("#unfreezeCols").click(function(){GBMixpanel.track("Unfreeze Column",{"# of columns":S});U(true)});r(P).on("gbFreeze resize",function(ad){if(a&&(ad.type==="resize")){return}if(ad.type==="gbFreeze"||(ad.type==="resize"&&r(ad.target).is(r(P))&&!isInMobileView)){if(F()){A(ad)}else{p()}}});N.scroll(function(al){if(F()){if(x()){var ak=r("#gbMainTableClone"),ah=r(mainTableHeaderJqueryId);ah.scrollLeft(r(this).scrollLeft());if(e){if(!ak.hasClass("mb27")){ak.addClass("mb27")}}else{if(!ak.hasClass("mb25")){ak.addClass("mb25")}}}k.add(Z).scrollTop(r(this).scrollTop());if(GBHelpers.isOneGroupingEnabled()){var ae=r(mainFrozenTableHeaderJqueryId),aj=k.offset().top,am=null;k.find(".groupByRow").each(function(ao){var an=r(this);if((an.offset().top+20)<aj){am=an}else{return false}});if(am){var ag=r("#gbMainTableFrozenHeader"),ai=ag.find(".groupByRow:not(.summaryRow)"),ad=ae.find(".groupByRow:not(.summaryRow)"),af=am.find(".grpContent").outerWidth(true);ad.find("td:not(.none)").each(function(){var an=r(this),ao=an.attr("name"),ap=am.find("td[name="+ao+"]").html();if(an.html()!==ap){an.html(ap);an.find(".grpChk").prop("checked",am.find(".grpChk").prop("checked"))}});ad.find(".grpContent").width(af);u=am.outerHeight();ad.add(ai).height(u)}}}})}function n(af,ad,ae){ad.off("click.selectAllChk").on("click.selectAllChk","input.selectAllChk",function(){af.find(".gradientHeader:first input.selectAllChk").trigger("click");Z.find(".gradientHeader:first input.selectAllChk").trigger("click")}).off("click.grpChk").on("click.grpChk","input.grpChk",function(ag){ag.stopPropagation();grNameText=r(this).siblings(".grpContent").find(".grpLabel").text();af.find('.groupByRow .grpLabel:contains("'+grNameText+'")').closest(".grpContent").siblings(".grpChk").trigger("click")}).off("click.groupBySync").on("click.groupBySync","tr.groupByRow:not(.grandTotal)",function(){af.find("tr.groupByRow:not(.grandTotal):first").trigger("click")});ae.off("click.groupBySync").on("click.groupBySync","tr.groupByRow:not(.grandTotal)",function(){af.find("tr.groupByRow:not(.grandTotal):first").trigger("click")})}function m(ad){ad.off("click.relatedRecordsProxy").on("click.relatedRecordsProxy",".icon-arrow",function(ag){var ae=r(this),af=ae.closest("tr.dr").attr("id");GBFreezeCols.unfreezeColumns(false,GBFreezeCols.relatedRecordsCollapsedMsg);Z.find("tr.dr#"+af+":not(.dup) td.chk .icon-arrow").trigger("click")})}function C(ad){Z.find(".gradientHeader:first td").each(function(){var ae=r(this),af;if(ae.width()==0&&ae.attr("data-width")){af=ae.attr("data-width")}else{af=ae.width()}if(ae.hasClass("dvc")){ad.find('td[name="'+ae.attr("name")+'"].dvc').width(af)}else{ad.find('td[name="'+ae.attr("name")+'"]').not(".dvc").width(af)}})}function D(ae,aj,af){var al=aj.find(".gradientHeader:first"),ah=Z.find(".gradientHeader:first"),ak=aj.find(".summaryRow"),ai=aj.find(".groupByRow");ae.find(".gradientHeader td").not(".selectAllChk, .none").each(function(){var am=r(this),an=am.attr("name"),aq,ao,ar,at,ap;if(am.hasClass("dvc")){aq='td[name="'+an+'"].dvc'}else{aq='td[name="'+am.attr("name")+'"]:not(.dvc)'}ao=al.find(aq);ar=ah.find(aq);at=aj.find(aq+" .plTxt");ap=ar.width();if(ap==0&&ar.attr("data-width")){ap=ar.attr("data-width")}at.css("max-width",ap);am.add(ao).width(ap);if(ao.width()>ap){am.width(ao.width())}});if(ak.is(":visible")){ae.find(".summaryRow td").not(".chk").each(function(){var am=r(this);if(am.hasClass("dvc")){am.width(ak.find('td[name="'+am.attr("name")+'"].dvc').width())}else{am.width(ak.find('td[name="'+am.attr("name")+'"]:not(.dvc)').width())}})}if(GBHelpers.isOneGroupingEnabled()){var ai=aj.find(".groupByRow:eq(1)");if(ai.length>0){var ad=ae.find(".groupByRow").not(".summaryRow").eq(0);groupByRowChkWidthToSet=ai.find(".chk").width();ad.find(".chk").width(groupByRowChkWidthToSet);if(af.type!=="gbFreeze"&&af.type!=="resize"){var ag=ai.find(".grpContent").width();ad.find(".grpContent").width(ag)}ad.find("td").not(".chk").each(function(){var an=r(this),am=an.width(),ao;if(an.hasClass("dvc")){ao=ai.find('td[name="'+an.attr("name")+'"].dvc').width()}else{ao=ai.find('td[name="'+an.attr("name")+'"]:not(.dvc)').width()}if(((am-25)>ao)||((am+25)<ao)){an.width(ao)}})}}}function M(ad,ae){ad.find(".gradientHeader td.selectAllChk").width(ae.find(".gradientHeader td.selectAllChk").width());ad.find(".summaryRow td.chk").width(ae.find(".summaryRow td.chk").width())}function f(ad,ai,ae){var ag=Z.find("tr.summaryRow"),af=ae.find("tr.summaryRow"),ah=ad.find("tr.summaryRow"),aj=ai.find("tr.summaryRow");if(ag.outerHeight()>aj.outerHeight()){aj.add(ah).height(ag.outerHeight())}else{if(aj.outerHeight()>ag.outerHeight()){ag.add(af).height(aj.outerHeight())}}Z.find("tr.groupByRow").each(function(){var ak=r(this),al=ak.nextUntil(".dr").addBack().last().next(".dr"),an=al.attr("id"),am=ak.attr("class").split(" ").join(".");var ao=ai.find('.dr[id="'+an+'"]').not(".dup").prevUntil(".gradientHeader, .dr","tr.groupByRow."+am);if(ak.outerHeight()>ao.outerHeight()){ao.height(ak.outerHeight())}else{if(ao.outerHeight()>ak.outerHeight()){ak.height(ao.outerHeight())}}});Z.find("tr.dr").each(function(){var al=r(this),ak=al.attr("id"),am;if(al.hasClass("dataCard")){return true}am=aa(al,ak,k);if(al.height()>am.height()){am.height(al.height())}else{if(am.height()>al.height()){al.height(am.height())}}})}function x(){if(N[0].scrollWidth>N[0].clientWidth){return true}return false}function Q(ak,al){var ah=(GBHelpers.isGridInIframe()?10:35),ad=r("#gridFooter"),ae=ad.outerHeight(true),am=0,an=0,af=r("#sidebarCell"),aj=(af.length>0),ap=(!af.hasClass("sidebarCollapsible")||(af.hasClass("sidebarCollapsible")&&!af.hasClass("sidebarCollapsed"))),ai=N,ag=N,ao=0;if(ak){am=ak.height();ai=ai.add(k);ag=ag.add(ak)}O(ak,am,ae,ai);if(ak){if(a){ao=(P.screen.width-(al.width()-137))}else{if(aj){ao=(r(P).width()-al.width()-af.outerWidth()-ah)}else{ao=(r(P).width()-al.width()-ah)}}ag.width(ao)}}function L(ae,ao,al){var ag=(r.browser.webkit==true)?12:13,ap;var ai=al.find("tr.gradientHeader"),af=ae.find("tr.gradientHeader"),an=Z.find(".summaryRow"),ah=Z.find(".groupByRow").not(".summaryRow").eq(0);if(ai.height()>=af.height()){ap=ai.height()}else{ap=af.height()}ai.add(af).find("td").height(ap-ag);ao.find("tr.gradientHeader:first").height(ap-1);Z.find("tr.gradientHeader:first").height(ap-1);if(an.is(":visible")){var aj=an.outerHeight();if(aj<26){aj=26;an.add(al.find(".summaryRow")).height(aj)}ap+=aj}if(GBHelpers.isOneGroupingEnabled()){if(ah.is(":visible")){var aq=ao.find("tr.groupByRow:not(.summaryRow):eq(0)"),ad=ae.find("tr.groupByRow:not(.summaryRow):eq(0)"),am=al.find("tr.groupByRow:not(.summaryRow):eq(0)"),ak;if(N.scrollTop()>(aq.offset().top+aq.height())){ak=u;ah.add(aq).add(ad).add(am).height(ak)}else{ak=aq.outerHeight();ah.add(ad).add(am).height(ak)}ap+=ak}}ao.add(Z).css("margin-top","-"+ap+"px")}return{addOrRemoveRowHighlight:ac,addOrRemoveTooltipFromFreezeLink:X,dataCardsNotSupportedMsg:d,newAndCloneMsg:I,enableOrDisableFreezeAndUnfreezeLinks:b,freezeColumnsIfEnabled:w,getRowToUpdate:aa,init:W,isElementInFrozenTable:H,isFreezeColsEnabled:F,relatedRecordsCollapsedMsg:c,syncFrozenAndUnfrozenTable:l,syncFrozenAndUnfrozenTextAreaContentFetch:J,triggerScrollOnGbMainTable:h,unfreezeColumns:U,updateHeightOfTablesWithNoFrozenCols:p}})(window,document,jq);var GBStickyHeader=(function(e,g,c){var b=c(".gridBtns.top");function k(){if(filteringByParent&&!isInMobileView){c("#gridFooter").addClass("none")}else{a()}d()}function f(){var o=c(".gridBtns.top .gridBtnsContainer"),l=c(".gbPage").find(".parentHeaderRight"),m=c("#sidebarCell");var n=c(e).width()-l.width()-80;if(m.length>0){n=n-m.width()}o.css("width",n);c(e).resize(function(){var p=c(e).width()-l.width()-80;if(m.length>0){p=p-m.width()}o.css("width",p)})}function h(m){var n=c(m).val(),l=(c(".pagination .totalPages").attr("data-total-pages-int")*1);if(!n){return}if(n&&(n*1)<1){n=1}if(n&&(n*1)>l){n=l}c('[id*="pageNumInput"]').val(n);c(".pagination .goToPageLink").trigger("click")}function d(){c(".gridBtns.top").width(c(e).width()-32);c(e).resize(function(){c(".gridBtns.top").width(c(e).width()-32);if(filterEnabled){GBQuickFilter.repositionQuickFilter()}a(true)});c(e).on("resize scroll",function(){var m=c(".fixedHeaderClone");if(m.length>0){var l=c(".gridBtns.top").outerHeight();if(l>67){if(m.hasClass("gradientHeader")){m.css("top",(l-1))}else{if(m.hasClass("relatedRecord")){var n=c(".crDataContainer .toggleData.expanded.fixed");n.css("top",(l-1));m.css("top",(l+30))}}var p=m.next(".fixedSummaryClone");if(p.length>0){p.css("top",m.position().top+m.height()+"px")}var o=m.nextAll(".fixedGroupByClone");if(o.length>0){if(p){o.css("top",m.position().top+m.height()+p.height()+"px")}else{o.css("top",m.position().top+m.height()+"px")}}}else{m.css("top","");c(".crDataContainer .toggleData.expanded.fixed").css("top","");var p=m.next(".fixedSummaryClone");if(p.length>0){p.css("top",m.position().top+m.height()+"px")}var o=m.nextAll(".fixedGroupByClone");if(o.length>0){if(p){o.css("top",m.position().top+m.height()+p.height()+"px")}else{o.css("top",m.position().top+m.height()+"px")}}}}});c(g).ready(function(){if(c("#sidebarCell").length>0){j()}});c("#sidebarCell").find("#handlebarContainer").click(function(){setTimeout(function(){j();if(c(".gbPage").find(".parentHeaderRight").width()>0){f()}if(GBFreezeCols.isFreezeColsEnabled()){c(e).trigger("gbFreeze")}},10)});c(e).on("scroll",j);c('[id*="enterPageInput"]').keypress(function(m){var l=[44,46,48,49,50,51,52,53,54,55,56,57,0,8,9,13];if(c.inArray(m.keyCode,l)===-1&&event.ctrlKey===false){m.preventDefault();return}if(m.keyCode==13){m.preventDefault();h(this)}}).blur(function(){h(this)})}function j(){var p=GBHelpers.isGridInIframe(),m=p?"0":"10",t=(c("#AppBodyHeader").length==0&&c(e).scrollTop()==0),s=c(".gbPage .gridBtns.top .parentHeaderRight, #fixedParentHeaderTable .gridBtns.top .parentHeaderRight"),q=c(e).scrollLeft(),r=c("#sidebarCell"),w=(c(".gbForm").filter(":just-the-top("+m+","+b.height()+")").length==1),v=c(".gridHeaderCell, .gridBtnsCell"),u=c(".gbForm").width();if(r.length>0){s.css("right","")}if(w&&!t){var o=GBHelpers.getInfoMsgHeight(),l=GBHelpers.getPageWarningsHeight();if((c(".gbPage").height()-(c("#AppBodyHeader").length==0?52:15)-o-l)<c(e).height()){return}b.addClass("fixed");if(p){if(q==0){b.css("margin-left","0");b.css("padding-right","32px");v.css("margin-left","0px");s.css("right","-5px")}else{if(q<20){b.css("margin-left",(-q)+"px");b.css("padding-right",(32+(parseInt(b.css("margin-left"))*(-1)))+"px");v.css("margin-left",q+"px");s.css("right",(-5-q)+"px")}else{b.css("margin-left","-20px");b.css("padding-right",(32+20)+"px");v.css("margin-left","20px");s.css("right","-25px")}}}else{if(r.length>0){if(r.hasClass("sidebarCollapsible")){b.css("margin-left","");if(!r.hasClass("sidebarCollapsed")){if(c(e).scrollLeft()<r.width()+30){s.css("right",(r.width()-q+50));b.css("left",(r.width()-q+40));b.css("padding-left","0")}else{s.css("right",(r.width()-q+30));b.css("left","0");b.css("padding-left","10px")}}else{if(c(e).scrollLeft()>0){s.css("right","10px");b.css("left","0");b.css("padding-left","10px")}else{b.css("left","20px");b.css("padding-left","0")}}}else{b.css("margin-left","");if(c(e).scrollLeft()<r.width()){s.css("right",(r.width()-q+30));b.css("left",(r.width()-q+20));b.css("padding-left","0")}else{b.css("left","0");b.css("padding-left","10px")}}}else{b.css("margin-left","0");if(q>=10){b.css("left","0");b.css("padding-left","10px")}else{if(q>5){b.css("left",((q-2)+"px"));b.css("padding-left","10px")}else{if(q>0){b.css("left",((q+10)+"px"));b.css("padding-left","5px")}else{b.css("left","");b.css("padding-left","0")}}}}}}else{b.removeClass("fixed");b.css("padding-left","0");b.css("left","");if(p){b.css("margin-left",(q+"px"));v.css("margin-left","0");s.css("right","-5px");b.css("padding-right","")}else{if(r.length>0){if(r.hasClass("sidebarCollapsible")){if(!r.hasClass("sidebarCollapsed")){if(c(e).scrollLeft()<r.width()){s.css("right",(r.width()-q+20))}if(r.width()>=q||q==0){b.css("margin-left","0")}else{if((q-r.width())>=30){b.css("margin-left",((q-r.width()-30)+"px"))}}}else{if(r.width()>=q||q==0){b.css("margin-left","0")}else{if((q-r.width())>=10){b.css("margin-left",((q-r.width()-10)+"px"))}}}}else{if(c(e).scrollLeft()<r.width()){s.css("right",(r.width()-q-20))}if(r.width()>=q||q==0){b.css("margin-left","0")}else{if((q-r.width())>=10){b.css("margin-left",((q-r.width()-10)+"px"))}}}}else{var n=q-10+b.width();if(q>=10&&u>=n){b.css("margin-left",((q-10)+"px"))}else{if(q==0){b.css("margin-left",(q+"px"))}}}}}}function a(l){var n=c("#gridFooter"),m=c("#gridFooterControls");gbCopyright=n.find(".gbCopyright"),showDesktopOrMobileViewLinkWidth=0,extraThreshold=5;if(n.find(".spanLink.desktopView").length>0){showDesktopOrMobileViewLinkWidth=n.find(".spanLink.desktopView").outerWidth(true)}if((m.outerWidth(true)+gbCopyright.outerWidth(true)+showDesktopOrMobileViewLinkWidth+extraThreshold)>n.width()){n.addClass("isWrapped");if(!GBFreezeCols.isFreezeColsEnabled()){outerTableContainer.css("margin-bottom",n.height())}}else{if(l){n.removeClass("isWrapped");outerTableContainer.css("margin-bottom","")}}}return{init:k,wrapBtnsParentHeaderRight:f}})(window,document,jq);var GBFreezeHeaders=(function(l,o,q){var m=null,g=null,v=null,h=null;function d(w,z){var y=q(mainTableJqueryId),x=getParentGridInfo();GBHelpers.showCreateNewOption(z,x,function(){GBHelpers.scrollTo(w,function(){var A=GBFreezeCols.isFreezeColsEnabled();if(A){GBFreezeCols.unfreezeColumns(false,GBFreezeCols.newAndCloneMsg)}insertNewRow(getDataTable("p"));if(!A){GBFreezeCols.updateHeightOfTablesWithNoFrozenCols()}q(l).trigger("gbScroll",{refreshHeader:true})})});z.find("select.filterOptions").change(function(){w.find("select.filterOptions").val(q(this).val()).trigger("change")});z.find("select.pageSizeSelect").change(function(){w.find("select.pageSizeSelect").val(q(this).val()).trigger("change")});y.find(".fixedHeaderContainer").on("change",".fixedHeaderClone[name=p] input.selectAllChk",function(){var A=y.find(".gradientHeader:first-child input.selectAllChk");A[0].checked=this.checked;toggleObjectTypeRecordsForDelete(A)}).on("change",".fixedHeaderClone.relatedRecord input.selectAllChk",function(){var A=q(this).closest(".fixedHeaderClone.relatedRecord");closestParentRowName=A.attr("data-closest-parent"),relatedRecordName=A.attr("name");var B=y.find(".cr[name="+closestParentRowName+"] .childTable[name="+relatedRecordName+"]"),C=B.find("input.selectAllChk");C[0].checked=this.checked;toggleObjectTypeRecordsForDelete(C)}).on("change",".fixedGroupByClone .titleCol .grpChk",function(){var C=this.closest(".groupByRow"),A=q(C).find(".grpValue").clone().children().remove().end().text(),B=q(".groupByRow:not('.fixedGroupByClone'):contains('"+A+"')");if(B.length==1){q(B).find(".grpChk").trigger("click")}else{if(B.length>1){for(var D=0;D<B.length;D++){textValue=q(B[D]).find(".grpValue").clone().children().remove().end().text();if(textValue==A){q(B[D]).find(".grpChk").trigger("click")}}}}})}function u(w){var x=q(mainTableJqueryId).width();w.width(x)}function n(w){if(w&&w.closest("tr.fixedHeaderClone").length>0){return true}return false}function s(w,x){var y=q("#fastFilter");if(x.find(".gbff-active").filter(":in-viewport").length>1){return}if(y.hasClass("forFrozenHeader")&&(!w||(w.type!="resize"&&w.type!="click"))){GBFF.hideFastFilter()}}function b(x,w){e(x,w);t(w)}function t(w){q(".crDataContainer .toggleData.fixed").addClass("none");w.find(".fixedHeaderContainer").empty()}function e(x,w){x.addClass("none");w.find(".fixedHeaderContainer").empty()}function c(z,x){var y=GBHelpers.isRightToLeftLanguage(),D=q(l).scrollLeft(),C;if(y){C="margin-right"}else{C="margin-left";D=(D*-1)}if(x){var w=0,B=18;if(y){z.addClass("rightToLeftLanguage")}if(filteringByParent){if(y){w=5;B=-5}else{w=-10;B=10}}else{if(y){w=20;B=-5}}z.css(C,((D+w)+"px"));g.css(C,((D+B)+"px"));if(v){v.css(C,((D+B)+"px"))}if(h){h.css(C,((D-B)+"px"))}}else{var A=-6;if(q("div.gbPage").hasClass("webkit")){A=-5}q("#fixedParentHeaderTable").css(C,(D+"px"));g.css(C,((D+A)+"px"));if(v){v.css(C,((D+A)+"px"))}if(h){h.css(C,((D+A)+"px"))}}}function p(D,B){if(!j()){return}var A=null,x=q("#parentHeaderTable"),w=k(),y=null;if(D){var z=x.clone();z.attr("id","fixedParentHeaderTable");z.find("select.filterOptions").removeAttr("name");z.find("select.pageSizeSelect").removeAttr("name").removeAttr("onchange");x.after(z);A=q("#fixedParentHeaderTable");A.addClass("none");B.append('<tr><td class="fixedHeaderContainer"></td></tr>');d(x,A)}if(!A){A=q("#fixedParentHeaderTable")}var C=GBHelpers.debounce(function(Z,P){if(GBFreezeCols.isFreezeColsEnabled()){return}var ae=0;q(".childData.expanded").each(function(){var am=q(this);if(am.is(":partial-above-the-top(0,0)")){var an=am.find(".childHeaderRow");ae=an.height()+an.next(".summaryRow").height();return false}});var al,G=q(".gridBtns.top").outerHeight();parentHeader=q(".gradientHeader").filter(":first"),heightOfParentHeaderRow=parentHeader.height()+parentHeader.next(".summaryRow").height()+parentHeader.nextAll(".groupByRow").first().height(),offsetTopForTopSectionForParent=60,offsetTopForTopSectionForChild=95;if(G>67){offsetTopForTopSectionForParent=(offsetTopForTopSectionForParent+(G/2)-10);offsetTopForTopSectionForChild=(offsetTopForTopSectionForChild+(G/2)-15)}var U=(offsetTopForTopSectionForChild+","+ae),X=(offsetTopForTopSectionForParent+","+heightOfParentHeaderRow),O=(offsetTopForTopSectionForChild+ae),F=(offsetTopForTopSectionForParent+heightOfParentHeaderRow),ag=x.width();if(w){al=q("tr.gradientHeader:not(.fixedHeaderRow) ~ tr.dr, tr.gradientHeader:not(.fixedHeaderRow) ~ tr.groupByRow:not(.grandTotal)").filter(":partial-above-the-top("+X+")").add(q("div.childData.expanded tr.childHeaderRow:not(.fixedHeaderRow)").filter(":just-the-top("+U+")"))}else{al=q("tr.gradientHeader:not(.fixedHeaderRow, .none)").filter(":just-the-top("+X+")").add(q("div.childData.expanded tr.childHeaderRow:not(.fixedHeaderRow)").filter(":just-the-top("+U+")"))}if(P&&P.refreshHeader===true){m=null}if(al.length==0){v=h=g=m=null;b(A,B)}else{var J=false,E=q(l).scrollTop();var Q=al.last(),ah=Q.nextAll(".dr:not(.dataCard)"),T=Q.nextUntil(".cr[name]:visible",".dr[name]:not(.dataCard)");var M=Q.hasClass("childHeaderRow"),S=Q.hasClass("childHeaderRow"),ac=Q.nextAll("tr.dr:visible").length;if(w){var I=GBHelpers.isOneGroupingEnabled(),H=GBHelpers.isMultiObjectGrid(),ab=GBHelpers.areRelatedRecordsShown(),R=(I?".dr":".dr, .groupByRow"),W=Q.prevAll("tr.gradientHeader").first().nextUntil(".cr",R),K=(W.filter(":partial-above-the-top("+X+")").length==1),Y=Q.prev().hasClass("cr")||Q.prevUntil(".cr").last().prev().hasClass("cr");if(!S&&(K||Y)){if((W.length==1)&&(Q.prev(".gradientHeader.firstHeader").length==1)){J=true}else{if(I||(m!==B[0])){m=B[0];var aj=Q.prevAll(".gradientHeader").last();a(B,aj,Q,false,A,ag)}u(A);c(null,false);f()}}else{if(S&&ac>1&&!(E>=(T.last().offset().top+T.last().height()-O))){y=Q.closest(".crDataContainer").find(".toggleData.expanded.fixed");if(m!==Q[0]){m=Q[0];a(B,Q,null,true,A)}c(y,true);f()}else{if(!I&&(!H||(H&&!ab))){J=true}else{J=true}}}}else{if(S&&M){var ai=Q.closest(".cr"),N=ai.prev().hasClass("nr")||ai.prevUntil(".dr").last().prev();if(N&&q(mainTableJqueryId+" > tbody > tr.dr:not(.cr)").filter(":partial-above-the-top("+X+")").length===1){Q=q(mainTableJqueryId+" > tbody > tr.gradientHeader:first-child");S=false}}if(S&&M){if(ac>1&&!(E>=(T.last().offset().top+T.last().height()-O))){y=Q.closest(".crDataContainer").find(".toggleData.expanded.fixed");if(m!==Q[0]){m=Q[0];a(B,Q,null,true,A)}c(y,true);f()}else{J=true}}else{if(Q.hasClass("gradientHeader")){var V,ad=Q.next();if(ad.hasClass("nr")||(ad.hasClass("summaryRow")&&ad.next().hasClass("nr"))){var aa=Q.nextUntil(".gradientHeader, .nd"),L=aa.filter(":partial-above-the-top("+X+")"),af=aa.filter(":just-the-top("+X+")").filter(":last");V=(L.hasClass("dr")||af.hasClass("dr"))&&!L.prev().hasClass("gradientHeader")}else{if(Q.is(q(mainTableJqueryId+" tbody .gradientHeader:first"))){V=true}else{var ak=Q.nextUntil("tr.gradientHeader, tr.cr:visible","tr").not(".none").length;if(ak>1){V=(!(E>=(T.last().offset().top+T.last().height()-F)))}}}if(V){if(m!==B[0]){m=B[0];a(B,Q,null,false,A,ag)}u(A);c(null,false);f()}else{J=true}}}}if(!q(".gridBtns.top").hasClass("fixed")){J=true}if(J){v=h=g=m=null;b(A,B)}else{if((Z&&Z.type==="resize")||!D){r(g,q(m))}}if(Z&&Z.type==="click"){if(g){r(g,q(m))}}}},10);if(D){q(l).on("scroll resize gbScroll",C);q(B).on("click","h3.toggleData",C);B.on("mouseover",".fixedHeaderContainer .groupByRow.grandTotal .tooltip",function(){var E=q(this);if(!E.hasClass("fixedHeader-tooltipstered")){E.removeClass("tooltipstered").attr("title",lang.groupByGrandTotalTxt).tooltipster().addClass("fixedHeader-tooltipstered");E.tooltipster("show")}})}else{C()}}function j(){return !isIE7&&!isIE8&&!isInMobileView}function k(){return q(".gbPage").hasClass("gbNoRepeatParentHdr")}function f(){q("#fastFilter").addClass("forFrozenHeader")}function a(I,C,F,w,J,G){var A=q(".gridBtns.top").outerHeight(),E=C.next(".summaryRow");if(w){var B=C.closest(".crDataContainer");e(J,I);if(g){t(g)}I=C.closest(".childTable");g=C.clone().addClass("relatedRecord").attr("data-closest-parent",B.parent("tr.cr").attr("name"));childFixedHeaderCells=g.find("td:not(.selectAllChk, .lastCol)");childFixedHeaderCells.resizable({handles:"e"});childFixedHeaderCells.resizable("destroy");childFixedHeaderCells.resizable({handles:"e"});var D=g.find("input.selectAllChk");if(D.length>0){D.get(0).checked=C.find("> td.selectAllChk input.selectAllChk").is(":checked")}}else{J.removeClass("none");g=C.clone().attr("data-next-closest-dr-row",C.nextAll("tr.dr:first").attr("name"));var H=C.closest("tbody").find("> tr.gradientHeader:first-child > td.selectAllChk");g.find("td.selectAllChk").html(H.html());var D=g.find("input.selectAllChk");if(D.length>0){D.get(0).checked=H.find("input.selectAllChk").is(":checked")}t(I);E=q(".gradientHeader:first + .summaryRow")}g.addClass("fixedHeaderClone fixedHeaderRow").attr("name",I.attr("name"));if(A>67){if(g.hasClass("gradientHeader")){g.css("top",(A-1))}else{if(g.hasClass("relatedRecord")){var z=q(".crDataContainer .toggleData.expanded.fixed");z.css("top",(A-1));g.css("top",(A+30))}}}GBFF.activateFilterIcons(g.find("td span.gbff"));g.show();q(".gbPage .fixedHeaderContainer").append(g);if(E.length===1){v=E.clone();v.addClass("fixedSummaryClone");q(".gbPage .fixedHeaderContainer").append(v);v.show()}if(GBHelpers.isOneGroupingEnabled()&&F){var x=F.prevAll(".groupByRow:first");if(x.length===1){h=x.clone();h.addClass("fixedGroupByClone").removeAttr("title");q(".gbPage .fixedHeaderContainer").append(h);h.show()}}r(g,C);if(E.length===1){v.css("top",g.position().top+g.height()+"px")}if(GBHelpers.isOneGroupingEnabled()&&F){if(x.length===1){if(v){h.css("top",g.position().top+g.height()+v.height()+"px")}else{h.css("top",g.position().top+g.height()+"px")}}}var y=q(mainTableJqueryId+" .gradientHeader.fixedHeaderClone td").not(".selectAllChk, .lastCol");y.resizable({handles:"e"});y.resizable("destroy");y.resizable({handles:"e"})}function r(y,w){var A=w.find("td"),B=w.nextAll(".groupByRow:not(.summaryRow)").first().find("td");var x=w.closest(".crDataContainer");if(x.length>0){x.find(".toggleData.fixed").width(x.width()).removeClass("none")}if(y){var z=w.width()+1;y.width(z);if(v){v.width(z-2)}if(h){h.width(z-2)}}q.each(A,function(D,E){var F=q(E).width()+"px",C=q(y.find("td")[D]);if(v){C=C.add(v.find("td")[D])}if(C.hasClass("lastCol")){C.attr("style","min-width:"+F+" !important;")}else{C.attr("style","min-width:"+F+";")}});q.each(B,function(D,E){var F=q(E).width()+"px",C=q(y.find("td")[D]);if(h){C=C.add(h.find("td")[D])}C.width(F)})}return{filterIconTriggeredFromFrozenHeader:n,hideFrozenHeaders:b,initiateFreezeHeaders:p,isFreezeHeadersEnabled:j}})(window,document,jq);var GBGroupBy=(function(E,c,j){var v={},t={},y,n,s,w,F,d=0;function G(){if(filteringByParent){return}e();C()}function I(N){y=N.groupByOrder;n=N.groupByOrderDir;s=N.supportedAggregateFunctions}function L(){var O;if(getParentGridInfo().getHasGroupByFields()){if(!y){O="grouped field"}else{var N=y.split(":");if(s.indexOf(N[0])>-1){O=N[0].toLowerCase()}else{if(N.length==3){O="grouped field"}}}}return O}function B(){if(getParentGridInfo().getHasGroupByFields()&&!filteringByParent&&(!showGroupingsExpanded||!showRecordDetailsInGroup)){return true}return false}function M(N,O){if(N.isNumeric()){if(!O){O=0}if(N.isTypeCurrency()&&GBGrid.conversionRate){O=O*GBGrid.conversionRate}O=O.toString();O=D(O,O.indexOf(GBHelpers.getDefaultDecimalSeparator()),N.scale);O=GBHelpers.formatNumber(O);if(N.isTypeCurrency()){O=GBGrid.defaultCurrencySymbol+O}}else{if(!O){O="-"}}return O}function D(P,O,Q){var N=P;if(O>-1&&(P.length-O-1>Q)){N=N*1;N=N.toFixed(Q)}return N}function H(ad,ac,U,N){if(ac==1){return 1}else{var V,T,Y,ab,aa,Z,R,X,W,S,O,Q;T=GBGridInfoHelper.getGridInfoByFullObjectName(ad);Y=T.objId;ab=t[ad][U];if(ab.isDataCardField){aa=j('.mainTable[name="'+Y+'"] > tbody > tr.dr.dataCard:first')}else{aa=j('.mainTable[name="'+Y+'"] > tbody > tr.dr:first')}Z=ab.getCellContainer();R=aa.find(Z+'[name="'+ab.fieldId+'"]:not(.dvc)');W=objectNameToAggregateResults[ad]["groupedRowResults"];Q=W.length;X=p(ab,R,true);X=GBHelpers.unformatValue(X,ab.colDataType);for(var P=N;P<Q;P++){S=W[P];O=(S[ab.groupByAlias]||"");if(typeof O=="string"){if(O.indexOf("&")>-1){O=O.replace(/&/g,"&amp;")}if(O.indexOf('"')>-1){O=O.replace(/"/g,"&#34;")}}O=q(O);X=q(X);if(O==X&&S[ab.groupingFunctionAlias]==0){V=P;break}}return V}}function p(Q,N,O){var P;if(N.find('input[type="checkbox"]').length>0){P=N.find('input[type="checkbox"]').is(":checked")}else{if(N.find("span.chkd").length>0){P=true}else{if(N.find("span.unchkd").length>0){P=false}else{if(N.find("input").length>0){P=N.find("input").val()}else{if(Q.isDataCardField){P=N.find(".cardCell").text()}else{P=N.text()}P=j.trim(P)}if(O){P=htmlEscape(P)}}}}return P}function e(){var P=j(mainTableJqueryId),S=P.find("tr.dr:not(.nd):first"),O=P.find("tr.dr:not(.nd):not(.nr):first"),Q={};for(var aa in t){var U=GBGridInfoHelper.getGridInfoByFullObjectName(aa),X=U.objId,N=t[aa],V=(v[aa]||{}),W=objectNameToAggregateResults[aa]["groupedRowResults"],T=W[0],Z,R=false;N=r(N);F=N.length;for(var Y in V){if(V[Y].isDataCardField){delete V[Y]}}if(!j.isEmptyObject(V)){S.before(K(S,"summaryRow groupByRow grandTotal",0,true,T,V))}w=H(aa,firstGridRow,0,1);j('.mainTable[name="'+X+'"] > tbody > tr.dr:not(.dataCard):not(.nr)').each(function(){var ai=j(this),ag=ai,ah,aj,al,ak,ad,ac,af,ab=1,ae;for(ae=0;ae<F;ae++){ak=N[ae];aj=ak.getCellContainer();if(ak.isDataCardField){ag=ai.next(".dataCard")}else{ag=ai}al=ag.find(aj+'[name="'+ak.fieldId+'"]:not(.dvc)');objectDotField=ak.getObjectDotField(U);af=Q[objectDotField];af=q(af);prevRowIsGroupHeader=ai.prev("tr").hasClass("groupByRow");ad=p(ak,al,true);ac=ad;ac=q(ac);if(ac!=af||prevRowIsGroupHeader){if(firstGridRow!=1&&ae!=0&&!R){w=H(aa,firstGridRow,ae,w);if(ae==F-1){R=true}}T=W[w];ai.before(K(O,"groupByRow",ab,false,T,V,ak,ad));w++}Q[objectDotField]=ad;ab++}});l();j(".groupByRow .tooltip").tooltipster()}}function q(N){if(N&&typeof N=="string"){N=N.toLowerCase()}return N}function l(){var O=j(".groupByRow.grp1:first"),N=j(".groupByRow.grp1:last");x(O);if(j(N).find("td.titleCol .grpValue .gbInfoIcon").length>0){return}x(N)}function x(P){var Q,O=0,N=P.find(".recordCount").text().replace("(","").replace(")","");j(P.nextUntil("tr.grp1").not(".cr, .dataCard")).each(function(){Q=j(this);if(Q.hasClass("dr")){O++}});if(O!=N){P.find("td.titleCol .grpValue").append('<span class="gbInfoIcon tooltip" title="'+lang.groupRecordsSpanMultiplePages+'"/>')}}function r(O){for(var N=O.length-1;N>=0;N--){metaCol=O[N];if(metaCol===0){O.pop()}}return O}function K(Q,R,N,X,S,U,Z,P){if(Q.length==0){return}var W=Q.find("td"),R=R+" grp"+N,R=((((showGroupingsExpanded&&N==thisGridInfo.groupByFields.length)||!showGroupingsExpanded)&&!showRecordDetailsInGroup&&!X)?R+" off":R),R=(!showGroupingsExpanded&&N>1?R+" none":R),V=(!X?' title="'+lang.groupByRowTxt+'"':""),O=j('<tr class="'+R+' bold" '+V+"/>");W.each(function(ae){var am=j(this),aj=am.attr("name"),af=GBHelpers.getElemClasses(am),ab=(W.length-1),ac=(ae==0),ag=(ae==ab),al=(ae==1),aa=(Z?Z.fieldLabel:""),ak=am.hasClass("dvc"),ai=(al?J(X,S,aa,P):""),ah=(ak?"":A(aj,S,U,ae,X)),ad="";if(ag){af=af+" lastCell"}else{if(al&&!X){af=af+" titleCol"}}if(ac&&!X){ad='<input type="checkbox" class="grpChk"/>'}af=u("gb-cf",af);if(ah==""&&af.indexOf("np")>-1){af=af.replace("np","")}O.append("<td "+(aj?'name="'+am.attr("name")+'"':"")+(af?' class="'+af+'"':"")+">"+ad+(al?'<span class="grpContent">':"")+ai+(al?"</span>":"")+ah+"</td>")});O.find("td").removeClass("pl plOn mod");if(!X){var T=O.find("td:first"),Y=O.find("td:first").next();if(Y.hasClass("titleCol")){T.addClass("titleCol")}T.append(Y.html());T.attr("name",Y.attr("name"));T.attr("colspan",2);Y.remove()}return O}function u(P,R){var N=R.split(" "),S=[],O,Q;for(Q=0;Q<N.length;Q++){O=N[Q];if(!O.startsWith(P)){S.push(O)}}return S.join(" ")}function J(P,R,O,Q){var N="";if(P){}else{if(Q===true){Q="Yes"}else{if(Q===false){Q="No"}else{Q=(Q||"-")}}N=N='<span class="grpLabel">'+O+': <span class="grpValue">'+Q+g(R)+"</span></span>"}return N}function A(S,P,Q,T,U){var O="",W=(T==1);if(Q[S]){var R=Q[S],N=(P[R.aggregateAlias]||""),V="";if(R.isTypePercent()){j("tr.groupByRow td:nth-child("+T+")").not("tr.groupByRow.summaryRow td:nth-child("+T+")").addClass("np");j("tr.summaryRow td:nth-child("+(T+1)+")").not("tr.groupByRow.summaryRow td:nth-child("+T+")").addClass("np")}N=M(R,N);if(U&&a(R)){V=z()}O+=(W&&!U?'<div class="firstColAgg">':"")+(U?"<div>"+R.summaryType+V+"</div>":"")+N+(W&&!U?"</div>":"")}else{if(U&&T==0){text=k(Q);O='<span class="gbInfoIcon tooltip" title="'+text+'"/>'}}return O}function k(S){var T=lang.groupByGrandTotalTxt;if(y){var P=y.split(":"),Q=P[0],U=P[1];if(s.indexOf(Q)>-1){if(Q=="COUNT"){T+=" "+lang.groupBySortedByRecordCountTitle}else{var O,R;for(var N in S){R=S[N];if(R.fieldName==U){O=R.fieldLabel;break}}T+=" "+lang.groupBySortedBySummaryTitle.replace("{0}",Q).replace("{1}",O)}}}return T}function a(N){if(y){var O=y.split(":");if(s.indexOf(O[0])>-1&&O[1]==N.fieldName){return true}}return false}function z(O){var N=(n=="asc"?"sortasc":"sortdesc"),O=(O||"");return'<span class="'+N+" groupByAgg "+O+'"><div class="arrow"></div></span>'}function g(Q){var P=(Q?Q.cnt:""),N="";if(y){var O=y.split(":");if(O[0]=="COUNT"&&d<F){N=z("rc");d++}}return' <span class="recordCount">('+P+N+")</span>"}function C(){jqFrozenAndUnfrozenTables.on("change",".grpChk",function(R){var N=j(this);f(j(this));if(GBFreezeCols.isFreezeColsEnabled()&&GBFreezeCols.isElementInFrozenTable(N)){var P=N.closest(".groupByRow"),Q=P.attr("class").split(" ").join("."),O=P.nextUntil(".dr").addBack().last().next(".dr"),S=O.attr("id");j(mainTableJqueryId).find('.dr[id="'+S+'"]').not(".dup").prevUntil(".gradientHeader, .dr","tr."+Q).find(".grpChk").trigger("click")}});jqFrozenAndUnfrozenTables.on("click.groupBySync","tr.groupByRow:not(.grandTotal)",function(R){if(j(R.target).hasClass("grpChk")){return}var N=j(this);h(N);GBFreezeCols.freezeColumnsIfEnabled();if(GBFreezeCols.isFreezeColsEnabled()&&!R.namespace){var Q,S;if(GBFreezeCols.isElementInFrozenTable(N)){Q=j(mainTableJqueryId);S=j(mainFrozenTableContainerJqueryId)}else{Q=j(mainFrozenTableContainerJqueryId);S=j(mainTableJqueryId)}var P=N.attr("class").split(" ").slice(0,2).join("."),O=Q.find("tr."+P);if(O.length>1){S.find("tr."+P).each(function(T){if(j(this).is(N)){O=O.eq(T);return false}})}O.trigger("click.groupBySync")}if(GBFreezeCols.isFreezeColsEnabled(true)){setTimeout(function(){if(GBHelpers.areRelatedRecordsShown()){GBFreezeCols.unfreezeColumns(false,GBFreezeCols.relatedRecordsCollapsedMsg)}},10)}else{GBFreezeCols.updateHeightOfTablesWithNoFrozenCols()}})}function f(P){var R=P.parents("tr.groupByRow"),Q=P.prop("checked"),O=m(R),S,N;S=j(R.nextUntil(O,"tr.dr, tr.groupByRow")).find("input.dl, input.grpChk");N=j(R.nextUntil(O,"tr.dr, tr.groupByRow"));S.prop("checked",Q);if(Q){N.addClass("selected")}else{N.removeClass("selected")}}function h(N){var O=N.hasClass("off"),R=m(N),Q=O?b(N):"tr.groupByRow, tr.dr, tr.cr, tr.grp, tr.pdr",S="tr.groupByRow, tr.grp",P;P=j(N.nextUntil(R,Q));if(O){GBMixpanel.track("Change Grid Display",{"Display Control":"Group By Header",Option:"",State:"Expand"});P=GBDataCard.removeCollapsedDataCards(P);P.removeClass("none");N.removeClass("off")}else{GBMixpanel.track("Change Grid Display",{"Display Control":"Group By Header",Option:"",State:"Collapse"});P.addClass("none");P.filter(S).addClass("off");N.addClass("off")}}function b(N){var Q=N.next(),R=Q.hasClass("groupByRow")||Q.hasClass("grp"),S="tr.dr, tr.cr, tr.grp, tr.pdr";if(R){var O=GBHelpers.getElemClasses(Q).split(" "),P=o(O);S="tr."+P}return S}function m(N){var O=GBHelpers.getElemClasses(N).split(" "),Q=o(O),P;switch(Q){case"grp1":P="tr.grp1";break;case"grp2":P="tr.grp2, tr.grp1";break;case"grp3":P="tr.grp3, tr.grp2, tr.grp1";break}return P}function o(N){for(i=0;i<N.length;i++){if(N[i].startsWith("grp")&&N[i]!="grp"){return N[i]}}return""}return{init:G,objectToAggregateFieldIds:v,objectToGroupByMetaCols:t,getShouldHideGridRows:B,setGroupByProps:I,getGroupSortedBy:L,removePlaceHolders:r,formatAggregateValue:M,toggleSectionsForGroup:h,safeLowerCase:q,roundToScale:D}})(window,document,jq);var GBDraggableResizeColumns=(function(g,j,b){var k=b(mainTableJqueryId+" .lastCol").width(),f,c=[null,null],e=".gradientHeader td:not(.selectAllChk, .lastCol)",h;function m(){var n=b(mainTableJqueryId+" "+e),r,p,t,s;h=JSON.parse(localStorage.getItem(gridNameForUDF+"column widths"))||{};for(var o in h){if(o.indexOf(":dvc")!=-1){s=o.split(":")[0];r=b(mainTableJqueryId+' > tbody > tr.gradientHeader > td[name="'+s+'"].dvc, '+mainTableJqueryId+' > tbody > tr.dr > td[name="'+s+'"].dvc');columnDataCells=b(mainTableJqueryId+' > tbody > tr.dr > td[name="'+s+'"].dvc')}else{r=b(mainTableJqueryId+' > tbody > tr.gradientHeader > td[name="'+o+'"]:not(.dvc), '+mainTableJqueryId+' > tbody > tr.dr > td[name="'+o+'"]:not(.dvc)');columnDataCells=b(mainTableJqueryId+' > tbody > tr.dr > td[name="'+o+'"]:not(.dvc)')}t=r.first().width();r.not(".titleCol, .chk").css("min-width",h[o]+"px");f=columnDataCells.first().find("input, textarea").width();var q=(f+(h[o]-t));if(columnDataCells.find("input.gbd").length>0&&columnDataCells.find("input.gbt").length>0){columnDataCells.find("input, textarea").not('[type="checkbox"]').attr("style","width: "+(f+q)/2+"px!important; min-width: "+(f+q)/2+"px;")}else{columnDataCells.find("input, textarea").not('[type="checkbox"]').attr("style","width: "+q+"px!important; min-width: "+q+"px;")}}p=b(".gradientHeader").first().width();b("tr.fixedHeaderClone").width(p+"px");b("tr.summaryRow").width(p+"px");b("#fixedParentHeaderTable").width(p+"px")}function d(){var n=b(mainTableJqueryId+" "+e);if(n.first().hasClass("ui-resizable")==false){n.resizable({handles:"e"})}}function l(){var n=b(mainTableJqueryId+" "+e);if(n.first().hasClass("ui-resizable")==true){n.resizable("destroy")}}function a(){var n=b(mainTableJqueryId+" "+e);if(n.first().hasClass("ui-resizable")==true){n.resizable({handles:"e"})}}b(mainTableJqueryId).on("resizestart",e,function(n,o){if(b(mainTableJqueryId+' td[name="'+b(o.element).attr("name")+'"]').find("input.gbd").length>0&&b(mainTableJqueryId+' td[name="'+b(o.element).attr("name")+'"]').find("input.gbt").length>0){f=b(mainTableJqueryId+' td[name="'+b(o.element).attr("name")+'"]').find("input.gbd").width()+b(mainTableJqueryId+' td[name="'+b(o.element).attr("name")+'"]').find("input.gbt").width()}else{f=b(mainTableJqueryId+' td[name="'+b(o.element).attr("name")+'"]').find("input, textarea").width()}b(mainTableJqueryId+" "+e).resizable("option","minWidth",10)});b(mainTableJqueryId).on("resize",e,function(q,r){q.preventDefault();q.stopPropagation();var s=b(r.element),t,p,n;if(s.hasClass("dvc")){t='td.dvc[name="'+s.attr("name")+'"]'}else{t='td[name="'+s.attr("name")+'"]:not(.dvc)'}p=b(mainTableJqueryId+" > tbody > tr.gradientHeader > "+t+", "+mainTableJqueryId+" > tbody > tr.dr > "+t);n=b(".gradientHeader").first().width();c.unshift(b(this).outerWidth());c.pop();if(c[0]==c[1]&&c[0]!=null&&r.size.width<r.originalSize.width){b(mainTableJqueryId+" "+e).resizable("option","minWidth",r.size.width)}p.not(".titleCol, .chk").css("min-width",r.size.width+"px");var o=(f+(r.size.width-r.originalSize.width));if(p.find("input.gbd").length>0&&p.find("input.gbt").length>0){p.find("input, textarea").not('[type="checkbox"]').attr("style","width: "+o/2+"px!important; min-width: "+o/2+"px;")}else{p.find("input, textarea").not('[type="checkbox"]').attr("style","width: "+o+"px!important; min-width: "+o+"px;")}b(".fixedHeaderClone "+t).css("min-width",p.width());b("tr.fixedHeaderClone").width(n+"px");b("tr.summaryRow").width(n+"px");b("#fixedParentHeaderTable").width(n+"px")});b(mainTableJqueryId).on("resizestop",e,function(p,q){var o=this;var n=q.element.attr("name");var r=function(s){s.preventDefault();s.stopPropagation()};b(this).on("click",r);setTimeout(function(){b(o).off("click",r)},200);GBMixpanel.track("Change Grid Display",{"Display Control":"Resize Column",Option:"",State:""});if(q.element.hasClass("dvc")){n=n+":dvc"}h[n]=q.size.width;localStorage.setItem(gridNameForUDF+"column widths",JSON.stringify(h))});return{init:m,initResizable:d,destroy:l,reinitOnNewRow:a}})(window,document,jq);var GBResizableChildColumns=(function(g,h,c){var d=[null,null],b=false,j,l=JSON.parse(localStorage.getItem(gridNameForUDF+"child column widths"))||{};function k(){if(gridInfoMap&&Object.keys(gridInfoMap)&&Object.keys(gridInfoMap).length==1){return}for(var m in l){var p=m.split("_")[0],q=m.split("_")[1];columnCells=c(mainTableJqueryId+' > tbody > tr.cr > td.crDataContainer > div.branch > div.childData > div.childDataContainer > table.childTable[name="'+p+'"] > tbody > tr.childHeaderRow > td[name="'+q+'"], '+mainTableJqueryId+' > tbody > tr.cr > td.crDataContainer > div.branch > div.childData > div.childDataContainer > table.childTable[name="'+p+'"] > tbody > tr.dr > td[name="'+q+'"]');columnDataCells=c(mainTableJqueryId+' > tbody > tr.cr > td.crDataContainer > div.branch > div.childData > div.childDataContainer > table.childTable[name="'+p+'"] > tbody > tr.dr > td[name="'+q+'"]');originalWidth=columnCells.first().width();columnCells.not(".titleCol, .chk").css("min-width",l[m]+"px");inputWidth=columnDataCells.first().find("input, textarea").width();var n=(inputWidth+(l[m]-originalWidth));if(columnDataCells.find("input.gbd").length>0&&columnDataCells.find("input.gbt").length>0){columnDataCells.find("input, textarea").not('[type="checkbox"]').attr("style","width: "+(inputWidth+n)/2+"px!important; min-width: "+(inputWidth+n)/2+"px;")}else{columnDataCells.find("input, textarea").not('[type="checkbox"]').attr("style","width: "+n+"px!important; min-width: "+n+"px;")}}var o=".childHeaderRow td:not(.selectAllChk, .lastCol)";f(o)}function e(){var n=".childHeaderRow td:not(.selectAllChk, .lastCol)",m=c(mainTableJqueryId+" "+n);if(m.first().hasClass("ui-resizable")==false){m.resizable({handles:"e"})}}function f(m){c(mainTableJqueryId).on("resizestart",m,function(n,o){var p=c(o.element).closest("table").attr("name");if(p=="p"){p=c(o.element).closest("tr").attr("name")}j=c(mainTableJqueryId+' table[name="'+p+'"] td[name="'+c(o.element).attr("name")+'"]').find("input, textarea").width()});c(mainTableJqueryId).on("resize",m,function(o,t){o.preventDefault();o.stopPropagation();var w=c(t.element),n,x,v,p,u,s,q;if(w.closest("table").attr("name")=="p"){p=w.closest("tr").attr("name")}else{p=w.closest("table").attr("name")}q=p+"_"+t.element.attr("name");u=mainTableJqueryId+' .childTable[name="'+p+'"]';s=mainTableJqueryId+' .fixedHeaderContainer .childHeaderRow.fixedHeaderClone[name="'+p+'"]';n='td[name="'+w.attr("name")+'"]:not(.dvc)';v=w.closest(".childHeaderRow").width();x=c(u+" > tbody > tr.childHeaderRow > "+n+", "+u+" > tbody > tr.dr > "+n+", "+s+" "+n);d.unshift(c(this).outerWidth());d.pop();if(d[0]==d[1]&&d[0]!=null&&t.size.width<t.originalSize.width){c(x).filter("td.ui-resizable").resizable("option","minWidth",t.size.width)}x.not(".titleCol, .chk").css("min-width",t.size.width+"px");var r=(j+(t.size.width-t.originalSize.width));if(x.find("input.gbd").length>0&&x.find("input.gbt").length>0){x.find("input, textarea").not('[type="checkbox"]').attr("style","width: "+r/2+"px!important; min-width: "+r/2+"px;")}else{x.find("input, textarea").not('[type="checkbox"]').attr("style","width: "+r+"px!important; min-width: "+r+"px;")}c("tr.childHeaderRow.fixedHeaderClone").width(v+"px");c(u+" tr.summaryRow").width(v+"px");l[q]=t.size.width;localStorage.setItem(gridNameForUDF+"child column widths",JSON.stringify(l))})}function a(o){var n='.childTable[name="'+o+'"] .childHeaderRow td:not(.selectAllChk, .lastCol)',m=c(mainTableJqueryId+" "+n);if(m.first().hasClass("ui-resizable")==true){m.resizable({handles:"e"})}}return{init:k,initResizable:e,reinitOnNewRow:a}})(window,document,jq);var GBMixpanel=(function(g,h,b){function m(n){if(isTrackingDisabled||(typeof mixpanel=="undefined")){return}c=new Date().getTime();mixpanel.init(n);e()}var l={source:function(){return""},track:function(){var n=getParentGridInfo().groupByColumnInfos[0],o=false,p,q="n/a";if(n){o=true;p=n.fieldInfo.split(":");q=p[2]=="PICKLIST"?"n/a":n.format}GBMixpanel.track("Grid Save",{"# Edited Fields":GBHelpers.getEditedFieldsLength(),"# Edited Records":modDataSize,"# New Records":newDataSize,"# Cloned Records":GBRowHelper.getClonedRecordsLength(),"New Objects":GBHelpers.getEditedObjectsFields(false,true),"Edited Objects":GBHelpers.getEditedObjectsFields(false,false),"Edited Fields":GBHelpers.getEditedObjectsFields(true,false),Source:GBMixpanel.onGridSave.source,"Forecast View Enabled":o?true:false,"Column Grouping Field":o?p[0]+"."+p[1]+"."+p[2]:"n/a","Column Grouping Format":q,"# Formatting Rules":colorCodingRulesJson.length,"# Detail Panel Views":GBDataPanel.numOfDataPanelViews,"# Edited Detail Panel Fields":GBDataPanel.numOfEditedDataPanelFields,"Edited Fields Seq":f});GBMixpanel.peopleIncrement("Grid Save");GBMixpanel.onGridSave.source=""}},f=[],c;function a(n,o){if(isTrackingDisabled||(typeof mixpanel=="undefined")){return}if(!o){o={}}var p=b.extend({},o,{"Org ID":orgId,"Grid Name":gridNameForUDF,"GridBuddy Edition":gbEdition,"GridBuddy Version":gridBuddyVersion,"User ID":userId,"User Type":abbreviatedUserType,"UI Theme":uiTheme,"User Language":userLanguage,"Lightning Style Enabled":lightningStylesEnabled,"OS Version":k(),"Transaction ID":c});mixpanel.track(n,p);mixpanel.people.set({"User ID":userId,"User Type":uiTheme,"UI Theme":abbreviatedUserType,"User Language":userLanguage});mixpanel.identify(userId)}function k(){var p="Unknown OS";var o=navigator.userAgent;if(o&&(o.indexOf("Firefox")==-1)){var n=navigator.appVersion;if(n.indexOf("Mac")!=-1){p=n.match(/([Mac]+.+)/)[1]}else{if(n.indexOf("Windows")){p=n.match(/([Windows]+.+)/)[1]}}}else{if(o.indexOf("Firefox")!=-1){p=navigator.oscpu}}return p}function e(){b("#parentHeaderTable").find(".pageSizeSelect").on("change",function(){GBMixpanel.track("Change Data Set",{"Data Control":"Page Size",Source:""})});b(".pagination").on("click",".paginationLink",function(){GBMixpanel.track("Change Data Set",{"Data Control":"Pagination",Source:GBHelpers.getPaginationValue(b(this))})});b(mainTableJqueryId+" .cr").on("click",".icon-arrow",function(){if(b(this).closest("h3").hasClass("collapsed")){GBMixpanel.track("Change Grid Display",{"Display Control":"Child Header",Option:"",State:"Expand"})}else{GBMixpanel.track("Change Grid Display",{"Display Control":"Child Header",Option:"",State:"Collapse"})}});b(".gridBtns").on("click",".saveBtn",function(){if(GBMixpanel.onGridSave.source=="Shortcut"){return}if(b(this).hasClass("saveReturnBtn")){GBMixpanel.onGridSave.source="Save and Return"}else{GBMixpanel.onGridSave.source="Save Button"}})}function d(n){if(isTrackingDisabled||(typeof mixpanel=="undefined")){return}mixpanel.people.increment(n)}function j(n,p,o){f.push(n.objectNameWithoutFk+"."+p.fieldName+"."+o.attr("id"))}return{init:m,track:a,peopleIncrement:d,onGridSave:l,addEditedFieldsSeq:j}})(window,document,jq);var GBTracking=(function(g,k,b){var l;function n(){a();m();e();d()}function a(){var o=c()+"&reqtype=trackGridView&gname="+gridNameForUDF+"&gridId="+gridBuddySettingId;j(o)}function m(){if(readOnlyGrid==false){var o=k.forms[b("form.gbForm").attr("name")];b(o).submit(function(){if(btnClick=="save"){l=b(".mod").size();if(b.browser.mozilla){setTimeout(f,25)}else{f()}}})}}function e(){b("div.gbPage").on("click","li.exportItem",function(){var o=c()+"&reqtype=trackGridExport&gname="+gridNameForUDF+"&gridId="+gridBuddySettingId;j(o)})}function d(){b("div.gbPage").on("click","li.reorderColsItem",function(){var o=c()+"&reqtype=trackReorderColumns&gname="+gridNameForUDF+"&gridId="+gridBuddySettingId;j(o)})}function j(o){b.ajax({url:o,dataType:"json",async:false})}function f(){var o=c()+"&reqtype=trackGridSave&gname="+gridNameForUDF+"&fieldNames="+JSON.stringify(h())+"&fieldCount="+l+"&gridId="+gridBuddySettingId;j(o)}function h(){var v={},x={},q="";for(var r in modData){var s=modData[r],o=s.nm,u=(getParentObjectName()==o?getParentGridInfo():getChildGridInfo(o)),w=u.gridName;for(var y in modData[r]){if(isFieldCell(y)){var z=u.getMetaColByFieldId(y),p=z.fieldLabel;if(!x[w]){x[w]={};v[w]=[]}if(!x[w][p]){x[w][p]=true;v[w].push(p)}else{}}}}for(var y in v){q+=y.toUpperCase()+" - ";for(var t=0;t<v[y].length;t++){q+=v[y][t]+", "}}q=q.substring(0,(q.length-2));return q}function c(){var p=g.location.href,o=p;o=o.substring(0,o.toLowerCase().indexOf("grid?"))+"LookupAjaxResponder?core.apexpages.devmode.url=1";return o}return{init:n}})(window,document,jq);var GBFlatView=(function(d,a,g){var c=[];function f(){e();b()}function e(){var j;for(var h in gridInfoMap){if(h=="p"){continue}j=gridInfoMap[h];if(j.isDenormalizedView){c.push(j)}}}function b(){var k,m,l,h=[],n=[];if(c.length>0){getParentGridInfo().hasFlatViewChildren=true;for(var j=0;j<getParentGridInfo().metaColumns.length;j++){m=getParentGridInfo().metaColumns[j];if(m.requiredForCreate){n.push(m);continue}l=m.getObjectDotField(getParentGridInfo());metaColIndex=getParentGridInfo().flatViewFieldOrder[l];h[metaColIndex]=m}for(var j=0;j<c.length;j++){k=c[j];for(var j=0;j<k.metaColumns.length;j++){m=k.metaColumns[j];if(m.requiredForCreate){n.push(m);continue}l=m.getObjectDotField(k);metaColIndex=getParentGridInfo().flatViewFieldOrder[l];h[metaColIndex]=m;if(m.isDataCardField&&getParentGridInfo().hasDataCardFields==false){getParentGridInfo().hasDataCardFields=true}}}h=h.concat(n);getParentGridInfo().metaColumns=h}}return{flatViewObjects:c,init:f}})(window,document,jq);var GBDataCard=(function(l,m,e){var k,b,r;function p(){k=(l.location.href.indexOf("&ssb=1")>0),sidebarCell=e("#sidebarCell"),r=sidebarCell.outerWidth();d()}function g(s){if(s.hasDataCardFields){return'<span class="icon-wrap"></span>'}return""}function j(w,x,y,t){var v=["cardItem",t],s=[],u=w;if(x.gridInfoGridId!=w.gridId){u=gridInfoMap[x.gridInfoGridId]}s.push('<div class="'+v.join(" ")+'" name="'+x.fieldId+'">');s.push('<label class="cardLabel">'+x.fieldLabelForDisplay(u)+"</label>");s.push('<div class="cardCell">'+y+"</div>");s.push("</div>");return s}function f(x,v,C,w,D,s,t,A){var z=(t?' data-childId="'+t+'"':""),y=(A?' data-childRowName="'+A+'"':""),u=GBRowHelper.getColCount(x,true),B=[];if(!s){w.push("none")}B.push('<tr id="'+v+'" class="'+w.join(" ")+' dataCard" name="'+C+'"'+z+y+">");B.push('<td class="firstCol"></td>');B.push('<td class="dataCardCell" colspan="'+u+'">');B.push('<div class="cardTable">'+D.join("")+"</div>");B.push("</td></tr>");return B.join("")}function c(s){if(s.closest(".dataCard").hasClass("none")){s.closest(".dataCard").prev("tr.dr").find(".icon-wrap").click()}}function n(){e("#massUpdatesTable").on("click",".icon-wrap",a)}function o(s){s=s.filter(function(){if(e(this).hasClass("dataCard")&&!e(this).prev(".dr").find(".icon-wrap").hasClass("on")){return false}return true});return s}function d(){jqFrozenAndUnfrozenTables.on("click",".icon-wrap",a);e(l).resize(function(){e(".dataCard:visible").each(function(){var v=e(this),u=v.prev("#"+v.attr("id")),z=v.find(".dataCardCell"),y=v.find(".cardTable"),x=u.find("td:eq(0)").outerWidth(),t=u.find("td.lastCol").outerWidth(),w=q(u,v,x,t),s=h(w,x);z.css("width",w);y.css("width",s)})})}function a(){var t=e(this),D=GBFreezeCols.isElementInFrozenTable(t),s=(t.closest("#relatedColumnWidget").length>0),A,H,C;if(!s&&D){if(GBFreezeCols.isFreezeColsEnabled()){GBFreezeCols.unfreezeColumns(false,GBFreezeCols.dataCardsNotSupportedMsg)}var w=t.closest("tr"),z=w.attr("id"),B=t.closest("td"),x,E;A=GBFreezeCols.getRowToUpdate(w,z,e(mainTableJqueryId));H=A.find(".icon-wrap");C=A.find('td[name="'+B.attr("name")+'"]')}else{if(GBFreezeCols.isFreezeColsEnabled()&&!t.is(":visible")){GBFreezeCols.unfreezeColumns(false,GBFreezeCols.dataCardsNotSupportedMsg)}A=t.closest("tr.dr");H=t;C=t.closest("td")}var v=A.next("#"+A.attr("id")+".dataCard");if(!v.hasClass("none")){GBMixpanel.track("Change Grid Display",{"Display Control":"Data Card",Option:"",State:"Collapse"});v.addClass("none");H.removeClass("on");C.removeClass("borderBottomNone");if(!s){GBFreezeCols.freezeColumnsIfEnabled()}}else{var u=v.find(".cardTable"),I=v.find(".dataCardCell"),y=A.find("td:eq(0)").outerWidth(),G=A.find("td.lastCol").outerWidth(),J=q(A,v,y,G),F=h(J,y);GBMixpanel.track("Change Grid Display",{"Display Control":"Data Card",Option:"",State:"Expand"});addAutocompleteToLookupFields(v,false);v.find(".plTxt").click();v.removeClass("none");H.addClass("on");C.addClass("borderBottomNone");I.css("width",J);u.css("width",F)}if(!s&&!GBFreezeCols.isFreezeColsEnabled()){GBFreezeCols.updateHeightOfTablesWithNoFrozenCols()}}function q(z,t,y,v){var x;x=z.width()-(y+v);if(t.closest(".childTable").length>0){var A=e(mainTableJqueryId).find("tbody > tr").eq(0),w=A.find("td:eq(0)").outerWidth(),u=A.find("td.lastCol").outerWidth(),s=A.width()-(w+u);x=(s<x)?x:s}return x}function h(u,t){var s;if(k&&sidebarCell.is(":visible")){s=l.innerWidth-(r+t)}else{s=l.innerWidth-t}s-=t;return(u>s)?s+"px":"100%"}return{init:p,getDataCardIcon:g,getDataCardCellHtml:j,getDataCardRowHtml:f,openDataCard:c,addEventHandlerForMassUpdate:n,removeCollapsedDataCards:o}})(window,document,jq);var GBUndo=(function(h,l,f){function d(){jqFrozenAndUnfrozenTables.on("click",".icon-undo",function(o,p){n(f(this),p)})}function a(){f("#dataPanel").on("click",".icon-undo",function(o,p){n(f(this),p)})}function k(q,v,r,x,p){var t=q.closest(x.getCellContainer()),o,w=t.find(".icon-undo");if(p==null){p=GBFreezeCols.isFreezeColsEnabled()}f(".gbPage .gbBtnGroup .saveBtn").addClass("savePending");if(w.length==0){var s=t.find(".ui-widget"),u=l.createDocumentFragment();undoIconNative=l.createElement("span");undoIconNative.className="icon-undo";undoIconNative.title=lang.undoTitle;u.appendChild(undoIconNative);if(x.isTypePicklist()&&q.is(":disabled")){undoIconNative.className+=" none"}if(s.length>0){o=s}else{if(t.hasClass("cardItem")){o=t.find(".cardCell")}else{o=t}}o[0].appendChild(u)}else{if(x.isTypePicklist()&&!q.is(":disabled")){w.removeClass("none")}}if(p){f(h).trigger("gbFreeze")}j(v,r,x,undoIconNative,p)}function j(v,q,w,s,o){if(o&&q.isParentInfo){var r=f("#gbMainTableContainer"),p=w.getCellContainer()+'[name="'+w.fieldId+'"]:not(.dvc)',u=GBFreezeCols.getRowToUpdate(v,v.attr("id"),r),t=u.find(p);if(t.find(".icon-undo").length==0){lookupWidgetInUnfrozenTable=t.find(".ui-widget");if(lookupWidgetInUnfrozenTable.length>0){lookupWidgetInUnfrozenTable.append(s.clone())}else{t.append(s.clone())}}}}function n(z,D){var B=getGridInfo(z),s=getMetaCol(z,B),x=z.closest(s.getCellContainer()),y=x.find("input, select:not(.wId), textarea"),t=x.find("select.wId"),E=(x.closest("#dataPanel").length>0),A=E?"#dataPanelContent":"td",p=B.isPivotedGrid?y.closest(A):y.closest("tr"),G=E?"data-recordid":"id",w=(B.isDenormalizedView?p.attr("data-childId"):p.attr(G)),u=modData[w],v=false,F=c(y,p,B,s);if(y.is('input[type="checkbox"]')){y.prop("checked",(F.toLowerCase()=="true"))}else{if(s.isTypePicklist()){v=g(s,y,F);if(v){if(s.isTypeSinglePicklist()){y.val(htmlUnescape(F))}else{var r=[];for(var C=0;C<F.length;C++){r.push(htmlUnescape(F[C]))}y.val(r)}}}else{if(s.isTypeDateTime()){y.val(F);timeInput=y.parent().find("input.gbt");timeInput.val(c(timeInput,p,B,s))}else{y.val(F)}}}y.trigger("change",{changeType:"undo"});if(!s.isTypePicklist()||(s.isTypePicklist()&&v)){x.removeClass("mod");delete u[s.fieldId]}z.remove();if(s.isTypeReference()){y.removeAttr("name")}if(t.length>0){var o=c(t,p,B,s,true),q=(t.hasClass("whoId")?"whoId":"whatId");if(o!==undefined){t.val(o)}t.change();delete u[q]}if(Object.keys(u).length==1&&u.hasOwnProperty("nm")){delete modData[w];modDataSize--}if(GBFreezeCols.isFreezeColsEnabled()){f(h).trigger("gbFreeze")}if(s.isRecordTypeField()){e(B,s,y,x,p)}if(s.isTypePicklist()){if(D&&D.undoType=="recordTypePicklistUndo"){return}b(B,s,y)}m(B,s,y,x,p,w)}function m(t,w,v,u,r,q){if(t.hasFlatViewChildren||GBUnrelated.isChildUnrelated(t)||t.isConcatenatedView||GBFreezeCols.isFreezeColsEnabled()){var u=w.getCellContainer(),s,p,o;if(t.isParentInfo){p=jqFrozenAndUnfrozenTables.find('tr[id="'+q+'"]');s=u+'[name="'+w.fieldId+'"]:not(.dvc)'}else{if(t.isDenormalizedView){p=jqFrozenAndUnfrozenTables.find('tr.dr[data-childId="'+q+'"]');s=u+'.dvc[name="'+w.fieldId+'"]'}else{if(t.isConcatenatedView&&f("#relatedColumnWidget:visible").length>0){p=f('.childTable tr[id="'+q+'"]')}else{p=jqFrozenAndUnfrozenTables.find('tr.ur[id="'+q+'"]')}s=u+'[name="'+w.fieldId+'"]'}}if(w.isDataCardField){p=p.filter(".dataCard")}else{p=p.not(".dataCard")}p.each(function(){if(!f(this).is(r)){o=f(this).find(s);o.removeClass("mod");o.find(".icon-undo").remove()}})}}function g(t,p,s){var o=false,r,u=[];if(s===undefined||(t.isTypeMultiPicklist()&&s.length==1&&s[0]=="")){return true}if(t.isTypeMultiPicklist()){f(p).find("option").each(function(){u.push(f(this).attr("value"))});for(var q=0;q<s.length;q++){r=htmlUnescape(s[q]);if(u.indexOf(r)>-1){o=true}else{o=false;break}}}else{r=htmlUnescape(s);f(p).find("option").each(function(){if(f(this).attr("value")==r){o=true;return false}})}return o}function c(B,u,D,y,w){var t=D.isPivotedGrid?"data-rowname":"name",z=(D.isDenormalizedView?u.attr("data-childRowName"):u.attr(t)),F,A,o,r,q,C,E,p,s=(w?y.fieldId+"Type":y.fieldId);if(B.is("textarea")||B.is('input:not([type="checkbox"])')){return B.prop("defaultValue")}if(D.isParentInfo){A=gridData[z]}else{o=GBUnrelated.isChildUnrelated(D);r=B.closest("#relatedColumnWidget");if(D.isDenormalizedView){E=u.attr("name")}else{if(r.length>0){E=r.attr("data-parent-row-name")}else{E=u.closest(".cr").attr("name")}}C=gridData[E];q=GBRowHelper.getChildData(C,D);if(D.isDenormalizedView&&!o){p=z}else{if(o){var v=GBRowHelper.getOrderedRowKeys(q),x=z.replace("r","");p=v[x]}else{p=z}}A=q[p]}F=A[s];if(y.isTypeMultiPicklist()){F=(F||"");return getSelectedPicklistValuesAsList(F)}return F}function e(r,o,v,u,y){var p=u.hasClass("dvc"),t={undoType:"recordTypePicklistUndo"},x=y.hasClass("dataCard"),s=".pl .icon-undo",w,u,q;if(x){w=y.add(y.prev(".dr"))}else{w=y.add(y.next(".dataCard"))}if(p){s=".pl.dvc .icon-undo"}w.find(s).trigger("click",t)}function b(v,z,y){var w=dependentPickListInfo[z.fieldName],q,t,u,o,x,p,s;if(w&&w.length>0){for(var r=0;r<w.length;r++){q=w[r];t=q.dependentFields;for(fieldName in t){u=getMetaColByFieldName(v,fieldName);if(u&&!u.readOnly&&!u.isHidden){o=u.fieldId;x=u.getCellContainer();s=x+'[name="'+o+'"]:not(.dvc):first';if(v.isDenormalizedView){s=x+'.dvc[name="'+o+'"]:first'}p=GBRowHelper.getRelatedElement(y,z,u,s);if(p.length>0){p.find(".icon-undo").click()}}}}}}return{initEventHandlers:d,initEventHandlersDataPanel:a,addUndoIconToField:k}})(window,document,jq);var GBMetadataPanel=(function(e,f,b){function c(){var n=[];var y=['<div class="filterCriteriaBody">'];for(var v in gridInfoMap){var u=gridInfoMap[v];var x=u.gridName;var w=u.filterCriteria;var o=w.objectOrder;n.push({order:o,objectLabel:x,criteria:w})}n.sort(function(A,l){return A.order-l.order});for(var t=0;t<n.length;t++){var z=n[t].criteria;y.push('<h3 class="metadataPanelObjectName">'+n[t].objectLabel+"</h3>");y.push('<ul class="filterCriteriaList"><li><span class="filterLabel">'+lang.ownershipLbl+"</span>"+z.ownership+"</li>");if(z.sorts&&(z.sorts.length>0)){var m="";for(var s=0;s<z.sorts.length;s++){m+=z.sorts[s];if(s!=(z.sorts.length-1)){m+=", "}}y.push('<li><span class="filterLabel">'+lang.sortedByLbl+"</span>"+m+"</li>")}y.push("</ul>");if(z.filters&&(z.filters.length>0)){y.push('<div class="filterLabel">'+lang.fieldFiltersLbl+"</div>");y.push('<ol class="filterCriteriaList">');for(var r=0;r<z.filters.length;r++){y.push("<li>"+z.filters[r]+"</li>")}y.push("</ol>")}if(z.advancedFilter!=null){y.push('<div class="advancedFilterCriteria"><span class="filterLabel">'+lang.conditionsLbl+"</span> "+z.advancedFilter+"</div>")}if(z.crossObjectFilters&&(z.crossObjectFilters.length>0)){var q="";for(var p=0;p<z.crossObjectFilters.length;p++){q+=z.crossObjectFilters[p];if(p!=(z.crossObjectFilters.length-1)){q+=", "}}y.push('<div class="crossObjectFiltersCriteria"><span class="filterLabel">'+lang.crossObjectFiltersLbl+"</span>"+q+"</div>")}if(z.recordLimit!=null){y.push('<div><span class="filterLabel">'+lang.maxRecordsLbl+"</span> "+z.recordLimit+"</div>")}}y.push("</div>");b(".metadataPanel").append(b('<div class="metadataPanelSection"/>').append(y.join("")));b(".filterCriteriaBody").before('<h1 class="metadataPanelTitle">'+lang.currentFilterLbl+"</h1>");j();a();k()}function d(t){var l,A,q,u,E,o,m,r,y,p,s,w="",z=[],D=[],n="",x=[],v;var C={c:"contains","!=":"does not equal","!c":"does not contain"};for(var B=0;B<t.length;B++){w="";D=[];n="";x=[];l=t[B].governingField.split(":");q=l.splice(1,1);A=l.join(":");u=GBGridInfoHelper.getGridInfoByFullObjectName(A);v=htmlEscape(t[B].value);if(u==null){u=getGridInfoByApiName(l[0])}E=getMetaColByFieldName(u,q);if(E==null){return}s=(t[B].operator!=undefined&&t[B].operator!=0&&t[B].operator!="")?t[B].operator:"=";if(t[B].coloredField!="0"){o=t[B].coloredField.split(":");r=o.splice(1,1);m=o.join(":");y=GBGridInfoHelper.getGridInfoByFullObjectName(m);if(y==null){y=getGridInfoByApiName(o[0])}p=getMetaColByFieldName(y,r);if(p==null){return}}if(C[s]!=undefined){s=C[s]}if(v===true){v="checked"}else{if(v===false){v="unchecked"}else{if(v===""){v="blank"}}}w="<li>If "+u.gridName+"."+E.fieldLabel+" "+s+" "+v+",";if(t[B].color!=undefined&&t[B].color!=0&&t[B].color!=""){D.push(' color the background <span class="colorCodingRuleWidget color-'+t[B].color+'"></span>')}if(t[B].textColor!=undefined&&t[B].textColor!=0&&t[B].textColor!=""){D.push(' color the text <span class="colorCodingRuleWidget textColor-'+t[B].textColor+'"></span>')}if(t[B].isBold||t[B].isUnderline||t[B].isItalic){if(t[B].isBold){x.push("<b>bold</b>")}if(t[B].isUnderline){x.push("<u>underline</u>")}if(t[B].isItalic){x.push("<i>italic</i>")}D.push(" format the text "+x.join(", "))}if(t[B].isColorRow){whatElementsStatement=" for the entire row.</span>"}else{if(t[B].coloredField!="0"&&t[B].governingField!=t[B].coloredField){whatElementsStatement=" for the "+y.gridName+"."+p.fieldLabel+" field.</span>"}else{whatElementsStatement="</li>"}}z.push(w+D.join(", ")+whatElementsStatement)}b(".metadataPanel").append(b('<ul class="colorCodingInfoList"/>').append(z));b(".colorCodingInfoList").before('<h1 class="metadataPanelTitle">'+lang.conditionalFormattingRulesTitle+"</h1>")}function j(){b(".metadataPanelIcon").removeClass("none")}function a(){var l=b(".metadataPanel");var m=b(".metadataPanelIcon");m.click(function(){var n=b(this);if(l.hasClass("metadataPanelHidden")){h(l,n)}else{g(l,n)}});b(e).on("scroll",function(){if((l.hasClass("withSfHeader")&&!l.hasClass("inIframe"))||b(".msgBox.infoMsg, #pageWarnings").is(":visible")){var n=(m.offset().top+m.outerHeight()-b(e).scrollTop());GBHelpers.debounce(function(){l.css("top",n)})()}})}function k(){var l=b(".metadataPanel"),n=b(".metadataPanelIcon"),m=(n.offset().top+n.outerHeight()-b(e).scrollTop());if(b("#AppBodyHeader").length===1){l.addClass("withSfHeader")}if(GBHelpers.isLightningExperienceOrSalesforce1()){l.addClass("withLightningExperienceOrSalesforce1")}if(GBHelpers.isGridInIframe()){l.addClass("inIframe")}l.css("top",m)}function h(l,m){m.addClass("on");l.animate({width:"300px"},300,function(){l.removeClass("metadataPanelHidden").contents().fadeTo("fast",1)});if(!b(".chartContainer").hasClass("chartHidden")){b(".chartIcon").click()}}function g(l,m){l.contents().fadeTo("fast",0,function(){l.animate({width:0},300,function(){l.addClass("metadataPanelHidden")})});m.removeClass("on")}return{initFilterInfo:c,initColorCodingInfo:d}})(window,document,jq);var GBCustomStyles=(function(j,k,d){var m=false;var a=["Theme - Global","Custom Code - Global CSS","Theme - Grid","Custom Code - CSS"];var b={"Parent headers":".gradientHeader td","Related object headers":".childHeaderRow td","Data rows":"#gbMainTable .dr td, #gbMainTable .dr td.pl, #massUpdatesTable .dr td, #massUpdatesTable .dr td.pl, .childTable .dr td:not(.mu)","Data row hover/selection":".highlightRow td, .selected td","Summary rows":".summaryRow td","Grouping rows":".groupByRow:not(.summaryRow) td","Buttons:Standard":".gbForm .gbBtnGroup .gbBtn, .gbForm .gbBtnGroup .gbBtnDisabled, .gbForm .gbBtnGroup .saveBtn.savePending, .btnsGroupRight span, #massUpdateButtons .gbBtn, .gbUserFilter .pbHeader .gbBtn, .gbUserFilter .pbHeader .gbBtnDisabled, #rocBtns .gbBtn, #rocBtns .gbBtnDisabled","Buttons:Quick Filters":".quickFiltersContainer .quickFiltersBtn, .quickFiltersContainer .quickFiltersBtn:hover, .quickFiltersContainer .quickFiltersBtn:active, .quickFiltersContainer .quickFiltersBtn:focus","Buttons:Custom Actions":".pageActionsBtn.customBtn, .pageActionsBtn.customBtn:hover, .pageActionsBtn.customBtn:focus, .pageActionsBtn.customBtn:active"};var h=["Data row hover/selection","Summary rows","Buttons:Standard","Buttons:Quick Filters","Buttons:Custom Actions"];var n={1:"#be0c0c",2:"#ef580d",3:"#e2d142",4:"#239458",5:"#1476e4",6:"#808080",7:"#ff9fa2",8:"#ffc88c",9:"#f1f89f",10:"#94ffc9",11:"#dbeefc",12:"#d6d6d6"};var l={1:"#be0c0c",2:"#ef580d",3:"#e2d142",4:"#239458",5:"#1476e4",6:"#808080",7:"#ff9fa2",8:"#ffc88c",9:"#f1f89f",10:"#94ffc9",11:"#dbeefc",12:"#ffffff"};function e(s){if(s==undefined){return}var u=f(s);var o=['<style type="text/css">'],v,t;for(var r=0;r<a.length;r++){if(u[a[r]]==undefined){continue}v=a[r].indexOf("CSS")!=-1;if(v){o.push(u[a[r]].join("\n"))}else{for(var q=0;q<u[a[r]].length;q++){t=u[a[r]][q];if(t){t=JSON.parse(t);for(var p=0;p<t.length;p++){o.push(g(t[p]))}}}m=true}}o.push("</style>");d("head").append(o.join(""))}function f(r){var t={},q,s,p;for(var o=0;o<r.length;o++){q=JSON.parse(r[o]);p=Object.keys(q)[0];if(t[p]==undefined){t[p]=[q[p]]}else{t[p].push(q[p])}}return t}function g(p){var o="";if(b[p.elem]){o+=b[p.elem]+"{";if(p.bgColor){o+="background-color:";if(p.bgColor.length<3){o+=n[p.bgColor]}else{o+=p.bgColor}if(h.indexOf(p.elem)!=-1){o+=" !important"}o+=";"}if(p.textColor){o+="color:";if(p.textColor.length<3){o+=l[p.textColor]}else{o+=p.textColor}if(h.indexOf(p.elem)!=-1){o+=" !important"}o+=";"}o+="}"}return o}function c(){return m}return{addStylesToGrid:e,getIsThemesOnheGrid:c}})(window,document,jq);var GBTextArea=(function(d,b,e){function a(){outerTableContainer.on("click","div.lt:not(.cardItem), .icon-pencil.lt",function(){var l=e(this),k=getGridInfo(l),o=getMetaCol(l,k),m=k.gridApiName,n=o.fieldName,f=getRowId(l),j=o.fieldLabel,g=l.is(".icon-pencil.lt"),h;if(g){if(GBHelpers.isIE()){h=l.parents(".lt").find("textarea")}else{h=l.prev("textarea")}l.removeClass("icon-pencil").addClass("icon-spinner");if(parseInt(f)<=-1){f=e(l.closest("tr.dr.nr").prevUntil("tr.dr:not(.none, .nr, .dataCard)").addBack().get(0)).attr("id")}}else{deselectRow(descBoxRowId.val());selectRow(l);h=e("div.descBox div.descContent");e("div.descBox div.descContent").html('<div class="ltLoading">'+lang.loading+"</div>");e("div.descBox span.descTitle").html(j);descBoxRowId.val(f);descBox.center();descBox.show("fast")}e.ajax({url:lookupAjaxResponderPageURL+"?reqtype=desc&id="+f+"&dfn="+n+"&don="+m,dataType:"json",success:function(q){if(!q.length||q.length==0){h.html("")}else{var p=q[0].value;p=p.replace(/<br>/g,"\n");if(g){h.val(htmlUnescape(p));l.remove();h.prop("readonly",false).removeClass("truncated");if(GBFreezeCols.isFreezeColsEnabled()){GBFreezeCols.syncFrozenAndUnfrozenTextAreaContentFetch(h)}}else{if(o.htmlFormatted){p=htmlUnescape(p)}h.html(p)}}}})})}function c(h,g){var f=g.getAttribute("maxlength");if(g.value.length>f){g.value=g.value.substring(0,f)}}return{setupLongTextDescFields:a,setMaxLengthForLongTextDescFields:c}})(window,document,jq);if(jq.ui&&jq.widget&&jq.ui.autocomplete){jq.widget("custom.fvlcomplete",jq.ui.autocomplete,{_renderMenu:function(c,a){var b=this;if(a.length>5){c.addClass("ui-autocomplete-scrollable")}else{c.removeClass("ui-autocomplete-scrollable")}jq.each(a,function(d,e){b._renderItem(c,e)})},_renderItem:function(a,b){return jq("<li>").data("ui-autocomplete-item",b).text(b.label).appendTo(a)}})};
var GBPivoted=(function(I,f,l){var N={},c=null,a="--null_grouped_field_value--",H={YEAR:"calendarYear",MONTH:"month",DAY:"day",CALENDAR_QUARTER:"calendarQuarter",FISCAL_QUARTER:"fiscalQuarter"},C={GROUP_BY_COL_VAL:"groupByColumnVal",GB_ROW_NAME:"gbRowName"};function G(){var T=getParentGridInfo();if(T&&T.isPivotedGrid&&!l.isEmptyObject(GBGroupBy.objectToGroupByMetaCols)&&GBGroupBy.objectToGroupByMetaCols[T.fullyQualifiedObjectName].length>0){return true}return false}function M(){i(getParentGridInfo(),mainTableJqueryId);o();m();E(mainTableJqueryId);GBUndo.initEventHandlers();GBPivotedFreezeCol.initialize();GBPivotActions.initialize()}function o(){l(".createNew, .createNew + .gbBtnDisabled, .massUpdates, .massUpdatesDisabled").hide();l(".standardPageActions").find(".massCreateItem, .deleteItem, .deleteAllItem").remove()}function O(){l(".saveBtn, .refreshBtn, .cancelBtn, .saveReturnItem").hide();l(".saveBtn, .refreshBtn, .cancelBtn").closest(".gbBtnGroup").each(function(){if(l(this).find(":visible").length===0){l(this).hide()}})}function R(T,U){var V="pgc";if(U.readOnly){V+=" ro"}if(T.isTypeCurrency()){V+=" currency"}else{if(T.isTypeDate()){V+=" gbd"}else{if(T.isTypeSinglePicklist()){V+=" pl"}}}return V}function D(U,W){var T=getParentGridInfo(),V=getMetaCol(W,T);if(!W.parents("div.pgc").hasClass("mod")){W.parents("div.pgc").addClass("mod")}GBMixpanel.addEditedFieldsSeq(T,V,W.closest("td"));updateModifiedDataMap(W,T);validateField(W,T,false);validateRemainingRequiredRowFields(W,T,false,false);q(W);GBHelpers.updateGridChart();l(".gbPage .gbBtnGroup .saveBtn").addClass("savePending");GBColorCode.updateColor(W,V,T);GBUndo.addUndoIconToField(W,W.closest(".pgc"),T,V,false)}function i(aV,aj){var at=aV.fullyQualifiedObjectName,aH=aV.rowCnt,aw=aV.objId,T=GBGroupBy.objectToGroupByMetaCols[at],bu=(GBGroupBy.objectToAggregateFieldIds[at]||{}),ar={},aI=objectNameToAggregateResults[at],a3,V,bp=[],bp=[],ao=[],aR,a6;a3=aI.groupedRowResults;T=GBGroupBy.removePlaceHolders(T);a6=T.length;l(aj).addClass("pivotedGrid");GBPivoted.info.aggregateResults=a3;bp.push('<tr class="gradientHeader">');bp.push("<td></td>");if(a6===1){l(".gridBtns.top .gridHeaderCell").append('<span class="groupedByTxt">'+lang.groupedByLbl+': <span class="groupedByFieldLabel">'+T[0].fieldLabel+"</span></span>")}for(var aN=0;aN<a6;aN++){var aq=T[aN];ao.push(aq.groupingFunctionAlias);ar[aq.fieldId]=aq;if(aN==(a6-1)){aR=aq.groupingFunctionAlias}}bp.push('<td class="fieldCol"><span class="icon-cog gbff gbff-inactive" title="Field Actions">&nbsp;</span></td>');var aE={},bv=[],bn,am={},be=[],aG=aV.groupByColumnInfos[0],bs=aG.sortDirection,bt=aG.format,a1=aG.fieldInfo.split(":")[1],a9=getMetaColByFieldName(aV,a1),af=aV.fiscalYearStartMonth;aE=e(aH,bs,bt,a9,af);bv=aE.unformattedHeaderValues;am=aE.headerValuesMap;bn=bv.length;be=aE.indexesOfEmpyCols;var ae,bk,ai=[],au,ak="",V=k(T,ao,a9,bt,aI);for(var aM=0;aM<bn;aM++){bk=bv[aM];ae=am[bk];if(be.indexOf((aM*1)+1)>-1){ak=' class="ech"'}else{ak=""}var bo="",bb,an=bk;if(V[an]){bb=V[an].cnt}else{bb="0"}bo='<span class="fcvRecordCnt"> ('+bb+")</span>";bp.push('<td data-col="'+((aM*1)+1)+'" name="'+a9.fieldId+'" data-ufval="'+bk+'"'+ak+">"+ae+bo+"</td>");ai.push('<td name="'+a9.fieldId+'"></td>')}bp.push('<td class="subTotalsHeader">Totals</td>');bp.push("</tr>");au=ai.length;var ah=r(aV,ar),a5=ah.cols,aU=a5.length,ax=ah.colWithLabels;var U,bq=bp,a4=[],Z=[],aZ=[],ac=[],aW=0,ad=0,a2=0,bh=a3.length,aX=[],a7=[],aL=["pdr"],aT=P(aH,a3,bh,T[0],1),aP=false,X;if(GBGroupBy.getShouldHideGridRows()){aL.push("none")}for(var aK=0;aK<bh;aK++){U=a3[aK];a4=[];aX=[];isGrandTotal=(aK==0);a7=["grp"];X=(!isGrandTotal?' title="'+lang.groupByRowTxt+'"':"");if(isGrandTotal&&l.isEmptyObject(bu)){continue}if(!isGrandTotal&&firstGridRow!=1&&aK<aT){continue}ad=w(U,T,ao);if(!isGrandTotal&&firstGridRow!=1&&ad>1&&!aP){aT=P(aH,a3,bh,T[ad-1],aT);if(aK<aT){if(ad==T.length){aP=true}continue}}a7.push("grp"+ad);if(((showGroupingsExpanded&&ad==thisGridInfo.groupByFields.length)||!showGroupingsExpanded)&&!showRecordDetailsInGroup&&!isGrandTotal){a7.push("off")}if(!showGroupingsExpanded&&ad>1){a7.push("none")}a4.push('<tr class="'+a7.join(" ")+'" '+X+' data-ari="'+aK+'">');if(isGrandTotal){a4.push('<td><span class="gbInfoIcon tooltip" title="These summaries are result set level."></span></td>')}else{var a8=T[ad-1],ay=J(U,a8),ag='<td name="'+a8.fieldId+'">';if(a6>1){ag+='<span class="bold">'+a8.fieldLabel+": </span>"}ag+='<span class="ellipsifyFieldVal" title="'+ay+'">'+ay+"</span>";ag+='<span class="bold"> ('+U.cnt+")</span>";ag+="</td>";a4.push(ag)}for(var aJ=0;aJ<a6;aJ++){var aq=T[aJ];aX.push(g(U,aq))}a4.push('<td class="fieldCol">');Z=[];for(var aO in bu){var Y=bu[aO];a4.push("<div>"+Y.summaryType+" of "+Y.fieldLabel+"</div>");Z.push(t(U,Y))}a4.push('<div class="recordCount">Record Count</div>');Z.push('<div class="recordCount">'+U.cnt+"</div>");a4.push("</td>");if(isGrandTotal&&!l.isEmptyObject(V)){y(a4,bv,bn,V,null,bu,be)}else{if(ad===1&&!l.isEmptyObject(V)){var bl=aX[0];y(a4,bv,bn,V,bl,bu,be)}else{if(ad===2&&!l.isEmptyObject(V)){var bl=aX[0],ab=aX[1],aQ=bl+"__"+ab;y(a4,bv,bn,V,aQ,bu,be)}else{if(ad===3&&!l.isEmptyObject(V)){var bl=aX[0],ab=aX[1],bg=aX[2],aQ=bl+"__"+ab+"__"+bg;y(a4,bv,bn,V,aQ,bu,be)}else{a4=a4.concat(ai)}}}}a4.push('<td class="subTotals lastCol">'+Z.join("")+"</td>");a4.push("</tr>");if(U[aR]===0){var bf={},ap=0,bm={};for(aW;aW<aH;aW++){var av="r"+aW,br=gridData[av],bj,bi=true;br[C.GB_ROW_NAME]=av;for(var aA=0;aA<a6;aA++){bj=h(br,T[aA]);if(bj!=aX[aA]){bi=false;break}}if(bi){var al=bv.indexOf(br[C.GROUP_BY_COL_VAL]);if(!bm[al]){bm[al]=[]}bm[al].push(br);if(!bf[al]){bf[al]=0}var ba=(bf[al]*1)+1;bf[al]=ba;if(ba>ap){ap=ba}}else{break}}for(var aD=0;aD<ap;aD++){a4.push('<tr class="'+aL.join(" ")+'">');a4.push(ax.join(""));for(var aC=0;aC<bn;aC++){var az=bm[aC];ac=['<div class="pgc"><span class="icon-ellipses"></span></div>'];if(az&&az.length>0){var br=az[0],bd="dc",aa=false,a0=false,W=false;a2++;for(var aB=0;aB<aU;aB++){var aS=a5[aB];var bc=getCellProperties(aS,br[aS.fieldId],br,aV,false,false,true);var aF=R(aS,bc);if(aS.isTypeCurrency()){if(!bc.readOnly&&!aa){aa=true}}if(!bc.readOnly&&(aS.isTypeDate()||aS.isTypeDateTime())){a0=true}if(!bc.readOnly&&aS.isTypeReference()){var aY=(br?br[aS.fieldId+"Id"]:null);if(aY!=null){a0=true}}if(!bc.readOnly){W=true}ac.push('<div name="'+aS.fieldId+'" class="'+aF+'">'+bc.cellHtml+"</div>")}if(aa){bd+=" hasCurrency";if(multiCurrency){bd+=" hasMultiCurrency"}}if(a0){bd+=" hasDateLookup"}if(W){bd+=" hasEditableFields"}a4.push('<td data-col="'+((aC*1)+1)+'" id="'+br.id+'" data-rowname="'+br[C.GB_ROW_NAME]+'" class="'+bd+'"><div class="allFields">'+ac.join("")+"</div></td>");if(!GBPivoted.firstRecordIdWithError&&updatedRecs[br.id]){GBPivoted.firstRecordIdWithError=br.id}az.splice(0,1)}else{var bd="dc";if(be.indexOf((aC*1)+1)>-1){bd+=" ec"}a4.push('<td data-col="'+((aC*1)+1)+'" class="'+bd+'"></td>')}}a4.push('<td class="lastCol"></td>');a4.push("</tr>")}}bq=bq.concat(a4);if(a2==aH){break}}GBPivoted.info.dataCellsAdded=a2;l(aj).append(bq.join("")).find(".tooltip").tooltipster()}function q(ab){var af=getGridInfo(ab),Y=getMetaCol(ab,af);if(Y&&Y.isNumeric()&&Y.summaryType=="SUM"){var ag=GBGrid.defaultCurrencySymbol,ak=GBHelpers.unformatValue(ab.val(),Y.colDataType),ac=ab.closest("td.dc"),X=ac.attr("data-rowname"),V=ac.attr("data-col"),ah=ab.closest("div").attr("name"),ae=ab.closest("tr").prevAll(".grp:first"),Z=aj(X,ah,Y,ab),W=j(ak,Z);if(Y.isTypeCurrency()&&(multiCurrency)){var U=gridData[X].isoCode;if(U!=ag.trim()){var ai=GBGrid.conversionRates[U],T=(W/ai).toString();W=GBGroupBy.roundToScale(T,T.indexOf(GBHelpers.getDefaultDecimalSeparator()),Y.scale)}}if(ak&&!isNaN(ak)){ab.attr("data-currentval",ak)}else{ab.attr("data-currentval","0")}ad(ae,W,V,ah);function ad(am,ay,ao,az){var aw=am.attr("class"),at=parseInt(aw.substring(aw.length-1)),ar=am.find("td[data-col="+ao+"] div[name="+az+"]"),av=am.find("td.subTotals.lastCol div[name="+az+"]"),al=aa(ar,Y,ay),au=aa(av,Y,ay);ar.html(al);av.html(au);if(at&&at>0){var ap=am.prevAll(".grp"+(at-1)+":first");ad(ap,ay,ao,az)}else{if(at==0){var aq=l("#gbMainTableFrozenHeader").find("tr.grp0"),ax=aq.find("td[data-col="+ao+"] div[name="+az+"]"),an=aq.find("td.subTotals.lastCol div[name="+az+"]");ax.html(al);an.html(au)}}}function aj(ao,an,aq,ap){var am=ap.attr("data-currentval"),al;if(am){al=am}else{al=gridData[ao][an]}al=GBHelpers.unformatValue(al,aq.colDataType);return al}function aa(ap,ao,ar){var al=ap.html().replace(ag,""),an=GBHelpers.unformatValue(al,ao.colDataType),aq=GBHelpers.formatNumber(x([an,ar])),am=(ao.colDataType=="CURRENCY")?ag+aq:aq;return am}}}function w(X,Y,U){var V,T=0;for(var W=0;W<U.length;W++){V=U[W];T+=X[V]}T=((T-Y.length)*-1);return T}function P(X,ab,U,ac,T){if(firstGridRow==1){return 0}else{var Z=gridData.r0,W=h(Z,ac),Y,aa;for(var V=T;V<U;V++){Y=ab[V];aa=g(Y,ac);if(W==aa){return V}}}}function k(af,ai,ae,ag,at){if(!at.groupedColumnResults0){return{}}var Z=at.groupedColumnResults0,ar=Z.length,ak={},V=ae.groupByAlias+"_year",aj=ae.groupByAlias+"_month",am=ae.groupByAlias+"_calendarQuarter",T=ae.groupByAlias+"_fiscalQuarter",W=ae.groupByAlias+"_fiscalYear",au=ai[0],ab=af[0].groupByAlias,an,Y,aa,al,aq,X,ah,ad,U;if(ae.isTypeDate()&&ag==H.YEAR){for(var ap=0;ap<ar;ap++){an=Z[ap];Y=an[V];if(an[au]===1){if(Y){ak[Y]=an}else{if(!Y){ak[a]=an}}}else{if(an[au]===0){ad=g(an,af[0]);U=Y?Y:a;ak[U+"__"+ad]=an}}}}else{if(ae.isTypeDate()&&ag==H.MONTH){for(var ap=0;ap<ar;ap++){an=Z[ap];Y=an[V];al=Q(an,aj);if(an[au]===1){if(Y&&al){ak[Y+"-"+al]=an}else{if(!Y&&!al){ak[a]=an}}}else{if(an[au]===0){ad=g(an,af[0]);U=u(Y,al);ak[U+"__"+ad]=an}}}}else{if((ae.isTypeDate()&&ag==H.DAY)||!ae.isTypeDate()){for(var ao=0;ao<ar;ao++){an=Z[ao];ah=g(an,ae);if(an[au]===1&&an[ae.groupingFunctionAlias]===0){ak[ah]=an}else{if(an[au]===0){ad=g(an,af[0]);ak[ah+"__"+ad]=an}}}}else{if(ae.isTypeDate()&&ag==H.CALENDAR_QUARTER){for(var ap=0;ap<ar;ap++){an=Z[ap];Y=an[V];aq=v(an,am);if(an[au]===1){if(Y&&aq){ak[Y+"-"+aq]=an}else{if(!Y&&!aq){ak[a]=an}}}else{if(an[au]===0){ad=g(an,af[0]);U=z(Y,aq);ak[U+"__"+ad]=an}}}}else{if(ae.isTypeDate()&&ag==H.FISCAL_QUARTER){for(var ap=0;ap<ar;ap++){an=Z[ap];aa=an[W];X=v(an,T);if(an[au]===1){if(aa&&X){ak[aa+"-"+X]=an}else{if(!X&&!aa){ak[a]=an}}}else{if(an[au]===0){ad=g(an,af[0]);U=b(aa,X);ak[U+"__"+ad]=an}}}}}}}}if(af.length>1&&at.groupedColumnResults1){var av=at.groupedColumnResults1;K(af,ae,ag,V,aj,am,ak,av,false)}if(af.length>2&&at.groupedColumnResults2){var ac=at.groupedColumnResults2;K(af,ae,ag,V,aj,am,ak,ac,true)}GBPivoted.info.columnAggregateResultsMap=ak;return ak}function Q(U,V){var T=U[V];if(T){T=T+"";if(T.length==1){T="0"+T}}return T}function v(U,V){var T=U[V];if(T){T=T+""}return T}function u(V,T){var U;if(V){U=V+"-"+T}else{U=a}return U}function z(V,U){var T;if(V){T=V+"-"+U}else{T=a}return T}function b(T,U){var V;if(T){V=T+"-"+U}else{V=a}return V}function K(ac,ab,ad,V,af,aj,ag,ap,T){var an=ap.length,al,Y,Z,ai,am,W,ae,aa,X,ah,U,ao;for(var ak=0;ak<an;ak++){al=ap[ak];if(ab.isTypeDate()&&ad==H.YEAR){Y=al[V];U=Y?Y:a}else{if(ab.isTypeDate()&&ad==H.MONTH){Y=al[V];ai=Q(al,af);U=u(Y,ai)}else{if(ab.isTypeDate()&&ad==H.CALENDAR_QUARTER){Y=al[V];am=v(al,aj);U=z(Y,am)}else{if(ab.isTypeDate()&&ad==H.FISCAL_QUARTER){Z=al[fiscalYearGroupByAlias];W=v(al,fiscalQuarterGroupByAlias);U=b(Z,W)}else{if((ab.isTypeDate()&&ad==H.DAY)||!ab.isTypeDate()){ae=g(al,ab);U=ae}}}}}aa=g(al,ac[0]);X=g(al,ac[1]);if(T){ah=g(al,ac[2])}ao=U+"__"+aa+"__"+X;if(T){ao+="__"+ah}ag[ao]=al}}function y(ad,U,Z,ab,T,Y,V){var ac,aa;for(var W=0;W<Z;W++){ac=U[W];if(T!==null){ac+="__"+T}aa=ab[ac];if(aa&&V.indexOf((W*1)+1)<0){ad.push('<td data-col="'+((W*1)+1)+'" class="subTotals">');for(var X in Y){var ae=Y[X];ad.push(t(aa,ae))}ad.push('<div class="recordCount">'+aa.cnt+"</div>");ad.push("</td>")}else{ad.push('<td data-col="'+((W*1)+1)+'"></td>')}}}function e(W,aj,af,aa,Y){var ah=[],ai={},X=dateFormat.toUpperCase().replace("YY","YYYY"),U;for(var ak=0;ak<W;ak++){var ad="r"+ak,ac=gridData[ad],al=ac[aa.fieldId],Z=al,am=Z;if(!al){am=a;Z="&mdash;"}else{if(aa.isTypeDate()){var V=moment(al,X,true),ag,T,ab;if(af==H.YEAR){ag="YYYY";Z=V.year()}else{if(af==H.MONTH){if(!U){U=n()}ag="YYYY-MM";ab=U[V.month()];Z=ab+" "+V.year()}else{if(af==H.DAY){ag="YYYY-MM-DD"}else{if(af==H.CALENDAR_QUARTER){ag="YYYY-Q";Z="Q"+V.quarter()+" "+V.year()}else{if(af==H.FISCAL_QUARTER){ag="YYYY-Q";Z=V.fquarter(Y)}}}}}T=V.format(ag);if(af==H.FISCAL_QUARTER){T=moment().quarter(Z.quarter).year(Z.year).format(ag)}am=T}else{if(aa.isTypeSinglePicklist()){var ae=aa.getPicklistValueToLabelMap()[Z];if(ae){Z=ae.l}}}}am=GBGroupBy.safeLowerCase(htmlUnescape(am));ac[C.GROUP_BY_COL_VAL]=am;if(ah.indexOf(am)==-1){ah.push(am);ai[am]=Z}}B(aa,aj,ah);return F(aa,af,aj,ah,ai,Y)}function n(){var T=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"];moment.locale(currentLocale);if(moment.monthsShort()){T=moment.monthsShort()}return T}function B(U,W,Y){if(U.isTypeSinglePicklist()){var T=U.getOrderedPicklistOptions(),X=[];for(var V=0;V<T.length;V++){X.push(GBGroupBy.safeLowerCase(T[V].v))}Y.sort(function(ab,aa){var Z=X.indexOf(ab),ac=X.indexOf(aa);if(W=="desc"){return Z<ac?1:Z>ac?-1:0}return Z<ac?-1:Z>ac?1:0})}else{Y.sort(function(ab,aa){var Z=ab.toLowerCase(),ac=aa.toLowerCase();if(W=="desc"){return Z<ac?1:Z>ac?-1:0}return Z<ac?-1:Z>ac?1:0})}}function F(ac,af,al,ai,aj,Z){var W=ai.length,X,am,ae,ab,an,V,ah,ad,aa,Y=[],U=aj,T=0,ag=[];if(ac.isTypeDate()&&af!=H.DAY){if(ai[T]==a){Y.push(ai[T]);T++}for(var ak=T;ak<W-1;ak++){ab=ai[ak];if(ai[ak+1]==a){Y.push(ab);break}if(af==H.YEAR){ah="YYYY";Y.push(ab);X=moment(ab,ah);am=moment(ai[ak+1],ah);ae=s(U,ab,al,af,X);while(!ae.isSame(am,"Y")){an=ae.format(ah);Y.push(an);ag.push(Y.length);U[an]=ae.year();ae=s(U,ab,al,af,ae)}}else{if(af==H.MONTH){if(!V){V=n()}ah="YYYY-MM";Y.push(ab);X=moment(ab,ah);am=moment(ai[ak+1],ah);ad=V[X.month()];ae=s(U,ab,al,af,X);while(!ae.isSame(am,"M")){an=ae.format(ah);Y.push(an);ag.push(Y.length);U[an]=V[ae.month()]+" "+ae.year();ae=s(U,ab,al,af,ae)}}else{if(af==H.FISCAL_QUARTER||af==H.CALENDAR_QUARTER){ah="YYYY-Q";Y.push(ab);X=moment(ab,ah);am=moment(ai[ak+1],ah);ae=s(U,ab,al,af,X);if(af==H.CALENDAR_QUARTER){while(!ae.isSame(am,"Q")){an=ae.format(ah);Y.push(an);ag.push(Y.length);U[an]="Q"+ae.quarter()+" "+ae.year();ae=s(U,ab,al,af,ae)}}else{if(af==H.FISCAL_QUARTER){while(L(ae,ah,Z)!=am.format(ah)){an=L(ae,ah,Z);Y.push(an);ag.push(Y.length);U[an]=ae.fquarter(Z);ae=s(U,an,al,af,ae)}}}}}}}Y.push(ai[W-1]);return{unformattedHeaderValues:Y,headerValuesMap:U,indexesOfEmpyCols:ag}}return{unformattedHeaderValues:ai,headerValuesMap:aj,indexesOfEmpyCols:[]}}function L(U,V,T){return moment().quarter(U.fquarter(T).quarter).year(U.fquarter(T).year).format(V)}function s(T,X,V,W,U){if(W==H.CALENDAR_QUARTER){if(V=="asc"){return U.add(1,"Q")}else{return U.subtract(1,"Q")}}else{if(W==H.FISCAL_QUARTER){if(V=="asc"){return moment(T[X].end,"YYYY-MM-DD").add(1,"d")}else{return moment(T[X].start,"YYYY-MM-DD").subtract(1,"d")}}else{if(W==H.MONTH){if(V=="asc"){return U.add(1,"M")}else{return U.subtract(1,"M")}}else{if(W==H.YEAR){if(V=="asc"){return U.add(1,"Y")}else{return U.subtract(1,"Y")}}}}}}function J(U,V){var T=U[V.groupByAlias];if(V.isTypeBoolean()){if(T===true){T="Yes"}else{T="No"}}else{if(V.isTypeDate()){if(T){T=p(T)}else{T="&mdash;"}}else{T=(T||"&mdash;")}}return T}function g(U,V){var T=U[V.groupByAlias];if(V.isTypeText()||V.isTypeReference()||V.isTypeSinglePicklist()){if(T){T=GBGroupBy.safeLowerCase(htmlUnescape(T))}else{T=a}}else{if(T===null){T=a}}return T}function t(W,V){var X=W[V.aggregateAlias],T=[],U="";X=GBGroupBy.formatAggregateValue(V,X);if(V.isTypePercent()){T.push("np")}if(T.length>0){U='class="'+T.join(",")+'"'}return"<div "+U+' name="'+V.fieldId+'">'+X+"</div>"}function h(U,V){var T=U[V.fieldId];if(V.isTypeText()||V.isTypeReference()||V.isTypeSinglePicklist()){if(T){T=GBGroupBy.safeLowerCase(htmlUnescape(T))}else{T=a}}else{if(V.isTypeBoolean()){T=(T==="true")}else{if(V.isTypeDate()){T=GBHelpers.unformatValue(T,V.colDataType)}}}return T}function p(U){var T=GBHelpers.parseDate(U,"yyyy-mm-dd");T=GBHelpers.stringifyDateObjectToLocale(T);return T}function r(X,T){var Z=[],U=['<td class="fieldCol" colspan="2">','<div class="pgl"></div>'],ad,ac=X.sortFields,V=X.sortDirs,aa;for(var W=0;W<X.metaColumns.length;W++){ad=X.metaColumns[W];if(!ad.requiredForCreate&&!ad.isDataCardField&&!ad.isHidden&&!ad.isTypeTextArea()&&!ad.isTypeMultiPicklist()&&!ad.isWhoOrWhatIdField()){if(ad.isTypeSinglePicklist()){aa="pgl pll"}else{aa="pgl"}var ab='<div class="'+aa+'" name="'+ad.fieldId+'">'+ad.fieldLabel;if(ad.valRequired){ab+='<span class="star">*</span>'}if(ad.filterable||ad.sortable){ab+='<span class="icon-cog gbff-pivoted gbff-inactive-pivoted">&nbsp;</span>'}if(ac.length>1){var Y=ac[0].toLowerCase()==X.groupByFields[0].toLowerCase()?1:0;if(ac[Y].toLowerCase()==ad.fieldName.toLowerCase()){ab+='<span class="sort'+V[Y]+'"></span>'}}ab+="</div>";U.push(ab);Z.push(ad)}}U.push("</td>");return{cols:Z,colWithLabels:U}}function E(T){l(T).on("change","input:not(.dl, .selectAllChk, .grpChk), textarea",function(U,V){D(U,l(this))}).on("click","div.pl",function(U){setupPicklistBehavior(U,l(this),false)}).on("change","div.pl select",function(U,V){D(U,l(this))}).on("focus","div.pl div.plTxt",function(U){setupPicklistBehavior(U,l(this).parents("div.pgc"),true)});l(T).add("#gbMainTableCloneContainer").on("click.groupBySync","tr.grp:not(.grp0)",function(Y){var U=l(this);GBGroupBy.toggleSectionsForGroup(l(this));if(GBPivotedFreezeCol.isFreezeColsEnabled()&&!Y.namespace){var X,Z;if(GBFreezeCols.isElementInFrozenTable(U)){X=l(mainTableJqueryId);Z=l(mainFrozenTableContainerJqueryId)}else{X=l(mainFrozenTableContainerJqueryId);Z=l(mainTableJqueryId)}var W=U.attr("class").split(" ").slice(0,2).join("."),V=X.find("tr."+W);if(V.length>1){Z.find("tr."+W).each(function(aa){if(l(this).is(U)){V=V.eq(aa);return false}})}V.trigger("click.groupBySync")}l(I).trigger("gbGroupByPivotFreeze")});setupDatePickerForDateFields();setupCurrentDateTimeLinks()}function m(){var U=l(".grp.grp1:first"),T=l(".grp.grp1:last");if(U.length>0){A(U);if(!U.is(T)){A(T)}l(".grp1 .tooltip").tooltipster()}}function A(U){var W=0,V=N.aggregateResults[U.attr("data-ari")],T=V.cnt;U.nextUntil("tr.grp1",".pdr").each(function(){var X=l(this).find("td.dc").filter(function(){return l(this).attr("id")!=undefined});W+=X.length});if(W!=T){U.find("td").first().append('<span class="gbInfoIcon tooltip" title="'+lang.groupRecordsSpanMultiplePages+'"/>')}}function x(V){var U=0,T=0;l.each(V,function(){var W=S(this);if(!U){U=0}if(W>T){T=W}U=d(U,this,T)});return U}function S(U){var T=U+"",V=T.indexOf(GBHelpers.getDecimalSeparator())+1;return !V?0:T.length-V}function d(W,U,V){var T=Math.pow(10,V||2);return(Math.round(W*T)+Math.round(U*T))/T}function j(W,U,V){var T=Math.pow(10,V||2),Y=isNaN(W)?0:W,X=isNaN(U)?0:U;return(Math.round(Y*T)-Math.round(X*T))/T}return{renderPivotedGrid:G,init:M,info:N,getStackedClass:R,registerValueChangeLite:D,firstRecordIdWithError:c,hideAndRemoveExtraMenuOptions:o,hideExtraMenuOptions:O}})(window,document,jq);var GBPivotedFreezeCol=(function(D,d,j){var r=j("#frozenColsContainer"),b=GBHelpers.isIE(),q=j("#freezeUpToColPivotGrid"),s=(gridNameForUDF+" - frozen columns"),l=j(".gbPage"),K=j(mainTableJqueryId),I=mainTableJqueryId.replace("#",""),B=j("#gbMainTableContainer"),m=0,a=GBHelpers.isIpad(),f=j(mainFrozenTableContainerJqueryId),F=1,y=j("#unfreezeColsPivotGrid");function H(M){if(w()){h({type:"init"})}else{if(M){setTimeout(function(){h({type:"nofreezecol"})},1)}else{h({type:"nofreezecol"})}}}function e(){g();n();H(true)}function c(N,M){if(M){j(".tooltipster-base").each(function(){if(j(this).find(".tooltipster-content").text()===lang.groupRecordsSpanMultiplePages){j(this).remove()}})}N.find(".grp .tooltip").tooltipster({content:lang.groupRecordsSpanMultiplePages})}function w(){return localStorage.getItem(s)}function J(P){var N=j("#gbMainTableFrozenHeader"),M=j(mainFrozenTableHeaderJqueryId),O=j("#gbMainTableClone");GBFF.hideFastFilter();localStorage.removeItem(s);r.addClass("none");K.addClass("noFrozenCols");f.empty();n();x(N,true);u(N);v(M,O);n();h({type:"nofreezecol"});K.trigger("scroll")}function z(){var N,M;if(j("#gbMainTableClone").length>0){N=j("#gbMainTableClone")}else{N=K.clone().attr("id","gbMainTableClone");GBPivotedFreezeCol.initGroupSpanMultiplePagesTooltip(N)}M=N.add(K);N.find("tr.highlightRow").removeClass("highlightRow");return N}function k(N){var M;if(j(mainFrozenTableHeaderJqueryId).length>0){M=j(mainFrozenTableHeaderJqueryId)}else{M=N.clone().attr("id",mainFrozenTableHeaderIdOnly);if(GBHelpers.isOneGroupingEnabled()){M.find("tr").not(".gradientHeader, .grp0").remove()}else{M.find("tr").not(".gradientHeader, .grp0").remove()}M.find(".grp0 .tooltip").tooltipster({content:"These summaries are result set level."})}return M}function i(){j("#gbMainTableFrozenHeader").remove();var M=K.clone().attr("style","").attr("id","gbMainTableFrozenHeader");M.find(".gradientHeader.none").removeClass("none");if(GBHelpers.isOneGroupingEnabled()){M.find("tr").not(".gradientHeader, .grp0").remove()}else{M.find("tr").not(".gradientHeader, .grp0").remove()}return M}function p(N){j("#gbMainTableFrozenHeaderContainer").remove();var M={id:"gbMainTableFrozenHeaderContainer"};if(GBDataPanel.isDataPanelPresent()){M["class"]="dataPanelPresent"}var O=j("<div/>",M);O.append(N);O.insertBefore(B);return O}function n(){if(GBPivotedFreezeCol.isFreezeColsEnabled()){q.addClass("disabledLink");y.removeClass("disabledLink")}else{q.removeClass("disabledLink");y.addClass("disabledLink")}}function L(Q,M,P){var O=Q.add(M),N=O.find("tr");O.find("tr.gradientHeader, tr.grp");O.find("tr.gradientHeader, tr.grp").find("td:lt("+(F+1)+")").removeClass("none");O.not("#gbMainTableCloneHeader").find("tr.pdr").find("td:lt("+F+")").removeClass("none");O.find("tr.gradientHeader, tr.grp").find("td:gt("+F+")").addClass("none");O.not("#gbMainTableCloneHeader").find("tr.pdr").find("td:gt("+(F-1)+")").addClass("none")}function h(N){var U=false,R=false,O=false,T=false;if(N&&N.type){if(N.type==="click"){U=true}else{if(N.type==="init"){R=true}else{if(N.type==="nofreezecol"){O=true}else{if(N.type==="resize"){T=true}}}}}if(U){localStorage.setItem(s,F)}if(!l.hasClass("hasFrozenCols")){l.addClass("hasFrozenCols")}if(U){r.removeClass("none");K.removeClass("noFrozenCols")}else{if(O){r.addClass("none");K.addClass("noFrozenCols")}else{if(r.hasClass("none")){r.removeClass("none")}if(K.hasClass("noFrozenCols")){K.removeClass("noFrozenCols")}}}n();var S=z(),M=k(S);if(!T){L(S,M);G(M,S)}var P=i(),Q=p(P);if(!T){x(P,O);S.add(M).add(P).removeClass("none");initializeGridFields(S)}A(M,S,P);t(M,S,P);E(Q,S,O);if(R){setTimeout(function(){u(P,T);v(M,S)},1);if(GBPivoted.info.dataCellsAdded===0){setTimeout(function(){j(D).trigger("resize")},10)}}else{u(P,T);v(M,S,T)}K.trigger("scroll")}function G(M,N){f.empty().append(N);M.insertBefore(f)}function x(N,Q){var M=N.add(K),P=M.find("tr.pdr"),O=M.find("tr:not(.pdr)");K.find("tr.gradientHeader:first td").each(function(S){var R=j(this);if(S<=F){if(R.width()!=0){R.attr("data-width",R.width())}}else{R.removeAttr("data-width")}});if(Q){P.find("td").removeClass("none");O.find("td").removeClass("none")}else{P.find("td:gt("+(F-1)+")").removeClass("none");P.find("td:lt("+(F)+")").addClass("none");O.find("td:gt("+F+")").removeClass("none");O.find("td:lt("+(F+1)+")").addClass("none")}}function C(N,Y,R,ae){var X=j("#AppBodyHeader"),Z=(X.length===1?X.height():0),U=j("#globalHeaderBar"),W=(U.length===1?U.height():0),M=j(".gridBtns.top").height(),ac=GBHelpers.getInfoMsgHeight(),V=GBHelpers.isGridInIframe(),P=GBHelpers.getPageWarningsHeight(),S=j(D).height();var T=(Z+W+ac+P+M);if(N||(!N&&(T+K.height())<S)){var ab=(T+Y+R);if(a&&V){var aa=false;try{heightToSet=(j(D.parent.document).height()-ab-110)}catch(O){aa=true}if(aa){var ad=GBHelpers.getParamValue("heightForIpad"),Q;if(ad){Q=(ad*1)}else{Q=400}heightToSet=(Q-ab)}}else{heightToSet=(S-ab);if(heightToSet<190){heightToSet=190}}ae.height(heightToSet)}else{ae.css("height","")}}function u(Q,M){var P=K.find(".gradientHeader"),N=Q.find(".gradientHeader"),R=K.find(".grp.grp0"),O=Q.find(".grp.grp0");P.find("td").not(".none, .fieldCol").each(function(){var S=j(this),T;if(S.width()==0&&S.attr("data-width")){T=S.attr("data-width")}else{T=S.width()}Q.find('.gradientHeader td[data-col="'+S.attr("data-col")+'"]').width(T)});R.find("td").not(".none, .fieldCol").each(function(){var S=j(this),T;if(S.width()==0&&S.attr("data-width")){T=S.attr("data-width")}else{T=S.width()}O.find('td[data-col="'+S.attr("data-col")+'"]').width(T)});if(!M){O.find("td:first").width(R.find("td:first").width());O.find("td.fieldCol").width(R.find("td.fieldCol").width())}N.find("td:first").width(P.find("td:first").width());N.find("td.fieldCol").width(P.find("td.fieldCol").width());N.find("td:last").width(K.find(".gradientHeader td:last").width()+15)}function v(O,S,N){var M=S.find(".gradientHeader:first"),Q=O.find(".gradientHeader:first"),P=K.find(".gradientHeader:first"),T=Q.find("td.fieldCol"),R=O.find(".grp0");if(!N){R.find("td:first").width(S.find(".grp0 td:first").width());R.find("td.fieldCol").width(M.find("td.fieldCol").width())}Q.find("td:first").width(M.find("td:first").width());T.width(M.find("td.fieldCol").width());O.find(".gradientHeader td").not(".selectAllChk, .none").each(function(){var U=j(this),X,V,Y,Z,W;X='td[data-col="'+U.attr("data-col")+'"]';V=M.find(X);Y=P.find(X);Z=S.find(X+" .plTxt");W=Y.width();if(W==0&&Y.attr("data-width")){W=Y.attr("data-width")}Z.css("max-width",W);U.add(V).width(W);if(V.width()>W){U.width(V.width())}})}function g(){q.click(function(){GBFF.hideFastFilter();h({type:"click"})});y.click(function(){GBMixpanel.track("Unfreeze Column",{"# of columns":F});GBPivotedFreezeCol.unfreezeColumns(true)});j(D).on("resize",function(M){if(a){return}if((M.type==="resize"&&j(M.target).is(j(D))&&!isInMobileView)){if(w()){h(M);K.trigger("scroll")}else{h({type:"nofreezecol"})}if(GBDataPanel.isDataPanelPresent()){GBDataPanel.setHeightForDataPanel()}}});j(D).on("gbGroupByPivotFreeze",function(M){if(w()){h();GBPivotedFreezeCol.initGroupSpanMultiplePagesTooltip(j("#gbMainTableClone"),true)}else{h({type:"nofreezecol"})}});B.scroll(function(M){if(o()){var N=j("#gbMainTableClone"),O=j(mainTableHeaderJqueryId);O.scrollLeft(j(this).scrollLeft());if(b){if(!N.hasClass("mb27")){N.addClass("mb27")}}else{if(!N.hasClass("mb25")){N.addClass("mb25")}}}f.add(K).scrollTop(j(this).scrollTop())})}function A(M,U,T){var P=(j.browser.webkit==true)?12:13,O,S;var Q=K.find("tr.gradientHeader"),R=T.find("tr.gradientHeader"),N=M.find("tr.gradientHeader"),V=T.find("tr.grp0"),W=M.find("tr.grp0");if(R.height()<=Q.height()){R.height(Q.height())}if(R.height()>=N.height()){O=R.height()}else{O=N.height()}if(V.height()>=W.height()){S=V.height()}else{S=W.height()}R.add(N).find("td").height(O-P);V.add(W).height(S).find("td").height(S-P);U.find("tr.gradientHeader").height(O-1);K.find("tr.gradientHeader").height(O-1);U.find("tr.grp0").height(S-1);K.find("tr.grp0").height(S-1);U.add(K).css("margin-top","-"+(O+S+2)+"px")}function E(T,U,O){var P=j("#dataPanel"),M=j("#gridFooter"),N=M.outerHeight(true),V=0,W=0,Q=j("#sidebarCell"),S=B,R=B,X=0;if(O){additionalWidthToSubtract=-60}else{additionalWidthToSubtract=(GBHelpers.isGridInIframe()?10:35)}if(T){V=T.height();S=S.add(f);R=R.add(T)}C(T,V,N,S);if(T){if(a){X=(D.screen.width-(U.width()-137))}else{X=(j(D).width()-U.width()-(Q.outerWidth()||0)-(P.outerWidth()||0)-additionalWidthToSubtract)}R.width(X)}}function t(M,P,N){var O=M.find(".gradientHeader:first");K.find(".grp").not(".grp0").each(function(){var S=j(this),R=S.attr("data-ari"),Q=P.find(".grp[data-ari="+R+"]").height();S.height(Q)});O.find("td:first").width(P.find(".gradientHeader:first td:first").width())}function o(){if(B[0].scrollWidth>B[0].clientWidth){return true}return false}return{freezePivotedColumnAndHeaderWrapper:H,initialize:e,initGroupSpanMultiplePagesTooltip:c,isFreezeColsEnabled:w,unfreezeColumns:J}})(window,document,jq);var GBDataPanel=(function(f,k,a){var g=a(mainTableJqueryId),i=a("#gbMainTableContainer"),m=0,n=0;function j(o){if(e()){i.add("#gbMainTableFrozenHeaderContainer").removeClass("dataPanelPresent");a("#dataPanel").remove();GBPivotedFreezeCol.freezePivotedColumnAndHeaderWrapper();g.off("click.dataPanelSelect");g.trigger("scroll");GBMixpanel.track("Change Grid Display",{"Display Control":lang.detailPanelTxt,"Related Object":getParentGridInfo().gridApiName,"Action Source":o,State:"Close"})}}function e(){return a("#dataPanel").length!==0}function l(){var v=a("#AppBodyHeader"),C=(v.length===1?v.height():0),B=a("#globalHeaderBar"),D=(B.length===1?B.height():0),x=a("#dataPanelContent"),z=a("#dataPanel .header").height(),y=a(".gridBtns.top").height(),q=a("#gridFooter"),t=q.outerHeight(true),w=GBHelpers.getInfoMsgHeight(),u=GBHelpers.isGridInIframe(),s=GBHelpers.getPageWarningsHeight(),p=a(f).height();var o=(C+D+w+s+y),r=(o+z+t),A=(p-r-20);x.height(A)}function c(u,t,s){var q=e(),p,r=u.attr("data-rowname");if(q&&(a("#dataPanelContent").attr("data-recordid")===t)){return}i.add("#gbMainTableFrozenHeaderContainer").addClass("dataPanelPresent");g.find("td.dc.selected").removeClass("selected");u.addClass("selected");if(!q){p=a("<div/>",{id:"dataPanel"});p.append(b());var o=a("<div/>",{id:"dataPanelContent","data-recordId":t,"data-rowname":r});o.append(h(u,t));p.append(o);i.after(p);l();d(p);GBUndo.initEventHandlersDataPanel()}else{a("#dataPanelContent").attr("data-recordId",t).attr("data-rowname",r).html(h(u,t));hideInvalidFieldsMessage()}if(!p){p=a("#dataPanel")}if(u.hasClass("gbRecErr")){p.addClass("gbRecErr")}else{if(errorRecs.indexOf(t)>-1){p.add(g.find('td.dc[id="'+t+'"]')).addClass("gbRecErr")}else{p.add(g.find('td.dc[id="'+t+'"]')).removeClass("gbRecErr")}}GBPivotedFreezeCol.freezePivotedColumnAndHeaderWrapper();g.trigger("scroll");if(s){GBDataPanel.numOfDataPanelViews++;GBMixpanel.track("Change Grid Display",{"Display Control":lang.detailPanelTxt,"Related Object":getParentGridInfo().gridApiName,"Action Source":s,State:(q?"Switch":"Expand")})}}function b(){return'<div class="header"><span class="title">'+lang.detailPanelTxt+'</span><span class="closeX">close&nbsp;<b>X</b></span></div>'}function h(J,N){var G=getParentGridInfo(),w=J.attr("data-rowname"),E=[],v=gridData[w];var y=G.metaColumns.filter(function(T){if(T.isDataCardField&&!T.requiredForCreate&&!T.isHidden&&!T.isTypeMultiPicklist()&&!T.isWhoOrWhatIdField()){return true}return false});for(var K=0;K<y.length;K++){var u=y[K];if(u.isTypeReference()){u.readOnly=true}var A=(u.isTypeTextArea()&&u.getFieldMaxLength()>255);var s=getCellProperties(u,v[u.fieldId],v,G,false,false,true,true),C=GBPivoted.getStackedClass(u,s),P=null,S=null,Q="textarea";if(A){var O=(N+"_"+G.gridId+"_"+u.fieldName);S=s.cellHtml;C+=(" "+O);P="textareaTwoColDataPanel"}else{var L=null;if(E.length>0){L=E[(E.length-1)]}if(!L||(L&&!L.hasClass("leftColDataPanel"))){P="leftColDataPanel"}else{P="rightColDataPanel"}S=s.cellHtml}var R=a("<div/>",{"class":P});var H=u.fieldLabel;if(u.valRequired){H+='<span class="star">*</span>'}R.append(a("<div/>",{"class":"pgl",html:H}));var D=a("<div/>",{"class":C,name:u.fieldId,html:S});if(!u.readOnly){if((modData[N]&&modData[N][u.fieldId]!==undefined)||(updatedRecs[N]&&updatedRecs[N][u.fieldId])){var t;if(modData[N]&&modData[N][u.fieldId]!==undefined){t=modData[N][u.fieldId]}else{t=updatedRecs[N][u.fieldId]}D.addClass("mod");if(u.isTypeBoolean()){var r=(t=="true");Q='input[type="checkbox"]';D.find('input[type="checkbox"]').prop("checked",r)}else{if(u.isTypeDateTime()){var I=t,p=I.indexOf(" "),M="",x="",B=D.find("input.gbd"),o=D.find("input.gbt");Q="input.gbt";if(p===-1){if(I.indexOf(":")>-1){x=I}else{M=I}}else{var F=I.substring(0,p),q=I.substring(p+1);if(F.indexOf(":")>-1){x=I}else{if(!F&&q){M=q}else{M=F;x=q}}}B.val(M);o.val(x);validateField(B.add(o),G,false)}else{var z=D.find("input, select,textarea");Q="input,select,textarea";z.val(t);validateField(z,G,false)}}}if(D.hasClass("mod")){GBUndo.addUndoIconToField(D.find(Q),D,G,u,false)}}R.append(D);E.push(R)}return E}function d(o){o.find(".closeX").click(function(){j("Close Button")});o.on("change","input:not(.dl, .selectAllChk, .grpChk), textarea",function(q,r){var p=a(this);GBPivoted.registerValueChangeLite(q,p);GBDataPanel.numOfEditedDataPanelFields++}).on("click","div.pl",function(p){setupPicklistBehavior(p,a(this),false)}).on("change","div.pl select",function(p,q){GBPivoted.registerValueChangeLite(p,a(this));GBDataPanel.numOfEditedDataPanelFields++}).on("focus","div.pl div.plTxt",function(p){setupPicklistBehavior(p,a(this).parents("div.pgc"),true)});g.on("click.dataPanelSelect","tr.pdr td.dc[data-rowname]",function(r){if(!a(r.target).is(".icon-ellipses")){var p=a(this),q=p.attr("id");c(p,q,"Cell Click")}})}return{hideDataPanel:j,isDataPanelPresent:e,setHeightForDataPanel:l,showDataPanel:c,numOfDataPanelViews:m,numOfEditedDataPanelFields:n}})(window,document,jq);var GBPivotActions=(function(c,b,d){function a(){var e=d("#outerTableContainer");e.find(".pdr .pgc .icon-ellipses").button({text:false}).attr("tabindex",0);e.on("keydown click",".pdr .pgc .icon-ellipses",function(f){GBActions.actionsBtnClick.call(this,f,true)});GBActions.initRecordActionsMenuItems()}return{initialize:a}})(window,document,jq);
/* Tooltipster v3.3.0 */;(function(e,t,n){function s(t,n){this.bodyOverflowX;this.callbacks={hide:[],show:[]};this.checkInterval=null;this.Content;this.$el=e(t);this.$elProxy;this.elProxyPosition;this.enabled=true;this.options=e.extend({},i,n);this.mouseIsOverProxy=false;this.namespace="tooltipster-"+Math.round(Math.random()*1e5);this.Status="hidden";this.timerHide=null;this.timerShow=null;this.$tooltip;this.options.iconTheme=this.options.iconTheme.replace(".","");this.options.theme=this.options.theme.replace(".","");this._init()}function o(t,n){var r=true;e.each(t,function(e,i){if(typeof n[e]==="undefined"||t[e]!==n[e]){r=false;return false}});return r}function f(){return!a&&u}function l(){var e=n.body||n.documentElement,t=e.style,r="transition";if(typeof t[r]=="string"){return true}v=["Moz","Webkit","Khtml","O","ms"],r=r.charAt(0).toUpperCase()+r.substr(1);for(var i=0;i<v.length;i++){if(typeof t[v[i]+r]=="string"){return true}}return false}var r="tooltipster",i={animation:"fade",arrow:true,arrowColor:"",autoClose:true,content:null,contentAsHTML:false,contentCloning:true,debug:true,delay:200,minWidth:0,maxWidth:null,functionInit:function(e,t){},functionBefore:function(e,t){t()},functionReady:function(e,t){},functionAfter:function(e){},hideOnClick:false,icon:"(?)",iconCloning:true,iconDesktop:false,iconTouch:false,iconTheme:"tooltipster-icon",interactive:false,interactiveTolerance:350,multiple:false,offsetX:0,offsetY:0,onlyOne:false,position:"top",positionTracker:false,positionTrackerCallback:function(e){if(this.option("trigger")=="hover"&&this.option("autoClose")){this.hide()}},restoration:"current",speed:350,timer:0,theme:"tooltipster-default",touchDevices:true,trigger:"hover",updateAnimation:true};s.prototype={_init:function(){var t=this;if(n.querySelector){var r=null;if(t.$el.data("tooltipster-initialTitle")===undefined){r=t.$el.attr("title");if(r===undefined)r=null;t.$el.data("tooltipster-initialTitle",r)}if(t.options.content!==null){t._content_set(t.options.content)}else{t._content_set(r)}var i=t.options.functionInit.call(t.$el,t.$el,t.Content);if(typeof i!=="undefined")t._content_set(i);t.$el.removeAttr("title").addClass("tooltipstered");if(!u&&t.options.iconDesktop||u&&t.options.iconTouch){if(typeof t.options.icon==="string"){t.$elProxy=e('<span class="'+t.options.iconTheme+'"></span>');t.$elProxy.text(t.options.icon)}else{if(t.options.iconCloning)t.$elProxy=t.options.icon.clone(true);else t.$elProxy=t.options.icon}t.$elProxy.insertAfter(t.$el)}else{t.$elProxy=t.$el}if(t.options.trigger=="hover"){t.$elProxy.on("mouseenter."+t.namespace,function(){if(!f()||t.options.touchDevices){t.mouseIsOverProxy=true;t._show()}}).on("mouseleave."+t.namespace,function(){if(!f()||t.options.touchDevices){t.mouseIsOverProxy=false}});if(u&&t.options.touchDevices){t.$elProxy.on("touchstart."+t.namespace,function(){t._showNow()})}}else if(t.options.trigger=="click"){t.$elProxy.on("click."+t.namespace,function(){if(!f()||t.options.touchDevices){t._show()}})}}},_show:function(){var e=this;if(e.Status!="shown"&&e.Status!="appearing"){if(e.options.delay){e.timerShow=setTimeout(function(){if(e.options.trigger=="click"||e.options.trigger=="hover"&&e.mouseIsOverProxy){e._showNow()}},e.options.delay)}else e._showNow()}},_showNow:function(n){var r=this;r.options.functionBefore.call(r.$el,r.$el,function(){if(r.enabled&&r.Content!==null){if(n)r.callbacks.show.push(n);r.callbacks.hide=[];clearTimeout(r.timerShow);r.timerShow=null;clearTimeout(r.timerHide);r.timerHide=null;if(r.options.onlyOne){e(".tooltipstered").not(r.$el).each(function(t,n){var r=e(n),i=r.data("tooltipster-ns");e.each(i,function(e,t){var n=r.data(t),i=n.status(),s=n.option("autoClose");if(i!=="hidden"&&i!=="disappearing"&&s){n.hide()}})})}var i=function(){r.Status="shown";e.each(r.callbacks.show,function(e,t){t.call(r.$el)});r.callbacks.show=[]};if(r.Status!=="hidden"){var s=0;if(r.Status==="disappearing"){r.Status="appearing";if(l()){r.$tooltip.clearQueue().removeClass("tooltipster-dying").addClass("tooltipster-"+r.options.animation+"-show");if(r.options.speed>0)r.$tooltip.delay(r.options.speed);r.$tooltip.queue(i)}else{r.$tooltip.stop().fadeIn(i)}}else if(r.Status==="shown"){i()}}else{r.Status="appearing";var s=r.options.speed;r.bodyOverflowX=e("body").css("overflow-x");e("body").css("overflow-x","hidden");var o="tooltipster-"+r.options.animation,a="-webkit-transition-duration: "+r.options.speed+"ms; -webkit-animation-duration: "+r.options.speed+"ms; -moz-transition-duration: "+r.options.speed+"ms; -moz-animation-duration: "+r.options.speed+"ms; -o-transition-duration: "+r.options.speed+"ms; -o-animation-duration: "+r.options.speed+"ms; -ms-transition-duration: "+r.options.speed+"ms; -ms-animation-duration: "+r.options.speed+"ms; transition-duration: "+r.options.speed+"ms; animation-duration: "+r.options.speed+"ms;",f=r.options.minWidth?"min-width:"+Math.round(r.options.minWidth)+"px;":"",c=r.options.maxWidth?"max-width:"+Math.round(r.options.maxWidth)+"px;":"",h=r.options.interactive?"pointer-events: auto;":"";r.$tooltip=e('<div class="tooltipster-base '+r.options.theme+'" style="'+f+" "+c+" "+h+" "+a+'"><div class="tooltipster-content"></div></div>');if(l())r.$tooltip.addClass(o);r._content_insert();r.$tooltip.appendTo("body");r.reposition();r.options.functionReady.call(r.$el,r.$el,r.$tooltip);if(l()){r.$tooltip.addClass(o+"-show");if(r.options.speed>0)r.$tooltip.delay(r.options.speed);r.$tooltip.queue(i)}else{r.$tooltip.css("display","none").fadeIn(r.options.speed,i)}r._interval_set();e(t).on("scroll."+r.namespace+" resize."+r.namespace,function(){r.reposition()});if(r.options.autoClose){e("body").off("."+r.namespace);if(r.options.trigger=="hover"){if(u){setTimeout(function(){e("body").on("touchstart."+r.namespace,function(){r.hide()})},0)}if(r.options.interactive){if(u){r.$tooltip.on("touchstart."+r.namespace,function(e){e.stopPropagation()})}var p=null;r.$elProxy.add(r.$tooltip).on("mouseleave."+r.namespace+"-autoClose",function(){clearTimeout(p);p=setTimeout(function(){r.hide()},r.options.interactiveTolerance)}).on("mouseenter."+r.namespace+"-autoClose",function(){clearTimeout(p)})}else{r.$elProxy.on("mouseleave."+r.namespace+"-autoClose",function(){r.hide()})}if(r.options.hideOnClick){r.$elProxy.on("click."+r.namespace+"-autoClose",function(){r.hide()})}}else if(r.options.trigger=="click"){setTimeout(function(){e("body").on("click."+r.namespace+" touchstart."+r.namespace,function(){r.hide()})},0);if(r.options.interactive){r.$tooltip.on("click."+r.namespace+" touchstart."+r.namespace,function(e){e.stopPropagation()})}}}}if(r.options.timer>0){r.timerHide=setTimeout(function(){r.timerHide=null;r.hide()},r.options.timer+s)}}})},_interval_set:function(){var t=this;t.checkInterval=setInterval(function(){if(e("body").find(t.$el).length===0||e("body").find(t.$elProxy).length===0||t.Status=="hidden"||e("body").find(t.$tooltip).length===0){if(t.Status=="shown"||t.Status=="appearing")t.hide();t._interval_cancel()}else{if(t.options.positionTracker){var n=t._repositionInfo(t.$elProxy),r=false;if(o(n.dimension,t.elProxyPosition.dimension)){if(t.$elProxy.css("position")==="fixed"){if(o(n.position,t.elProxyPosition.position))r=true}else{if(o(n.offset,t.elProxyPosition.offset))r=true}}if(!r){t.reposition();t.options.positionTrackerCallback.call(t,t.$el)}}}},200)},_interval_cancel:function(){clearInterval(this.checkInterval);this.checkInterval=null},_content_set:function(e){if(typeof e==="object"&&e!==null&&this.options.contentCloning){e=e.clone(true)}this.Content=e},_content_insert:function(){var e=this,t=this.$tooltip.find(".tooltipster-content");if(typeof e.Content==="string"&&!e.options.contentAsHTML){t.text(e.Content)}else{t.empty().append(e.Content)}},_update:function(e){var t=this;t._content_set(e);if(t.Content!==null){if(t.Status!=="hidden"){t._content_insert();t.reposition();if(t.options.updateAnimation){if(l()){t.$tooltip.css({width:"","-webkit-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-moz-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-o-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-ms-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms",transition:"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms"}).addClass("tooltipster-content-changing");setTimeout(function(){if(t.Status!="hidden"){t.$tooltip.removeClass("tooltipster-content-changing");setTimeout(function(){if(t.Status!=="hidden"){t.$tooltip.css({"-webkit-transition":t.options.speed+"ms","-moz-transition":t.options.speed+"ms","-o-transition":t.options.speed+"ms","-ms-transition":t.options.speed+"ms",transition:t.options.speed+"ms"})}},t.options.speed)}},t.options.speed)}else{t.$tooltip.fadeTo(t.options.speed,.5,function(){if(t.Status!="hidden"){t.$tooltip.fadeTo(t.options.speed,1)}})}}}}else{t.hide()}},_repositionInfo:function(e){return{dimension:{height:e.outerHeight(false),width:e.outerWidth(false)},offset:e.offset(),position:{left:parseInt(e.css("left")),top:parseInt(e.css("top"))}}},hide:function(n){var r=this;if(n)r.callbacks.hide.push(n);r.callbacks.show=[];clearTimeout(r.timerShow);r.timerShow=null;clearTimeout(r.timerHide);r.timerHide=null;var i=function(){e.each(r.callbacks.hide,function(e,t){t.call(r.$el)});r.callbacks.hide=[]};if(r.Status=="shown"||r.Status=="appearing"){r.Status="disappearing";var s=function(){r.Status="hidden";if(typeof r.Content=="object"&&r.Content!==null){r.Content.detach()}r.$tooltip.remove();r.$tooltip=null;e(t).off("."+r.namespace);e("body").off("."+r.namespace).css("overflow-x",r.bodyOverflowX);e("body").off("."+r.namespace);r.$elProxy.off("."+r.namespace+"-autoClose");r.options.functionAfter.call(r.$el,r.$el);i()};if(l()){r.$tooltip.clearQueue().removeClass("tooltipster-"+r.options.animation+"-show").addClass("tooltipster-dying");if(r.options.speed>0)r.$tooltip.delay(r.options.speed);r.$tooltip.queue(s)}else{r.$tooltip.stop().fadeOut(r.options.speed,s)}}else if(r.Status=="hidden"){i()}return r},show:function(e){this._showNow(e);return this},update:function(e){return this.content(e)},content:function(e){if(typeof e==="undefined"){return this.Content}else{this._update(e);return this}},reposition:function(){var n=this;if(e("body").find(n.$tooltip).length!==0){n.$tooltip.css("width","");n.elProxyPosition=n._repositionInfo(n.$elProxy);var r=null,i=e(t).width(),s=n.elProxyPosition,o=n.$tooltip.outerWidth(false),u=n.$tooltip.innerWidth()+1,a=n.$tooltip.outerHeight(false);if(n.$elProxy.is("area")){var f=n.$elProxy.attr("shape"),l=n.$elProxy.parent().attr("name"),c=e('img[usemap="#'+l+'"]'),h=c.offset().left,p=c.offset().top,d=n.$elProxy.attr("coords")!==undefined?n.$elProxy.attr("coords").split(","):undefined;if(f=="circle"){var v=parseInt(d[0]),m=parseInt(d[1]),g=parseInt(d[2]);s.dimension.height=g*2;s.dimension.width=g*2;s.offset.top=p+m-g;s.offset.left=h+v-g}else if(f=="rect"){var v=parseInt(d[0]),m=parseInt(d[1]),y=parseInt(d[2]),b=parseInt(d[3]);s.dimension.height=b-m;s.dimension.width=y-v;s.offset.top=p+m;s.offset.left=h+v}else if(f=="poly"){var w=[],E=[],S=0,x=0,T=0,N=0,C="even";for(var k=0;k<d.length;k++){var L=parseInt(d[k]);if(C=="even"){if(L>T){T=L;if(k===0){S=T}}if(L<S){S=L}C="odd"}else{if(L>N){N=L;if(k==1){x=N}}if(L<x){x=L}C="even"}}s.dimension.height=N-x;s.dimension.width=T-S;s.offset.top=p+x;s.offset.left=h+S}else{s.dimension.height=c.outerHeight(false);s.dimension.width=c.outerWidth(false);s.offset.top=p;s.offset.left=h}}var A=0,O=0,M=0,_=parseInt(n.options.offsetY),D=parseInt(n.options.offsetX),P=n.options.position;function H(){var n=e(t).scrollLeft();if(A-n<0){r=A-n;A=n}if(A+o-n>i){r=A-(i+n-o);A=i+n-o}}function B(n,r){if(s.offset.top-e(t).scrollTop()-a-_-12<0&&r.indexOf("top")>-1){P=n}if(s.offset.top+s.dimension.height+a+12+_>e(t).scrollTop()+e(t).height()&&r.indexOf("bottom")>-1){P=n;M=s.offset.top-a-_-12}}if(P=="top"){var j=s.offset.left+o-(s.offset.left+s.dimension.width);A=s.offset.left+D-j/2;M=s.offset.top-a-_-12;H();B("bottom","top")}if(P=="top-left"){A=s.offset.left+D;M=s.offset.top-a-_-12;H();B("bottom-left","top-left")}if(P=="top-right"){A=s.offset.left+s.dimension.width+D-o;M=s.offset.top-a-_-12;H();B("bottom-right","top-right")}if(P=="bottom"){var j=s.offset.left+o-(s.offset.left+s.dimension.width);A=s.offset.left-j/2+D;M=s.offset.top+s.dimension.height+_+12;H();B("top","bottom")}if(P=="bottom-left"){A=s.offset.left+D;M=s.offset.top+s.dimension.height+_+12;H();B("top-left","bottom-left")}if(P=="bottom-right"){A=s.offset.left+s.dimension.width+D-o;M=s.offset.top+s.dimension.height+_+12;H();B("top-right","bottom-right")}if(P=="left"){A=s.offset.left-D-o-12;O=s.offset.left+D+s.dimension.width+12;var F=s.offset.top+a-(s.offset.top+s.dimension.height);M=s.offset.top-F/2-_;if(A<0&&O+o>i){var I=parseFloat(n.$tooltip.css("border-width"))*2,q=o+A-I;n.$tooltip.css("width",q+"px");a=n.$tooltip.outerHeight(false);A=s.offset.left-D-q-12-I;F=s.offset.top+a-(s.offset.top+s.dimension.height);M=s.offset.top-F/2-_}else if(A<0){A=s.offset.left+D+s.dimension.width+12;r="left"}}if(P=="right"){A=s.offset.left+D+s.dimension.width+12;O=s.offset.left-D-o-12;var F=s.offset.top+a-(s.offset.top+s.dimension.height);M=s.offset.top-F/2-_;if(A+o>i&&O<0){var I=parseFloat(n.$tooltip.css("border-width"))*2,q=i-A-I;n.$tooltip.css("width",q+"px");a=n.$tooltip.outerHeight(false);F=s.offset.top+a-(s.offset.top+s.dimension.height);M=s.offset.top-F/2-_}else if(A+o>i){A=s.offset.left-D-o-12;r="right"}}if(n.options.arrow){var R="tooltipster-arrow-"+P;if(n.options.arrowColor.length<1){var U=n.$tooltip.css("background-color")}else{var U=n.options.arrowColor}if(!r){r=""}else if(r=="left"){R="tooltipster-arrow-right";r=""}else if(r=="right"){R="tooltipster-arrow-left";r=""}else{r="left:"+Math.round(r)+"px;"}if(P=="top"||P=="top-left"||P=="top-right"){var z=parseFloat(n.$tooltip.css("border-bottom-width")),W=n.$tooltip.css("border-bottom-color")}else if(P=="bottom"||P=="bottom-left"||P=="bottom-right"){var z=parseFloat(n.$tooltip.css("border-top-width")),W=n.$tooltip.css("border-top-color")}else if(P=="left"){var z=parseFloat(n.$tooltip.css("border-right-width")),W=n.$tooltip.css("border-right-color")}else if(P=="right"){var z=parseFloat(n.$tooltip.css("border-left-width")),W=n.$tooltip.css("border-left-color")}else{var z=parseFloat(n.$tooltip.css("border-bottom-width")),W=n.$tooltip.css("border-bottom-color")}if(z>1){z++}var X="";if(z!==0){var V="",J="border-color: "+W+";";if(R.indexOf("bottom")!==-1){V="margin-top: -"+Math.round(z)+"px;"}else if(R.indexOf("top")!==-1){V="margin-bottom: -"+Math.round(z)+"px;"}else if(R.indexOf("left")!==-1){V="margin-right: -"+Math.round(z)+"px;"}else if(R.indexOf("right")!==-1){V="margin-left: -"+Math.round(z)+"px;"}X='<span class="tooltipster-arrow-border" style="'+V+" "+J+';"></span>'}n.$tooltip.find(".tooltipster-arrow").remove();var K='<div class="'+R+' tooltipster-arrow" style="'+r+'">'+X+'<span style="border-color:'+U+';"></span></div>';n.$tooltip.append(K)}n.$tooltip.css({top:Math.round(M)+"px",left:Math.round(A)+"px"})}return n},enable:function(){this.enabled=true;return this},disable:function(){this.hide();this.enabled=false;return this},destroy:function(){var t=this;t.hide();if(t.$el[0]!==t.$elProxy[0]){t.$elProxy.remove()}t.$el.removeData(t.namespace).off("."+t.namespace);var n=t.$el.data("tooltipster-ns");if(n.length===1){var r=null;if(t.options.restoration==="previous"){r=t.$el.data("tooltipster-initialTitle")}else if(t.options.restoration==="current"){r=typeof t.Content==="string"?t.Content:e("<div></div>").append(t.Content).html()}if(r){t.$el.attr("title",r)}t.$el.removeClass("tooltipstered").removeData("tooltipster-ns").removeData("tooltipster-initialTitle")}else{n=e.grep(n,function(e,n){return e!==t.namespace});t.$el.data("tooltipster-ns",n)}return t},elementIcon:function(){return this.$el[0]!==this.$elProxy[0]?this.$elProxy[0]:undefined},elementTooltip:function(){return this.$tooltip?this.$tooltip[0]:undefined},option:function(e,t){if(typeof t=="undefined")return this.options[e];else{this.options[e]=t;return this}},status:function(){return this.Status}};e.fn[r]=function(){var t=arguments;if(this.length===0){if(typeof t[0]==="string"){var n=true;switch(t[0]){case"setDefaults":e.extend(i,t[1]);break;default:n=false;break}if(n)return true;else return this}else{return this}}else{if(typeof t[0]==="string"){var r="#*$~&";this.each(function(){var n=e(this).data("tooltipster-ns"),i=n?e(this).data(n[0]):null;if(i){if(typeof i[t[0]]==="function"){var s=i[t[0]](t[1],t[2])}else{throw new Error('Unknown method .tooltipster("'+t[0]+'")')}if(s!==i){r=s;return false}}else{throw new Error("You called Tooltipster's \""+t[0]+'" method on an uninitialized element')}});return r!=="#*$~&"?r:this}else{var o=[],u=t[0]&&typeof t[0].multiple!=="undefined",a=u&&t[0].multiple||!u&&i.multiple,f=t[0]&&typeof t[0].debug!=="undefined",l=f&&t[0].debug||!f&&i.debug;this.each(function(){var n=false,r=e(this).data("tooltipster-ns"),i=null;if(!r){n=true}else if(a){n=true}else if(l){console.log('Tooltipster: one or more tooltips are already attached to this element: ignoring. Use the "multiple" option to attach more tooltips.')}if(n){i=new s(this,t[0]);if(!r)r=[];r.push(i.namespace);e(this).data("tooltipster-ns",r);e(this).data(i.namespace,i)}o.push(i)});if(a)return o;else return this}}};var u=!!("ontouchstart"in t);var a=false;e("body").one("mousemove",function(){a=true})})(jQuery,window,document);
