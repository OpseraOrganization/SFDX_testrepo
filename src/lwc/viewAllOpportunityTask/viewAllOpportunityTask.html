<!--
 - Created by Meiying Liang on 2/14/2020.
 -->

<!-- View All Opportunity Task -->
<template>
    <div class="slds-box slds-theme_default">
        <div>
            <template if:true={data}>
                <table class="slds-table slds-table_bordered slds-table_striped slds-table_cell-buffer slds-table_fixed-layout">
                    <thead>
                    <tr class="slds-text-heading_label">
                        <th scope="col" class="slds-is-resizable" style="width:76px;">
                            <div class="slds-truncate">View</div>
                        </th>
                        <th scope="col">
                            <div class="slds-truncate"><a id="Subject" onclick={handleSort}>
                                <lightning-icon if:true={isSubjectSortDirectionUp} icon-name="utility:arrowup" size="xx-small" ></lightning-icon>
                                <lightning-icon if:false={isSubjectSortDirectionUp} icon-name="utility:arrowdown" size="xx-small" ></lightning-icon>
                                Name
                            </a>
                            </div>
                        </th>
                        <th scope="col">
                            <div class="slds-truncate"><a id="Description" onclick={handleSort}>
                                <lightning-icon if:true={isDescriptionSortDirectionUp} icon-name="utility:arrowup" size="xx-small" ></lightning-icon>
                                <lightning-icon if:false={isDescriptionSortDirectionUp} icon-name="utility:arrowdown" size="xx-small" ></lightning-icon>
                                Content
                            </a></div>
                        </th>
                        <th scope="col">
                            <div class="slds-truncate"><a id="CreatedBy" onclick={handleSort}>
                                <lightning-icon if:true={isCreatedBySortDirectionUp} icon-name="utility:arrowup" size="xx-small" ></lightning-icon>
                                <lightning-icon if:false={isCreatedBySortDirectionUp} icon-name="utility:arrowdown" size="xx-small" ></lightning-icon>
                                Created By
                            </a></div>
                        </th>
                        <th scope="col">
                            <div class="slds-truncate"><a id="CreatedDate" onclick={handleSort}>
                                <lightning-icon if:true={isCreatedDateSortDirectionUp} icon-name="utility:arrowup" size="xx-small" ></lightning-icon>
                                <lightning-icon if:false={isCreatedDateSortDirectionUp} icon-name="utility:arrowdown" size="xx-small" ></lightning-icon>
                                Created Date
                            </a></div>
                        </th>
                        <th scope="col">
                            <div class="slds-truncate"><a id="Activity_Date__c" onclick={handleSort}>
                                <lightning-icon if:true={isActivityDateSortDirectionUp} icon-name="utility:arrowup" size="xx-small" ></lightning-icon>
                                <lightning-icon if:false={isActivityDateSortDirectionUp} icon-name="utility:arrowdown" size="xx-small" ></lightning-icon>
                                Activity Date
                            </a></div>
                        </th>
                        <th scope="col">
                            <div class="slds-truncate"><a id="Status" onclick={handleSort}>
                                <lightning-icon if:true={isStatusSortDirectionUp} icon-name="utility:arrowup" size="xx-small" ></lightning-icon>
                                <lightning-icon if:false={isStatusSortDirectionUp} icon-name="utility:arrowdown" size="xx-small" ></lightning-icon>
                                Status
                            </a></div>
                        </th>
                    </tr>
                    </thead>
                    <tbody>
                    <!-- Use the Apex model and controller to fetch server side data -->
                    <template for:each={data} for:item="item">
                        <tr key={item.taskUrl}>
                            <th scope="row">
                                <div class="slds-truncate"><a href={item.taskUrl}>Detail</a> </div>
                            </th>
                            <td>
                                <div class="slds-truncate">{item.Subject}</div>
                            </td>
                            <td>
                                <div class="slds-truncate" title={item.FullDescription}>{item.Description}</div>
                            </td>
                            <td>
                                <div class="slds-truncate">{item.CreatedBy}</div>
                            </td>
                            <td>
                                <div class="slds-truncate"><lightning-formatted-date-time value={item.CreatedDate}></lightning-formatted-date-time></div>
                            </td>
                            <td>
                                <div class="slds-truncate"><lightning-formatted-date-time value={item.Activity_Date__c}></lightning-formatted-date-time></div>
                            </td>
                            <td>
                                <div class="slds-truncate">{item.Status}</div>
                            </td>
                        </tr>
                    </template>
                    </tbody>
                </table>
            </template>
        </div>
    </div>
</template>