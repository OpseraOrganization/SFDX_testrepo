<?xml version="1.0" encoding="UTF-8"?>
<Workflow xmlns="http://soap.sforce.com/2006/04/metadata">
    <alerts>
        <fullName>MyGDC_Global_Data_Center_Approved_Denied_Email_Alert</fullName>
        <description>MyGDC - Global Data Center Approved/Denied Email Alert</description>
        <protected>false</protected>
        <recipients>
            <field>CRM_Contact_ID__c</field>
            <type>contactLookup</type>
        </recipients>
        <senderType>CurrentUser</senderType>
        <template>Case_Creation_Templates/MyGDC_Global_Data_Center_Approved_Denied_Template</template>
    </alerts>
    <alerts>
        <fullName>Sending_Email_to_contact_when_portal_access_is_Approved</fullName>
        <description>Sending Email to contact when portal access is Approved</description>
        <protected>false</protected>
        <recipients>
            <field>CRM_Contact_ID__c</field>
            <type>contactLookup</type>
        </recipients>
        <senderType>CurrentUser</senderType>
        <template>Honeywell_Training/Honeywell_Training_portal_acces_approved</template>
    </alerts>
    <alerts>
        <fullName>Sending_Email_to_contact_when_portal_access_is_Denied</fullName>
        <description>Sending Email to contact when portal access is Denied</description>
        <protected>false</protected>
        <recipients>
            <field>CRM_Contact_ID__c</field>
            <type>contactLookup</type>
        </recipients>
        <senderType>CurrentUser</senderType>
        <template>Honeywell_Training/Honeywell_Training_portal_acces_denied</template>
    </alerts>
    <alerts>
        <fullName>Sending_Email_to_contact_when_portal_access_is_Reissued</fullName>
        <description>Sending Email to contact when portal access is Reissued</description>
        <protected>false</protected>
        <recipients>
            <field>CRM_Contact_ID__c</field>
            <type>contactLookup</type>
        </recipients>
        <senderType>CurrentUser</senderType>
        <template>Honeywell_Training/Honeywell_Training_portal_acces_reissued</template>
    </alerts>
    <outboundMessages>
        <fullName>ToolAccessFlow</fullName>
        <apiVersion>42.0</apiVersion>
        <endpointUrl>https://it.api.honeywell.com/salesforce/v1/notifications/aero/joule/update/contact-tool-access</endpointUrl>
        <fields>CRM_Contact_ID__c</fields>
        <fields>Id</fields>
        <fields>LastModifiedById</fields>
        <fields>Portal_Honeywell_ID__c</fields>
        <fields>Portal_Tool_Master__c</fields>
        <fields>Request_Status__c</fields>
        <includeSessionId>true</includeSessionId>
        <integrationUser>myaerospace@honeywell.com</integrationUser>
        <name>ToolAccessFlow</name>
        <protected>false</protected>
        <useDeadLetterQueue>false</useDeadLetterQueue>
    </outboundMessages>
    <rules>
        <fullName>HwTrng_sending_mailtocontact_portalApproved</fullName>
        <actions>
            <name>Sending_Email_to_contact_when_portal_access_is_Approved</name>
            <type>Alert</type>
        </actions>
        <active>false</active>
        <criteriaItems>
            <field>Contact_Tool_Access__c.Request_Status__c</field>
            <operation>equals</operation>
            <value>Approved</value>
        </criteriaItems>
        <criteriaItems>
            <field>Contact_Tool_Access__c.Name</field>
            <operation>equals</operation>
            <value>Honeywell Training</value>
        </criteriaItems>
        <triggerType>onCreateOrTriggeringUpdate</triggerType>
    </rules>
    <rules>
        <fullName>HwTrng_sending_mailtocontact_portalDenied</fullName>
        <actions>
            <name>Sending_Email_to_contact_when_portal_access_is_Denied</name>
            <type>Alert</type>
        </actions>
        <active>false</active>
        <criteriaItems>
            <field>Contact_Tool_Access__c.Request_Status__c</field>
            <operation>equals</operation>
            <value>Denied</value>
        </criteriaItems>
        <criteriaItems>
            <field>Contact_Tool_Access__c.Name</field>
            <operation>equals</operation>
            <value>Honeywell Training</value>
        </criteriaItems>
        <triggerType>onCreateOrTriggeringUpdate</triggerType>
    </rules>
    <rules>
        <fullName>HwTrng_sending_mailtocontact_portalReissued</fullName>
        <actions>
            <name>Sending_Email_to_contact_when_portal_access_is_Reissued</name>
            <type>Alert</type>
        </actions>
        <active>false</active>
        <criteriaItems>
            <field>Contact_Tool_Access__c.Request_Status__c</field>
            <operation>equals</operation>
            <value>Pending</value>
        </criteriaItems>
        <criteriaItems>
            <field>Contact_Tool_Access__c.Sub_Status__c</field>
            <operation>equals</operation>
            <value>Reissued</value>
        </criteriaItems>
        <criteriaItems>
            <field>Contact_Tool_Access__c.Name</field>
            <operation>equals</operation>
            <value>Honeywell Training</value>
        </criteriaItems>
        <triggerType>onCreateOrTriggeringUpdate</triggerType>
    </rules>
    <rules>
        <fullName>MyGDC - Global Data Center Approved%2FDenied Alert</fullName>
        <actions>
            <name>MyGDC_Global_Data_Center_Approved_Denied_Email_Alert</name>
            <type>Alert</type>
        </actions>
        <active>true</active>
        <criteriaItems>
            <field>Contact_Tool_Access__c.Request_Status__c</field>
            <operation>equals</operation>
            <value>Approved,Denied</value>
        </criteriaItems>
        <criteriaItems>
            <field>Contact_Tool_Access__c.Contact_Name__c</field>
            <operation>notEqual</operation>
        </criteriaItems>
        <criteriaItems>
            <field>Contact_Tool_Access__c.Name</field>
            <operation>equals</operation>
            <value>MyGDC - Global Data Center</value>
        </criteriaItems>
        <triggerType>onCreateOrTriggeringUpdate</triggerType>
    </rules>
    <rules>
        <fullName>NotifyingChangeToolStatus</fullName>
        <actions>
            <name>ToolAccessFlow</name>
            <type>OutboundMessage</type>
        </actions>
        <active>true</active>
        <description>Call the mulesoft if there is any change in tool status change</description>
        <formula>AND (OR(ISNEW(),ISCHANGED(Request_Status__c) ),NOT(ISBLANK(Portal_Honeywell_ID__c)))</formula>
        <triggerType>onAllChanges</triggerType>
    </rules>
</Workflow>
