<?xml version="1.0" encoding="UTF-8"?>
<Workflow xmlns="http://soap.sforce.com/2006/04/metadata">
    <fieldUpdates>
        <fullName>Csp_False</fullName>
        <field>IsVisibleInCsp</field>
        <literalValue>0</literalValue>
        <name>Csp False</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Literal</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Csp_True</fullName>
        <description>Visible to Customer True</description>
        <field>IsVisibleInCsp</field>
        <literalValue>1</literalValue>
        <name>Csp True</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Literal</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Hours_Spent</fullName>
        <field>Technical_Solutions_Hours_Spent__c</field>
        <formula>Solution_Title__r.Hours_Spent__c</formula>
        <name>Hours Spent</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>PKB_True</fullName>
        <field>IsVisibleInPkb</field>
        <literalValue>1</literalValue>
        <name>PKB True</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Literal</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Prm_true</fullName>
        <description>Partner Portal True</description>
        <field>IsVisibleInPrm</field>
        <literalValue>1</literalValue>
        <name>Prm true</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Literal</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Set_First_External_Publish_Date</fullName>
        <field>Date_Time_1st_Published_External__c</field>
        <formula>IF(Date_Time_1st_Published_External__c = NULL,NOW(),Date_Time_1st_Published_External__c)</formula>
        <name>Set First External Publish Date</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Unpublish_false</fullName>
        <description>Unpublish false</description>
        <field>Unpublished__c</field>
        <literalValue>0</literalValue>
        <name>Unpublish false</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Literal</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Update_1st_Published_Externally_By</fullName>
        <description>Update 1st Published Externally By</description>
        <field>X1st_Published_External_by__c</field>
        <formula>IF( X1st_Published_External_by__c = NULL, LastModifiedBy.Full_Name__c, X1st_Published_External_by__c )</formula>
        <name>Update 1st Published Externally By</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Update_Date_Time_Published_Externally</fullName>
        <description>Update Date / Time Published Externally</description>
        <field>Date_Time_Published_Externally__c</field>
        <formula>NOW()</formula>
        <name>Update Date / Time Published Externally</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Update_First_Technical_Review_Date</fullName>
        <field>Date_Technical_Approved__c</field>
        <formula>if ( Date_Technical_Approved__c = NULL,NOW(),Date_Technical_Approved__c)</formula>
        <name>Update First Technical Review Date</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Update_First_Technical_Review_Status</fullName>
        <field>Status_1st_Technical_Review__c</field>
        <formula>IF (Status_1st_Technical_Review__c = NULL, Text(Status_Technical_Review__c),Status_1st_Technical_Review__c)</formula>
        <name>Update First Technical Review Status</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Update_Last_Technical_Review_Date</fullName>
        <field>Date_Time_Technical_Last_Reviewed__c</field>
        <formula>NOW()</formula>
        <name>Update Last Technical Review Date</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Update_Published_external_by</fullName>
        <field>Published_external_by__c</field>
        <formula>LastModifiedBy.Full_Name__c</formula>
        <name>Update Published (external) by</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Update_SBU_Impacted</fullName>
        <field>Technical_Solutions_SBU_Impacted__c</field>
        <formula>text(Solution_Title__r.SBU_Impacted__c)</formula>
        <name>Update SBU Impacted</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Update_Technical_Reviewer</fullName>
        <field>Technical_reviewer__c</field>
        <formula>LastModifiedBy.Full_Name__c</formula>
        <name>Update Technical Reviewer</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Validation_Status_Not_Validated</fullName>
        <field>ValidationStatus</field>
        <literalValue>Not Validated</literalValue>
        <name>Validation Status Not Validated</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Literal</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Validation_Status_Validated</fullName>
        <description>Validation Status Validated</description>
        <field>ValidationStatus</field>
        <literalValue>Validated</literalValue>
        <name>Validation Status Validated</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Literal</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <rules>
        <fullName>External Publish</fullName>
        <actions>
            <name>Csp_True</name>
            <type>FieldUpdate</type>
        </actions>
        <actions>
            <name>PKB_True</name>
            <type>FieldUpdate</type>
        </actions>
        <actions>
            <name>Prm_true</name>
            <type>FieldUpdate</type>
        </actions>
        <actions>
            <name>Set_First_External_Publish_Date</name>
            <type>FieldUpdate</type>
        </actions>
        <actions>
            <name>Unpublish_false</name>
            <type>FieldUpdate</type>
        </actions>
        <actions>
            <name>Update_1st_Published_Externally_By</name>
            <type>FieldUpdate</type>
        </actions>
        <actions>
            <name>Update_Date_Time_Published_Externally</name>
            <type>FieldUpdate</type>
        </actions>
        <actions>
            <name>Update_Published_external_by</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <description>Set all external channels if 1 is selected or deselected and reset the unpublished flag</description>
        <formula>AND( RecordType.DeveloperName=&quot;Knowledge_Article&quot;, OR( AND( ISCHANGED( IsVisibleInPkb ) , IsVisibleInPkb ), AND( ISCHANGED( IsVisibleInCsp ) , IsVisibleInCsp ), AND( ISCHANGED( IsVisibleInPrm ) , IsVisibleInPrm ) ) )</formula>
        <triggerType>onAllChanges</triggerType>
    </rules>
    <rules>
        <fullName>Set Technical Approval State</fullName>
        <actions>
            <name>Update_First_Technical_Review_Date</name>
            <type>FieldUpdate</type>
        </actions>
        <actions>
            <name>Update_First_Technical_Review_Status</name>
            <type>FieldUpdate</type>
        </actions>
        <actions>
            <name>Update_Last_Technical_Review_Date</name>
            <type>FieldUpdate</type>
        </actions>
        <actions>
            <name>Update_Technical_Reviewer</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <description>Set Technical Approval State</description>
        <formula>AND( RecordType.DeveloperName=&quot;Knowledge_Article&quot;, IsChanged( Status_Technical_Review__c ) )</formula>
        <triggerType>onAllChanges</triggerType>
    </rules>
    <rules>
        <fullName>Set Validation Status Not Validated</fullName>
        <actions>
            <name>Validation_Status_Not_Validated</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <booleanFilter>(1 OR 2 OR 3) AND 4</booleanFilter>
        <criteriaItems>
            <field>Knowledge__kav.R_A__c</field>
            <operation>notEqual</operation>
        </criteriaItems>
        <criteriaItems>
            <field>Knowledge__kav.P_V__c</field>
            <operation>equals</operation>
            <value>Rejected</value>
        </criteriaItems>
        <criteriaItems>
            <field>Knowledge__kav.P_V__c</field>
            <operation>equals</operation>
            <value>Pending</value>
        </criteriaItems>
        <criteriaItems>
            <field>Knowledge__kav.RecordTypeId</field>
            <operation>equals</operation>
            <value>Knowledge_Article</value>
        </criteriaItems>
        <description>Set Validation Status Not Validated</description>
        <triggerType>onAllChanges</triggerType>
    </rules>
    <rules>
        <fullName>Set Validation Status Validated</fullName>
        <actions>
            <name>Validation_Status_Validated</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <booleanFilter>(1 OR 2 OR 3 OR 4 OR 5) AND 6</booleanFilter>
        <criteriaItems>
            <field>Knowledge__kav.PublishStatus</field>
            <operation>equals</operation>
            <value>Archived</value>
        </criteriaItems>
        <criteriaItems>
            <field>Knowledge__kav.IsVisibleInApp</field>
            <operation>equals</operation>
            <value>True</value>
        </criteriaItems>
        <criteriaItems>
            <field>Knowledge__kav.IsVisibleInPkb</field>
            <operation>equals</operation>
            <value>True</value>
        </criteriaItems>
        <criteriaItems>
            <field>Knowledge__kav.IsVisibleInCsp</field>
            <operation>equals</operation>
            <value>True</value>
        </criteriaItems>
        <criteriaItems>
            <field>Knowledge__kav.IsVisibleInPrm</field>
            <operation>equals</operation>
            <value>True</value>
        </criteriaItems>
        <criteriaItems>
            <field>Knowledge__kav.RecordTypeId</field>
            <operation>equals</operation>
            <value>Knowledge_Article</value>
        </criteriaItems>
        <description>Set Validation Status Validated</description>
        <triggerType>onAllChanges</triggerType>
    </rules>
    <rules>
        <fullName>Update SBU Impacted</fullName>
        <actions>
            <name>Hours_Spent</name>
            <type>FieldUpdate</type>
        </actions>
        <actions>
            <name>Update_SBU_Impacted</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <formula>AND( RecordType.DeveloperName=&quot;Technical_Solutions&quot;, Solution_Title__c != &apos;&apos; )</formula>
        <triggerType>onCreateOrTriggeringUpdate</triggerType>
    </rules>
</Workflow>
