<?xml version="1.0" encoding="UTF-8"?>
<Workflow xmlns="http://soap.sforce.com/2006/04/metadata">
    <fieldUpdates>
        <fullName>Set_AssignedToAnalystDate</fullName>
        <field>AssigndToAnalystDate__c</field>
        <formula>NOW()</formula>
        <name>Set AssignedToAnalystDate</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Set_Submitted_to_Contracts</fullName>
        <field>Submitted_to_Contracts__c</field>
        <formula>NOW()</formula>
        <name>Set Submitted to Contracts</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Update_Highest_Parent_Opp_Number</fullName>
        <field>Parent_Opportunity_Number__c</field>
        <formula>IF( Opportunity__c !=null, Opportunity__r.Opportunity_Number__c , Parent_Opportunity_Proposal__r.Parent_Opportunity_Number__c )</formula>
        <name>Update Highest Parent Opp Number</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Update_Opportunity_Bid_Type</fullName>
        <description>Update Opportunity Bid Type</description>
        <field>Bid_Type__c</field>
        <formula>IF( Opportunity__c !=null, TEXT(Opportunity__r.Bid_Type_Name__c) , Parent_Opportunity_Proposal__r.Bid_Type__c)</formula>
        <name>Update Opportunity Bid Type</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Update_Opportunity_Certification_Type</fullName>
        <field>Certification_Type__c</field>
        <formula>IF( Opportunity__c !=null, TEXT(Opportunity__r.Certification_Requirements__c) , Parent_Opportunity_Proposal__r.Certification_Type__c)</formula>
        <name>Update Opportunity Certification Type</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <rules>
        <fullName>Set AssignedToAnalystDate</fullName>
        <actions>
            <name>Set_AssignedToAnalystDate</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <criteriaItems>
            <field>Opportunity_Proposal__c.Proposal_Status__c</field>
            <operation>equals</operation>
            <value>Assigned to Analyst</value>
        </criteriaItems>
        <triggerType>onCreateOrTriggeringUpdate</triggerType>
    </rules>
    <rules>
        <fullName>Set Submitted to Contracts</fullName>
        <actions>
            <name>Set_Submitted_to_Contracts</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <criteriaItems>
            <field>Opportunity_Proposal__c.Proposal_Status__c</field>
            <operation>equals</operation>
            <value>Submitted to Contracts</value>
        </criteriaItems>
        <triggerType>onCreateOrTriggeringUpdate</triggerType>
    </rules>
    <rules>
        <fullName>Update Highest Parent Certification requirement</fullName>
        <actions>
            <name>Update_Opportunity_Certification_Type</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <criteriaItems>
            <field>Opportunity_Proposal__c.CreatedDate</field>
            <operation>notEqual</operation>
        </criteriaItems>
        <description>Update Highest Level Parent Opportunity Certification requirement of the Opportunity Proposal</description>
        <triggerType>onAllChanges</triggerType>
    </rules>
    <rules>
        <fullName>Update Highest Parent Opp Number</fullName>
        <actions>
            <name>Update_Highest_Parent_Opp_Number</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <criteriaItems>
            <field>Opportunity_Proposal__c.CreatedDate</field>
            <operation>notEqual</operation>
        </criteriaItems>
        <description>Update Highest Level Parent Opportunity Number of the Opportunity Proposal</description>
        <triggerType>onAllChanges</triggerType>
    </rules>
    <rules>
        <fullName>Update Highest Parent Opportunity Bid Type</fullName>
        <actions>
            <name>Update_Opportunity_Bid_Type</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <criteriaItems>
            <field>Opportunity_Proposal__c.CreatedDate</field>
            <operation>notEqual</operation>
        </criteriaItems>
        <description>Update Opportunity Bid Type of the Opportunity Proposal</description>
        <triggerType>onAllChanges</triggerType>
    </rules>
</Workflow>
