<?xml version="1.0" encoding="UTF-8"?>
<Workflow xmlns="http://soap.sforce.com/2006/04/metadata">
    <alerts>
        <fullName>Reminders_for_Sales_Survey</fullName>
        <description>Reminders for Sales Survey</description>
        <protected>false</protected>
        <recipients>
            <field>Contact__c</field>
            <type>contactLookup</type>
        </recipients>
        <senderType>CurrentUser</senderType>
        <template>Opportunity_Workflow/Sales_Survey_reminder</template>
    </alerts>
    <alerts>
        <fullName>Second_reminder_for_sales_survey</fullName>
        <description>Second reminder for sales survey</description>
        <protected>false</protected>
        <recipients>
            <field>Contact__c</field>
            <type>contactLookup</type>
        </recipients>
        <senderType>CurrentUser</senderType>
        <template>Opportunity_Workflow/Sales_Survey_reminder</template>
    </alerts>
    <alerts>
        <fullName>Send_Sales_Survey</fullName>
        <description>Send Sales Survey</description>
        <protected>false</protected>
        <recipients>
            <field>Contact__c</field>
            <type>contactLookup</type>
        </recipients>
        <senderType>CurrentUser</senderType>
        <template>Opportunity_Workflow/Sales_Survey_to_Opportunity_Contacts</template>
    </alerts>
    <alerts>
        <fullName>Send_email_to_Manager_for_negative_survey</fullName>
        <description>Send email to Manager for negative survey</description>
        <protected>false</protected>
        <recipients>
            <field>Manager_s_Email__c</field>
            <type>email</type>
        </recipients>
        <senderType>CurrentUser</senderType>
        <template>Opportunity_Workflow/Follow_up_required_by_sales_rep_s_manager</template>
    </alerts>
    <fieldUpdates>
        <fullName>Follow_up_by_Manager</fullName>
        <field>Follow_Up_By__c</field>
        <formula>Opportunity__r.Owner.Manager.FirstName + &quot; &quot; + Opportunity__r.Owner.Manager.LastName</formula>
        <name>Follow up by Manager</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>OppSurveySent</fullName>
        <field>Sales_Survey_Sent__c</field>
        <literalValue>1</literalValue>
        <name>OppSurveySent</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Literal</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
        <targetObject>Opportunity__c</targetObject>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Update_Contact_Sales_Survey_check</fullName>
        <field>Sales_Surveyed__c</field>
        <literalValue>1</literalValue>
        <name>Update Contact Sales Survey check</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Literal</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
        <targetObject>Contact__c</targetObject>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Update_Contact_Sales_Survey_uncheck</fullName>
        <description>Uncheck Sales Surveyed on Contact for Next Survey</description>
        <field>Sales_Surveyed__c</field>
        <literalValue>0</literalValue>
        <name>Update Contact Sales Survey</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Literal</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
        <targetObject>Contact__c</targetObject>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Update_Manager_s_Email</fullName>
        <field>Manager_s_Email__c</field>
        <formula>Opportunity__r.Owner.Manager.Email</formula>
        <name>Update Manager&apos;s Email</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Update_Opportunity_SentSurvey_Flag</fullName>
        <field>Sales_Survey_Sent__c</field>
        <literalValue>1</literalValue>
        <name>Update Opportunity SentSurvey Flag</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Literal</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
        <targetObject>Opportunity__c</targetObject>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Update_Survey_Sent_date</fullName>
        <field>Survey_Sent_Date__c</field>
        <formula>NOW()</formula>
        <name>Update Survey Sent date</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <rules>
        <fullName>Follow up required by sales rep%27s manager</fullName>
        <actions>
            <name>Send_email_to_Manager_for_negative_survey</name>
            <type>Alert</type>
        </actions>
        <actions>
            <name>Follow_up_by_Manager</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <booleanFilter>1 OR 2 OR 3 OR 4</booleanFilter>
        <criteriaItems>
            <field>Sales_Survey__c.Quality__c</field>
            <operation>contains</operation>
            <value>Dissatisfied</value>
        </criteriaItems>
        <criteriaItems>
            <field>Sales_Survey__c.Ease_of_Doing_Business__c</field>
            <operation>contains</operation>
            <value>Dissatisfied</value>
        </criteriaItems>
        <criteriaItems>
            <field>Sales_Survey__c.Promoter_Detractor__c</field>
            <operation>contains</operation>
            <value>Dissatisfied</value>
        </criteriaItems>
        <criteriaItems>
            <field>Sales_Survey__c.Timeliness__c</field>
            <operation>contains</operation>
            <value>Dissatisfied</value>
        </criteriaItems>
        <triggerType>onCreateOrTriggeringUpdate</triggerType>
    </rules>
    <rules>
        <fullName>Reminders for Sales Survey</fullName>
        <active>true</active>
        <criteriaItems>
            <field>Sales_Survey__c.Response_Receive_Date__c</field>
            <operation>equals</operation>
        </criteriaItems>
        <triggerType>onCreateOrTriggeringUpdate</triggerType>
        <workflowTimeTriggers>
            <actions>
                <name>Reminders_for_Sales_Survey</name>
                <type>Alert</type>
            </actions>
            <offsetFromField>Sales_Survey__c.Survey_Sent_Date__c</offsetFromField>
            <timeLength>7</timeLength>
            <workflowTimeTriggerUnit>Days</workflowTimeTriggerUnit>
        </workflowTimeTriggers>
        <workflowTimeTriggers>
            <actions>
                <name>Second_reminder_for_sales_survey</name>
                <type>Alert</type>
            </actions>
            <offsetFromField>Sales_Survey__c.Survey_Sent_Date__c</offsetFromField>
            <timeLength>10</timeLength>
            <workflowTimeTriggerUnit>Days</workflowTimeTriggerUnit>
        </workflowTimeTriggers>
    </rules>
    <rules>
        <fullName>SalesSurveyCreated</fullName>
        <actions>
            <name>OppSurveySent</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <criteriaItems>
            <field>Sales_Survey__c.Survey_Sent_Date__c</field>
            <operation>notEqual</operation>
        </criteriaItems>
        <triggerType>onCreateOnly</triggerType>
    </rules>
    <rules>
        <fullName>Send Sales Survey</fullName>
        <actions>
            <name>Send_Sales_Survey</name>
            <type>Alert</type>
        </actions>
        <actions>
            <name>Update_Contact_Sales_Survey_check</name>
            <type>FieldUpdate</type>
        </actions>
        <actions>
            <name>Update_Manager_s_Email</name>
            <type>FieldUpdate</type>
        </actions>
        <actions>
            <name>Update_Opportunity_SentSurvey_Flag</name>
            <type>FieldUpdate</type>
        </actions>
        <actions>
            <name>Update_Survey_Sent_date</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <criteriaItems>
            <field>Sales_Survey__c.Survey_Sent__c</field>
            <operation>equals</operation>
            <value>True</value>
        </criteriaItems>
        <triggerType>onCreateOnly</triggerType>
        <workflowTimeTriggers>
            <actions>
                <name>Update_Contact_Sales_Survey_uncheck</name>
                <type>FieldUpdate</type>
            </actions>
            <timeLength>30</timeLength>
            <workflowTimeTriggerUnit>Days</workflowTimeTriggerUnit>
        </workflowTimeTriggers>
    </rules>
</Workflow>
