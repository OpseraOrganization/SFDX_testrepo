<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>51.0</apiVersion>
    <assignments>
        <name>AssignCanoToCanoCollection</name>
        <label>AssignCanoToCanoCollection</label>
        <locationX>974</locationX>
        <locationY>344</locationY>
        <assignmentItems>
            <assignToReference>thecanoColl</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>theTSECano</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>ResetVarBurdenCode</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>AssignCount</name>
        <label>AssignCount</label>
        <locationX>412</locationX>
        <locationY>417</locationY>
        <assignmentItems>
            <assignToReference>CountofMetaDataItems</assignToReference>
            <operator>AssignCount</operator>
            <value>
                <elementReference>GetMetaData</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>CheckIfLoopCollIsNotEmpty</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>AssignDatatoLoopCollection</name>
        <label>AssignDatatoLoopCollection</label>
        <locationX>423</locationX>
        <locationY>106</locationY>
        <assignmentItems>
            <assignToReference>LoopCollection</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>GetAllBurdenTSE</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>CountTotalnumberOfRecordsInLoopColl</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>AssignSingleRecordtoLoopCollection</name>
        <label>AssignSingleRecordtoLoopCollection</label>
        <locationX>360</locationX>
        <locationY>761</locationY>
        <assignmentItems>
            <assignToReference>LoopCollection</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>GetSingleTSErecord</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>CheckIfSingleRecordIsBurdenRecord</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>CountTotalnumberOfRecordsInLoopColl</name>
        <label>CountTotalnumberOfRecordsInLoopColl</label>
        <locationX>524</locationX>
        <locationY>280</locationY>
        <assignmentItems>
            <assignToReference>CountOfRecordsInLoopCollection</assignToReference>
            <operator>AssignCount</operator>
            <value>
                <elementReference>GetAllBurdenTSE</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>AssignCount</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>CreateCanoRecord</name>
        <label>CreateCanoRecord</label>
        <locationX>1424</locationX>
        <locationY>338</locationY>
        <assignmentItems>
            <assignToReference>theTSECano.Interface_Type__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Burden</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>theTSECano.Start_Date__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>LoopThroughAllBurdenRecords.StartTime</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>theTSECano.Duration_Hours__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>LoopThroughAllBurdenRecords.DurationInMinutes</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>theTSECano.Related_Time_Sheet__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>LoopThroughAllBurdenRecords.TimeSheetId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>theTSECano.Job_Type__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>varBurdenCode</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>theTSECano.Labor_Multiplier__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Regular Time</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>theTSECano.Approver_EID__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>LoopThroughAllBurdenRecords.TimeSheet.Owner:User.Manager.EID__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>theTSECano.Technician_EID__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>LoopThroughAllBurdenRecords.TimeSheet.Owner:User.EID__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>theTSECano.Related_Time_Sheet_Entry__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>LoopThroughAllBurdenRecords.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>theTSECano.Integration_Status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Not Submitted</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>theTSECano.Start_Time__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>LoopThroughAllBurdenRecords.StartTime</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>theTSECano.End_Time__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>LoopThroughAllBurdenRecords.EndTime</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>theTSECano.TimeZone__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>LoopThroughAllBurdenRecords.WorkOrder.ServiceTerritory.OperatingHours.TimeZone</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>theTSECano.Activity_Type__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Overhead</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>theTSECano.Unit_of_Measure__c</assignToReference>
            <operator>Assign</operator>
        </assignmentItems>
        <connector>
            <targetReference>AssignCanoToCanoCollection</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>DecreaseCount</name>
        <label>DecreaseCount</label>
        <locationX>979</locationX>
        <locationY>771</locationY>
        <assignmentItems>
            <assignToReference>CountofMetaDataItems</assignToReference>
            <operator>Subtract</operator>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>IfBurdenCodeMapping</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>ResetTheCounter</name>
        <label>ResetTheCounter</label>
        <locationX>790</locationX>
        <locationY>580</locationY>
        <assignmentItems>
            <assignToReference>CountofMetaDataItems</assignToReference>
            <operator>AssignCount</operator>
            <value>
                <elementReference>GetMetaData</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>LoopThroughMetaData</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>ResetVarBurdenCode</name>
        <label>ResetVarBurdenCode</label>
        <locationX>817</locationX>
        <locationY>351</locationY>
        <assignmentItems>
            <assignToReference>varBurdenCode</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue/>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>LoopThroughAllBurdenRecords</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>SetTheBurdenCode</name>
        <label>SetTheBurdenCode</label>
        <locationX>1446</locationX>
        <locationY>796</locationY>
        <assignmentItems>
            <assignToReference>varBurdenCode</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>LoopThroughMetaData.GDMFSL_Burden_Code__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>CheckIfTheFlagIsSet</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>setTheFlag</name>
        <label>setTheFlag</label>
        <locationX>1446</locationX>
        <locationY>958</locationY>
        <assignmentItems>
            <assignToReference>flag</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>SetTheBurdenCode</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>SetTheFlag_False</name>
        <label>SetTheFlag=False</label>
        <locationX>687</locationX>
        <locationY>580</locationY>
        <assignmentItems>
            <assignToReference>flag</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>ResetTheCounter</targetReference>
        </connector>
    </assignments>
    <constants>
        <name>MealBreakBurden</name>
        <dataType>String</dataType>
        <value>
            <stringValue>Meal Break</stringValue>
        </value>
    </constants>
    <decisions>
        <name>CheckIfCountIs0</name>
        <label>CheckIfCountIs0</label>
        <locationX>1320</locationX>
        <locationY>549</locationY>
        <defaultConnector>
            <targetReference>CreateCanoRecord</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Count_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>CountofMetaDataItems</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>CreateCanoRecord</targetReference>
            </connector>
            <label>Count=0</label>
        </rules>
        <rules>
            <name>CountGt0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>CountofMetaDataItems</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>LoopThroughMetaData</targetReference>
            </connector>
            <label>CountGt0</label>
        </rules>
    </decisions>
    <decisions>
        <name>CheckIfLoopCollIsNotEmpty</name>
        <label>CheckIfLoopCollIsNotEmpty</label>
        <locationX>524</locationX>
        <locationY>443</locationY>
        <defaultConnector>
            <targetReference>LoopThroughAllBurdenRecords</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Not Empty</defaultConnectorLabel>
        <rules>
            <name>Empty</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>CountOfRecordsInLoopCollection</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>LoopCollection</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <label>Empty</label>
        </rules>
    </decisions>
    <decisions>
        <name>CheckIfSingleRecordIsBurdenRecord</name>
        <label>CheckIfSingleRecordIsBurdenRecord</label>
        <locationX>517</locationX>
        <locationY>697</locationY>
        <defaultConnectorLabel>NotBurden</defaultConnectorLabel>
        <rules>
            <name>IsBurden</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>GetSingleTSErecord.GDMFSL_Is_Burden_Entry__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>LoopThroughAllBurdenRecords</targetReference>
            </connector>
            <label>IsBurden</label>
        </rules>
    </decisions>
    <decisions>
        <name>CheckIfTheFlagIsSet</name>
        <label>CheckIfTheFlagIsSet</label>
        <locationX>1438</locationX>
        <locationY>666</locationY>
        <defaultConnector>
            <targetReference>LoopThroughMetaData</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Flag=False</defaultConnectorLabel>
        <rules>
            <name>Flag_True</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>flag</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>CreateCanoRecord</targetReference>
            </connector>
            <label>Flag=True</label>
        </rules>
    </decisions>
    <decisions>
        <name>ChecktheSourceofTrigger</name>
        <label>ChecktheSourceofTrigger</label>
        <locationX>113</locationX>
        <locationY>311</locationY>
        <defaultConnector>
            <targetReference>GetSingleTSErecord</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>FromTSApproval</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>TSID</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>GetAllBurdenTSE</targetReference>
            </connector>
            <label>FromTSApproval</label>
        </rules>
    </decisions>
    <decisions>
        <name>IfBurdenCodeMapping</name>
        <label>IfBurdenCodeMapping</label>
        <locationX>972</locationX>
        <locationY>922</locationY>
        <defaultConnector>
            <targetReference>CheckIfTheFlagIsSet</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>NotFound</defaultConnectorLabel>
        <rules>
            <name>MappingFound</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>LoopThroughMetaData.GDMFSL_Absence_Burden_Code_Value__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>LoopThroughAllBurdenRecords.GDMFSL_Burden_Code__c</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>setTheFlag</targetReference>
            </connector>
            <label>MappingFound</label>
        </rules>
    </decisions>
    <description>DTXFSL-9294 - Exclude NON PAID</description>
    <interviewLabel>GDMFSL_Integration_Timesheet_Burden_flow {!$Flow.CurrentDateTime}</interviewLabel>
    <label>GDMFSL_Integration_Timesheet_Burden_flow</label>
    <loops>
        <name>LoopThroughAllBurdenRecords</name>
        <label>LoopThroughAllBurdenRecords</label>
        <locationX>650</locationX>
        <locationY>400</locationY>
        <collectionReference>LoopCollection</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>SetTheFlag_False</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>CreateCanonicalRecords</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>LoopThroughMetaData</name>
        <label>LoopThroughMetaData</label>
        <locationX>956</locationX>
        <locationY>599</locationY>
        <collectionReference>GetMetaData</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>DecreaseCount</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>CheckIfCountIs0</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>FREE_FORM_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordCreates>
        <name>CreateCanonicalRecords</name>
        <label>CreateCanonicalRecords</label>
        <locationX>770</locationX>
        <locationY>204</locationY>
        <inputReference>thecanoColl</inputReference>
    </recordCreates>
    <recordLookups>
        <name>GetAllBurdenTSE</name>
        <label>GetAllBurdenTSE</label>
        <locationX>321</locationX>
        <locationY>287</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>AssignDatatoLoopCollection</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>TimeSheetId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>TSID</elementReference>
            </value>
        </filters>
        <filters>
            <field>GDMFSL_Is_Burden_Entry__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>GDMFSL_Classification__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Burden</stringValue>
            </value>
        </filters>
        <filters>
            <field>GDMFSL_Burden_Code__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <elementReference>MealBreakBurden</elementReference>
            </value>
        </filters>
        <filters>
            <field>GDMFSL_Activity_Type__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>Not paid</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>TimeSheetEntry</object>
        <sortField>CreatedDate</sortField>
        <sortOrder>Asc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>GetMetaData</name>
        <label>GetMetaData</label>
        <locationX>107</locationX>
        <locationY>177</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>ChecktheSourceofTrigger</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>GDMFSL_Classification__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Burden</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>GDMFSL_Absence_Priority__mdt</object>
        <sortField>Id</sortField>
        <sortOrder>Asc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>GetSingleTSErecord</name>
        <label>GetSingleTSErecord</label>
        <locationX>62</locationX>
        <locationY>689</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>AssignSingleRecordtoLoopCollection</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>TSEUIID</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>TimeSheetEntry</object>
        <sortField>CreatedDate</sortField>
        <sortOrder>Asc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <runInMode>SystemModeWithoutSharing</runInMode>
    <start>
        <locationX>41</locationX>
        <locationY>50</locationY>
        <connector>
            <targetReference>GetMetaData</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <variables>
        <name>CountofMetaDataItems</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
        <value>
            <numberValue>0.0</numberValue>
        </value>
    </variables>
    <variables>
        <name>CountOfRecordsInLoopCollection</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
        <value>
            <numberValue>0.0</numberValue>
        </value>
    </variables>
    <variables>
        <name>flag</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <booleanValue>false</booleanValue>
        </value>
    </variables>
    <variables>
        <name>LoopCollection</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>TimeSheetEntry</objectType>
    </variables>
    <variables>
        <name>thecanoColl</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>GDMFSL_Integration_Timesheet_Canonical__c</objectType>
    </variables>
    <variables>
        <name>theTSECano</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>GDMFSL_Integration_Timesheet_Canonical__c</objectType>
    </variables>
    <variables>
        <name>TSEUIID</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>TSID</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varBurdenCode</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
</Flow>
